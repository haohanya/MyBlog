<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="æµ©ç€š,æµ©ç€šåšå®¢,java">
<meta name="description" content="æµ©ç€š-æ¯å¤©å‘å¾€ç€å¤–é¢çš„ä¸–ç•Œ">
<meta name="theme-color" content="#000">
<title>å…³äº | æµ©ç€š</title>
<link rel="shortcut icon" href="/favicon.ico?v=1592388438471">
<link rel="stylesheet" href="/styles/main.css">
<link rel="stylesheet" href="/media/css/gemini.css">

<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link
  href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/androidstudio.css"
  rel="stylesheet">

<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
  integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
  integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
  onload="renderMathInElement(document.body);"></script>




  <meta name="description" content="å…³äº" />
  <meta name="keywords" content="" />
</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="gemini">
  <header class="header  ">
    <div class="blog-header box-shadow-wrapper bg-color " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="brand">
              <span>æµ©ç€š</span>
            </a>  
          
        </div>
        
          <p class="subtitle">çƒ­çˆ±ç”Ÿæ´»</p>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-home"></i> é¦–é¡µ
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/archives/" target="_self">
                  <i class="fa fa-archive"></i> å½’æ¡£
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/tags/" target="_self">
                  <i class="fa fa-tags"></i> æ ‡ç­¾
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/post/about/" target="_self">
                  <i class="fa fa-user"></i> å…³äº
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-address-book"></i> å‹æƒ…é“¾æ¥
                  
                </a>
              </li>
            
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout gemini ">
      <div class="section-layout-wrapper">
        

<div class="sidebar">
  
    <div class="sidebar-box box-shadow-wrapper bg-color right-motion" id="sidebar">
      
        <div class="post-list-sidebar">
          <div class="sidebar-title">
            <span id="tocSideBar" class="sidebar-title-item sidebar-title-active">æ–‡ç« ç›®å½•</span>
            <span id="metaSideBar" class="sidebar-title-item">ç«™ç‚¹æ¦‚è§ˆ</span>
          </div>
        </div>
      
      <div class="sidebar-body gemini" id="sidebar_body">
        
          
            <div class="post-side-meta" id="post_side_meta">
              
<div class="sidebar-wrapper box-shadow-wrapper bg-color">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">æµ©ç€š</p>
    
    <div class="site-description right-motion">
      
        <p id="binft">ä¸€ä½æ­£åœ¨åŠªåŠ›æˆé•¿çš„ç å†œ</p>
      
    </div>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">19</span>
        <span class="site-item-stat-name">æ–‡ç« </span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="">
        <span class="site-item-stat-count">23</span>
        <span class="site-item-stat-name">åˆ†ç±»</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">23</span>
        <span class="site-item-stat-name">æ ‡ç­¾</span>
      </a>
    </div>
  </div>
  
    
      <div class="sidebar-item">
        <span class="site-item-rss">
            <i class="fa fa-rss"></i>
            <a href="https://haohanya.github.io/atom.xml" target="_blank">RSS</a>
        </span>
      </div>
    
  
  


</div>
            </div>
            <div class="post-toc sidebar-body-active" id="post_toc" style="opacity: 1;">
              <div class="toc-box right-motion">
  <div class="toc-wrapper auto-number auto"
    id="toc_wrapper">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99">ğŸ  å…³äºæœ¬ç«™</a></li>
<li><a href="#%E5%8D%9A%E4%B8%BB%E6%98%AF%E8%B0%81">ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°</a></li>
<li><a href="#%E5%85%B4%E8%B6%A3%E7%88%B1%E5%A5%BD">â›¹ å…´è¶£çˆ±å¥½</a></li>
<li><a href="#%E8%81%94%E7%B3%BB%E6%88%91%E5%91%80">ğŸ“¬ è”ç³»æˆ‘å‘€</a></li>
</ul>
</li>
</ul>

  </div>
</div>

<script>

  let lastTop = 0, lList = [], hList = [], postBody, lastIndex = -1;
  let active = 'active-show', activeClass = 'active-current';
  let tocWrapper = document.querySelector('#toc_wrapper');
  let tocContent = tocWrapper.children[0];
  let autoNumber = tocWrapper && tocWrapper.classList.contains('auto-number');

  function addTocNumber(elem, deep) {
    if (!elem) {
      return;
    }
    let prop = elem.__proto__;

    if (prop === HTMLUListElement.prototype) {
      for (let i = 0; i < elem.children.length; i++) {
        addTocNumber(elem.children[i], deep + (i + 1) + '.');
      }
    } else if (prop === HTMLLIElement.prototype) {
      // ä¿å­˜liå…ƒç´ 
      if (elem.children[0].__proto__ === HTMLAnchorElement.prototype) {
        lList.push(elem);
      }
      for (let i = 0; i < elem.children.length; i++) {
        let cur = elem.children[i];
        if (cur.__proto__ === HTMLAnchorElement.prototype) {
          if (autoNumber) {
            cur.text = deep + ' ' + cur.text;
          }
        } else if (cur.__proto__ === HTMLUListElement.prototype) {
          addTocNumber(cur, deep);
        }
      }
    }
  }

  function removeParentActiveClass() {
    let parents = tocContent.querySelectorAll('.' + active)
    parents.forEach(function (elem) {
      elem.classList.remove(active);
    });
  }

  function addActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.add(activeClass);
    }
  }

  function removeActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.remove(activeClass);
    }
  }

  function addActiveLiElemment(elem, parent) {
    if (!elem || elem === parent) {
      return;
    } else {
      if (elem.__proto__ === HTMLLIElement.prototype) {
        elem.classList.add(active);
      }
      addActiveLiElemment(elem.parentElement, parent);
    }
  }

  function showToc() {
    if (tocWrapper) {
      postBody = document.querySelector('#post_body');
      for (let i = 0; i < postBody.children.length; i++) {
        if (postBody.children[i].__proto__ === HTMLHeadingElement.prototype) {
          hList.push(postBody.children[i]);
        }
      }
      if (tocWrapper.classList.contains('compress')) {
        tocContent.classList.add('closed');
      } else if (tocWrapper.classList.contains('no_compress')) {
        tocContent.classList.add('expanded');
      } else {
        if (hList.length > 10) {
          active = 'active-hidden'
          tocContent.classList.add('closed');
        } else {
          tocContent.classList.add('expanded');
        }
      }
    }
  }

  (function () {
    // å¤„ç†ä¸æ˜¯ä»#ä¸€çº§æ ‡é¢˜å¼€å§‹ç›®å½•
    if (tocContent.children.length === 1 && tocContent.children[0].__proto__ === HTMLLIElement.prototype) {
      let con = tocContent.children[0].children[0];
      tocContent.innerHTML = con.innerHTML;
    }
    let markdownItTOC = document.querySelector('.markdownIt-TOC');
    let innerHeight = window.innerHeight;
    markdownItTOC.style = `max-height: ${innerHeight - 80 > 0 ? innerHeight - 80 : innerHeight}px`
    addTocNumber(tocContent, '');
  })();

  document.addEventListener('scroll', function (e) {
    if (lList.length <= 0) {
      return;
    }
    let scrollTop = document.scrollingElement.scrollTop + 10;
    let dir;

    if (lastTop - scrollTop > 0) {
      dir = 'up';
    } else {
      dir = 'down';
    }

    lastTop = scrollTop;
    if (scrollTop <= 0) {
      if (lastIndex >= 0 && lastIndex < hList.length) {
        lList[lastIndex].classList.remove(activeClass);
      }
      return;
    }

    let current = 0, hasFind = false;
    for (let i = 0; i < hList.length; i++) {
      if (hList[i].offsetTop > scrollTop) {
        current = i;
        hasFind = true;
        break;
      }
    }
    if (!hasFind && scrollTop > lList[lList.length - 1].offsetTop) {
      current = hList.length - 1;
    } else {
      current--;
    }
    if (dir === 'down') {
      if (current > lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex)
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    } else {
      if (current < lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex);
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    }
  });


  window.addEventListener('load', function () {
    showToc();
    document.querySelector('#sidebar').style = 'display: block;';
    tocWrapper.classList.add('toc-active');
    setTimeout(function () {
      if ("createEvent" in document) {
        let evt = document.createEvent("HTMLEvents");
        evt.initEvent("scroll", false, true);
        document.dispatchEvent(evt);
      }
      else {
        document.fireEvent("scroll");
      }
    }, 500)
  })

</script>
            </div>
          
        
      </div>
    </div>
  
</div>
<script>
  const SIDEBAR_TITLE_ACTIVE = 'sidebar-title-active';
  const SIDEBAR_BODY_ACTIVE = 'sidebar-body-active';
  const SLIDE_UP_IN = 'slide-up-in';

  let sidebar = document.querySelector('#sidebar'),
  tocSideBar = document.querySelector('#tocSideBar'),
  metaSideBar = document.querySelector('#metaSideBar'),
  postToc = document.querySelector('#post_toc'),
  postSiteMeta = document.querySelector('#post_side_meta'),
  sidebarTitle = document.querySelector('.sidebar-title'),
  sidebarBody = document.querySelector('#sidebar_body');

  tocSideBar && tocSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  metaSideBar && metaSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  function toggleSidebar(e) {
    let currentTitle = document.querySelector("."+SIDEBAR_TITLE_ACTIVE);
    if (currentTitle == e.srcElement) {
      return ;
    }
    let current, showElement, hideElement;
    if (e.srcElement == metaSideBar) {
      showElement = postSiteMeta;
      hideElement = postToc;
    } else if (e.srcElement == tocSideBar){
      showElement = postToc;
      hideElement = postSiteMeta;
    }
    currentTitle.classList.remove(SIDEBAR_TITLE_ACTIVE);
    e.srcElement.classList.add(SIDEBAR_TITLE_ACTIVE);

    window.Velocity(hideElement, 'stop');
    window.Velocity(hideElement, 'transition.slideUpOut', {
      display: 'none',
      duration: 200,
      complete: function () {
        window.Velocity(showElement, 'transition.slideDownIn', {
          duration: 200
        });
      }
    })
    hideElement.classList.remove(SIDEBAR_BODY_ACTIVE);
    showElement.classList.add(SIDEBAR_BODY_ACTIVE);
  }

  postToc && postToc.addEventListener('transitionend', function() {
    this.classList.remove(SLIDE_UP_IN);
  });

  if (sidebarBody) {
    if (sidebarBody.classList.contains('pisces') || sidebarBody.classList.contains('gemini')) {
      let hasFix = false;
      let scrollEl = document.querySelector('.main-continer');
      let limitTop = document.querySelector('#nav_ul').children.length * 42 + 162;
      window.addEventListener('scroll', function(e) {
        if (document.scrollingElement.scrollTop >= limitTop) {
          if (!hasFix) {
            sidebar.classList.add('sidebar-fixed');
            hasFix = true;
          }
        } else {
          if (hasFix) {
            sidebar.classList.remove('sidebar-fixed');
            hasFix = false;
          }
        }
      });
    }
  }
  
</script>
        <div class="section-box box-shadow-wrapper">
          <div class="section bg-color post post-page">
            <header class="post-header">
  <h1 class="post-title">
    <a class="post-title-link" href="https://haohanya.github.io/post/about/">
      å…³äº
    </a>
  </h1>
  <div class="post-meta">
    
    <span class="meta-item pc-show">
      <i class="fa fa-calendar-o"></i>
      <span>å‘å¸ƒäº</span>
      <span>2019-01-25</span>
      <span class="post-meta-divider pc-show">|</span>
    </span>
    
    <span class="meta-item">
      <i class="fa fa-clock-o"></i>
      <span>1åˆ†é’Ÿ</span>
    </span>
    <span class="meta-item">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-file-word-o"></i>
      <span>74<span class="pc-show">å­—æ•°</span></span>
    </span>
    
    
    
    <span id="/post/about/" data-flag-title="å…³äº" class="meta-item pc-show leancloud_visitors">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-eye"></i>
      <span>æµè§ˆé‡ï¼š<span class="leancloud-visitors-count"></span></span>
    </span>
    
  </div>
</header>
            <div class="post-body next-md-body" id="post_body">
              <blockquote>
<p>æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤</p>
</blockquote>
<h2 id="å…³äºæœ¬ç«™">ğŸ  å…³äºæœ¬ç«™</h2>
<p>ç£•ç£•ç¢°ç¢°çš„å°ç ´ç«™,å‰ä¸ä¹…åŸŸåçš„å¤‡æ¡ˆè¢«æ³¨é”€...åæ¢åˆ°Gridea,æ‰˜ç®¡åœ¨GitHub</p>
<h2 id="åšä¸»æ˜¯è°">ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°</h2>
<p>ä¸€ä½æ­£åœ¨åŠªåŠ›æˆé•¿çš„ç å†œ...</p>
<h2 id="å…´è¶£çˆ±å¥½">â›¹ å…´è¶£çˆ±å¥½</h2>
<p>åƒ,ç¡,coding</p>
<h2 id="è”ç³»æˆ‘å‘€">ğŸ“¬ è”ç³»æˆ‘å‘€</h2>
<p>QQ : 2369710264</p>

            </div>
            <div class="post-footer">
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong>æœ¬æ–‡ä½œè€…ï¼š</strong>
      æµ©ç€š
    </li>
    <li class="post-copyright-link">
      <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
      <a href="https://haohanya.github.io/post/about/" title="å…³äº">https://haohanya.github.io/post/about/</a>
    </li>
    <li class="post-copyright-license">
      <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>
      æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
    </li>
  </ul>
  <div class="tags">
    
  </div>
  <div class="nav">
    <div class="nav-prev">
      
    </div>
    <div class="nav-next">
      
    </div>
  </div>
</div>
            
  <script src="https://cdn.jsdelivr.net/npm/valine@1.4.4/dist/Valine.min.js"></script>
<div id="vcomments" style="padding: 10px 0px 0px 0px"></div>

<style>
  .v .veditor {
    min-height: 10rem;
    background-image: url('https://upimage.alexhchu.com/2020/04/21/47eda59424daa.gif');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: right;
    background-color: rgba(255, 255, 255, 0);
    resize: none;
  }

  .v .vwrap {
    border: 1px solid #000 !important;
  }

  .v .vbtn {
    padding: .4rem 1.2rem !important;
    border-color: #fff !important;
    background-color: #49b1f5 !important;
    color: #fff !important;
    font-size: .7rem !important;
  }

  .v .vcards .vcard .vh .vmeta .vat {
    padding: 0 .8rem !important;
    border: 1px solid #00c4b6 !important;
    border-radius: 5px !important;
    color: #00c4b6 !important;
  }
</style>
<script>
  new Valine({
    el: '#vcomments',
    appId: 'nHuv5iS2pvwaeJVALGy1k8eh-gzGzoHsz',
    appKey: 't0Pxwyy9Pqb8trH0AnoDdNRn',
    avatar: 'identicon',
    placeholder: '',
    pageSize: '',
    lang: 'zh-cn',
    visitor: 'true' === 'true',
    highlight: 'true' === 'true',
    avatarForce: 'true' === 'false',
  });
</script>

          </div>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <div class="copyright">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | Â© 2019-2020 Theme By <a href="https://github.com/hsxyhao/gridea-theme-next" target="_blank">HsxyHao</a>
    </div>
    <div class="poweredby">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
  </footer>
  
  
  <div class="gemini back-to-top" id="back_to_top">
    <i class="fa fa-arrow-up"></i>
    
    <span class="scrollpercent">
      <span id="back_to_top_text">0</span>%
    </span>
    
  </div>
  
    
    <div class="bg-img">
      <img src="\media\images\custom-bgImg.jpg" />
    </div>
  
  
  
</div>
<script>

  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
  back2TopText = document.querySelector('#back_to_top_text'),
  drawerBox = document.querySelector('#drawer_box'),
  rightSideBar = document.querySelector('.sidebar'),
  viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {
   
    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function(e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });
  
  window.addEventListener('scroll', function(e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });

  
  let hasCacu = false;
  window.onresize = function() {
    if (window.width > 991) {
      calcuHeight();
    } else {
      hasCacu = false;
    }
  }

  function calcuHeight() {
    // åŠ¨æ€è°ƒæ•´ç«™ç‚¹æ¦‚è§ˆé«˜åº¦
    if (!hasCacu && back2Top.classList.contains('pisces') || back2Top.classList.contains('gemini')) {
      let sideBar = document.querySelector('.sidebar');
      let navUl = document.querySelector('#site_nav');
      sideBar.style = 'margin-top:' + (navUl.offsetHeight + navUl.offsetTop + 15) + 'px;';
      hasCacu = true;
    }
  }
  calcuHeight();
  
  let open = false, MOTION_TIME = 300, RIGHT_MOVE_DIS = '320px';

  if (drawerBox) {
    let rightMotions = document.querySelectorAll('.right-motion');
    let right = drawerBox.classList.contains('right');

    let transitionDir = right ? "transition.slideRightIn" : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS 
      };
      closeProp = {
        paddingRight: '0px'
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS 
      };
      closeProp = {
        paddingLeft: '0px'
      };
    }

    drawerBox.onclick = function() {
      open = !open;
      window.Velocity(rightSideBar, 'stop');
      window.Velocity(viewport, 'stop');
      window.Velocity(rightMotions, 'stop');
      if (open) {
        window.Velocity(rightSideBar, {
          width: RIGHT_MOVE_DIS
        }, {
          duration: MOTION_TIME,
          begin: function() {
            window.Velocity(rightMotions, transitionDir,{ });
          }
        })
        window.Velocity(viewport, openProp,{
          duration: MOTION_TIME
        });
      } else {
        window.Velocity(rightSideBar, {
          width: '0px'
        }, {
          duration: MOTION_TIME,
          begin: function() {
            window.Velocity(rightMotions, {
              opacity: 0
            });
          }
        })
        window.Velocity(viewport, closeProp ,{
          duration: MOTION_TIME
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle('muse-line');
      }
      drawerBox.classList.toggle(sideBarOpen);
    }
  }

  // é“¾æ¥è·³è½¬
  let newWindow = 'false'
  if (newWindow === 'true') {
    let links = document.querySelectorAll('.post-body a')
    links.forEach(item => {
      if (!item.classList.contains('btn')) {
        item.setAttribute("target","_blank");
      }
    })
  }
  // ä»£ç é«˜äº®
  hljs.initHighlightingOnLoad();

</script>
    <div class="light-box" id="light_box"></div>
<script>
  let imgs = document.querySelectorAll('.post-body img');
  let lightBox = document.querySelector('#light_box');
  lightBox.addEventListener('mousedown', (e) => {
    e.preventDefault()
  })
  lightBox.addEventListener('mousewheel', (e) => {
    e.preventDefault()
  })
  let width = window.innerWidth * 0.8;
  lightBox.onclick = () => {
    let img = lightBox.querySelector('img');
    lightBox.style = '';
    img && img.remove();
  }
  imgs.forEach(item => {
    item.onclick = function (e) {
      let lightImg = document.createElement('img');
      lightImg.src = this.src;
      lightBox.style = `height: 100%; opacity: 1; background-color: rgba(0, 0, 0, 0.5);cursor: zoom-out;`;
      lightImg.style = `width: ${width}px; border: 1px solid #fff; border-radius: 2px;`;
      lightImg.onclick = function () {
        lightBox.style = '';
        this.remove();
      }
      lightBox.append(lightImg);
    }
  })
</script>
  </div>
</body>
<input hidden id="copy" />
<script>
  //æ‹¿æ¥ä¸»ä¹‰(çœŸé¦™)^_^ï¼ŒClipboard å®ç°æ‘˜è‡ªæ˜é‡‘ https://juejin.im/post/5aefeb6e6fb9a07aa43c20af
  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // åˆ¤æ–­æ˜¯ä¸æ˜¯iosç«¯
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //åˆ›å»ºæ–‡æœ¬å…ƒç´ 
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //é€‰æ‹©å†…å®¹
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //å¤åˆ¶åˆ°å‰ªè´´æ¿
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("å¤åˆ¶é”™è¯¯ï¼è¯·æ‰‹åŠ¨å¤åˆ¶ï¼")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === 'å¤åˆ¶æˆåŠŸ') {
        console.log('å¤åˆ¶æ“ä½œé¢‘ç‡è¿‡é«˜');
        return;
      }
      e.srcElement.textContent = 'å¤åˆ¶æˆåŠŸ';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === 'å¤åˆ¶æˆåŠŸ') {
            elem.textContent = 'å¤åˆ¶ä»£ç '
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = 'å¤åˆ¶ä»£ç ';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })
</script>
<script src="/media/js/motion.js"></script>

<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script>
  var scroll = new SmoothScroll('a[href*="#"]', {
    speed: 500
  });
</script>

<!-- <div class="search-mask" id="search_mask">
  <div class="search-box">
    <div class="search-title">
      <i class="fa fa-search"></i>
      <div class="input-box">
        <input type="text" placeholder="æœç´¢">
      </div>
      <i class="fa fa-times-circle"></i>
    </div>
    <div class="result">
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/rabbitmqyi/"" data-c="
          &lt;h2 id=&#34;spring-cloud-busç®€ä»‹&#34;&gt;spring cloud busç®€ä»‹&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å®ƒæ˜¯ç”¨è½»é‡çš„æ¶ˆæ¯ä»£æ›¿å°†åˆ†å¸ƒå¼èŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œå¯ä»¥ç”¨äºå¹¿æ’­é…ç½®æ–‡ä»¶çš„æ›´æ”¹æˆ–è€…æ˜¯æœåŠ¡çš„ç›‘æ§ç®¡ç†ã€‚ä¹Ÿå°±æ˜¯æ¶ˆæ¯æ€»çº¿å¯ä»¥ä¸ºå¾®æœåŠ¡åšç›‘æ§ï¼Œä¹Ÿå¯ä»¥å®ç°åº”ç”¨ç¨‹åºä¹‹é—´çš„ç›¸äº’é€šè®¯ã€‚Spring Cloud Buså¯é€‰çš„æ¶ˆæ¯ä»£ç†æœ‰RabbitMQå’ŒKafaka&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;mqçš„åŸºæœ¬æ¦‚å¿µ&#34;&gt;MQçš„åŸºæœ¬æ¦‚å¿µ&lt;/h1&gt;
&lt;h2 id=&#34;mqçš„æ¦‚è¿°&#34;&gt;MQçš„æ¦‚è¿°&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;MQå…¨ç§° ï¼šMessage Queueï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œæ˜¯åœ¨æ¶ˆæ¯çš„ä¼ è¾“è¿‡ç¨‹ä¸­ä¿æŒæ¶ˆæ¯çš„å®¹å™¨ï¼Œå¤šç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´è¿›è¡Œé€šä¿¡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158533815.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;mqçš„ä¼˜ç‚¹å’Œç¼ºç‚¹&#34;&gt;MQçš„ä¼˜ç‚¹å’Œç¼ºç‚¹&lt;/h2&gt;
&lt;h3 id=&#34;ä¼˜ç‚¹&#34;&gt;ä¼˜ç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åº”ç”¨è§£è€¦&lt;/li&gt;
&lt;li&gt;å¼‚æ­¥æé€Ÿ&lt;/li&gt;
&lt;li&gt;å‰Šå³°å¡«è°·&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç¼ºç‚¹&#34;&gt;ç¼ºç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç³»ç»Ÿå¯ç”¨æ€§é™ä½&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿå¤æ‚åº¦æé«˜&lt;/li&gt;
&lt;li&gt;ä¸€è‡´æ€§é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¼˜ç‚¹ä¸€åº”ç”¨è§£è€¦&#34;&gt;ä¼˜ç‚¹ä¸€ï¼šåº”ç”¨è§£è€¦&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ç³»ç»Ÿçš„è€¦åˆæ€§è¶Šé«˜ï¼Œå®¹é”™æ€§å°±è¶Šä½å¯ç»´æŠ¤æ€§å°±è¶Šä½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158545429.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨MQä½¿å¾—åº”ç”¨è§£è€¦ï¼Œæé«˜äº†å®¹é”™æ€§å’Œå¯ç»´æŠ¤æ€§&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158557018.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ä¼˜ç‚¹äºŒå¼‚æ­¥æé€Ÿ&#34;&gt;ä¼˜ç‚¹äºŒï¼šå¼‚æ­¥æé€Ÿ&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€ä¸ªè®¢å•æ“ä½œè€—æ—¶ï¼š20+300+300+300=920ms&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·ç‚¹å‡»å®Œæˆä¸‹å•æŒ‰é’®åéœ€è¦ç­‰å¾…920msæ‰èƒ½å¾—åˆ°ä¸‹å•æˆåŠŸçš„å“åº”ï¼Œå¤ªæ…¢äº†ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158577381.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;è€Œä½¿ç”¨äº†MQç”¨æˆ·ç‚¹å‡»ä¸‹å•æŒ‰é’®ååªéœ€è¦ç­‰å¾…25mså°±èƒ½å¾—åˆ°ä¸‹å•çš„å“åº”ï¼Œæå‡ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿååé‡&lt;/p&gt;
&lt;p&gt;ï¼ˆååé‡:å•ä½æ—¶é—´å†…å¤„ç†è¯·æ±‚çš„æ•°ç›®ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158593534.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ä¼˜ç‚¹ä¸‰å‰Šå³°å¡«è°·&#34;&gt;ä¼˜ç‚¹ä¸‰ï¼šå‰Šå³°å¡«è°·&lt;/h3&gt;
&lt;h4 id=&#34;å‰Šå³°&#34;&gt;å‰Šå³°&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ºäº†æé«˜è¥ä¸šé¢ï¼Œåœ¨Aç³»ç»Ÿä¸­åšäº†ä¸€ä¸ªæ´»åŠ¨ï¼Œå«ï¼šä¸€å…ƒç§’æ€å¤–æ˜Ÿäººï¼Œåœ¨æ´»åŠ¨å¼€å§‹åï¼Œç”¨æˆ·åå¤åˆ·æ–°é¡µé¢ï¼Œå¹¶ä¸”æ–°ç”¨æˆ·å¢å¤šï¼Œè¯·æ±‚ç¬é—´å¢å¤šæ¯ç§’5000ä¸ªè¯·æ±‚&lt;/p&gt;
&lt;p&gt;è€Œåº”ç”¨Aç³»ç»Ÿèƒ½æ¯ç§’èƒ½å¤„ç†çš„è¯·æ±‚æ•°åªèƒ½æ˜¯1000ä¸ªï¼Œç°åœ¨è¯·æ±‚æ•°è¾¾åˆ°5000é‚£ä¹ˆAç³»ç»Ÿå°†ä¼šç›´æ¥å®•æœº&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158606222.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ç”¨æˆ·çš„è¯·æ±‚å…ˆå‘é€ç»™MQï¼Œ5000ä¸ªè¯·æ±‚åŒæ—¶å‘ç»™MQï¼ˆåœ¨MQçœ‹æ¥æ˜¯å°æ„æ€ï¼‰Aç³»ç»Ÿæ¯ç§’ä»MQä¸­æ‹‰å–1000ä¸ªè¯·æ±‚ï¼Œå¤„ç†å®Œäº†ä¹‹åå†ä»MQç»§ç»­æ‹‰å–ï¼Œç›´åˆ°æ¶ˆæ¯å…¨éƒ¨æ‹‰å–å®Œæ¯•&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158616267.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;å¡«è°·&#34;&gt;å¡«è°·&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨äº†MQä¹‹åï¼Œé™åˆ¶æ•ˆéæ¶ˆæ¯çš„é€Ÿåº¦ä¸º1000ï¼Œè¿™æ ·ä¾èµ–ï¼Œé«˜å³°æœŸäº§ç”Ÿçš„æ•°æ®åŠ¿å¿…ä¼šè¢«æŒ¤å‹åœ¨MQä¸­ï¼Œé«˜å³°å°±è¢«æ¶ˆæ‰äº†ï¼Œä½†æ˜¯å› ä¸ºæ¶ˆæ¯ç§¯å‹ï¼Œåœ¨é«˜å³°æœŸè¿‡åçš„ä¸€æ®µæ—¶é—´å†…ï¼Œæ¶ˆè´¹æ¶ˆæ¯çš„é€Ÿåº¦è¿˜æ˜¯ä¼šç»´æŒåœ¨1000ï¼Œç›´åˆ°æ¶ˆæ¯æ¶ˆè´¹å®Œç§¯å‹çš„æ¶ˆæ¯ï¼Œè¿™å°±å«åšâ€œå¡«è°·â€&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨äº†MQåå¯ä»¥æé«˜ç³»ç»Ÿç¨³å®šæ€§&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158627638.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;å°ç»“&#34;&gt;å°ç»“&lt;/h3&gt;
&lt;h4 id=&#34;ä¼˜ç‚¹å°ç»“&#34;&gt;ä¼˜ç‚¹å°ç»“&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åº”ç”¨è§£è€¦ï¼šæé«˜ç³»ç»Ÿå®¹é”™æ€§å’Œå¯ç»´æŠ¤æ€§&lt;/li&gt;
&lt;li&gt;å¼‚æ­¥æé€Ÿï¼šæå‡ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿååé‡&lt;/li&gt;
&lt;li&gt;å‰Šå³°å¡«è°·ï¼šæé«˜äº†ç³»ç»Ÿçš„ç¨³å®šæ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;mqçš„ç¼ºç‚¹&#34;&gt;MQçš„ç¼ºç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç³»ç»Ÿå¯ç”¨æ€§é™ä½
&lt;ul&gt;
&lt;li&gt;ç³»ç»Ÿå¼•å…¥çš„å¤–éƒ¨ä¾èµ–è¶Šå¤šï¼Œç³»ç»Ÿç¨³å®šæ€§è¶Šå·®ï¼Œä¸€æ—¦MQå®•æœºï¼Œå°±ä¼šå¯¹ä¸šåŠ¡é€ æˆå½±å“ï¼Œå¦‚ä½•ä¿è¯MQçš„é«˜å¯ç”¨ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿå¤æ‚åº¦æé«˜
&lt;ul&gt;
&lt;li&gt;MQçš„åŠ å…¥å¤§å¤§å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œä»¥å‰ç³»ç»Ÿä¹‹é—´åŒæ­¥çš„è¿œç¨‹è°ƒç”¨ï¼Œç°åœ¨æ˜¯é€šè¿‡MQè¿›è¡Œå¼‚æ­¥è°ƒç”¨ï¼Œå¦‚ä½•ä¿è¯æ¶ˆæ¯æ²¡æœ‰è¢«é‡å¤æ¶ˆè´¹ï¼Ÿæ€ä¹ˆå¤„ç†æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µï¼Œé‚£ä¹ˆä¿è¯æ¶ˆæ¯ä¼ é€’çš„é¡ºåºæ€§ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¸€è‡´æ€§é—®é¢˜
&lt;ul&gt;
&lt;li&gt;Aç³»ç»Ÿå¤„ç†å®Œä¸šåŠ¡ï¼Œé€šè¿‡MQç»™Bã€Cã€Dç³»ç»Ÿä¸‰ä¸ªç³»ç»Ÿå‘é€æ¶ˆæ¯æ•°æ®ï¼Œå¦‚æœBç³»ç»Ÿã€Cç³»ç»Ÿå¤„ç†æˆåŠŸï¼Œä½†æ˜¯Dç³»ç»Ÿå¤„ç†å¤±è´¥ï¼Œå¦‚ä½•ä¿è¯æ¶ˆæ¯æ•°æ®å¤„ç†çš„ä¸€è‡´æ€§å‘¢ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¸¸è§çš„mqäº§å“&#34;&gt;å¸¸è§çš„MQäº§å“&lt;/h2&gt;
&lt;p&gt;ç›®å‰ä¸šç•Œæœ‰å¾ˆå¤šçš„MQäº§å“ï¼Œå¦‚ï¼šRabbitMQã€RocaketMQã€ActiveMQã€Kafakaã€ZeroMQã€MetaMQç­‰ç­‰ï¼Œä¹Ÿæœ‰å…¬å¸ç›´æ¥ä½¿ç”¨Rediså……å½“æ¶ˆæ¯é˜Ÿåˆ—çš„æ¡ˆä¾‹ï¼Œè€Œè¿™äº›æ¶ˆæ¯é˜Ÿåˆ—äº§å“å„æœ‰åé‡ï¼Œåœ¨å®é™…é€‰å‹ä¸­ï¼Œéœ€è¦ç»“åˆè‡ªèº«éœ€æ±‚ä»¥åŠMQäº§å“çš„ç‰¹æ€§ï¼Œç»¼åˆè€ƒè™‘&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;RabbitMQ&lt;/th&gt;
&lt;th&gt;ActiveMQ&lt;/th&gt;
&lt;th&gt;RocketMQ&lt;/th&gt;
&lt;th&gt;Kafaka&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;å…¬å¸/ç¤¾åŒº&lt;/td&gt;
&lt;td&gt;Rabbit&lt;/td&gt;
&lt;td&gt;Apache&lt;/td&gt;
&lt;td&gt;Alibaba&lt;/td&gt;
&lt;td&gt;Apache&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¼€å‘è¯­è¨€&lt;/td&gt;
&lt;td&gt;Erlangï¼ˆäºŒéƒç¥ï¼‰&lt;/td&gt;
&lt;td&gt;Java&lt;/td&gt;
&lt;td&gt;Java&lt;/td&gt;
&lt;td&gt;Java&amp;amp;Scala&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;åè®®æ”¯æŒ&lt;/td&gt;
&lt;td&gt;AMQPã€SMTP...&lt;/td&gt;
&lt;td&gt;RESTã€AMQPã€STOMP...&lt;/td&gt;
&lt;td&gt;è‡ªå®šä¹‰&lt;/td&gt;
&lt;td&gt;è‡ªå®šä¹‰åè®®ã€ç¤¾åŒºå°è£…äº†httpåè®®æ”¯æŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å®¢æˆ·ç«¯æ”¯æŒè¯­è¨€&lt;/td&gt;
&lt;td&gt;å®˜æ–¹æ”¯æŒErlangã€javaã€Rubyç­‰&lt;/td&gt;
&lt;td&gt;Javaã€Cã€C++ã€Pythonã€PHP...&lt;/td&gt;
&lt;td&gt;Javaã€C++(ä¸æˆç†Ÿ)&lt;/td&gt;
&lt;td&gt;å®˜æ–¹æ”¯æŒJAVAã€ç¤¾åŒºäº§å‡ºäº†å¤šç§APIï¼Œå¦‚PHPå’ŒPythonç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å•æœºååé‡&lt;/td&gt;
&lt;td&gt;ä¸‡çº§ï¼ˆå…¶æ¬¡ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸‡çº§ï¼ˆæœ€å·®ï¼‰&lt;/td&gt;
&lt;td&gt;åä¸‡çº§ï¼ˆæœ€å¥½ï¼‰&lt;/td&gt;
&lt;td&gt;åä¸‡çº§ï¼ˆæ¬¡ä¹‹ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ¶ˆæ¯å»¶è¿Ÿ&lt;/td&gt;
&lt;td&gt;å¾®ç§’çº§&lt;/td&gt;
&lt;td&gt;æ¯«ç§’çº§&lt;/td&gt;
&lt;td&gt;æ¯«ç§’çº§&lt;/td&gt;
&lt;td&gt;æ¯«ç§’çº§ä»¥å†…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;åŠŸèƒ½ç‰¹æ€§&lt;/td&gt;
&lt;td&gt;å¹¶å‘èƒ½åŠ›å¼ºã€æ€§èƒ½æå…¶å¥½ã€å»¶è¿Ÿä½ã€ç¤¾åŒºæ´»è·ƒã€ç®¡ç†ç•Œé¢ä¸°å¯Œ&lt;/td&gt;
&lt;td&gt;è€ç‰Œäº§å“ã€æˆç†Ÿåº¦é«˜ã€æ–‡æ¡£è¾ƒå¤š&lt;/td&gt;
&lt;td&gt;MQåŠŸèƒ½æ¯”è¾ƒå®Œå¤‡ã€æ‰©å±•æ€§ä½³&lt;/td&gt;
&lt;td&gt;æ”¯æ”¯æŒä¸»è¦çš„MQåŠŸèƒ½ï¼Œæ¯•ç«Ÿæ˜¯ä¸ºå¤§æ•°æ®é¢†åŸŸå‡†å¤‡çš„&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;rabbitmq&#34;&gt;RabbitMQ&lt;/h2&gt;
&lt;h3 id=&#34;amqpç®€ä»‹&#34;&gt;AMQPç®€ä»‹&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;AMQP&lt;/code&gt;ï¼šAdvanced  Message Queuing Protocol (é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®)ï¼Œå®ƒæ˜¯ä¸€ä¸ªç½‘è·¯åè®®ï¼Œæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€å‘æ ‡å‡†ï¼Œä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ã€‚åŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸æ¶ˆæ¯ä¸­é—´ä»¶å¯ä¼ é€’æ¶ˆæ¯ï¼Œå¹¶ä¸å—å®¢æˆ·ç«¯/ä¸­é—´ä»¶ä¸åŒäº§å“ï¼Œä¸åŒçš„å¼€å‘è¯­è¨€ç­‰æ¡ä»¶é™åˆ¶&lt;/p&gt;
&lt;p&gt;AMQPæ˜¯2006å¹´SUNå…¬å¸å‘å¸ƒçš„ä¸€ä¸ªè§„èŒƒ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;9&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158643503.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;rabbitmqç®€ä»‹&#34;&gt;RabbitMQç®€ä»‹&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;RabbitæŠ€æœ¯å…¬å¸ï¼ˆç¾å›½ï¼‰åŸºäºAMQPæ ‡å‡†å¼€å‘çš„RabbitMQäº2007å¹´å‘å¸ƒV1.0ç‰ˆï¼ŒRabbitMQé‡‡ç”¨Erlangè¯­è¨€å¼€å‘ã€‚&lt;/p&gt;
&lt;p&gt;Erlangè¯­è¨€ä¸“é—¨ä¸ºé«˜å¹¶å‘å’Œåˆ†å¸ƒå¼ç»Ÿè®¾è®¡çš„ä¸€ç§è¯­è¨€ï¼Œåœ¨ç”µä¿¡é¢†åŸŸä½¿ç”¨å¹¿æ³›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;10&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158653524.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;Broker:å°±æ˜¯RabbitMQ Serverï¼Œç”¨æ¥æ¥æ”¶å’Œåˆ†å‘æ¶ˆæ¯çš„åº”ç”¨&lt;/li&gt;
&lt;li&gt;Virtual Host:å‡ºäºå¤šç§Ÿæˆ·å’Œå®‰å…¨å› ç´ è®¾è®¡çš„ï¼ŒæŠŠAMQPçš„åŸºæœ¬ç»„ä»¶åˆ’åˆ†åˆ°ä¸€ä¸ªè™šæ‹Ÿçš„åˆ†ç»„ä¸­ï¼Œé›·é€Ÿä¸ç½‘ç»œä¸­çš„namesapceæ¦‚å¿µã€‚å½“å¤šä¸ªä¸åŒçš„ç”¨æˆ·ä½¿ç”¨ä¸€ä¸ªRabbitMQ serveræä¾›æœåŠ¡çš„æ—¶å€™ï¼Œå¯ä»¥åˆ’åˆ†å‡ºå¤šä¸ªVirtual Hostï¼Œæ¯ä¸ªç”¨æˆ·éƒ½åœ¨è‡ªå·±çš„vhoståˆ›å»ºexchangeå’Œqueueç­‰&lt;/li&gt;
&lt;li&gt;Connectionï¼šç”Ÿäº§è€…/æ¶ˆè´¹è€… å’Œbrokerä¹‹é—´çš„TCPè¿æ¥&lt;/li&gt;
&lt;li&gt;Channelï¼šï¼ˆä¿¡é“ï¼‰å¦‚æœæ¯ä¸€æ¬¡è®¿é—®RabbitMQéƒ½å»ºç«‹ä¸€ä¸ªConnectionï¼Œåœ¨æ¶ˆæ¯é‡å¤§çš„æ—¶å€™å»ºç«‹Tcp Connectionçš„å¼€é”€å°†æ˜¯å·¨å¤§çš„ã€æ•ˆç‡ä¹Ÿè¾ƒä½ã€‚Channelæ˜¯åœ¨Connectionå†…éƒ¨å»ºç«‹çš„é€»è¾‘è¿æ¥ï¼Œå¦‚æœåº”ç”¨ç¨‹åºæ”¯æŒå¤šçº¿ç¨‹ï¼Œé€šå¸¸æ¯ä¸ªthreadåˆ›å»ºå•ç‹¬çš„channelè¿›è¡Œé€šä¿¡ï¼ŒAMQP methodåŒ…å«äº†channel idå¸®åŠ©å®¢æˆ·ç«¯å’Œmessage borkerè¯†åˆ«channelï¼Œæ‰€ä»¥channelä¹‹é—´æ˜¯å®Œå…¨éš”ç¦»çš„ã€‚Channelä½œä¸ºè½»é‡çº§çš„Connectionæå¤§å‡å°‘äº†æ“ä½œç³»ç»Ÿå»ºç«‹TCP connectionçš„å¼€é”€&lt;/li&gt;
&lt;li&gt;Exchangeï¼šæ¶ˆæ¯è¾¾åˆ°RabbitMQçš„ç¬¬ä¸€ç«™ï¼Œæ ¹æ®åˆ†å‘è§„åˆ™ï¼ŒåŒ¹é…æŸ¥è¯¢è¡¨ä¸­çš„&lt;code&gt;routing key&lt;/code&gt;(è·¯ç”±é”®)ï¼Œåˆ†å‘æ¶ˆæ¯åˆ°queueä¸­å»ï¼Œå¸¸æœ‰çš„ç±»å‹æœ‰ï¼šdirect (ç‚¹å¯¹ç‚¹å’ŒactiveMQä¸­çš„queueæ˜¯ä¸€æ ·çš„)ã€topicã€fanoutï¼ˆè¿™ä¸ªå’ŒactiveMQä¸­çš„topicæ¨¡å¼æ˜¯ä¸€æ ·çš„ï¼‰&lt;/li&gt;
&lt;li&gt;Queueï¼šæ¶ˆæ¯æœ€ç»ˆè¢«é€åˆ°è¿™é‡Œç­‰å¾…æ¶ˆè´¹è€…å–èµ°&lt;/li&gt;
&lt;li&gt;Bindingï¼šExchangeå’ŒQueueä¹‹é—´çš„è™šæ‹Ÿè¿æ¥ï¼Œbindingä¸­å¯ä»¥åŒ…å«è·¯ç”±é”®&lt;code&gt;routing key&lt;/code&gt;ã€Bindingä¿¡æ¯è¢«ä¿å­˜åˆ°exchangeä¸­çš„æŸ¥è¯¢è¡¨ä¸­ï¼Œç”¨äºæ¶ˆæ¯çš„åˆ†å‘ä¾æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä½¿ç”¨dockerå®‰è£…rabbitmq&#34;&gt;ä½¿ç”¨Dockerå®‰è£…RabbitMQ&lt;/h3&gt;
&lt;h4 id=&#34;æ‹‰å–é•œåƒ&#34;&gt;æ‹‰å–é•œåƒ&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;docker pull rabbitmq:3.8.4-management
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;é€šè¿‡å®¹å™¨å¯åŠ¨rabbitmq&#34;&gt;é€šè¿‡å®¹å™¨å¯åŠ¨RabbitMQ&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;docker run -i -d --name=myrabbitmq -p 5672:5672 -p 15672:15672 imageid
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;è®¿é—®rabbitmq&#34;&gt;è®¿é—®RabbitMQ&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;IP:15672&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·åå’Œå¯†ç é»˜è®¤éƒ½æ˜¯guest&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;é€šè¿‡springbootæ•´åˆrabbitmq&#34;&gt;é€šè¿‡SpringBootæ•´åˆRabbitMQ&lt;/h3&gt;
&lt;h4 id=&#34;åˆ›å»ºå·¥ç¨‹&#34;&gt;åˆ›å»ºå·¥ç¨‹&lt;/h4&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;11&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158665947.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;é…ç½®æ–‡ä»¶&#34;&gt;é…ç½®æ–‡ä»¶&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;#ç«¯å£å·
server:
  port: 8080
#é…ç½®rabbitMQ
spring:
  rabbitmq:
    host: 192.168.25.134
    username: guest
    password: guest
    #port: 5672
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;åˆ›å»ºexchange&#34;&gt;åˆ›å»ºExchange&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Autowired
private AmqpAdmin amqpAdmin;
/**
 * é€šè¿‡ä»£ç åˆ›å»ºexchange
 */
@Test
public void createExchange(){
    amqpAdmin.declareExchange(new DirectExchange(&amp;quot;amqp.exchange&amp;quot;));
}
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;åˆ›å»ºä¸åŒçš„æ¶ˆæ¯newä¸åŒçš„å¯¹è±¡å³å¯&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;12&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158676615.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;å¸¸è§queue&#34;&gt;å¸¸è§Queue&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Autowired
private AmqpAdmin amqpAdmin;

@Test
public void createQueue(){
    amqpAdmin.declareQueue(new Queue(&amp;quot;amqp.queue&amp;quot;));
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;ç»‘å®šexchangeå’Œqueue&#34;&gt;ç»‘å®šexchangeå’Œqueue&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Autowired
private AmqpAdmin amqpAdmin;

@Test
public void bindingQueueAndExchange(){
    //å‚æ•°ä¸€ï¼šqueue
    //å‚æ•°äºŒï¼šæ˜¯queueçš„ç±»å‹
    //å‚æ•°ä¸‰ï¼šäº¤æ¢å™¨
    //å‚æ•°å››ï¼šrouting key  ï¼ˆè·¯ç”±é”®ï¼‰
    //å‚æ•°äº”ï¼šç»‘å®šçš„æ—¶å€™ç»™ä¸€ä¸ªåˆå§‹åŒ–çš„æ¶ˆæ¯
    amqpAdmin.declareBinding(new Binding(&amp;quot;amqp.queue&amp;quot;,Binding.DestinationType.QUEUE,&amp;quot;amqp.exchange&amp;quot;,&amp;quot;amqp.test&amp;quot;,null));
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;æµ‹è¯•direct&#34;&gt;æµ‹è¯•direct&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Resource
private RabbitTemplate rabbitTemplate;

/**
 * æµ‹è¯•directå‘é€æ¶ˆæ¯
 */
@Test
void testPublishDirect() {
    Map&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;&amp;gt;();
    map.put(&amp;quot;id&amp;quot;,1);
    map.put(&amp;quot;list&amp;quot;, Arrays.asList(&amp;quot;å¼ ä¸‰&amp;quot;,&amp;quot;æå››&amp;quot;));
    /**
     * å‚æ•°1ã€exchangeï¼ˆäº¤æ¢å™¨ï¼‰é€šè¿‡äº¤æ¢å™¨çš„ç±»å‹ï¼Œå¯ä»¥å†³å®šæ¶ˆæ¯å‘é€çš„æ–¹å¼ï¼Œå¦‚ï¼šdirectå°±æ˜¯ç‚¹å¯¹ç‚¹ï¼Œä¸€ä¸ªç”Ÿäº§è€…å¯¹åº”ä¸€ä¸ªæ¶ˆè´¹è€…
     * å‚æ•°2ã€routingKeyï¼ˆè·¯ç”±é”®ï¼‰  è¡¨ç¤ºæ¶ˆæ¯åˆ°queuesä¸­å“ªä¸ªåœ°æ–¹å­˜å‚¨
     * å‚æ•°3ã€è·¯ç”±è¯•é¢˜
     */
    rabbitTemplate.convertAndSend(&amp;quot;amqp.exchange&amp;quot;,&amp;quot;amqp.test&amp;quot;,map);
}

/**
 * æµ‹è¯•directæ¥æ”¶æ¶ˆæ¯
 */
@Test
public void testReceiveDirect(){
    //å‚æ•°ï¼šqueueçš„name
    Object convert = rabbitTemplate.receiveAndConvert(&amp;quot;amqp.queue&amp;quot;);
    System.out.println(convert);
    System.out.println(convert.getClass());
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;æµ‹è¯•fanout&#34;&gt;æµ‹è¯•fanout&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * æµ‹è¯•fanoutå‘é€æ¶ˆæ¯(å’ŒactiveMQä¸­çš„topicä¸€æ ·çš„)
 */
@Test
public void testPublishFanout(){
    Map&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;&amp;gt;();
    map.put(&amp;quot;id&amp;quot;,1);
    map.put(&amp;quot;list&amp;quot;, Arrays.asList(&amp;quot;å¼ ä¸‰&amp;quot;,&amp;quot;æå››&amp;quot;));
    rabbitTemplate.convertAndSend(&amp;quot;amqp.exchange.fanout&amp;quot;,&amp;quot;amqp.exchange.fanout.test&amp;quot;,map);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;åˆ›å»ºç›‘å¬å™¨&#34;&gt;åˆ›å»ºç›‘å¬å™¨&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Service
public class MyListener {
    @RabbitListener(queues = &amp;quot;amqp.queue&amp;quot;)
    public void receive(Map&amp;lt;String,Object&amp;gt; map){
        System.out.println(&amp;quot;ä»ç›‘å¬å™¨ä¸­å–å‡ºæ¶ˆæ¯ï¼š&amp;quot; + map);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;æµ‹è¯•topic&#34;&gt;æµ‹è¯•topic&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨RabbitMQä¸­   direct==activeMQä¸­çš„queue&lt;/p&gt;
&lt;p&gt;â€‹                             fanout==activeMQä¸­çš„topic&lt;/p&gt;
&lt;p&gt;â€‹                             topic   åŒ¹é…æ¨¡å¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;13&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592158693339.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;.#  (è¡¨ç¤ºä¸€ä¸ªå•è¯æˆ–å¤šä¸ªå•è¯)&lt;/p&gt;
&lt;p&gt;*.  (è¡¨ç¤ºåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯)&lt;/p&gt;
&lt;/blockquote&gt;
">RabbitMQï¼ˆä¸€ï¼‰</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/rong-duan-qi-hystrix/"" data-c="
          &lt;h1 id=&#34;ç†”æ–­å™¨hystrix&#34;&gt;ç†”æ–­å™¨Hystrix&lt;/h1&gt;
&lt;h2 id=&#34;ç®€ä»‹&#34;&gt;ç®€ä»‹&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;hystrixåœ¨è‹±æ–‡é‡Œçš„æ„æ€æ˜¯è±ªçŒªï¼Œå®ƒçš„logoå°±æ˜¯ä¸€å¤´è±ªçŒªï¼Œåˆºè®©æˆ‘æƒ³åˆ°çš„æ˜¯è‡ªæˆ‘ä¿æŠ¤ï¼Œhystrixå®ƒå°±æ˜¯ä¸€æ¬¾æä¾›ä¿æŠ¤æœºåˆ¶é¢ç»„ä»¶ï¼Œå®ƒå’Œeurekaä¸€æ ·ä¹Ÿæ˜¯Netflixå…¬å¸å¼€å‘çš„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592150422551.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;é›ªå´©é—®é¢˜&#34;&gt;é›ªå´©é—®é¢˜&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¾®æœåŠ¡ä¸­ï¼ŒæœåŠ¡ä¹‹é—´è°ƒç”¨å…³ç³»æ˜¯é”™ç»¼å¤æ‚çš„ï¼Œä¸€ä¸ªè¯·æ±‚ï¼Œå¯èƒ½éœ€è¦è°ƒç”¨å¤šä¸ªå¾®æœåŠ¡ç»å£æ‰èƒ½å®ç°ï¼Œä¼šå½¢æˆéå¸¸å¤æ‚çš„è°ƒç”¨é“¾è·¯&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592150428504.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚å›¾ï¼šä¸€æ¬¡ä¸šåŠ¡è¯·æ±‚ï¼Œéœ€è¦è°ƒç”¨Aã€Pã€Hã€Iå››ä¸ªæœåŠ¡ï¼Œè¿™å››ä¸ªæœåŠ¡åˆæœ‰å¯èƒ½è°ƒç”¨äº†å…¶ä»–çš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæ­¤æ—¶ï¼ŒæŸä¸ªæœåŠ¡å‡ºç°äº†å¼‚å¸¸ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592150432891.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¾‹å¦‚ï¼šå¾®æœåŠ¡Iå‡ºç°äº†å¼‚å¸¸ï¼Œè¯·æ±‚å°±ä¼šé˜»å¡ï¼Œç”¨çƒè¯·æ±‚å°±ä¼šå¾—ä¸åˆ°å“åº”ï¼Œåˆ™tomcatçš„è¿™ä¸ªçº¿ç¨‹å°±ä¸ä¼šé‡Šæ”¾ï¼Œäºæ˜¯è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·è¯·æ±‚åˆ°æ¥ï¼Œè¶Šæ¥è¶Šå¤šé¢çº¿ç¨‹ä¼šé˜»å¡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592150437036.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;æœåŠ¡å™¨æ”¯æŒçš„çº¿ç¨‹å’Œå¹¶å‘æ•°æ˜¯æœ‰é™çš„ï¼Œè¯·æ±‚ä¸€ç›´é˜»å¡ï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨çš„èµ„æºè€—å°½ï¼Œä»è€Œå¯¼è‡´æ‰€æœ‰é¢å…¶ä»–æœåŠ¡éƒ½ä¸å¯ç”¨ï¼Œå½¢æˆé›ªå´©æ•ˆåº”ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±å¥½æ¯”ï¼šæ‘é‡Œéƒ½ç”¨ä¸€ä¸ªå˜å‹å™¨ï¼Œæœ‰ä¸€å®¶ç”¨çƒ­å¾—å¿«çƒ§æ°´å¯¼è‡´ç”µè·¯çŸ­è·¯æœ€ç»ˆçƒ§äº†ç”µè·¯ï¼Œç»“æœå´å¯¼è‡´æ‘é‡Œæ‰€æœ‰å®¶åº­éƒ½æ— æ³•ç”¨ç”µï¼ˆè§£å†³æ–¹æ¡ˆï¼šæ¯å®¶æ¯æˆ·éƒ½è£…ä¸€ä¸ªä¿é™©ä¸ï¼Œä¸€å®¶çƒ§æ¯ï¼Œä¸æƒ³èµ¢å…¶ä»–å®¶åº­ç”¨ç”µï¼‰&lt;/p&gt;
&lt;p&gt;è¿™ä¹Ÿå¥½æ¯”ï¼šä¸€ä¸ªæ±½è½¦ç”Ÿäº§çº¿ï¼Œç”Ÿæˆä¸åŒçš„æ±½è½¦ï¼Œéœ€è¦çš„æ˜¯ä¸åŒçš„é›¶ä»¶ï¼Œè‹¥æœæŸä¸ªé›¶ä»¶å› ä¸ºç§ç§åŸå› æ— æ³•ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±ä¼šæ—©æˆæ•´å°è½¦æ— æ³•è£…é…ï¼Œé™·å…¥äº†ç­‰å¾…é›¶ä»¶çš„çŠ¶æ€ï¼ŒçŸ¥é“é›¶ä»¶åˆ°ä½ï¼Œæ‰èƒ½ç»§ç»­ç»„è£…ä»¶ï¼Œæ­¤æ—¶å¦‚æœæœ‰å¾ˆå¤šçš„è½¦å‹éƒ½éœ€è¦è¿™ä¸ªé›¶ä»¶ï¼Œé‚£ä¹ˆæ•´ä¸ªå·¥å‚å°±å°†é™·å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¯¼è‡´æ‰€æœ‰çš„ç”Ÿæˆéƒ½ç˜«ç—ªï¼Œä¸€ä¸ªé›¶ä»¶çš„å‰¥èŒ§èŒƒå›´ä¸æ–­çš„æ‰©å¤§.è¿™å°±æ˜¯é›ªå´©&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Hystrixè§£å†³çš„é›ªå´©é—®é¢˜çš„æ‰‹æ®µä¸»è¦æ˜¯æœåŠ¡é™çº§ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;çº¿ç¨‹éš”ç¦»&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç†”æ–­&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;çº¿ç¨‹éš”ç¦»æœåŠ¡é™çº§&#34;&gt;çº¿ç¨‹éš”ç¦»&amp;amp;æœåŠ¡é™çº§&lt;/h2&gt;
&lt;h3 id=&#34;åŸç†&#34;&gt;åŸç†&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592150445282.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;è§£è¯»è¯¥å›¾ï¼š&lt;/p&gt;
&lt;p&gt;Hystrixä¸ºæ¯ä¸ªä¾èµ–æœåŠ¡è°ƒç”¨åˆ†é…ä¸€ä¸ªå°çš„çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± å·²æ»¡è°ƒç”¨å°±ä¼šè¢«ç«‹å³æ‹’ç»ï¼Œé»˜è®¤ä¸é‡‡ç”¨æ’é˜Ÿï¼ŒåŠ é€Ÿå¤±è´¥åˆ¤å®šæ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·çš„è¯·æ±‚å°†ä¸å†ç›´æ¥è®¿é—®æœåŠ¡ï¼Œè€Œæ˜¯é€šè¿‡çº¿ç¨‹æ± ä¸­çš„ç©ºé—²çº¿ç¨‹æ¥è®¿é—®æœåŠ¡ï¼Œå¦‚æœçº¿ç¨‹æ± å·²ç»æ»¡äº†ï¼Œæˆ–è€…æ˜¯è¯·æ±‚è¶…æ—¶ï¼Œåˆ™ä¼šè¿›è¡Œé™çº§å¤„ç†&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ï¼ˆæœåŠ¡é™çº§ï¼šæœ‰é™ä¿è¯æ ¸å¿ƒæœåŠ¡ï¼Œè€Œéæ ¸å¿ƒæœåŠ¡ä¸å¯ç”¨æˆ–å¼±å¯ç”¨ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç”¨æˆ·çš„è¯·æ±‚æ•…éšœçš„æ—¶å€™ï¼Œä¸ä¼šè¢«é˜»å¡ï¼Œæ›´ä¸ä¼šæ— ä¼‘æ­¢çš„ç­‰å¾…æˆ–è€…æ˜¯çœ‹åˆ°ç³»ç»Ÿå´©æºƒï¼Œè‡³å°‘å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ‰§è¡Œçš„ç»“æœï¼ˆä¸€ä¸ªå‹å¥½çš„ç•Œé¢ï¼‰&lt;/p&gt;
&lt;p&gt;æœåŠ¡é™çº§è™½ç„¶ä¼šå¯¼è‡´è¯·æ±‚å¤±è´¥ï¼Œä½†æ˜¯ä¸ä¼šå¯¼è‡´é˜»å¡ï¼Œè€Œä¸”æœ€å¤šä¼šå½±å“è¿™ä¸ªä¾èµ–æœåŠ¡å¯¹åº”çš„çº¿ç¨‹æ± ä¸­çš„èµ„æºï¼Œå¯¹å…¶å®ƒæœåŠ¡å®Œå…¨æ²¡æœ‰å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;hysrixæœåŠ¡é™çº§çš„æƒ…å†µ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;çº¿ç¨‹æ± å·²æ»¡&lt;/li&gt;
&lt;li&gt;è¯·æ±‚è¶…æ—¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ¡ˆä¾‹&#34;&gt;æ¡ˆä¾‹&lt;/h3&gt;
&lt;h4 id=&#34;åœ¨user-webå·¥ç¨‹ä¸­ä¾èµ–hystrix&#34;&gt;åœ¨user-webå·¥ç¨‹ä¸­ä¾èµ–hystrix&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-cloud-starter-netflix-hystrix&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;å¼€å¯ç†”æ–­&#34;&gt;å¼€å¯ç†”æ–­&lt;/h4&gt;
&lt;p&gt;åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ &lt;code&gt;@EnableCircuitBreaker&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@SpringBootApplication
@EnableDiscoveryClient  //å¼€å¯å‘ç°æœåŠ¡
@EnableCircuitBreaker
public class UserWebApplication {
    ...
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œç±»ä¸Šé¢çš„æ³¨è§£è¶Šæ¥è¶Šå¤šäº†ï¼Œåœ¨å¾®æœåŠ¡ä¸­ï¼Œç»å¸¸å¼•å…¥ä¸Šé¢çš„ä¸‰ä¸ªæ³¨è§£ï¼Œå­¦ä¹ ä¸€ä¸ªç»„åˆæ³¨è§£&lt;code&gt;@SpringCloudApplication&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å®ƒçš„æºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@SpringBootApplication
@EnableDiscoveryClient
@EnableCircuitBreaker
public @interface SpringCloudApplication {
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥æ³¨è§£&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@SpringCloudApplication
public class UserWebApplication {
    ....
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;ç¼–å†™é™çº§é€»è¾‘&#34;&gt;ç¼–å†™é™çº§é€»è¾‘&lt;/h4&gt;
&lt;p&gt;å½“ç›®æ ‡æœåŠ¡çš„è°ƒç”¨å‡ºç°æ•…éšœï¼Œæˆ‘ä»¬å¸Œæœ›å¿«é€Ÿå¤±è´¥ï¼Œç»™ç”¨æˆ·ä¸€ä¸ªå‹å¥½çš„æç¤ºï¼Œå› æ­¤éœ€è¦æå‰ç¼–å†™å¥½å¤±è´¥çš„æ—¶å€™çš„é™çº§é€»è¾‘ï¼Œä½¿ç”¨HystrixCommandæ¥å®Œæˆ&lt;/p&gt;
&lt;p&gt;å¯¹User-webä¸­çš„controllerè¿›è¡Œæ”¹é€ &lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RestController
@RequestMapping(&amp;quot;/consumer&amp;quot;)
public class ConsumerController {
    @Autowired
    private RestTemplate restTemplate;

    @Autowired
    private DiscoveryClient discoveryClient;

    @RequestMapping(&amp;quot;/{id}&amp;quot;)
    @HystrixCommand(fallbackMethod = &amp;quot;queryByIdFallback&amp;quot;)
    public User getByyid(@PathVariable(&amp;quot;id&amp;quot;) Long id){
        //ä½¿ç”¨è´Ÿè½½å‡è¡¡ï¼ˆRibbonï¼‰
        String url = &amp;quot;http://user-service/user/&amp;quot; + id;
        return restTemplate.getForObject(url,User.class);
    }
    //ç†”æ–­çš„æ–¹æ³•ï¼šæ–¹æ³•åå’Œæ­£å¸¸çš„æ–¹æ³•åä¸€è‡´ï¼Œå‚æ•°ä¸€è‡´
    public User queryByIdFallback(Long id){
        User user = new User();
        user.setId(id);
        user.setNote(&amp;quot;å¯¹ä¸èµ·ç½‘ç»œå¤ªç”¨æ‹¥æŒ¤äº†ï¼&amp;quot;);
        return user;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯ä»¥åœæ‰user-serviceæœåŠ¡ï¼Œåœ¨è¿›è¡Œuse-webçš„è®¿é—®æµ‹è¯•&lt;/p&gt;
&lt;p&gt;è¯´æ˜ï¼š@HystrixCommand(fallbackMethod = &amp;quot;queryByIdFallback&amp;quot;)ï¼›ç”¨æ¥å£°æ˜ä¸€ä¸ªé™çº§é€»è¾‘çš„æ–¹æ³•&lt;/p&gt;
&lt;h4 id=&#34;é»˜è®¤çš„fallback&#34;&gt;é»˜è®¤çš„fallback&lt;/h4&gt;
&lt;p&gt;åˆšæ‰æ˜¯å§fallbackå†™åœ¨äº†æŸä¸ªä¸šåŠ¡çš„æ–¹æ³•ä¸Šï¼Œå¦‚æœè¿™æ ·çš„æ–¹æ³•å¤šäº†ï¼Œå°±ä¼šå¯¼è‡´æ¯ä¸ªæ–¹æ³•éƒ½å†™ä¸€ä¸ªfallbackï¼Œå®é™…ä¸Šå¯èƒ½æ„ä¹‰ä¸å¤§ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™é»˜è®¤çš„fallback&lt;/p&gt;
&lt;p&gt;å¯¹controlleræ”¹é€ &lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RestController
@RequestMapping(&amp;quot;/consumer&amp;quot;)
@DefaultProperties(defaultFallback = &amp;quot;defaultFallback&amp;quot;)
public class ConsumerController {
    @Autowired
    private RestTemplate restTemplate;

    @Autowired
    private DiscoveryClient discoveryClient;

    @RequestMapping(&amp;quot;/{id}&amp;quot;)
    //@HystrixCommand(fallbackMethod = &amp;quot;queryByIdFallback&amp;quot;)
    @HystrixCommand
    public User getByyid(@PathVariable(&amp;quot;id&amp;quot;) Long id){
        //ä½¿ç”¨è´Ÿè½½å‡è¡¡ï¼ˆRibbonï¼‰
        String url = &amp;quot;http://user-service/user/&amp;quot; + id;
        return restTemplate.getForObject(url,User.class);
    }
    //ç†”æ–­çš„æ–¹æ³•ï¼šæ–¹æ³•åå’Œæ­£å¸¸çš„æ–¹æ³•åä¸€è‡´ï¼Œå‚æ•°ä¸€è‡´
    public User queryByIdFallback(Long id){
        User user = new User();
        user.setId(id);
        user.setNote(&amp;quot;å¯¹ä¸èµ·ç½‘ç»œå¤ªç”¨æ‹¥æŒ¤äº†ï¼&amp;quot;);
        return user;
    }

    //é»˜è®¤æœåŠ¡ç†”æ–­
    public User defaultFallback(){
        User user = new User();
        user.setNote(&amp;quot;é»˜è®¤æç¤ºï¼šå¯¹ä¸èµ·,ç½‘ç»œå¤ªç”¨æ‹¥æŒ¤äº†ï¼&amp;quot;);
        return user;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;è¶…æ—¶è®¾ç½®&#34;&gt;è¶…æ—¶è®¾ç½®&lt;/h4&gt;
&lt;p&gt;åœ¨æ¡ˆä¾‹ä¸­ï¼Œè¯·æ±‚åœ¨è¶…è¿‡1ç§’åéƒ½ä¼šè¿”å›é”™è¯¯ä¿¡æ¯ï¼Œè¿™æ˜¯å› ä¸ºHystirxçš„é»˜è®¤è¶…æ—¶æ—¶é—´æ˜¯1ç§’&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;hystrix:
  command:
    default:
      execution:
        isolation:
          thread:
            timeoutInMilliseconds: 2000
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªé…ç½®ä¼šä½œç”¨äºå…¨å±€æ‰€æœ‰çš„æ–¹æ³•&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ¼”ç¤ºè¿™ä¸ªæ•ˆæœï¼Œæˆ‘å…ˆå°†ä¸Šé¢çš„2000æ¢å¤åˆ°é»˜è®¤å€¼æ˜¯1000ï¼Œç„¶åä¿®æ”¹äº†user-serviceä¸­çš„serviceæ–¹æ³•ï¼Œç»™2ç§’çš„è®¿é—®å»¶è¿Ÿ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Service
public class UserServiceImpl implements UserService {
    @Autowired
    private UserRepository userRepository;
    @Override
    public User getUserById(Long id) {
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        return userRepository.findUserById(id);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¥ç€æˆ‘ä»¬å†è®¿é—®user-webï¼Œå‘ç°å³ä½¿user-serviceæœåŠ¡æ˜¯èƒ½æ­£å¸¸æä¾›æœåŠ¡ï¼Œä½†æ˜¯ä»–ä»¬çš„é€šè®¯æ—¶é—´è¶…è¿‡äº†1ç§’è¿˜æ˜¯ä¼šå‡ºç°é—®é¢˜ã€‚æ¥ä¸‹æ¥ï¼Œå°†ä¸Šé¢çš„é…ç½®æ”¹ä¸º3000æ¯«ç§’ï¼Œæ¥ä¸‹æ¥å°±èƒ½æ­£å¸¸è®¿é—®äº†&lt;/p&gt;
&lt;h2 id=&#34;æœåŠ¡ç†”æ–­&#34;&gt;æœåŠ¡ç†”æ–­&lt;/h2&gt;
&lt;h3 id=&#34;åŸç†-2&#34;&gt;åŸç†&lt;/h3&gt;
&lt;p&gt;åœ¨æœåŠ¡ç†”æ–­ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ç†”æ–­å™¨ï¼Œä¹Ÿå«æ–­è·¯å™¨ï¼Œè‹±æ–‡å«ï¼šCircuit Breaker&lt;/p&gt;
&lt;p&gt;ç†”æ–­å™¨è·Ÿå®¶ç”¨çš„ä¿é™©ä¸åŸç†ç±»ä¼¼ï¼šå½“å¦‚æœç”µè·¯å‘ç”Ÿäº†çŸ­è·¯çš„æ—¶å€™èƒ½å¤Ÿç«‹å³ç†”æ–­ç”µè·¯ï¼Œé¿å…ç¾éš¾çš„å‘ç”Ÿã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„åº”ç”¨ä¸­åº”ç”¨æœåŠ¡ç†”æ–­åï¼ŒæœåŠ¡è°ƒç”¨æ–¹å¯ä»¥è‡ªå·±è¿›è¡Œåˆ¤æ–­å“ªäº›æœåŠ¡ååº”æ…¢æˆ–è€…æ˜¯å­˜åœ¨å¤§é‡çš„è¶…æ—¶ï¼Œå¯ä»¥é’ˆå¯¹è¿™äº›æœåŠ¡è¿›è¡Œä¸»åŠ¨ç†”æ–­ï¼Œé˜²æ­¢æ•´ä¸ªç³»ç»Ÿè¢«æ‹–å®&lt;/p&gt;
&lt;p&gt;Hystrixçš„æœåŠ¡ç†”æ–­æœºåˆ¶ï¼Œå¯ä»¥å®ç°å¼¹æ€§å®¹é”™ï¼Œå½“æœåŠ¡è¯·æ±‚æƒ…å†µå¥½è½¬ä¹‹åï¼Œå¯ä»¥è‡ªåŠ¨é‡è¿ã€‚é€šè¿‡çŸ­è·¯çš„æ–¹å¼ï¼Œå°†åç»­è¯·æ±‚ç›´æ¥æ‹’ç»ï¼Œä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤æ—¶é—´æ˜¯5ç§’ï¼‰ä¹‹åå…è®¸éƒ¨åˆ†è¯·æ±‚é€šè¿‡ï¼Œå¦‚æœè°ƒç”¨æˆåŠŸåˆ™å›åˆ°æ–­è·¯å™¨å…³é—­çŠ¶æ€ï¼Œå¦åˆ™å°†ç»§ç»­æ‰“å¼€ï¼Œæ‹’ç»è¯·æ±‚çš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;Hystirxçš„ç†”æ–­çŠ¶æ€æ¨¡å‹ï¼š&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1592150460918.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
"> ç†”æ–­å™¨Hystrix</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/ribbon-fu-zai-jun-heng-qi/"" data-c="
          &lt;h1 id=&#34;ribbon&#34;&gt;Ribbon&lt;/h1&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯ribbon&#34;&gt;ä»€ä¹ˆæ˜¯Ribbon&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Ribbonæ˜¯Netflixå‘å¸ƒçš„ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼Œå®ƒæœ‰åŠ©äºæ§åˆ¶Httpå’ŒTCPå®¢æˆ·ç«¯çš„è¡Œä¸ºã€‚ä¸ºRibboné…ç½®æœåŠ¡æä¾›è€…åˆ—è¡¨åï¼ŒRibbonå°±å¯ä»¥åŸºäºæŸç§è´Ÿè½½å‡è¡¡çš„ç®—æ³•ï¼Œè‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªæœåŠ¡ç»™æ¶ˆè´¹è€…ã€‚Ribboné»˜è®¤è´Ÿè½½å‡è¡¡ç®—æ³•æ˜¯è½®è¯¢ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰éšæœºç­‰ï¼Œå½“ç„¶å®é™…å¼€å‘ä¸­ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡çš„ç®—æ³•&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æœåŠ¡ä¹‹é—´çš„é€šè®¯é—®é¢˜&#34;&gt;æœåŠ¡ä¹‹é—´çš„é€šè®¯é—®é¢˜&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;æ°¸è¿œæ˜¯ä»eurekaä¸­æ‹‰å–åˆ°äº†æœåŠ¡æä¾›è€…çš„åˆ—è¡¨ï¼Œä½†æ˜¯æ°¸è¿œåªç”¨ç¬¬ä¸€ä¸ªæœåŠ¡ï¼Œå…¶ä»–çš„æœåŠ¡å°±éƒ½é—²ç½®ç€äº†&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RequestMapping(&amp;quot;/{id}&amp;quot;)
public User getByyid(@PathVariable(&amp;quot;id&amp;quot;) Long id){
    //åœ°å€ä»eurekaä¸­è·å–
    List&amp;lt;ServiceInstance&amp;gt; instancesList = discoveryClient.getInstances(&amp;quot;user-service&amp;quot;);
    //æœ‰å¯èƒ½æœ‰å¤šä¸ªæœåŠ¡ï¼Œæˆ‘åªéœ€è¦æ‹¿ä¸€ä¸ª
    ServiceInstance serviceInstance = instancesList.get(0);
    //ç»„è£…
    String url = &amp;quot;http://&amp;quot;+ serviceInstance.getHost()+&amp;quot;:&amp;quot;+serviceInstance.getPort()+&amp;quot;/user/&amp;quot; + id;
    //é‡‡ç”¨httpçš„æ–¹å¼ç³»ç»Ÿä¹‹é—´é€šè®¯
    return restTemplate.getForObject(url,User.class);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡ä¸€ç§ç®—æ³•ï¼Œåˆç†çš„é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªæœåŠ¡ã€‚å¯ä»¥é€šè¿‡ç¼–å†™è´Ÿè½½å‡è¡¡çš„ç®—æ³•ï¼Œåœ¨å¤šä¸ªå®ä¾‹åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªæœåŠ¡&lt;/p&gt;
&lt;p&gt;ä¸è¿‡Eurkeaä¸­å·²ç»é›†æˆäº†è´Ÿè½½å‡è¡¡ç»„ä»¶ï¼šRibbonï¼ˆç®€å•çš„ä¿®æ”¹ä»£ç å³å¯ä½¿ç”¨ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å®æˆ˜&#34;&gt;å®æˆ˜&lt;/h2&gt;
&lt;h3 id=&#34;1-å…ˆå¯åŠ¨2ä¸ªuser-serviceå®ä¾‹&#34;&gt;1ã€å…ˆå¯åŠ¨2ä¸ªuser-serviceå®ä¾‹&lt;/h3&gt;
&lt;h3 id=&#34;2-åœ¨user-webå·¥ç¨‹ä¸­å¼€å¯è´Ÿè½½å‡è¡¡&#34;&gt;2ã€åœ¨user-webå·¥ç¨‹ä¸­å¼€å¯è´Ÿè½½å‡è¡¡&lt;/h3&gt;
&lt;p&gt;åœ¨eureka-clientçš„åŒ…ä¸­å·²ç»é›†æˆäº†Ribbonï¼Œæ‰€ä»¥ä¸éœ€è¦å¯¼å…¥æ–°çš„ä¾èµ–&lt;/p&gt;
&lt;p&gt;ç›´æ¥ä¿®æ”¹å¯åŠ¨ç±»ï¼Œæ·»åŠ å¼€å¯çš„æ³¨è§£ï¼ˆåœ¨RestTemplateä¸Šé¢æ·»åŠ @LoadBalancedï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@SpringBootApplication
@EnableDiscoveryClient  //å¼€å¯å‘ç°æœåŠ¡
public class UserWebApplication {

    public static void main(String[] args) {
        SpringApplication.run(UserWebApplication.class, args);
    }
    
    @Bean
    @LoadBalanced
    public RestTemplate restTemplate(){
        return new RestTemplate();
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3-ä¿®æ”¹controllerä¸­è·å–æœåŠ¡çš„æ–¹æ³•&#34;&gt;3ã€ä¿®æ”¹controllerä¸­è·å–æœåŠ¡çš„æ–¹æ³•&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RequestMapping(&amp;quot;/{id}&amp;quot;)
public User getByyid(@PathVariable(&amp;quot;id&amp;quot;) Long id){

    //ä½¿ç”¨è´Ÿè½½å‡è¡¡ï¼ˆRibbonï¼‰
    String url = &amp;quot;http://user-service/user/&amp;quot; + id;
    return restTemplate.getForObject(url,User.class);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥æµ‹è¯•å°±å¯ä»¥é€šäº†&lt;/p&gt;
&lt;p&gt;å…³æ‰ä¸€ä¸ªuser-serviceåæµ‹è¯•æ˜¯å¦å¯ä»¥æ­£å¸¸è·å–åˆ°æœåŠ¡&lt;/p&gt;
&lt;p&gt;å†å¯åŠ¨å…³æ‰çš„é‚£ä¸ªuser-serviceåå…³æ‰ç¬¬äºŒä¸ªuser-serviceæœåŠ¡å†æµ‹è¯•ã€‚&lt;/p&gt;
"> Ribbonè´Ÿè½½å‡è¡¡å™¨</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/eureka/"" data-c="
          &lt;h2 id=&#34;ä»€ä¹ˆæ˜¯eureka&#34;&gt;ä»€ä¹ˆæ˜¯Eureka&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç™¾åº¦ç™¾ç§‘ï¼š&lt;a href=&#34;https://baike.baidu.com/item/Eureka/22402835?fr=aladdin&#34;&gt;ä»€ä¹ˆæ˜¯Eureka&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;é—®é¢˜åˆ†æ&#34;&gt;é—®é¢˜åˆ†æ&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;åˆšæ‰çš„æ¡ˆä¾‹ï¼Œuser-serviceå¯¹å¤–æä¾›æœåŠ¡ï¼Œéœ€è¦å¯¹å¤–æš´æ¼è‡ªå·±çš„åœ°å€ã€‚user-webéœ€è¦è®°å½•æœåŠ¡æä¾›è€…çš„åœ°å€ã€‚å°†æ¥åœ°å€å‡ºç°å˜æ›´ï¼Œè¿˜éœ€è¦åŠæ—¶çš„å»æ›´æ–°ã€‚è¿™åœ¨æœåŠ¡è¾ƒå°‘çš„æ—¶å€™ä¸ä¼šè§‰å¾—æœ‰ä»€ä¹ˆï¼Œä½†æ˜¯åœ¨å¤§å‹çš„äº’è”ç½‘é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªé¡¹ç›®å¯èƒ½å·®åˆ†å¤„å‡ åä¸ªå¾®æœåŠ¡ï¼Œæ­¤æ—¶å¦‚æœè¿˜æ˜¯äººä¸ºçš„ç®¡ç†ï¼Œä¸ä»…å¼€å‘å›°éš¾ï¼Œå¥–åŠ±å•Šæµ‹è¯•ã€å‘å¸ƒä¸Šçº¿éƒ½ä¼šæœ‰å¤§éº»çƒ¦&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;ä¸DevOpsæ€æƒ³è¿èƒŒï¼šå°±æ˜¯ç³»ç»Ÿå¯ä»¥é€šè¿‡ä¸€ç»„è¿‡ç¨‹ã€æ–¹æ³•æˆ–è€…æ˜¯ç³»ç»Ÿï¼Œæé«˜åº”ç”¨å‘å¸ƒå’Œè¿ç»´çš„æ•ˆç‡ï¼Œé™ä½ç®¡ç†æˆæœ¬&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;eurekaåšä»€ä¹ˆ&#34;&gt;Eurekaåšä»€ä¹ˆ&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¥½æ¯”æ˜¯æˆ¿äº§ä¸­ä»‹ï¼Œè´Ÿè´£ç®¡ç†ã€è®°å½•æœåŠ¡æä¾›è€…çš„ä¿¡æ¯ã€‚æœåŠ¡è°ƒç”¨è€…å°±æ— éœ€è‡ªå·±å»æ‰¾æœåŠ¡ï¼Œè€Œæ˜¯æŠŠè‡ªå·±çš„éœ€æ±‚å‘Šè¯‰Eurekaï¼Œç„¶åEurekaæŠŠç¬¦åˆä½ è¦æ±‚çš„æœåŠ¡å‘Šè¯‰ä½ &lt;/p&gt;
&lt;p&gt;åŒæ—¶ï¼ŒæœåŠ¡çš„æä¾›æ–¹ä¸Eurekaä¹‹é—´é€šè¿‡â€œå¿ƒè·³â€æœºåˆ¶è¿›è¡Œç›‘æ§ï¼Œå½“æŸä¸ªæœåŠ¡æä¾›æ–¹å‡ºç°é—®é¢˜ï¼ŒEurekaè‡ªç„¶ä¼šæŠŠå®ƒä»æœåŠ¡åˆ—è¡¨ä¸­å‰”é™¤&lt;/p&gt;
&lt;p&gt;&lt;code&gt;è¿™å°±å®ç°äº†æœåŠ¡çš„è‡ªåŠ¨æ³¨å†Œã€å‘ç°å’ŒçŠ¶æ€ç›‘æ§&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;eurekaæ³¨å†Œä¸­å¿ƒè¯´æ˜&#34;&gt;Eurekaæ³¨å†Œä¸­å¿ƒè¯´æ˜&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Eurekaçš„ä¸»è¦åŠŸèƒ½æ˜¯è¿›è¡ŒæœåŠ¡ç®¡ç†ï¼Œå®šæœŸæ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼Œè¿”å›æœåŠ¡åœ°å€åˆ—è¡¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591806137091.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;å…¥é—¨æ¡ˆä¾‹&#34;&gt;å…¥é—¨æ¡ˆä¾‹&lt;/h2&gt;
&lt;p&gt;1ã€åˆ›å»ºspringbooté¡¹ç›®å¹¶æ·»åŠ ä¾èµ–&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591806146598.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;2ã€åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ æ³¨è§£&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@SpringBootApplication
@EnableEurekaServer     //å£°æ˜å½“å‰åº”ç”¨æ˜¯eurekaæœåŠ¡
public class EurekaServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(EurekaServiceApplication.class, args);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€é…ç½®eureka&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;#ç«¯å£å·
server:
  port: 10086
spring:
  application:
    name: eureka-server   #åº”ç”¨åç§°ï¼Œä¼šåœ¨eurekaä¸­ä½œä¸ºæœåŠ¡çš„idæ ‡è¯†

#é…ç½®eurkea
eureka:
  client:
    service-url:
      defaultZone: http://127.0.0.1:10086/eureka
    register-with-eureka: false       #ä¸æ³¨å†Œè‡ªå·±ï¼Œé»˜è®¤å€¼æ˜¯trueï¼ˆå¦‚æœæ­å»ºeurekaé›†ç¾¤ï¼Œéœ€è¦ç›¸äº’ä¹‹é—´æ³¨å†Œï¼‰
    fetch-registry: false   #ä¸æ‹‰å–è‡ªå·±çš„æœåŠ¡åˆ—è¡¨

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4ã€å¯åŠ¨æœåŠ¡&lt;/p&gt;
&lt;p&gt;è®¿é—®ï¼šhttp://localhost:10086/&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;Eureka%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83.assets/15.png&#34; alt=&#34;15&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;æœåŠ¡æ³¨å†Œ&#34;&gt;æœåŠ¡æ³¨å†Œ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨å†ŒæœåŠ¡ï¼Œå°±æ˜¯åœ¨æœåŠ¡ä¸Šæ·»åŠ Eurekaçš„å®¢æˆ·ç«¯ä¾èµ–ï¼Œå®¢æˆ·ç«¯ä»£ç ä¼šè‡ªåŠ¨æŠŠæœåŠ¡æ³¨å†Œåˆ°EurekaServiceä¸­&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591806162495.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;æ·»åŠ ä¾èµ–&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- æ·»åŠ mapperçš„å¯åŠ¨å™¨ --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;tk.mybatis&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;mapper-spring-boot-starter&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;2.0.3&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;!-- lombok --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.projectlombok&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;lombok&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;1ã€ä¿®æ”¹å¯åŠ¨ç±»&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@SpringBootApplication
@MapperScan(basePackages = &amp;quot;com.kgc.mapper&amp;quot;)  //æ‰«æmapperåŒ…ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯tb.mybatis
@EnableEurekaClient     //å¼€å¯Eurekaå®¢æˆ·ç«¯å‘ç°åŠŸèƒ½
public class UserServiceApplication {

    public static void main(String[] args) {
        SpringApplication.run(UserServiceApplication.class, args);
    }

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;#ç«¯å£å·
server:
  port: 9091
#æ•°æ®æº
spring:
  datasource:
    driver-class-name: com.mysql.jdbc.Driver
    url: jdbc:mysql://localhost:3306/springcloud?useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;serverTimezone=Asia/Shanghai
    username: root
    password: root
  application:
    name: user-service   #åº”ç”¨å
#æ·»åŠ Eurekaæ³¨å†Œçš„é…ç½®
eureka:
  client:
    service-url:
      defaultZone: http://127.0.0.1:10086/eureka
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€æµ‹è¯•&lt;/p&gt;
&lt;p&gt;å¯åŠ¨user-serviceå·¥ç¨‹&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;Eureka%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83.assets/17.png&#34; alt=&#34;17&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;æœåŠ¡å‘ç°&#34;&gt;æœåŠ¡å‘ç°&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591806178141.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;1ã€ä¿®æ”¹å¯åŠ¨ç±»&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@SpringBootApplication
@EnableDiscoveryClient     //å¼€å¯Eureakå®¢æˆ·ç«¯
public class UserWebApplication {
    @Bean
    public RestTemplate restTemplate(){
        return new RestTemplate();
    }

    public static void main(String[] args) {
        SpringApplication.run(UserWebApplication.class, args);
    }

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;server:
  port: 8080
spring:
  application:
    name: user-web     #åº”ç”¨åç§°
eureka:
  client:
    service-url:
      defaultZone: http://127.0.0.1:10086/eureka    #eurekaSereråœ°å€
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€ä¿®æ”¹å¤„ç†å™¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package com.cn.controller;

import com.cn.pojo.User;
import com.netflix.appinfo.InstanceInfo;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cloud.client.ServiceInstance;
import org.springframework.cloud.client.discovery.DiscoveryClient;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;

import java.util.List;

@RestController
@RequestMapping(&amp;quot;/consumer&amp;quot;)
public class ConsumerController {
    @Autowired
    private RestTemplate restTemplate;
    //DiscoveryClientçš„ç”¨springCloudåŒ…ä¸­çš„
    @Autowired(required = false)
    private DiscoveryClient discoveryClient;

    @RequestMapping(&amp;quot;/{id}&amp;quot;)
    public User getByid(@PathVariable(&amp;quot;id&amp;quot;) Long id){
        /*
        //é€šè¿‡httpçš„æ–¹å¼å®ç°ç³»ç»Ÿä¹‹é—´çš„é€šè®¯
        String url = &amp;quot;http://localhost:9091/user/&amp;quot; + id;//è¿™ä¸ªæ˜¯user-serviceæä¾›çš„rest apié£æ ¼çš„æ¥å£
        User user = restTemplate.getForObject(url, User.class);
        return user;
         */
        //ä»eurekaServeræ³¨å†Œä¸­å¿ƒå»è·å–user-serviceçš„å®ä¾‹åˆ—è¡¨
        List&amp;lt;ServiceInstance&amp;gt; instancesList = discoveryClient.getInstances(&amp;quot;user-service&amp;quot;);
        //å› ä¸ºæˆ‘å°±ä¸€ä¸ªæœåŠ¡ï¼Œæ‰€ä»¥æˆ‘å°±æ‹¿é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå°±æˆ
        ServiceInstance serviceInstance = instancesList.get(0);
        //æœåŠ¡çš„resutApiæ¥å£
        String url = &amp;quot;http://&amp;quot; + serviceInstance.getHost() + &amp;quot;:&amp;quot; + serviceInstance.getPort() + &amp;quot;/user/&amp;quot; + id;
        return restTemplate.getForObject(url,User.class);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4ã€æµ‹è¯•&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591806191931.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;eureakæ€»ç»“&#34;&gt;Eureakæ€»ç»“&lt;/h2&gt;
&lt;p&gt;ä¸‰ä¸ªè§’è‰²&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœåŠ¡æ³¨å†Œä¸­å¿ƒ
&lt;ul&gt;
&lt;li&gt;Eurekaçš„æœåŠ¡ç«¯åº”ç”¨ï¼Œæä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°åŠŸèƒ½ï¼Œå°±æ˜¯æˆ‘ä»¬å»ºç«‹çš„eureka-server&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœåŠ¡æä¾›è€…
&lt;ul&gt;
&lt;li&gt;æä¾›æœåŠ¡çš„åº”ç”¨ï¼Œå¯ä»¥æ˜¯springBootåº”ç”¨ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ä»»æ„æŠ€æœ¯å®ç°ï¼Œåªè¦å¯¹å¤–æä¾›çš„æ˜¯Resté£æ ¼æœåŠ¡å°±å¯ã€‚å°±æ˜¯æˆ‘ä»¬å»ºç«‹çš„user-service&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœåŠ¡æ¶ˆè´¹è€…
&lt;ul&gt;
&lt;li&gt;æ¶ˆè´¹è€…åº”ç”¨å°±æ˜¯ä»æ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡åˆ—è¡¨ï¼Œä»è€Œå¾—çŸ¥æ¯ä¸ªæœåŠ¡æ”¾çš„ä¿¡æ¯ï¼ŒçŸ¥é“å»å“ªé‡Œè°ƒç”¨æœåŠ¡ï¼Œå°±æ˜¯æˆ‘ä»¬å»ºç«‹çš„user-web&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é«˜å¯ç”¨çš„eureka-server&#34;&gt;é«˜å¯ç”¨çš„Eureka Server&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬åªæœ‰ä¸€ä¸ªEureakï¼Œäº‹å®ä¸Šå¯ä»¥æ­å»ºä¸€ä¸ªé›†ç¾¤ï¼Œå½¢æˆä¸€ä¸ªé«˜å¯ç”¨çš„Eurekaæ³¨å†Œä¸­å¿ƒ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœåŠ¡åŒæ­¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¤šä¸ªEurekaServerä¹‹é—´ä¼šç›¸äº’æ³¨å†Œä¸ºæœåŠ¡ï¼Œå½“æœåŠ¡æä¾›è€…æ³¨å†Œåˆ°EurekaServerç»“ç¾¤ä¸­çš„æŸä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œè¯¥èŠ‚ç‚¹ä¼šæŠŠæœåŠ¡çš„ä¿¡æ¯åŒæ­¥åˆ°é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œä»è€Œå®ç°æ•°æ®çš„åŒæ­¥ï¼Œä¸€æ—¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‚æ‰äº†ï¼Œé‚£ä¹ˆå…¶ä»–çš„èŠ‚ç‚¹ä¾ç„¶èƒ½æä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°çš„åŠŸèƒ½&lt;/p&gt;
&lt;h3 id=&#34;1-ä¿®æ”¹eurekaserveré…ç½®&#34;&gt;1ã€ä¿®æ”¹EurekaServeré…ç½®&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;#ç«¯å£å·
server:
  port: ${port:10086}
spring:
  application:
    name: eureka-server   #åº”ç”¨åç§°ï¼Œä¼šåœ¨eurekaä¸­ä½œä¸ºæœåŠ¡çš„idæ ‡è¯†

#é…ç½®eurkea
eureka:
  client:
    service-url:
      defaultZone: ${defualtZone:http://127.0.0.1:10086/eureka}
    #register-with-eureka: false       #ä¸æ³¨å†Œè‡ªå·±ï¼Œé»˜è®¤å€¼æ˜¯trueï¼ˆå¦‚æœæ­å»ºeurekaé›†ç¾¤ï¼Œéœ€è¦ç›¸äº’ä¹‹é—´æ³¨å†Œï¼‰
    #fetch-registry: false   #ä¸æ‹‰å–è‡ªå·±çš„æœåŠ¡åˆ—è¡¨
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€ä¿®æ”¹å¯åŠ¨é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;8&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591806205847.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;3ã€å¤åˆ¶ä¸€ä»½å¹¶ä¿®æ”¹VM options&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;9&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591806216118.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;4ã€å¯åŠ¨eurekaé›†ç¾¤&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;10&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591806227522.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;æœåŠ¡æ³¨å†Œeurekaé›†ç¾¤&#34;&gt;æœåŠ¡æ³¨å†ŒEurekaé›†ç¾¤&lt;/h2&gt;
&lt;p&gt;å› ä¸ºEurekaä¸æ­¢ä¸€ä¸ªï¼Œä¿®æ”¹user-serviceå…³äºæ³¨å†Œä¸­å¿ƒçš„é…ç½®&lt;/p&gt;
&lt;p&gt;æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šæ£€æµ‹é…ç½®å±æ€§ä¸­&lt;code&gt;eureka.client.register-with-eureka=true&lt;/code&gt;å‚æ•°æ˜¯å¦æ­£ç¡®ï¼Œäº‹å®ä¸Šé»˜è®¤æ˜¯trueï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡æœ‰é…ç½®ï¼Œå¦‚æœå€¼ç¡®å®æ˜¯trueï¼Œåˆ™ä¼šå‘EurekaServerå‘èµ·ä¸€ä¸ªRestè¯·æ±‚ï¼Œå¹¶ä¸”æºå¸¦è‡ªå·±çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ŒEurekaServerä¼šæŠŠè¿™äº›ä¿¡æ¯ä¿å­˜åˆ°ä¸€ä¸ªåŒå±‚çš„Mapç»“æ„ä¸­&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€å±‚Mapçš„keyå°±æ˜¯æœåŠ¡çš„idï¼Œä¸€èˆ¬å°±æ˜¯é…ç½®&lt;code&gt;spring.applicaton.name&lt;/code&gt;å±æ€§&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒå±‚Mapçš„keyå°±æ˜¯æœåŠ¡çš„å®ä¾‹idï¼Œä¸€èˆ¬host + serviceId + portï¼Œä¾‹å¦‚ï¼šlocalhost:user-service:9091&lt;/li&gt;
&lt;li&gt;å€¼åˆ™æ˜¯æœåŠ¡çš„å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥åŒæ—¶å¯åŠ¨å¤šä¸ªä¸åŒçš„å®ä¾‹ï¼Œå½¢æˆé›†ç¾¤&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é»˜è®¤æ³¨å†Œçš„æ—¶å€™æ˜¯ä¸»æœºåæˆ–è€…æ˜¯localhostï¼Œå¦‚æœæƒ³ç”¨ipè¿›è¡Œæ³¨å†Œï¼Œå¯ä»¥åœ¨&lt;code&gt;user-server&lt;/code&gt; ä¸­æ·»åŠ é…ç½®&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;#ç«¯å£å·
server:
  port: 9091
#æ•°æ®æº
spring:
  datasource:
    driver-class-name: com.mysql.jdbc.Driver
    url: jdbc:mysql://localhost:3306/springcloud?useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;serverTimezone=Asia/Shanghai
    username: root
    password: root
  application:
    name: user-service   #åº”ç”¨å
#æ·»åŠ Eurekaæ³¨å†Œçš„é…ç½®
eureka:
  client:
    service-url:  #EurekaServeråœ°å€ï¼Œå¤šä¸ªåœ°å€ä¹‹é—´ç”¨é€—å·åˆ†éš”
      defaultZone: http://127.0.0.1:10086/eureka,http://127.0.0.1:10087/eureka
  instance:
    ip-address: 127.0.0.1    #ipåœ°å€
    prefer-ip-address: true  #æ›´å€¾å‘äºä½¿ç”¨ipï¼Œè€Œä¸æ˜¯hostå    
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹å®Œæˆåé‡å¯&lt;code&gt;user-server&lt;/code&gt;å·¥ç¨‹å’Œ&lt;code&gt;user-web&lt;/code&gt;å·¥ç¨‹&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼Œå…ˆå…³æ‰10086ï¼Œç„¶ååœ¨æµ‹è¯•æ˜¯å¦èƒ½æ­£å¸¸é€šè®¯&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å¤±æ•ˆçš„å‰”é™¤å’Œè‡ªæˆ‘ä¿æŠ¤&#34;&gt;å¤±æ•ˆçš„å‰”é™¤å’Œè‡ªæˆ‘ä¿æŠ¤&lt;/h2&gt;
&lt;p&gt;æœåŠ¡ç»­çº¦&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨æ³¨å†ŒæœåŠ¡å®Œæˆä»¥åï¼ŒæœåŠ¡æä¾›è€…ä¼šæŒç»­ä¸€ä¸ªå¿ƒè·³ï¼ˆå®šæ—¶å‘EurekaServerå‘èµ·Restè¯·æ±‚ï¼‰ï¼Œå‘Šè¯‰EurekaServerï¼šâ€œæˆ‘è¿˜æ´»ç€â€ï¼Œè¿™ä¸ªæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºæœåŠ¡çš„ç»­çº¦(renew)ï¼›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‘user-serverå·¥ç¨‹é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;#æ·»åŠ Eurekaæ³¨å†Œçš„é…ç½®
eureka:
  client:
    service-url:  #EurekaServeråœ°å€ï¼Œå¤šä¸ªåœ°å€ä¹‹é—´ç”¨é€—å·åˆ†éš”
      defaultZone: http://127.0.0.1:10086/eureka,http://127.0.0.1:10087/eureka
  instance:
    ip-address: 127.0.0.1    #ipåœ°å€
    prefer-ip-address: true  #æ›´å€¾å‘äºä½¿ç”¨ipï¼Œè€Œä¸æ˜¯hostå
    lease-expiration-duration-in-seconds: 5 #æœåŠ¡ç»­çº¦çš„æ—¶é—´é—´éš”ï¼Œé»˜è®¤æ˜¯30ç§’ï¼Œç°åœ¨æˆ‘è¿™é‡Œè®¾ç½®ä¸º5ç§’
    lease-renewal-interval-in-seconds: 5  #æœåŠ¡å¤±æ•ˆæ—¶é—´ï¼Œé»˜è®¤æ˜¯90ç§’ï¼Œæˆ‘è¿™é‡Œè®¾ç½®ä¸º5ç§’
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯ä¸ª30ç§’æœåŠ¡ä¼šå‘æ³¨å†Œä¸­å¿ƒå‘é€ä¸€æ¬¡å¿ƒè·³ï¼Œè¯æ˜è‡ªå·±è¿˜æ´»ç€ï¼Œå¦‚æœè¶…è¿‡90ç§’è¿˜æ²¡æœ‰å‘é€å¿ƒè·³ï¼ŒEurekaServerå°±ä¼šè®¤ä¸ºè¯¥æœåŠ¡å·²ç»å®•æœºï¼Œä¼šå®šæ—¶ä»æœåŠ¡åˆ—è¡¨ä¸­ç§»é™¤ï¼Œè¿™ä¸¤ä¸ªå€¼åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸è¦ä¿®æ”¹ï¼ˆæˆ‘è¿™é‡Œä¿®æ”¹æ˜¯ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœåŠ¡ä¸‹çº¿&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å½“æœåŠ¡è¿›è¡Œæ­£å¸¸å…³é—­æ“ä½œçš„æ—¶å€™ï¼Œå®ƒä¼šè§¦å‘ä¸€ä¸ªæœåŠ¡ä¸‹çº¿çš„RESTè¯·æ±‚ç»™EurekaSeverï¼Œå‘Šè¯‰æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼šâ€œæˆ‘è¦ä¸‹çº¿äº†â€ã€‚æœåŠ¡ä¸­å¿ƒæ¥æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œä¼šè®²è¯¥æœåŠ¡ç½®ä¸ºä¸‹çº¿çŠ¶æ€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¤±æ•ˆå‰”é™¤&lt;/p&gt;
&lt;p&gt;è‡ªæˆ‘ä¿æŠ¤&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘ä»¬å…³åœä¸€ä¸ªæœåŠ¡ï¼Œå¾ˆå¯èƒ½ä¼šåœ¨eurekaé¢æ¿å‡ºç°ä¸€æ¡è­¦å‘Šï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;11&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591806244663.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™ä¸ªå°±æ˜¯eurekaçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‚å½“æœåŠ¡æœªæŒ‰æ—¶è¿›è¡Œå¿ƒè·³ç»­çº¦ï¼ŒEurekaä¼šç»Ÿè®¡æœåŠ¡å®ä¾‹æœ€è¿‘15åˆ†é’Ÿå¿ƒè·³ç»­çº¦çš„æ¯”ä¾‹æ˜¯å¦ä½äº85%ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå› ä¸ºç½‘ç»œå»¶è¿Ÿç­‰åŸå› ï¼Œå¿ƒè·³å¤±è´¥å®ä¾‹çš„æ¯”ä¾‹å¾ˆæœ‰å¯èƒ½ä¼šè¶…æ ‡ï¼Œä½†æ˜¯æ­¤æ—¶å°±æŠŠæœåŠ¡å‰”é™¤åˆ—è¡¨å¹¶ä¸å¦¥å½“ï¼Œå› ä¸ºæœåŠ¡å¹¶æ²¡æœ‰å®•æœºã€‚Eruekaåœ¨è¿™æ®µæ—¶é—´å†…ä¸ä¼šå‰”é™¤ä»»ä½•æœåŠ¡å®ä¾‹ï¼Œç›´åˆ°ç½‘ç»œæ¢å¤æ­£å¸¸ã€‚ç”Ÿäº§ç¯å¢ƒä¸‹è¿™å¾ˆæœ‰æ•ˆ,å› æ­¤æœåŠ¡è°ƒç”¨è€…å¿…é¡»åšå¥½æœåŠ¡çš„å¤±è´¥å®¹é”™&lt;/p&gt;
&lt;p&gt;å¯ä»¥å…³é—­è‡ªæˆ‘ä¿æŠ¤ï¼ˆç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œåƒä¸‡åˆ«å¹²è¿™äº‹ï¼ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;#é…ç½®eurkea
eureka:
  client:
    service-url:
      defaultZone: ${defualtZone:http://127.0.0.1:10086/eureka}
    #register-with-eureka: false       #ä¸æ³¨å†Œè‡ªå·±ï¼Œé»˜è®¤å€¼æ˜¯trueï¼ˆå¦‚æœæ­å»ºeurekaé›†ç¾¤ï¼Œéœ€è¦ç›¸äº’ä¹‹é—´æ³¨å†Œï¼‰
    #fetch-registry: false   #ä¸æ‹‰å–è‡ªå·±çš„æœåŠ¡åˆ—è¡¨
  server:
    enable-self-preservation: false  #å…³é—­è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼(ç¼ºçœä¸ºæ‰“å¼€)
&lt;/code&gt;&lt;/pre&gt;
">Eureka</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/chu-shi-springcloud/"" data-c="
          &lt;h2 id=&#34;ç³»ç»Ÿæ¶æ„çš„æ¼”å˜&#34;&gt;ç³»ç»Ÿæ¶æ„çš„æ¼”å˜&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;éšç€äº’è”ç½‘çš„å‘å±•ï¼Œç½‘ç«™çš„åº”ç”¨è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼Œéœ€æ±‚çš„æ¿€å¢ï¼Œå¸¦æ¥çš„æ˜¯æŠ€æœ¯ä¸Šçš„å‹åŠ›ã€‚ç³»ç»Ÿæ¶æ„ä¹Ÿå› æ­¤åœ¨ä¸æ–­çš„æ¼”å˜ã€å‡çº§ã€è¿­ä»£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591797493895.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;é›†ä¸­å¼æ¶æ„&#34;&gt;é›†ä¸­å¼æ¶æ„&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å½“ç½‘ç«™æµé‡å¾ˆå°çš„æ—¶å€™ï¼Œåªéœ€è¦ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰çš„åŠŸèƒ½éƒ½éƒ¨ç½²åˆ°ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591797514846.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šç³»ç»Ÿå¼€å‘é€Ÿåº¦å¿«ï¼Œç»´æŠ¤æˆæœ¬ä½ï¼Œé€‚åˆå¼€å‘å¹¶å‘è¦æ±‚è¾ƒä½çš„ç³»ç»Ÿ&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šå•ç‚¹å®¹é”™ç‡ä½ï¼Œå¹¶å‘èƒ½åŠ›å·®&lt;/p&gt;
&lt;h3 id=&#34;å‚ç›´åº”ç”¨æ¶æ„&#34;&gt;å‚ç›´åº”ç”¨æ¶æ„&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ä¸€åº”ç”¨æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæ­¤æ—¶ä¸ºäº†åº”å¯¹æ›´é«˜çš„å¹¶å‘å’Œä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬æ ¹æ®ä¸šåŠ¡åŠŸèƒ½å¯¹ç³»ç»Ÿè¿›è¡Œæ‹†åˆ†ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591797530176.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿæ‹†åˆ†å®ç°äº†æµé‡åˆ†æ‹…ï¼Œè§£å†³äº†å¹¶å‘é—®é¢˜&lt;/p&gt;
&lt;p&gt;å¯ä»¥é’ˆå¯¹ä¸åŒçš„æ¨¡å—è¿›è¡Œä¼˜åŒ–&lt;/p&gt;
&lt;p&gt;æ–¹ä¾¿æ°´å¹³æ‰©å±•ï¼Œè´Ÿè½½å‡è¡¡ï¼Œå®¹é”™ç‡é«˜&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šç³»ç»Ÿä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå¼€å‘ä¸­ä¼šæœ‰å¾ˆå¤šé‡å¤ä»£ç ï¼Œå½±å“å¼€å‘æ•ˆç‡&lt;/p&gt;
&lt;h3 id=&#34;åˆ†å¸ƒå¼æœåŠ¡&#34;&gt;åˆ†å¸ƒå¼æœåŠ¡&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œæ˜¯å‰æ®µåº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å½±å“å¤šå˜çš„å¸‚åœºéœ€æ±‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591797545349.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šå°†åŸºç¡€æœåŠ¡è¿›è¡Œäº†æŠ½å–ï¼Œç³»ç»Ÿä¹‹é—´äº’ç›¸é€šç”¨ï¼Œæé«˜äº†ä»£ç çš„é‡ç”¨æ€§å’Œå¼€å‘æ•ˆç‡&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šç³»ç»Ÿä¹‹é—´è€¦åˆè¾ƒé«˜ï¼Œè°ƒç”¨å…³ç³»å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤&lt;/p&gt;
&lt;h3 id=&#34;é¢å‘æœåŠ¡æ¶æ„&#34;&gt;é¢å‘æœåŠ¡æ¶æ„&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;SOA(Service Oriented Architecure)é¢å‘æœåŠ¡çš„æ¶æ„ï¼šå®ƒæ˜¯ä¸€ç§è®¾è®¡æ–¹æ³•ï¼Œå…¶ä¸­åŒ…å«äº†å¤šä¸ªæœåŠ¡ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´é€šè¿‡äº’ç›¸ä¾èµ–æœ€ç»ˆæä¾›ä¸€ç³»åˆ—çš„åŠŸèƒ½ã€‚ä¸€ä¸ªæœåŠ¡é€šå¸¸ä»¥ç‹¬ç«‹çš„å½¢å¼å­˜åœ¨ä¸æ“ä½œç³»ç»Ÿè¿›è¡Œä¸­ï¼Œå„ä¸ªæœåŠ¡ä¹‹é—´é€šè¿‡ç½‘ç»œè°ƒç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591797558773.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ESB(ä¼ä¸šæœåŠ¡æ€»çº¿)ï¼šç®€å•çš„è¯´ESBå°±æ˜¯ä¸€æ ¹ç®¡é“ï¼Œç”¨æ¥è¿æ¥å„ä¸ªæœåŠ¡èŠ‚ç‚¹ï¼Œä¸ºäº†ç»§æ‰¿ä¸åŒç³»ç»Ÿï¼Œä¸åŒåè®®çš„æœåŠ¡ï¼ŒESBåšäº†æ¶ˆæ¯çš„è½¬æ¢è§£é‡Šå’Œè·¯ç”±å·¥ä½œï¼Œè®©ä¸åŒçš„æœåŠ¡äº’è”äº’é€š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;SOAç¼ºç‚¹&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¯ä¸ªä¾›åº”å•†çš„ESBäº§å“æœ‰åå·®ï¼Œè‡ªèº«å®ç°è¾ƒä¸ºå¤æ‚ï¼›åº”ç”¨æœåŠ¡ç²’åº¦è¾ƒå¤§ï¼ŒESBç»§æ‰¿æ•´åˆæ‰€æœ‰çš„æœåŠ¡å’Œåè®®ï¼Œæ•°æ®è½¬æ¢ä½¿å¾—è¿ç»´ã€æµ‹è¯•å’Œéƒ¨ç½²æ¯”è¾ƒå›°éš¾ï¼Œæ‰€æœ‰çš„æœåŠ¡éƒ½é€šè¿‡ä¸€ä¸ªé€šè·¯é€šè®¯ï¼Œç›´æ¥é™ä½äº†é€šä¿¡é€Ÿåº¦&lt;/p&gt;
&lt;p&gt;(dubboè¦æ¯”è¿™ä¸ªä¼˜åŒ–ï¼Œç³»ç»Ÿä¹‹é—´é€šè®¯é‡‡ç”¨RPCè¿™ç§æ–¹å¼ï¼Œè¿™ç§æ–¹å¼æ˜¯ç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;å¾®æœåŠ¡æ¶æ„&#34;&gt;å¾®æœåŠ¡æ¶æ„&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¾®æœåŠ¡æ¶æ„æ˜¯ä½¿ç”¨&lt;code&gt;ä¸€å¥—å°æœåŠ¡å¼€å‘å•ä¸ªåº”ç”¨çš„æ–¹å¼æˆ–é€”å¾„&lt;/code&gt;ï¼Œæ¯ä¸ªæœåŠ¡åŸºäºå•ä¸€ä¸šåŠ¡èƒ½åŠ›æ„å»ºï¼ˆèŒèƒ½å•ä¸€ï¼‰ï¼Œè¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼Œå¹¶ä½¿ç”¨è½»é‡çº§æœºåˆ¶é€šä¿¡ï¼Œé€šå¸¸æ˜¯Http APIï¼Œå¹¶èƒ½å¤Ÿé€šè¿‡è‡ªåŠ¨åŒ–éƒ¨ç½²æœºåˆ¶æ¥ç‹¬ç«‹éƒ¨ç½²ï¼Œè¿™äº›æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ï¼Œä»¥åŠä¸åŒçš„æ•°æ®å­˜å‚¨æŠ€æœ¯ï¼Œå¹¶ä¿æŒæœ€ä½çš„é›†ä¸­å¼ç®¡ç†&lt;/p&gt;
&lt;p&gt;(dubboï¼šä½¿ç”¨RPCåè®®é€šè®¯ï¼Œé‡‡ç”¨çš„å°±æ˜¯äºŒè¿›åˆ¶é€šè®¯ï¼Œå¦‚æœè¦ä½¿ç”¨dubboå®ç°ç³»ç»Ÿä¹‹é—´çš„é€šè®¯ï¼Œå¿…é¡»ä¿è¯é¡¹ç›®æ˜¯javaè¯­è¨€å¼€å‘çš„ã€‚dubboæ˜¯ä¸èƒ½å®ç°è·¨è¯­è¨€å¹³å°é€šè®¯&lt;/p&gt;
&lt;p&gt;dubboxï¼šåæ¥æ˜¯å½“å½“ç½‘å¯¹å®ƒè¿›è¡Œå‡çº§ï¼Œè®©dubboåœ¨æ”¯æŒRPCçš„åŒæ—¶ï¼Œä¹Ÿæ”¯æŒHttp APIï¼ˆRestAPIï¼‰é€šè®¯ )&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1591797585782.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;API Gateway: ç½‘å…³æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæ˜¯ç³»ç»Ÿçš„å”¯ä¸€å…¥å£ï¼Œä¸ºæ¯ä¸ªå®¢æˆ·ç«¯æä¾›äº†ä¸€ä¸ªå®šåˆ¶çš„APIã€‚APIç½‘å…³æ ¸å¿ƒæ˜¯ï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯å’Œæ¶ˆè´¹ç«¯éƒ½é€šè¿‡ç»Ÿä¸€çš„ç½‘å…³ä»‹å…¥å¾®æœåŠ¡ï¼Œåœ¨ç½‘ç®¡å±‚å¤„ç†æ‰€æœ‰çš„éä¸šåŠ¡åŠŸèƒ½ã€‚å¦‚å®ƒè¿˜å¯ä»¥å…·æœ‰å…¶ä»–èŒè´£ï¼šèº«ä»½éªŒè¯ã€ç›‘æ§ã€è´Ÿè½½å‡è¡¡ã€ç¼“å­˜ã€è¯·æ±‚åˆ†ç‰‡ä¸ç®¡ç†ã€‚é€šå¸¸ç½‘å…³æä¾›RESTFUL/httpçš„æ–¹å¼è®¿é—®æœåŠ¡ï¼Œè€ŒæœåŠ¡ç«¯é€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒè¿›è¡ŒæœåŠ¡æ³¨å†Œå’Œç®¡ç†&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;å¾®æœåŠ¡ç‰¹ç‚¹&#34;&gt;å¾®æœåŠ¡ç‰¹ç‚¹&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å•ä¸€èŒè´£ï¼šå¾®æœåŠ¡ä¸­æ¯ä¸ªæœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›,åšåˆ°å•ä¸€èŒè´£&lt;/li&gt;
&lt;li&gt;å¾®ï¼šå¾®æœåŠ¡çš„æœåŠ¡æ‹†åˆ†ç²’åº¦å¾ˆå°ï¼Œä¾‹å¦‚ä¸€ä¸ªç”¨æˆ·ç®¡ç†å°±å¯ä»¥ä½œä¸ºä¸€ä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è™½ç„¶å°ï¼Œä½†æ˜¯â€œäº”è„ä¿±å…¨â€&lt;/li&gt;
&lt;li&gt;é¢å‘æœåŠ¡ï¼šæ¯ä¸ªæœåŠ¡éƒ½è¦å¯¹å¤–æš´æ¼Resté£æ ¼æœåŠ¡æ¥å£APIã€‚å¹¶ä¸å…³å¿ƒæœåŠ¡çš„æŠ€æœ¯å®ç°ï¼Œåšåˆ°ä¸å¹³å°å’Œè¯­è¨€æ— å…³ï¼Œä¹Ÿä¸é™å®šç”¨ä»€ä¹ˆæŠ€æœ¯å®ç°ï¼Œåªè¦æä¾›Restçš„æ¥å£å³å¯&lt;/li&gt;
&lt;li&gt;è‡ªæ²»ï¼šæœåŠ¡ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°
&lt;ul&gt;
&lt;li&gt;å›¢é˜Ÿç‹¬ç«‹ï¼šæ¯ä¸ªæœåŠ¡éƒ½å¯ä»¥ä¸€ä¸ªç‹¬ç«‹çš„å›¢é˜Ÿå¼€å‘ï¼Œäººæ•°ä¸èƒ½è¿‡å¤š&lt;/li&gt;
&lt;li&gt;æŠ€æœ¯ç‹¬ç«‹ï¼šé¢å‘çš„æ˜¯æœåŠ¡ï¼Œæä¾›Restæ¥å£ï¼Œä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ²¡æœ‰äººå¹²æ¶‰&lt;/li&gt;
&lt;li&gt;å‰åç«¯åˆ†ç¦»ï¼šé‡‡ç”¨å‰åç«¯åˆ†ç¦»å¼€å‘ï¼Œæä¾›ç»Ÿä¸€Restæ¥å£ï¼Œåç«¯ä¸ç”¨å†ä¸ºPCã€ç§»åŠ¨ç«¯å¼€å‘ä¸åŒçš„æ¥å£&lt;/li&gt;
&lt;li&gt;éƒ¨ç½²ç‹¬ç«‹ï¼šæœåŠ¡ä¹‹é—´è™½ç„¶æœ‰è°ƒç”¨ï¼Œä½†æ˜¯è¦åšåˆ°æœåŠ¡å™¨é‡å¯ä¸å½±å“å…¶ä»–çš„æœåŠ¡å™¨ã€‚æœ‰åˆ©äºæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ã€‚æ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹çš„ç»„ä»¶ï¼Œå¯ä»¥å¤ç”¨ã€å¯ä»¥æ›¿æ¢ã€é™ä½äº†è€¦åˆåº¦ï¼Œæ˜“äºç»´æŠ¤&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;äº’è”ç½‘ç²¾ç¥ï¼šå…ˆä¸Šçº¿ï¼Œåè¿­ä»£&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¾®æœåŠ¡æ¶æ„ä¸SOAéƒ½æ˜¯å¯¹ç³»ç»Ÿè¿›è¡Œäº†æ‹†åˆ†ï¼›å¾®æœåŠ¡æ¶æ„å¸ˆåŸºäºSOAæ€æƒ³ï¼Œå¯ä»¥æŠŠå¾®æœåŠ¡å½“ä½œå»é™¤äº†ESBæ€»çº¿çš„SOAã€‚ESBæ˜¯SOAæ¶æ„ä¸­çš„ä¸­å¿ƒæ€»çº¿&lt;/p&gt;
&lt;h2 id=&#34;æœåŠ¡è°ƒç”¨æ–¹å¼&#34;&gt;æœåŠ¡è°ƒç”¨æ–¹å¼&lt;/h2&gt;
&lt;h3 id=&#34;å¸¸è§çš„è¿œç¨‹è°ƒç”¨æ–¹å¼&#34;&gt;å¸¸è§çš„è¿œç¨‹è°ƒç”¨æ–¹å¼&lt;/h3&gt;
&lt;h4 id=&#34;1-rpc&#34;&gt;1ã€RPC&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;Remote Produce Callã€‚åŸºäºSocketçš„é€šè®¯ï¼ˆæ˜¯ç”¨æœ€åº•å±‚çš„æ–¹å¼æ¥å®ç°é€šè®¯ï¼Œé‡‡ç”¨äºŒè¿›åˆ¶çš„å½¢å¼ï¼Œé€šè®¯çš„æ•ˆç‡æœ€é«˜çš„ï¼‰ã€‚å·¥ä½œåœ¨ä¼šè¯å±‚ã€‚è‡ªå®šä¹‰æ•°æ®æ ¼å¼ï¼Œé€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜ã€‚æ—©æœŸçš„webserviceï¼Œç°åœ¨çƒ­é—¨çš„dubboxï¼Œéƒ½æ˜¯RPCçš„å…¸å‹ä»£è¡¨ï¼ˆåªèƒ½æ˜¯javaè¯­è¨€ç¼–å†™çš„æœåŠ¡ä¹‹é—´é€šè®¯ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;2-http&#34;&gt;2ã€Http&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;httpå…¶å®æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼ŒåŸºäºTCPï¼Œå·¥ä½œåœ¨åº”ç”¨å±‚ï¼Œè§„å®šäº†æ•°æ®ä¼ è¾“çš„æ ¼å¼ã€‚ç°åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸æœåŠ¡å™¨é€šè®¯åŸºæœ¬ä¸Šéƒ½æ˜¯é‡‡ç”¨çš„httpåè®®ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œè¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚ç¼ºç‚¹æ˜¯æ¶ˆæ¯å°è£…è‡ƒè‚¿ï¼Œä¼˜åŠ¿æ˜¯å¯¹æœåŠ¡çš„æä¾›å’Œè°ƒç”¨æ–¹æ²¡æœ‰ä»»ä½•æŠ€æœ¯é™å®šï¼ˆå¯ä»¥è·¨è¯­è¨€ï¼‰ï¼Œè‡ªç”±çµæ´»ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡çš„ç†å¿µ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœä½ ä»¬çš„å…¬å¸å…¨éƒ¨é‡‡ç”¨çš„javaæŠ€æœ¯æ ˆï¼Œé‚£ä¹ˆä½¿ç”¨dubboä½œä¸ºå¾®æœåŠ¡æ¶æ„å¸ˆä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸åå¦‚æœå…¬å¸çš„æŠ€æœ¯æ ˆå¤šæ ·åŒ–ï¼Œè€Œä¸”ä½ æ›´åŠ é’çäºSpringå®¶æ—ï¼Œé‚£ä¹ˆSpringCloudæ­å»ºå¾®æœåŠ¡å°±æ˜¯ä¸äºŒé€‰æ‹©ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œä¼šæ‰€é€‰æ‹©SpringCloudå¥—ä»¶ï¼Œå› æ­¤ä¼šä½¿ç”¨httpæ–¹å¼æ¥å®ç°å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;httpå®¢æˆ·ç«¯å·¥å…·&#34;&gt;Httpå®¢æˆ·ç«¯å·¥å…·&lt;/h3&gt;
&lt;p&gt;æ—¢ç„¶å¾®æœåŠ¡é€‰æ‹©äº†httpï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è€ƒè™‘è‡ªå·±æ¥å®ç°å¯¹è¯·æ±‚å’Œå“åº”çš„å¤„ç†ï¼Œä¸è¿‡å¼€æºä¸–ç•Œå·²ç»æœ‰å¾ˆå¤šçš„httpå®¢æˆ·ç«¯å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åšè¿™äº›äº‹æƒ…ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HttpClient&lt;/li&gt;
&lt;li&gt;OkHttp&lt;/li&gt;
&lt;li&gt;URLConnection&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»–ä»¬ä¹‹é—´çš„APIå„ä¸ç›¸åŒï¼Œè€Œspringä¹Ÿæœ‰å¯¹httpçš„å®¢æˆ·ç«¯å·¥å…·è¿›è¡Œäº†å°è£…ï¼ˆè¿™ä¸‰ç§éƒ½æœ‰ï¼‰ï¼Œæä¾›äº†å·¥å…·ç±»ï¼šRestTemplate&lt;/p&gt;
&lt;h3 id=&#34;springçš„resttemplate&#34;&gt;Springçš„RestTemplate&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨springæä¾›çš„ä¸€ä¸ªRestTemplateæ¥å®ç°httpçš„äº¤äº’&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åˆ›å»ºspringbooté¡¹ç›®&lt;/p&gt;
&lt;h4 id=&#34;1-åˆ›å»ºä¸šåŠ¡é€»è¾‘å±‚user-service&#34;&gt;1ã€åˆ›å»ºä¸šåŠ¡é€»è¾‘å±‚(user-service)&lt;/h4&gt;
&lt;p&gt;ä¾èµ–&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- mapperå¯åŠ¨å™¨(å‡†å¤‡ä½¿ç”¨mybatisä½œä¸ºæŒä¹…å±‚) --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;tk.mybatis&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;mapper-spring-boot-starter&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;2.0.3&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;!-- mysqlé©±åŠ¨ --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;mysql&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;mysql-connector-java&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;!-- ä¸ºäº†å¼€å‘æ–¹ä¾¿ï¼Œæˆ‘è¿™é‡Œå¼•å…¥lombok --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.projectlombok&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;lombok&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;pojo&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Data
@Table(name = &amp;quot;tb_user&amp;quot;)
public class User {
    @Id
    @KeySql(useGeneratedKeys = true)
    private Long id;
    private String userName;        /*ç”¨æˆ·å*/
    private String password;        /*å¯†ç */
    private String name;            /*å§“å*/
    private Integer age;            /*å¹´é¾„*/
    private Integer sex;            /*æ€§åˆ«ï¼Œ1ç”·æ€§ï¼Œ2å¥³æ€§*/
    private Date birthday;          /*ç”Ÿæ—¥*/
    private String note;            /*å¤‡æ³¨*/
    private Date created;           /*åˆ›å»ºæ—¶é—´*/
    private Date updated;           /*ä¿®æ”¹æ—¶é—´*/
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;mapperæ¥å£&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;import tk.mybatis.mapper.common.Mapper;
public interface UserMapper extends Mapper&amp;lt;User&amp;gt; {
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨å¯åŠ¨ç±»ä¸­æ‰«æmapper&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@SpringBootApplication
@MapperScan(basePackages = &amp;quot;com.cn.mapper&amp;quot;)
public class UserServiceApplication {
   
    public static void main(String[] args) {
        SpringApplication.run(UserServiceApplication.class, args);
    }

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;service&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public interface UserService {
    /**
     * æ ¹æ®ä¸»é”®æŸ¥è¯¢å¯¹è±¡
     * @param id     ä¸»é”®
     * @return       å¯¹è±¡
     */
    User getUserById(Long id);
}
-------------
@Service
public class UserServiceImpl implements UserService {
    @Autowired(required = false)
    private UserMapper userMapper;

    @Override
    public User getUserById(Long id) {
        return userMapper.selectByPrimaryKey(id);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç¼–å†™æ§åˆ¶å±‚æä¾›Rstfulæ¥å£&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RestController
@RequestMapping(&amp;quot;/user&amp;quot;)
public class UserContorller {
    @Autowired
    private UserService userService;

    @RequestMapping(&amp;quot;/{id}&amp;quot;)
    public User getById(@PathVariable(&amp;quot;id&amp;quot;) Long id){
        return userService.getUserById(id);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€åˆ›å»ºè¡¨ç°å±‚ï¼ˆuser-webï¼‰&lt;/p&gt;
&lt;p&gt;pojoï¼šåŒä¸Š&lt;/p&gt;
&lt;p&gt;å¯åŠ¨ç±»é…ç½®RestTemplate&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@SpringBootApplication
public class UserWebApplication {
    @Bean
    public RestTemplate restTemplate(){
        return new RestTemplate();
    }
    public static void main(String[] args) {
        SpringApplication.run(UserWebApplication.class, args);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;import com.cn.pojo.User;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;

@RestController
@RequestMapping(&amp;quot;/consumer&amp;quot;)
public class ConsumerController {
    @Autowired
    private RestTemplate restTemplate;
    @RequestMapping(&amp;quot;/{id}&amp;quot;)
    public User getByid(@PathVariable(&amp;quot;id&amp;quot;) Long id){
        //é€šè¿‡httpçš„æ–¹å¼å®ç°ç³»ç»Ÿä¹‹é—´çš„é€šè®¯
        String url = &amp;quot;http://localhost:9091/user/&amp;quot; + id;//è¿™ä¸ªæ˜¯user-serviceæä¾›çš„rest apié£æ ¼çš„æ¥å£
        User user = restTemplate.getForObject(url, User.class);
        return user;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šé¢çš„æ“ä½œæˆ‘ä»¬æ˜¯ä½¿ç”¨user-serviceå¯¹å¤–æä¾›äº†æ ¹æ®ä¸»é”®æŸ¥è¯¢ç”¨æˆ·çš„æ¥å£ï¼Œç„¶ååœ¨user-webé€šè¿‡RestTemplateè°ƒç”¨serviceçš„æ¥å£&lt;/p&gt;
&lt;p&gt;è¿™æ ·å†™ä¼šå­˜åœ¨ç¡¬ç¼–ç çš„é—®é¢˜ï¼Œä¸æ–¹ä¾¿åæœŸç»´æŠ¤ï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦è®°ä½urlçš„åœ°å€ï¼Œå¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œæ”¶ä¸åˆ°é€šçŸ¥ï¼Œåœ°å€å°†ä¼šå¤±æ•ˆ&lt;/p&gt;
&lt;p&gt;webå±‚å¹¶ä¸çŸ¥é“serviceå±‚çš„çŠ¶æ€ï¼Œä¾‹å¦‚æœåŠ¡å™¨å®•æœº&lt;/p&gt;
&lt;p&gt;serviceå±‚ä¹Ÿåªæœ‰ä¸€å°ï¼Œä¸å…·å¤‡é«˜å¯ç”¨&lt;/p&gt;
&lt;p&gt;å³ä¾¿æ˜¯serviceæ­å»ºæˆäº†é›†ç¾¤ï¼Œwebè¿˜éœ€è¦å»å®ç°è´Ÿè½½å‡è¡¡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…¶å®ä¸Šé¢è¯´çš„é—®é¢˜ï¼Œæ¦‚æ‹¬ä¸€ä¸‹å°±æ˜¯åˆ†å¸ƒå¼æœåŠ¡å¿…ç„¶è¦é¢ä¸´çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœåŠ¡ç®¡ç†
&lt;ul&gt;
&lt;li&gt;å¦‚ä½•è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°&lt;/li&gt;
&lt;li&gt;å¦‚ä½•å®ç°çŠ¶æ€ç›‘æ§&lt;/li&gt;
&lt;li&gt;å¦‚ä½•å®ç°åŠ¨æ€è·¯ç”±&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœåŠ¡å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡&lt;/li&gt;
&lt;li&gt;æœåŠ¡å¦‚ä½•è§£å†³å®¹ç¾é—®é¢˜&lt;/li&gt;
&lt;li&gt;æœåŠ¡å¦‚ä½•å®ç°ç»Ÿä¸€é…ç½®&lt;/li&gt;
&lt;/ul&gt;
">åˆè¯†SpringCloud</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/spring-data-jpa/"" data-c="
          &lt;h2 id=&#34;ä»€ä¹ˆæ˜¯jap&#34;&gt;ä»€ä¹ˆæ˜¯JAP&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;JPAæ˜¯Java Persistence APIçš„ç®€ç§°ï¼Œä¸­æ–‡åJavaæŒä¹…å±‚APIï¼Œæ˜¯JDK 5.0æ³¨è§£æˆ–XMLæè¿°å¯¹è±¡ï¼å…³ç³»è¡¨çš„æ˜ å°„å…³ç³»ï¼Œå¹¶å°†è¿è¡ŒæœŸçš„å®ä½“å¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­&lt;br&gt;
Sunå¼•å…¥æ–°çš„JPA ORMè§„èŒƒå‡ºäºä¸¤ä¸ªåŸå› ï¼šå…¶ä¸€ï¼Œç®€åŒ–ç°æœ‰Java EEå’ŒJava SEåº”ç”¨å¼€å‘å·¥ä½œï¼›å…¶äºŒï¼ŒSunå¸Œæœ›æ•´åˆORMæŠ€æœ¯ï¼Œå®ç°å¤©ä¸‹å½’ä¸€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;mybatiså’Œhibernateçš„åŒºåˆ«&#34;&gt;mybatiså’Œhibernateçš„åŒºåˆ«&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;mybatiså’Œhibernateä¸€æ ·æ˜¯ä¸ªormæ•°æ®åº“æ¡†æ¶&lt;br&gt;
1). hibernateæ˜¯å…¨è‡ªåŠ¨ï¼Œè€Œmybatisæ˜¯åŠè‡ªåŠ¨ã€‚&lt;br&gt;
mybatiså¼€å‘æ˜¯éœ€è¦å»å†™sqlè¯­å¥ï¼Œè€Œä½¿ç”¨hibernateä¸éœ€è¦å†™ä»»ä½•çš„sqlè¯­å¥å°±èƒ½å®ç°å„ç§æ“ä½œ&lt;br&gt;
2).hibernateæ•°æ®åº“ç§»æ¤æ€§è¿œå¤§äºmybatisã€‚&lt;br&gt;
å¦‚æœä½¿ç”¨mybatisï¼Œä¸€æ—¦æ•°æ®åº“å‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦é‡å†™ç¼–ç ï¼ˆæ¯”å¦‚mysqlæ•°æ®åº“çš„sqlè¯­å¥å’Œoracleä»¥åŠsqlServeræ•°æ®åº“ä»–ä»¬ç”¨çš„sqlè¯­å¥ä¼šæœ‰ä¸€äº›å·®åˆ«ï¼‰ã€‚ä½†æ˜¯ä½¿ç”¨hibernateä¸€æ—¦æ•°æ®åº“å‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬ä¸éœ€è¦é‡å†™ç¼–ç ï¼Œåªéœ€è¦æ”¹å°‘è®¸çš„é…ç½®å°±èƒ½å®ç°&lt;br&gt;
3).hibernateæ‹¥æœ‰å®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿï¼Œmybatisåˆ™æ¬ ç¼ºä¸€äº›ã€‚&lt;br&gt;
4).mybatisç›¸æ¯”hibernateéœ€è¦å…³å¿ƒå¾ˆå¤šç»†èŠ‚&lt;br&gt;
hibernateé…ç½®è¦æ¯”mybatiså¤æ‚çš„å¤šï¼Œå­¦ä¹ æˆæœ¬ä¹Ÿæ¯”mybatisé«˜ã€‚ä½†ä¹Ÿæ­£å› ä¸º mybatisä½¿ç”¨ç®€å•ï¼Œæ‰å¯¼è‡´å®ƒè¦æ¯”hibernateå…³å¿ƒå¾ˆå¤šæŠ€æœ¯ç»†èŠ‚ã€‚mybatisç”±äºä¸ç”¨è€ƒè™‘å¾ˆå¤šç»†èŠ‚ï¼Œå¼€å‘æ¨¡å¼ä¸Šä¸ä¼ ç»ŸjdbcåŒºåˆ«å¾ˆå°ï¼Œå›  æ­¤å¾ˆå®¹æ˜“ä¸Šæ‰‹å¹¶å¼€å‘é¡¹ç›®ï¼Œä½†å¿½ç•¥ç»†èŠ‚ä¼šå¯¼è‡´é¡¹ç›®å‰æœŸbugè¾ƒå¤šï¼Œå› è€Œå¼€å‘å‡ºç›¸å¯¹ç¨³å®šçš„è½¯ä»¶å¾ˆæ…¢ï¼Œè€Œå¼€å‘å‡ºè½¯ä»¶å´å¾ˆå¿«ã€‚hibernateåˆ™æ­£å¥½ä¸ä¹‹ç›¸åã€‚ ä½†æ˜¯å¦‚æœä½¿ç”¨hibernateå¾ˆç†Ÿç»ƒçš„è¯ï¼Œå®é™…ä¸Šå¼€å‘æ•ˆç‡ä¸æ¯«ä¸å·®äºç”šè‡³è¶…è¶Šmybatisã€‚&lt;/p&gt;
&lt;p&gt;5).sqlç›´æ¥ä¼˜åŒ–ä¸Šï¼Œmybatisè¦æ¯”hibernateæ–¹ä¾¿å¾ˆå¤š&lt;br&gt;
è¿™ä¹Ÿæ˜¯hibernateæ²¡è½çš„åŸå› ä¹‹ä¸€ã€‚å› ä¸ºsqlè¯­å¥è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ•ˆç‡ä¸Šä¸å¥½æ§åˆ¶&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆç°åœ¨mybatisè¦æ¯”hiernateæµè¡Œï¼Ÿ&lt;br&gt;
å¾ˆé‡è¦çš„åŸå› ï¼šhibernateçš„å­¦ä¹ éš¾åº¦æ˜¯ç›®å‰å¤§å®¶æ¥è§¦çš„æ¡†æ¶ä¸­æœ€å¤§çš„ï¼Œå­¦ä¹ æˆæœ¬è¿œè¿œé«˜äºmybatisï¼Œæ‰€ä»¥mybatisæ›´æµè¡Œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å…¥é—¨&#34;&gt;å…¥é—¨&lt;/h2&gt;
&lt;p&gt;1ã€å¼•å…¥ä¾èµ–.....&lt;/p&gt;
&lt;p&gt;2ã€é…ç½®æ•°æ®æº&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;spring.datasource.url=jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf8&amp;amp;useSSL=true
spring.datasource.username=root
spring.datasource.password=root
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€ç¼–å†™å®ä½“ç±»&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨mybatisçš„å¼€å‘ä¸­ï¼Œå®ä½“ç±»æ‰€åœ¨åŒ…åéƒ½ç”¨çš„æ˜¯pojoï¼Œä½†æ˜¯åœ¨spring-data-jpaä¸­ï¼Œå› ä¸ºspringä¸­å®ä½“ç±»çš„åŒ…åä¸€èˆ¬éƒ½æ˜¯å«åšdomainï¼Œæ‰€ä»¥æˆ‘ä»¬å¼€å‘çš„æ—¶å€™å®ä½“ç±»çš„åŒ…åä¹Ÿå«domain&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;import javax.persistence.*;
/**
	@Entity ï¼šè¯¥æ³¨è§£è¡¨ç¤ºè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼Œï¼ˆå‡†å¤‡ç”¨æ¥å»ºç«‹æ•°æ®åº“è¡¨çš„æ˜ å°„å…³ç³»ï¼‰
	@Table ï¼šç”¨æ¥å»ºç«‹å®ä½“ç±»å’Œæ•°æ®åº“è¡¨çš„çœŸå®æ˜ å°„å…³ç³»ï¼Œå±æ€§nameä¸ºè¡¨åï¼Œè¡¨åå’Œç±»åä¸€è‡´å¯ä»¥çœç•¥
	
		@id ï¼šè¡¨ç¤ºä¸»é”®
		@GeneratedValue(strategy = GenerationType.IDENTITY) ï¼šè¯¥å­—æ®µæ˜¯è‡ªå¢çš„
		@Column ï¼šå»ºç«‹æ•°æ®åº“åˆ—åçš„æ˜ å°„
*/
@Entity
@Table(name = &amp;quot;grade&amp;quot;)
public class Grade {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &amp;quot;id&amp;quot;,nullable = false)
    private Integer id;

    @Column(name = &amp;quot;name&amp;quot;,nullable = false,length = 50)
    private String name;
	
    ....
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4ã€ç¼–å†™æ¥å£&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨spring-data-jpaä¸­ï¼Œæ¥å£æ‰€åœ¨çš„åŒ…åï¼Œå®˜æ–¹ç”¨çš„æ˜¯repositoryï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¿™ä¹ˆç”¨ï¼Œå®ƒç­‰åŒäºæˆ‘ä»¬ä¹‹å‰çš„daoæˆ–è€…æ˜¯mapper&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * ç¼–å†™spring-data-jpaæ¥å£è¦ç‚¹ï¼š
 *      1.ç»§æ‰¿JpaRepository&amp;lt;å‚æ•°ä¸€è¦æ“ä½œçš„ç±»,å‚æ•°äºŒæ”¹ç±»çš„ä¸»é”®ç±»å‹&amp;gt;
 *      2.åœ¨æ¥å£ä¸Šæ·»åŠ æ³¨è§£@Repositoryï¼Œå¦‚æœè¯¥æ¥å£åœ¨å¯åŠ¨ç±»çš„åŒä¸€ä¸ªåŒ…æˆ–è€…æ˜¯åœ¨å¯åŠ¨ç±»çš„å­åŒ…ä¸­ï¼Œé‚£ä¹ˆè¯¥ç±»å°†äº¤ç»™springç®¡ç†
 *   spring-data-jpaæ¥å£ç¼–å†™çš„è§„åˆ™ï¼ˆå› ä¸ºå¢åˆ æ”¹æ˜¯å°±ç”¨å°è£…å¥½çš„å°±å¯ä»¥ï¼Œè¯¥æ¥å£ä¸»è¦æ˜¯ç”¨äºæŸ¥è¯¢ï¼‰
 *   ç²¾ç¡®æŸ¥è¯¢çš„è§„åˆ™ï¼šfind + è¡¨å + By + domainä¸­çš„å±æ€§å
 *   æ¨¡ç³ŠæŸ¥è¯¢çš„è§„åˆ™ï¼šfind + è¡¨å + By + domainä¸­çš„å±æ€§å + Like	
 */
@Repository
public interface GradeAreaRepository extends JpaRepository&amp;lt;Grade,Integer&amp;gt; {
	/**
     * æ ¹æ®å¹´çº§åç§°æŸ¥è¯¢å¹´çº§
     * @param name
     * @return
     */
    Grade findGradeByName(String name);

    /**
     * æ ¹æ®å¹´çº§åç§°åšæ¨¡ç³ŠæŸ¥è¯¢
     * @param name
     * @return
     */
    List&amp;lt;Grade&amp;gt; findGradeByNameLike(String name);

    /**
     * æ ¹æ®ä¸»é”®æŸ¥è¯¢
     */
    Grade findGradeById(Integer id);
    
    /**
     * æ ¹æ®idå’Œå¹´çº§åç§°åšè”åˆæŸ¥è¯¢
     */
    Grade findGradeByIdAndNameLike(Integer id,String name);
    
    /**
     * å•ç‹¬çš„åˆ†é¡µæ“ä½œ
     * å¦‚æœå¸Œæœ›åšåˆ†é¡µæ“ä½œï¼Œè¿”å›çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯spring-data-jpaè·Ÿæˆ‘ä»¬å°è£…å¥½çš„Pageï¼Œå‚æ•°æ”¾Pageableæ¥å£
     */
    Page&amp;lt;Grade&amp;gt; findAll(Pageable page);
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;5ã€æµ‹è¯•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- spring-data-jpaæµ‹è¯•éœ€è¦æ·»åŠ çš„ä¾èµ–,å¦‚æœç›´æ¥åœ¨tomcatä¸­è¿è¡Œä¸éœ€è¦è¯¥åŒ… --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;net.minidev&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;asm&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;1.0.2&amp;lt;/version&amp;gt;
    &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//æµ‹è¯•å¢åŠ 
@Test
public void testSave(){
    Grade grade = new Grade();
    grade.setName(&amp;quot;äº”å¹´çº§&amp;quot;);
    Grade g = gradeRepository.save(grade);
    //å¢åŠ åå¾ˆå®¹æ˜“æ‹¿åˆ°ä¸»é”®
    System.out.println(g);
}

//æµ‹è¯•ä¿®æ”¹(å¦‚æœä¸ç»™ä¸»é”®æ˜¯å¢åŠ ï¼Œç»™ä¸»é”®å°±æ˜¯ä¿®æ”¹)
@Test
public void testUpdate(){
    Grade grade = new Grade();
    grade.setId(4);
    grade.setName(&amp;quot;åŸå­å¼¹è®¾ç½®ä¸åˆ¶é€ &amp;quot;);
    Grade g = gradeRepository.save(grade);
    System.out.println(g);
}
//æµ‹è¯•åˆ é™¤--æ ¹æ®ä¸»é”®åˆ é™¤
@Test
public void testDeleteById(){
    //æ‰§è¡Œåˆ é™¤
    gradeRepository.deleteById(5);
}
//æµ‹è¯•åˆ é™¤--æ ¹æ®å¯¹è±¡åˆ é™¤
@Test
public void testDeleteByObject(){
    //æ‰§è¡Œåˆ é™¤
    Grade grade = new Grade();
    grade.setId(4);
    gradeRepository.delete(grade);
}
//æµ‹è¯•åˆ é™¤--åˆ é™¤å…¨éƒ¨
@Test
public void testDeleteAll(){
    gradeRepository.deleteAll();
}

@Test
public void testSave100(){
    for (int i = 1; i &amp;lt;= 100; i++) {
        Grade grade = new Grade();
        grade.setName(i+ &amp;quot;å¹´çº§&amp;quot;);
        gradeRepository.save(grade);
    }

}

//æµ‹è¯•æŸ¥è¯¢--æŸ¥è¯¢å…¨éƒ¨
@Test
public void testGetAll(){
    List&amp;lt;Grade&amp;gt; list = gradeRepository.findAll();
    for (Grade grade : list) {
        System.out.println(grade);
    }
}
//æµ‹è¯•æŸ¥è¯¢--æ ¹æ®idæŸ¥è¯¢
@Test
public void testGetById(){
    //æ ¹æ®ä¸»é”®æŸ¥è¯¢
    Grade grade = gradeRepository.findById(1).get();
    System.out.println(grade);
}

//æµ‹è¯•æŸ¥è¯¢--æ ¹æ®idæŸ¥è¯¢(åœ¨tomcatå®¹å™¨ä¸­ä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨æµ‹è¯•çš„æ—¶å€™ä¼šå‡ºç°æ‡’åŠ è½½å¯¼è‡´sessionå…³é—­çš„é—®é¢˜)
@Test
public void testGetById2(){
    //æ ¹æ®ä¸»é”®æŸ¥è¯¢
    //ä½¿ç”¨getOneæ–¹æ³•éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ    spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true
    Grade grade = gradeRepository.getOne(1);
    System.out.println(grade);
}


//æµ‹è¯•æŸ¥è¯¢--éä¸»é”®çš„ç²¾ç¡®æŸ¥è¯¢--æ ¹æ®å¹´çº§åç§°åšç²¾ç¡®æŸ¥è¯¢
@Test
public void testGetGradeByName(){
    Grade grade = gradeRepository.findGradeByName(&amp;quot;1å¹´çº§&amp;quot;);
    System.out.println(grade);
}

//æµ‹è¯•æŸ¥è¯¢--æ¨¡ç³ŠæŸ¥è¯¢--æ ¹æ®å¹´çº§åç§°åšæ¨¡ç³ŠæŸ¥è¯¢
@Test
public void testGetGradeByNameLike(){
    String name = &amp;quot;ç«&amp;quot;;
    List&amp;lt;Grade&amp;gt; list = gradeRepository.findGradeByNameLike(&amp;quot;%&amp;quot; + name + &amp;quot;%&amp;quot;);
    for (Grade grade : list) {
        System.out.println(grade);
    }
}

@Test
public void testGetById3(){
    Grade grade = gradeRepository.findGradeById(2);
    System.out.println(grade);
}

//æµ‹è¯•æŸ¥è¯¢--å¤šæ¡ä»¶è”åˆæŸ¥è¯¢
@Test
public void testGetGradeByIdAndNameLike(){
    Grade grade = gradeRepository.findGradeByIdAndNameLike(1, &amp;quot;%1å¹´çº§%&amp;quot;);
    System.out.println(grade);
}

//æµ‹è¯•æŸ¥è¯¢--åˆ†é¡µæŸ¥è¯¢
@Test
public void testFindAllPages(){
    //æ„é€ Pageableä½¿ç”¨PageRequest.of(å‚æ•°ä¸€å½“å‰è¦å±•ç¤ºçš„é¡µç ï¼Œå‚æ•°äºŒæ¯é¡µæ˜¾ç¤ºçš„ä¿¡æ¯æ¡æ•°)
    //æ³¨æ„ï¼šåœ¨mybatisçš„pagehelperä¸­ï¼Œå½“å‰æºç æ˜¯ä»1å¼€å§‹çš„ï¼Œä½†æ˜¯åœ¨spring-data-jpaä¸­åˆ†é¡µé¡µç æ˜¯ä»0å¼€å§‹
    
    //PageRequestä¸­çš„å…¶ä»–å‚æ•°
    //Pageable pageable = PageRequest.of(0,10, Sort.by(Sort.Direction.DESC,&amp;quot;id&amp;quot;));
	//Pageable pageable = PageRequest.of(0,10,Sort.Direction.DESC,&amp;quot;id&amp;quot;);
    Pageable pageable = PageRequest.of(1,10);
    Page&amp;lt;Grade&amp;gt; all = gradeRepository.findAll(pageable);
    System.out.println(&amp;quot;æ€»æ¡æ•°&amp;quot;+all.getTotalElements());
    System.out.println(&amp;quot;æ€»é¡µæ•°&amp;quot; + all.getTotalPages());
    System.out.println(&amp;quot;æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ&amp;quot;+all.hasNext());
    System.out.println(&amp;quot;æ˜¯å¦æœ‰ä¸Šä¸€é¡µ&amp;quot;+all.hasPrevious());
    System.out.println(&amp;quot;æ˜¯å¦æœ‰å†…å®¹&amp;quot;+all.hasContent());
    System.out.println(&amp;quot;æ˜¯å¦é¦–é¡µ&amp;quot;+all.isFirst());
    System.out.println(&amp;quot;æ˜¯å¦æœ€åä¸€é¡µ&amp;quot;+all.isLast());
    System.out.println(&amp;quot;å…ƒç´ æ•°é‡&amp;quot;+all.getNumberOfElements());
    //è·å–åˆ°ä¸€é¡µæ•°æ®
    List&amp;lt;Grade&amp;gt; list = all.getContent();
    for (Grade grade : list) {
        System.out.println(grade);
    }
        
}
&lt;/code&gt;&lt;/pre&gt;
">Spring-Data-Jpa</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/mongodb/"" data-c="
          &lt;h2 id=&#34;mongo&#34;&gt;Mongo&lt;/h2&gt;
&lt;h3 id=&#34;ä»€ä¹ˆæ˜¯mongodb&#34;&gt;ä»€ä¹ˆæ˜¯MongoDB&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;MongoDBæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚ç”±C++è¯­è¨€ç¼–å†™ã€‚æ—¨åœ¨ä¸ºWEBåº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚&lt;br&gt;
MongoDBæ˜¯ä¸€ä¸ªä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚å®ƒæ”¯æŒçš„æ•°æ®ç»“æ„éå¸¸æ¾æ•£ï¼Œæ˜¯ç±»ä¼¼jsonçš„bsonæ ¼å¼ï¼Œå› æ­¤å¯ä»¥å­˜å‚¨æ¯”è¾ƒå¤æ‚çš„æ•°æ®ç±»å‹ã€‚Mongoæœ€å¤§çš„ç‰¹ç‚¹æ˜¯å®ƒæ”¯æŒçš„æŸ¥è¯¢è¯­è¨€éå¸¸å¼ºå¤§ï¼Œå…¶è¯­æ³•æœ‰ç‚¹ç±»ä¼¼äºé¢å‘å¯¹è±¡çš„æŸ¥è¯¢è¯­è¨€ï¼Œå‡ ä¹å¯ä»¥å®ç°ç±»ä¼¼å…³ç³»æ•°æ®åº“å•è¡¨æŸ¥è¯¢çš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œè€Œä¸”è¿˜æ”¯æŒå¯¹æ•°æ®å»ºç«‹ç´¢å¼•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;mongodbç‰¹ç‚¹&#34;&gt;MongoDBç‰¹ç‚¹&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å®ƒçš„ç‰¹ç‚¹æ˜¯é«˜æ€§èƒ½ã€æ˜“éƒ¨ç½²ã€æ˜“ä½¿ç”¨ï¼Œå­˜å‚¨æ•°æ®éå¸¸æ–¹ä¾¿ã€‚ä¸»è¦åŠŸèƒ½ç‰¹æ€§æœ‰ï¼š&lt;/p&gt;
&lt;p&gt;*é¢å‘é›†åˆå­˜å‚¨çš„ï¼Œæ˜“äºå­˜å‚¨å¯¹è±¡ç±»å‹çš„æ•°æ®&lt;/p&gt;
&lt;p&gt;*æ¨¡å¼è‡ªç”±ã€‚&lt;/p&gt;
&lt;p&gt;*æ”¯æŒåŠ¨æ€[æŸ¥è¯¢]&lt;/p&gt;
&lt;p&gt;*æ”¯æŒå®Œå…¨ç´¢å¼•ï¼ŒåŒ…å«å†…éƒ¨å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;*æ”¯æŒæŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;*æ”¯æŒå¤åˆ¶å’Œæ•…éšœæ¢å¤ã€‚&lt;/p&gt;
&lt;p&gt;*ä½¿ç”¨é«˜æ•ˆçš„äºŒè¿›åˆ¶æ•°æ®å­˜å‚¨ï¼ŒåŒ…æ‹¬å¤§å‹å¯¹è±¡ï¼ˆå¦‚è§†é¢‘ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;*è‡ªåŠ¨å¤„ç†ç¢ç‰‡ï¼Œä»¥æ”¯æŒäº‘è®¡ç®—å±‚æ¬¡çš„æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;p&gt;*æ”¯æŒ Golangï¼ŒRUBYï¼ŒPYTHONï¼ŒJAVAï¼ŒC++ï¼ŒPHPï¼ŒC#ç­‰å¤šç§è¯­è¨€ã€‚&lt;/p&gt;
&lt;p&gt;*æ–‡ä»¶å­˜å‚¨æ ¼å¼ä¸ºBSONï¼ˆä¸€ç§JSONçš„æ‰©å±•ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;*å¯é€šè¿‡ç½‘ç»œè®¿é—®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;mongodbä½“ç³»ç»“æ„&#34;&gt;MongoDBä½“ç³»ç»“æ„&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;mongoçš„é€»è¾‘ç»“æœæ˜¯ä¸€ç§å±‚æ¬¡ç»“æ„&lt;/p&gt;
&lt;p&gt;ä¸»è¦ç”±å¦‚ä¸‹å‡ ä¸ªä¸œè¥¿ç»„æˆï¼š&lt;/p&gt;
&lt;p&gt;æ–‡æ¡£(document)ã€é›†åˆ(collection)ã€æ•°æ®åº“(database)è¿™ä¸‰éƒ¨åˆ†ç»„æˆï¼Œé€»è¾‘ç»“æ„æ˜¯é¢å‘ç”¨æˆ·çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·å°±å¯ä»¥é€šè¿‡MongoDBå¼€å‘åº”ç”¨ç¨‹åºä½¿ç”¨çš„å°±æ˜¯é€»è¾‘ç»“æ„&lt;/p&gt;
&lt;p&gt;(1)MongoDBçš„documentï¼Œç›¸å½“äºæ˜¯MySQLï¼ˆå…³ç³»å‹æ•°æ®åº“ï¼‰ä¸­çš„ä¸€è¡Œè®°å½•&lt;/p&gt;
&lt;p&gt;(2)å¤šä¸ªæ–‡æ¡£ç»„æˆä¸€ä¸ªé›†åˆï¼Œåœ¨MySQLä¸­å¤šæ¡è®°å½•ç»„æˆçš„æ˜¯è¡¨&lt;/p&gt;
&lt;p&gt;(3)å¤šä¸ªé›†åˆï¼Œé€»è¾‘ä¸Šç»„ç»‡åœ¨ä¸€èµ·ï¼Œå°±æ˜¯ä¸€ä¸ªæ•°æ®åº“&lt;/p&gt;
&lt;p&gt;(4)ä¸€ä¸ªMongoDBå®ä¾‹æ”¯æŒå¤šä¸ªæ•°æ®åº“&lt;/p&gt;
&lt;/blockquote&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;MongoDB&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Mysql&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;æ•°æ®åº“(database)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;æ•°æ®åº“(database)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;é›†åˆ(collection)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;è¡¨(table)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;æ–‡æ¡£(document)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;è¡Œ(row)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;å®‰è£…mongo&#34;&gt;å®‰è£…Mongo&lt;/h2&gt;
&lt;h3 id=&#34;1-æ‹‰å–é•œåƒ&#34;&gt;1ã€æ‹‰å–é•œåƒ&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker pull mongo:latest
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2-åˆ›å»ºå®¹å™¨&#34;&gt;2ã€åˆ›å»ºå®¹å™¨&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker run -di --name=mymongo -p 27017:27017 mongo --auth
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;27017 ï¼šmongoé»˜è®¤çš„ç«¯å£&lt;/p&gt;
&lt;p&gt;--authï¼šå¯ç”¨éªŒè¯ï¼Œé»˜è®¤å…³é—­&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;3-åˆ›å»ºç”¨æˆ·&#34;&gt;3ã€åˆ›å»ºç”¨æˆ·&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# è¿›å…¥å®¹å™¨
docker exec -it mymongo /bin/bash
# è¿›å…¥Mongo
mongo
# é€‰æ‹©æ•°æ®åº“
use admin
# åˆ›å»ºç”¨æˆ·
db.createUser({user:&amp;quot;root&amp;quot;,pwd:&amp;quot;root&amp;quot;,roles:[{role:&amp;quot;root&amp;quot;,db:&amp;quot;admin&amp;quot;}]})
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1590650660588.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;crud&#34;&gt;CRUD&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœæ¶‰åŠåˆ°è®¤è¯é—®é¢˜ï¼Œå¿…é¡»åœ¨æ“ä½œä¹‹å‰ç™»é™†&lt;/p&gt;
&lt;p&gt;&lt;code&gt;db.auth(&amp;quot;è´¦å·&amp;quot;,&amp;quot;å¯†ç &amp;quot;)&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;æ·»åŠ &#34;&gt;æ·»åŠ &lt;/h3&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.save(json)&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;db.student.save({name:&amp;quot;å¼ ä¸‰&amp;quot;,sex:&amp;quot;ç”·&amp;quot;,address:&amp;quot;æ¹–åŒ—&amp;quot;})
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;æŸ¥è¯¢&#34;&gt;æŸ¥è¯¢&lt;/h3&gt;
&lt;h4 id=&#34;æŸ¥è¯¢å…¨éƒ¨&#34;&gt;æŸ¥è¯¢å…¨éƒ¨&lt;/h4&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.find()&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;db.student.find()
# ç»“æœ
# { &amp;quot;_id&amp;quot; : ObjectId(&amp;quot;5ece87413b6767c1aa235b37&amp;quot;), &amp;quot;name&amp;quot; : &amp;quot;å¼ ä¸‰&amp;quot;, &amp;quot;sex&amp;quot; : &amp;quot;å¥³&amp;quot;, &amp;quot;address&amp;quot; : &amp;quot;æ¹–åŒ—&amp;quot; }
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œå¤§å®¶ä¼šå‘ç°æ¯æ¡æ–‡æ¡£éƒ½æœ‰ä¸€ä¸ªå« &amp;quot;_id&amp;quot;å­—æ®µï¼Œè¿™ä¸ªç›¸å½“äºmysqlæ•°æ®åº“ä¸­è¡¨çš„ä¸»é”®ï¼Œå½“ä½ åœ¨æ’å…¥è®°å½•çš„æ—¶å€™ï¼Œæ²¡æœ‰æŒ‡å®šè¯¥å­—æ®µï¼Œmongoä¼šè‡ªåŠ¨åˆ›å»ºï¼Œç±»å‹æ˜¯ObjectIdç±»å‹&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬åœ¨æ’å…¥æ–‡æ¡£è®°å½•çš„æ—¶å€™æŒ‡å®šäº†è¯¥å­—æ®µï¼Œå…¶ç±»å‹å¯ä»¥æ˜¯ObjectIdï¼Œä¹Ÿå¯ä»¥æ˜¯mongoæ”¯æŒçš„ä»»æ„æ•°æ®ç±»å‹&lt;/p&gt;
&lt;p&gt;å¦‚ï¼š&lt;code&gt;db.student.save({_id:1,name:&amp;quot;å¼ ä¸‰&amp;quot;,sex:15,address:&amp;quot;æ¹–åŒ—&amp;quot;})&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœ_id çš„å€¼æ˜¯ä¸€æ ·çš„ä¼šè¦†ç›–åŸæœ‰çš„æ•°æ®&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;æ¡ä»¶æŸ¥è¯¢&#34;&gt;æ¡ä»¶æŸ¥è¯¢&lt;/h4&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.find({key:&amp;quot;value&amp;quot;})&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;db.student.find({name:&amp;quot;æå››&amp;quot;})
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;æŸ¥è¯¢å•ä¸ª&#34;&gt;æŸ¥è¯¢å•ä¸ª&lt;/h4&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.findOne({key:value})&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;ä¿®æ”¹&#34;&gt;ä¿®æ”¹&lt;/h3&gt;
&lt;h4 id=&#34;å®Œå…¨ä¿®æ”¹&#34;&gt;å®Œå…¨ä¿®æ”¹&lt;/h4&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.update(æ¡ä»¶json,ä¿®æ”¹åçš„json)&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;éƒ¨åˆ†ä¿®æ”¹&#34;&gt;éƒ¨åˆ†ä¿®æ”¹&lt;/h4&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.update(æ¡ä»¶json,{$set:{key:value,key:value}})&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;åˆ é™¤&#34;&gt;åˆ é™¤&lt;/h3&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.remove(jsonæ¡ä»¶)&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;é«˜çº§æŸ¥è¯¢&#34;&gt;é«˜çº§æŸ¥è¯¢&lt;/h2&gt;
&lt;h3 id=&#34;æ¨¡ç³ŠæŸ¥è¯¢&#34;&gt;æ¨¡ç³ŠæŸ¥è¯¢&lt;/h3&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.find({key:/value/})&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æŸ¥è¯¢keyä¸­å¸¦æœ‰valueçš„æ–‡æ¡£&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;æŸ¥è¯¢null&#34;&gt;æŸ¥è¯¢NULL&lt;/h3&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.find({key:null})&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æŸ¥è¯¢æ²¡æœ‰keyçš„æ–‡æ¡£&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;æ¯”è¾ƒæŸ¥è¯¢&#34;&gt;æ¯”è¾ƒæŸ¥è¯¢&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;# å¤§äº
db.collection.find({key:{$gt:value}})
# å°äº
db.collection.find({key:{$lt:value}})
# å¤§äºæˆ–ç­‰äº
db.collection.find({key:{$gte:value}})
# å°äºç­‰äº
db.collection.find({key:{$lte:value}})
# ä¸ç­‰äº
db.collection.find({key:{$ne:value}})
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;åˆ¤æ–­åŸŸå­—æ®µæ˜¯å¦å­˜åœ¨&#34;&gt;åˆ¤æ–­åŸŸ/å­—æ®µæ˜¯å¦å­˜åœ¨&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;# è¯­æ³•
db.collection.find({key:{$exists:true}})
# ä¾‹å­ï¼šæŸ¥è¯¢å¸¦æœ‰addressçš„æ–‡æ¡£
db.student.find({address:{$exists:true}})
# ä¾‹å­ï¼šæŸ¥è¯¢æ²¡æœ‰addressçš„æ–‡æ¡£
db.student.find({address:{$exists:false}})
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;åŒ…å«&#34;&gt;åŒ…å«&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ç±»ä¼¼äºmysqlçš„in&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.find({key:{$in:[v1,v2,v3,.....]}})&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;ç»Ÿè®¡æ•°é‡&#34;&gt;ç»Ÿè®¡æ•°é‡&lt;/h3&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.count()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ·»åŠ æ¡ä»¶è¯­æ³•ï¼š&lt;code&gt;db.collection.count(jsonæ¡ä»¶)&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;é€»è¾‘è¿ç®—ç¬¦&#34;&gt;é€»è¾‘è¿ç®—ç¬¦&lt;/h3&gt;
&lt;h4 id=&#34;å¹¶ä¸”&#34;&gt;å¹¶ä¸”&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;# è¯­æ³•
db.collection.find($and:[{k1:v1},{k2:{è¡¨è¾¾å¼:v2}}])
# ä¾‹å­ï¼šæŸ¥è¯¢å¹´é¾„å¤§äº10å¹¶ä¸”å°äº20
db.student.find($and:[{age:{$gt:10}},{age:{$lt:20}}])
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;æˆ–è€…&#34;&gt;æˆ–è€…&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;# è¯­æ³•
db.collection.find($or:[{k1:v1},{v2:{è¡¨è¾¾å¼:v2}}])
# ä¾‹å­ï¼šæŸ¥è¯¢å¹´é¾„å¤§äº18æˆ–è€…æ€§åˆ«ä¸ºå¥³
db.student.find($or:[{age:{$gt:18}},{sex:&amp;quot;å¥³&amp;quot;}])
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;é&#34;&gt;é&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;db.collection.find({key:{$ne:value}})
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;javaæ“ä½œmongo&#34;&gt;JAVAæ“ä½œMongo&lt;/h2&gt;
&lt;h3 id=&#34;1-æ·»åŠ ä¾èµ–&#34;&gt;1ã€æ·»åŠ ä¾èµ–&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- mongodbå®¢æˆ·ç«¯ --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.mongodb&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;mongo-java-driver&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;3.9.1&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2-è¿æ¥æµ‹è¯•&#34;&gt;2ã€è¿æ¥æµ‹è¯•&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Test
public void testConnection(){
    //åˆ›å»ºè®¤è¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šç”¨æˆ·åã€å‚æ•°2ï¼šæ•°æ®åº“ã€å‚æ•°3ï¼šå¯†ç 
    MongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;,&amp;quot;admin&amp;quot;,&amp;quot;root&amp;quot;.toCharArray());
    //åˆ›å»ºmongoå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šæœåŠ¡å™¨åœ°å€ï¼Œå‚æ•°2ï¼šmongodbçš„ç«¯å£å·
    ServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;,27017);
    MongoClient client = new MongoClient(serverAddress, Arrays.asList(credential));
    //è·å–åˆ°é›†åˆï¼ˆæ•°æ®åº“ï¼‰
    MongoDatabase database = client.getDatabase(&amp;quot;admin&amp;quot;);
    //è·å–collection
    MongoCollection&amp;lt;Document&amp;gt; student = database.getCollection(&amp;quot;student&amp;quot;);
    //è·å–åˆ°documenté›†åˆï¼ˆä¸€è¡Œè®°å½•ï¼‰
    FindIterable&amp;lt;Document&amp;gt; documents = student.find();
    for (Document document : documents) {
        System.out.println(document.getString(&amp;quot;name&amp;quot;));
        System.out.println(document.getDouble(&amp;quot;age&amp;quot;));
        System.out.println(document.getString(&amp;quot;sex&amp;quot;));
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3-æ¡ä»¶æŸ¥è¯¢-åŒ¹é…&#34;&gt;3ã€æ¡ä»¶æŸ¥è¯¢-åŒ¹é…&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Test
public void testFindBasi(){
    //åˆ›å»ºè®¤è¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šç”¨æˆ·åã€å‚æ•°2ï¼šæ•°æ®åº“ã€å‚æ•°3ï¼šå¯†ç 
    MongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;,&amp;quot;admin&amp;quot;,&amp;quot;root&amp;quot;.toCharArray());
    //åˆ›å»ºmongoå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šæœåŠ¡å™¨åœ°å€ï¼Œå‚æ•°2ï¼šmongodbçš„ç«¯å£å·
    ServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;,27017);
    MongoClient client = new MongoClient(serverAddress, Arrays.asList(credential));
    //è·å–åˆ°é›†åˆï¼ˆæ•°æ®åº“ï¼‰
    MongoDatabase database = client.getDatabase(&amp;quot;admin&amp;quot;);
    //è·å–collection
    MongoCollection&amp;lt;Document&amp;gt; student = database.getCollection(&amp;quot;student&amp;quot;);

    /*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/

    Map&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;&amp;gt;();
    map.put(&amp;quot;name&amp;quot;,&amp;quot;å¼ ä¸‰&amp;quot;);
    BasicDBObject basicDBObject = new BasicDBObject(map);

    /*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/

    //è·å–åˆ°documenté›†åˆï¼ˆä¸€è¡Œè®°å½•ï¼‰
    FindIterable&amp;lt;Document&amp;gt; documents = student.find(basicDBObject);
    for (Document document : documents) {
        System.out.println(document.getString(&amp;quot;name&amp;quot;));
        System.out.println(document.getDouble(&amp;quot;age&amp;quot;));
        System.out.println(document.getString(&amp;quot;sex&amp;quot;));
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4-æ¡ä»¶æŸ¥è¯¢-æ¨¡ç³Š&#34;&gt;4ã€æ¡ä»¶æŸ¥è¯¢-æ¨¡ç³Š&lt;/h3&gt;
&lt;h4 id=&#34;å®Œå…¨åŒ¹é…&#34;&gt;å®Œå…¨åŒ¹é…&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/
Pattern pattern = Pattern.compile(&amp;quot;^å¼ ä¸‰$&amp;quot;);

Map&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;&amp;gt;();
map.put(&amp;quot;name&amp;quot;,pattern);
BasicDBObject basicDBObject = new BasicDBObject(map);
/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;å³åŒ¹é…&#34;&gt;å³åŒ¹é…&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Pattern pattern = Pattern.compile(&amp;quot;^å¼ .*$&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;å·¦åŒ¹é…&#34;&gt;å·¦åŒ¹é…&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Pattern pattern = Pattern.compile(&amp;quot;^.*å¼ $&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;æ¨¡ç³ŠåŒ¹é…&#34;&gt;æ¨¡ç³ŠåŒ¹é…&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Pattern pattern = Pattern.compile(&amp;quot;^.*å¼ .*$&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;5-æ•°å­—æ¯”è¾ƒ&#34;&gt;5ã€æ•°å­—æ¯”è¾ƒ&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//æŸ¥è¯¢å¹´é¾„å¤§äº10
/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/
BasicDBObject basicDBObject = new BasicDBObject(&amp;quot;age&amp;quot;,new BasicDBObject(&amp;quot;$gt&amp;quot;,10));
/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;6-æ¡ä»¶è¿æ¥-å¹¶ä¸”&#34;&gt;6ã€æ¡ä»¶è¿æ¥-å¹¶ä¸”&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//æŸ¥è¯¢æ€§åˆ«ä¸ºç”·å¹¶ä¸”å¹´é¾„å¤§äº10å²
/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/
BasicDBObject basicDBObject1 = new BasicDBObject(&amp;quot;sex&amp;quot;,&amp;quot;ç”·&amp;quot;);
BasicDBObject basicDBObject2 = new BasicDBObject(&amp;quot;age&amp;quot;,new BasicDBObject(&amp;quot;$gt&amp;quot;,10));
BasicDBObject basicDBObject = new BasicDBObject(&amp;quot;$and&amp;quot;,Arrays.asList(basicDBObject1,basicDBObject2));
/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;7-æ¡ä»¶è¿æ¥-æˆ–è€…&#34;&gt;7ã€æ¡ä»¶è¿æ¥-æˆ–è€…&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//æŸ¥è¯¢æ€§åˆ«ä¸ºç”·æˆ–è€…å¹´é¾„å¤§äº20
/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/
BasicDBObject basicDBObject1 = new BasicDBObject(&amp;quot;sex&amp;quot;,&amp;quot;ç”·&amp;quot;);
BasicDBObject basicDBObject2 = new BasicDBObject(&amp;quot;age&amp;quot;,new BasicDBObject(&amp;quot;$gt&amp;quot;,20));
BasicDBObject basicDBObject = new BasicDBObject(&amp;quot;$or&amp;quot;,Arrays.asList(basicDBObject1,basicDBObject2));
/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;8-æ·»åŠ &#34;&gt;8ã€æ·»åŠ &lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//åˆ›å»ºè®¤è¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šç”¨æˆ·åã€å‚æ•°2ï¼šæ•°æ®åº“ã€å‚æ•°3ï¼šå¯†ç 
MongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;,&amp;quot;admin&amp;quot;,&amp;quot;root&amp;quot;.toCharArray());
//åˆ›å»ºmongoå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šæœåŠ¡å™¨åœ°å€ï¼Œå‚æ•°2ï¼šmongodbçš„ç«¯å£å·
ServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;,27017);
MongoClient client = new MongoClient(serverAddress, Arrays.asList(credential));
//è·å–åˆ°é›†åˆï¼ˆæ•°æ®åº“ï¼‰
MongoDatabase database = client.getDatabase(&amp;quot;admin&amp;quot;);
//è·å–collection
MongoCollection&amp;lt;Document&amp;gt; student = database.getCollection(&amp;quot;student&amp;quot;);

Map&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;&amp;gt;();
map.put(&amp;quot;name&amp;quot;,&amp;quot;ç‹äº”&amp;quot;);
map.put(&amp;quot;sex&amp;quot;,&amp;quot;ç”·&amp;quot;);
map.put(&amp;quot;age&amp;quot;,15);
map.put(&amp;quot;address&amp;quot;,&amp;quot;æ¹–å—&amp;quot;);

Document document = new Document(map);
student.insertOne(document);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;9-ä¿®æ”¹&#34;&gt;9ã€ä¿®æ”¹&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//æŠŠ_idä¸º1çš„æ–‡æ¡£ä¸­ageä¿®æ”¹ä¸º55
public void update(){
    //åˆ›å»ºè®¤è¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šç”¨æˆ·åã€å‚æ•°2ï¼šæ•°æ®åº“ã€å‚æ•°3ï¼šå¯†ç 
    MongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;,&amp;quot;admin&amp;quot;,&amp;quot;root&amp;quot;.toCharArray());
    //åˆ›å»ºmongoå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šæœåŠ¡å™¨åœ°å€ï¼Œå‚æ•°2ï¼šmongodbçš„ç«¯å£å·
    ServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;,27017);
    MongoClient client = new MongoClient(serverAddress, Arrays.asList(credential));
    //è·å–åˆ°é›†åˆï¼ˆæ•°æ®åº“ï¼‰
    MongoDatabase database = client.getDatabase(&amp;quot;admin&amp;quot;);
    //è·å–collection
    MongoCollection&amp;lt;Document&amp;gt; student = database.getCollection(&amp;quot;student&amp;quot;);
	//ä¿®æ”¹çš„æ¡ä»¶
    BasicDBObject filter = new BasicDBObject(&amp;quot;_id&amp;quot;,1);
    //ä¿®æ”¹åçš„åŸŸå’Œå€¼
    BasicDBObject update = new BasicDBObject(&amp;quot;$set&amp;quot;,new BasicDBObject(&amp;quot;age&amp;quot;,55));

    student.updateOne(filter,update);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;10-åˆ é™¤æ–‡æ¡£&#34;&gt;10ã€åˆ é™¤æ–‡æ¡£&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public void delete(){
    //åˆ›å»ºè®¤è¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šç”¨æˆ·åã€å‚æ•°2ï¼šæ•°æ®åº“ã€å‚æ•°3ï¼šå¯†ç 
    MongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;,&amp;quot;admin&amp;quot;,&amp;quot;root&amp;quot;.toCharArray());
    //åˆ›å»ºmongoå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šæœåŠ¡å™¨åœ°å€ï¼Œå‚æ•°2ï¼šmongodbçš„ç«¯å£å·
    ServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;,27017);
    MongoClient client = new MongoClient(serverAddress, Arrays.asList(credential));
    //è·å–åˆ°é›†åˆï¼ˆæ•°æ®åº“ï¼‰
    MongoDatabase database = client.getDatabase(&amp;quot;admin&amp;quot;);
    //è·å–collection
    MongoCollection&amp;lt;Document&amp;gt; student = database.getCollection(&amp;quot;student&amp;quot;);

    //åˆ é™¤æ¡ä»¶
    BasicDBObject basicDBObject = new BasicDBObject(&amp;quot;_id&amp;quot;,1);
    student.deleteOne(basicDBObject);//åˆ é™¤ä¸€ä¸ª
    student.deleteMany(basicDBObject);//åˆ é™¤æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;mongodbå·¥å…·ç±»&#34;&gt;MongoDBå·¥å…·ç±»&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;MongoClientè¢«è®¾è®¡æˆçº¿ç¨‹å®‰å…¨çš„ç±»ï¼ˆå•çº¿ç¨‹ï¼‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨è¯¥ç±»çš„æ—¶å€™ä¸ç”¨è€ƒè™‘å¹¶å‘çš„æƒ…å†µï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘å°†mongoClientåšæˆä¸€ä¸ªé™æ€å˜é‡ï¼Œä¸ºæ‰€æœ‰çš„çº¿ç¨‹å…±ç”¨ï¼Œä¸å¿…æ¯æ¬¡éƒ½é”€æ¯ï¼Œè¿™æ ·å°±å¯ä»¥æå¤§çš„æé«˜æ‰§è¡Œçš„æ•ˆç‡ï¼Œå®é™…ä¸Šmongodbæä¾›äº†å†…ç½®çš„è¿æ¥æ± æ¥å®ç°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package com.mongo.util;

import com.mongodb.*;
import com.mongodb.client.MongoDatabase;

import java.util.Arrays;

/**
 * @program: mongodb
 * @author: æ½˜
 * @create: 2020-05-28 12:57
 **/
public class MongoManager {

    private static MongoClient client = null;

    private static void init(){
        MongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;, &amp;quot;admin&amp;quot;, &amp;quot;root&amp;quot;.toCharArray());
        ServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;, 27017);
        //é€‰é¡¹æ„é€ è€…
        MongoClientOptions.Builder builder = new MongoClientOptions.Builder();
        //è¯»å–æ•°æ®çš„è¶…æ—¶æ—¶é—´
        builder.socketTimeout(5000);
        //æ¯ä¸ªåœ°å€æœ€å¤§è¯·æ±‚æ•°
        builder.connectionsPerHost(30);
        //å†™å…¥çš„ç­–ç•¥,ä»…ä»…æŠ›å‡ºç½‘ç»œå¼‚å¸¸
        builder.writeConcern(WriteConcern.NORMAL);
        MongoClientOptions options = builder.build();
        client = new MongoClient(serverAddress, Arrays.asList(credential), options);
    }
    public static MongoDatabase getDatabase(String db){

        if(client == null){
            init();
        }

        return client.getDatabase(db);
    }

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;dao&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class StudentDao {
	public void save(String name,String sex,double age,String address){
		// 2.è·å–æ•°æ®åº“(æ•°æ®åº“)
		MongoDatabase database = MongoManager.getDatabase(&amp;quot;admin&amp;quot;);
		// 3.è·å–åˆ°collection(è¡¨)
		MongoCollection&amp;lt;Document&amp;gt; collection = database.getCollection(&amp;quot;student&amp;quot;);
		//4.å‡†å¤‡è¦æ·»åŠ çš„æ•°æ®
		Map&amp;lt;String, Object&amp;gt; map = new HashMap&amp;lt;String, Object&amp;gt;();
		map.put(&amp;quot;name&amp;quot;, name);
		map.put(&amp;quot;sex&amp;quot;, sex);
		map.put(&amp;quot;age&amp;quot;, age);
		map.put(&amp;quot;address&amp;quot;, address);
		Document document = new Document(map);
		//5.æ·»åŠ æ•°æ®
		collection.insertOne(document);
	}
}
&lt;/code&gt;&lt;/pre&gt;
">MongoDB</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/docker/"" data-c="
          &lt;h1 id=&#34;docker&#34;&gt;Docker&lt;/h1&gt;
&lt;h2 id=&#34;å®‰è£…docker&#34;&gt;å®‰è£…Docker&lt;/h2&gt;
&lt;h3 id=&#34;1-ä½¿ç”¨yumå‘½ä»¤åœ¨çº¿å®‰è£…&#34;&gt;1ã€ä½¿ç”¨yumå‘½ä»¤åœ¨çº¿å®‰è£…&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yum install docker
# é‡äº‹ä¸å†³å°±é€‰y
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2-æŸ¥çœ‹dockerç‰ˆæœ¬&#34;&gt;2ã€æŸ¥çœ‹dockerç‰ˆæœ¬&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker -v
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3-å¯åŠ¨ä¸åœæ­¢&#34;&gt;3ã€å¯åŠ¨ä¸åœæ­¢&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;systemctl å‘½ä»¤æ˜¯ç³»ç»ŸæœåŠ¡ç®¡ç†å™¨æŒ‡ä»¤ï¼Œå®ƒæ˜¯ service å’Œ chkconfig ä¸¤ä¸ªå‘½ä»¤ç»„åˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# å¯åŠ¨ docker
systemctl start docker
# åœæ­¢ docker
systemctl stop docker
# é‡å¯ docker
systemctl restart docker
# æŸ¥çœ‹ docker çŠ¶æ€
systemctl status docker
# å¼€æœºè‡ªå¯
systemctl enable docker
# æŸ¥çœ‹ docker æ¦‚è¦ä¿¡æ¯
docker info
# æŸ¥çœ‹ docker å¸®åŠ©æ–‡æ¡£
docker --info
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;docker-é•œåƒæ“ä½œ&#34;&gt;Docker é•œåƒæ“ä½œ&lt;/h2&gt;
&lt;h3 id=&#34;1-åˆ—å‡ºé•œåƒ&#34;&gt;1ã€åˆ—å‡ºé•œåƒ&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker images
# REPOSITORY   é•œåƒæ‰€åœ¨çš„ä»“åº“åç§° 
# TAG          é•œåƒæ ‡ç­¾ï¼ˆç‰ˆæœ¬å·ï¼‰
# IMAGE ID     é•œåƒID
# CREATE       é•œåƒåˆ›å»ºçš„æ—¶é—´ï¼ˆä»“åº“ä¸­åˆ›å»ºçš„æ—¶é—´ï¼‰
# SIZE         é•œåƒå¤§å°
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1590650520863.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;2-æœç´¢é•œåƒ&#34;&gt;2ã€æœç´¢é•œåƒ&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker search é•œåƒåç§°
# INDEX 
# NAME         ä»“åº“åç§°
# DESCRIPTION  é•œåƒæè¿°
# STARS        ç”¨æˆ·è¯„ä»·ï¼Œååº”ä¸€ä¸ªé•œåƒçš„å—æ¬¢è¿ç¨‹åº¦
# OFFICIAL     æ˜¯å¦æ˜¯å®˜æ–¹
# AUTOMATED    è‡ªåŠ¨æ„å»ºï¼Œè¡¨ç¤ºè¯¥é•œåƒç”±Docker Hubè‡ªåŠ¨æ„å»ºæµç¨‹åˆ›å»ºçš„
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1590650561249.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;3-æ‹‰å–é•œåƒ&#34;&gt;3ã€æ‹‰å–é•œåƒ&lt;/h3&gt;
&lt;h4 id=&#34;ä»docker-hubä¸Šæ‹‰å–&#34;&gt;ä»Docker Hubä¸Šæ‹‰å–&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker pull centos:7
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;ustcçš„é•œåƒ&#34;&gt;ustcçš„é•œåƒ&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;https://lug.ustc.edu.cn/wiki/mirrors/help/docker
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;é˜¿é‡Œäº‘é•œåƒ&#34;&gt;é˜¿é‡Œäº‘é•œåƒ&lt;/h4&gt;
&lt;p&gt;1ã€è¿›å…¥é˜¿é‡Œäº‘&lt;/p&gt;
&lt;p&gt;https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors&lt;/p&gt;
&lt;p&gt;2ã€å¾—åˆ°é•œåƒURLå¹¶ä¿®æ”¹daemon.json&lt;/p&gt;
&lt;p&gt;3ã€é‡å¯daemon&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;systemctl daemon-reload
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4ã€é‡å¯dockeræœåŠ¡&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;systemctl restart docker
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;ä¿®æ”¹daemonjson&#34;&gt;ä¿®æ”¹daemon.json&lt;/h4&gt;
&lt;p&gt;1ã€ç¼–è¾‘æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;vi /etc/docker/daemon.json
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€ä¿®æ”¹æ–‡ä»¶å†…å®¹&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;{
&amp;quot;registry-mirrors&amp;quot;: [&amp;quot;https://docker.mirrors.ustc.edu.cn&amp;quot;]
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€é‡å¯&lt;/p&gt;
&lt;h3 id=&#34;4-åˆ é™¤é•œåƒ&#34;&gt;4ã€åˆ é™¤é•œåƒ&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# åˆ é™¤æŒ‡å®šé•œåƒ
docker rmi $IMAGE_ID
# åˆ é™¤æ‰€æœ‰é•œåƒ
docker rmi `docker images -q`
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;dockerå®¹å™¨æ“ä½œ&#34;&gt;Dockerå®¹å™¨æ“ä½œ&lt;/h2&gt;
&lt;h3 id=&#34;1-æŸ¥çœ‹å®¹å™¨&#34;&gt;1ã€æŸ¥çœ‹å®¹å™¨&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨
docker ps
# æŸ¥çœ‹è¿è¡Œè¿‡çš„å®¹å™¨
docker ps -a
# æŸ¥çœ‹æœ€åä¸€æ¬¡è¿è¡Œçš„å®¹å™¨
docker ps -i
# æŸ¥çœ‹åœæ­¢çš„å®¹å™¨
docker ps -f status=exited
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2-åˆ›å»ºä¸å¯åŠ¨å®¹å™¨&#34;&gt;2ã€åˆ›å»ºä¸å¯åŠ¨å®¹å™¨&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºå®¹å™¨å¸¸ç”¨çš„å‚æ•°è¯´æ˜&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker run  åˆ›å»ºå®¹å™¨å‘½ä»¤
-i          è¿è¡Œè¯¥å®¹å™¨
-t          è¡¨ç¤ºå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥å…¶å‘½ä»¤è¡Œã€‚åŠ å…¥è¿™ä¸¤ä¸ªå‚æ•°åï¼Œå®¹å™¨åˆ›å»ºå°±èƒ½ç™»å½•è¿›å»ã€‚å³åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ã€‚
--name      ä¸ºåˆ›å»ºçš„å®¹å™¨å‘½å
-v          è¡¨ç¤ºç›®å½•æ˜ å°„å…³ç³»ï¼ˆå‰è€…æ˜¯å®¿ä¸»æœºç›®å½•ï¼Œåè€…æ˜¯æ˜ å°„åˆ°å®¿ä¸»æœºä¸Šçš„ç›®å½•ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªï¼våšå¤šä¸ªç›®å½•æˆ–æ–‡ä»¶æ˜ å°„ã€‚æ³¨æ„ï¼šæœ€å¥½åšç›®å½•æ˜ å°„ï¼Œåœ¨å®¿ä¸»æœºä¸Šåšä¿®æ”¹ï¼Œç„¶åå…±äº«åˆ°å®¹å™¨ä¸Šã€‚
-d          åœ¨runåé¢åŠ ä¸Š-då‚æ•°åˆ™ä¼šåˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨åœ¨åå°è¿è¡Œï¼ˆè¿™æ ·åˆ›å»ºå®¹å™¨åä¸ä¼šè‡ªåŠ¨ç™»é™†å®¹å™¨ï¼Œå¦‚æœåªåŠ -i-tä¸¤ä¸ªå‚æ•°ï¼Œåˆ›å»ºåå°±ä¼šè‡ªåŠ¨è¿›å…¥å®¹å™¨ï¼‰
-p          ç«¯å£æ˜ å°„ï¼Œå‰è€…æ˜¯å®¿ä¸»æœºç«¯å£ï¼Œåè€…æ˜¯å®¹å™¨å†…çš„æ˜ å°„ç«¯å£ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ª-påšå¤šä¸ªç«¯å£æ˜ å°„
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;äº¤äº’å¼å®¹å™¨&#34;&gt;äº¤äº’å¼å®¹å™¨&lt;/h4&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªäº¤äº’å¼å®¹å™¨å¹¶å‘½åä¸ºï¼šmycentos&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker run -it --name=mycentos centos:7 /bin/bash
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨exitå‘½ä»¤ é€€å‡ºå½“å‰å®¹å™¨&lt;/p&gt;
&lt;h4 id=&#34;åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨&#34;&gt;åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨&lt;/h4&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨ï¼šå¦‚æœå¯¹äºä¸€ä¸ªéœ€è¦é•¿æœŸè¿è¡Œçš„å®¹å™¨æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨ã€‚å‘½ä»¤å¦‚ä¸‹ï¼ˆå®¹å™¨åç§°ä¸èƒ½é‡å¤ï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker run -id --name=mycentos2  centos:7
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç™»é™†å®ˆæŠ¤å¼å®¹å™¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker exec -it container_name(æˆ–è€…container_id) /bin/bash (exité€€å‡ºæ—¶å®¹å™¨ä¸ä¼šåœæ­¢)
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1590650581316.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;3-åœæ­¢ä¸å¯åŠ¨å®¹å™¨&#34;&gt;3ã€åœæ­¢ä¸å¯åŠ¨å®¹å™¨&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# åœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨
docker stop $CONTAINER_NAME/ID
# è¿è¡Œå·²åœæ­¢çš„å®¹å™¨
docker start $CONTAINER_NAME/ID
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4-æ–‡ä»¶æ‹·è´&#34;&gt;4ã€æ–‡ä»¶æ‹·è´&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# å°†æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨å†…
docker cp å®¿ä¸»æœºå†…è¦æ‹·è´çš„æ–‡ä»¶æˆ–ç›®å½• å®¹å™¨åç§°:æ‹·è´åˆ°å®¹å™¨ç›®å½•
# å°†å®¹å™¨å†…çš„æ–‡ä»¶æ‹·è´å‡ºæ¥
docker cp å®¹å™¨åç§°:å®¹å™¨è¦æ‹·è´å‡ºå¼€çš„æ–‡ä»¶æˆ–ç›®å½• æ‹·è´åˆ°å®¿ä¸»æœºé‚£ä¸ªç›®å½•
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;5-ç›®å½•æŒ‚è½½&#34;&gt;5ã€ç›®å½•æŒ‚è½½&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™ï¼Œå°†å®¿ä¸»æœºçš„ç›®å½•ä¸å®¹å™¨å†…çš„ç›®å½•è¿›è¡Œæ˜ å°„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¿®æ”¹å®¿ä¸»æœºæŸä¸ªç›®å½•çš„æ–‡ä»¶ä»è€Œå»å½±å“å®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºå®¹å™¨ æ·»åŠ -vå‚æ•° åè¾¹ä¸º  å®¿ä¸»æœºç›®å½•:å®¹å™¨ç›®å½•&lt;/p&gt;
&lt;p&gt;å¦‚æœå…±äº«å¤šçº§ç›®å½•å¯èƒ½ä¼šå‡ºç°æƒé™ä¸è¶³çš„æƒ…å†µ&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸ºCentOS7ä¸­çš„å®‰å…¨æ¨¡å—selinuxæŠŠæƒé™ç¦æ‰äº†ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ å‚æ•° --privileged=true æ¥è§£å†³æŒ‚è½½çš„ç›®å½•æ²¡æœ‰æƒé™çš„é—®é¢˜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker run -di -v /usr/test:/usr/test --name=mycentos centos:7
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;6-æŸ¥çœ‹å®¹å™¨ipåœ°å€&#34;&gt;6ã€æŸ¥çœ‹å®¹å™¨IPåœ°å€&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®¹å™¨è¿è¡Œçš„å„ç§æ•°æ®
docker inspect container_name
# ä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ç›´æ¥è¾“å‡ºIPåœ°å€
docker inspect --format=&#39;{{.NetworkSettings.IPAddress}}&#39; container_name
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;7-åˆ é™¤å®¹å™¨&#34;&gt;7ã€åˆ é™¤å®¹å™¨&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# åˆ é™¤æŒ‡å®šå®¹å™¨
docker rm container_id/name
# åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼ˆä»¥åœæ­¢è¿è¡Œçš„ï¼‰
docker rm `docker ps -a -q`
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;éƒ¨ç½²åº”ç”¨&#34;&gt;éƒ¨ç½²åº”ç”¨&lt;/h2&gt;
&lt;h3 id=&#34;mysqléƒ¨ç½²&#34;&gt;MySQLéƒ¨ç½²&lt;/h3&gt;
&lt;p&gt;1ã€æ‹‰å–MySQLé•œåƒ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker pull mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€åˆ›å»ºMySQLå®¹å™¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# -p å®¿ä¸»æœºæ˜ å°„ç«¯å£:å®¹å™¨è¿è¡Œç«¯å£
# -e è¡¨ç¤ºæ·»åŠ ç¯å¢ƒå˜é‡ï¼ŒMYSQL_ROOT_PASSWORD ä¸ºrootç”¨æˆ·çš„ç™»é™†å¯†ç 
docker run -di --name=jd_mysql -p 33306:3306 -e MYSQL_ROOT_PASSWORD=root mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€è¿›å…¥MySQLå®¹å™¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker exec -it jd_mysql /bin/bash
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4ã€ç™»é™†MySQL&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# -u ç”¨æˆ·åï¼Œ-uåé¢éœ€è¦æ‰“ç©ºæ ¼
# -på¯†ç ï¼Œ-påé¢æ²¡æœ‰ç©ºæ ¼,åŠ äº†ç©ºæ ¼ä¼šå†è¾“å…¥ä¸€éå¯†ç 
mysql -u root -proot
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;5ã€é€€å‡ºMySQL&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# é€€å‡ºmysql
quit
# é€€å‡ºå®¹å™¨
exit
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;tomcatéƒ¨ç½²&#34;&gt;Tomcatéƒ¨ç½²&lt;/h3&gt;
&lt;p&gt;1ã€æ‹‰å–Tomcaté•œåƒ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker pull tomcat:7-jre7
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€åˆ›å»ºtomcatå®¹å™¨&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åˆ›å»ºå®¹å™¨ç”¨äºéƒ¨ç½²å•ç‚¹ç™»å½•ç³»ç»Ÿï¼ˆCASï¼‰ -pè¡¨ç¤ºåœ°å€æ˜ å°„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker run -di --name=jd_tomcat -p 9100:8080 -v /usr/local/webapps:/usr/local/tomcat/webapps --privileged=true tomcat:7-jre7
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€è®¿é—®ip:9100/cas&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç™»é™†æµ‹è¯•ï¼Œå¦‚æœå‡ºç°Invalid credentialsé‡å¯.&lt;/p&gt;
&lt;p&gt;docker restart jd_tomcat&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;nginxéƒ¨ç½²&#34;&gt;nginxéƒ¨ç½²&lt;/h3&gt;
&lt;p&gt;1ã€æ‹‰å–é•œåƒ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker pull nginx
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€åˆ›å»ºå®¹å™¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker run -di --name=mynginx -p 80:80 nginx /bin/bash
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€æµ‹è¯•&lt;/p&gt;
&lt;p&gt;æ— æ³•è®¿é—®éœ€è¦æ‰‹åŠ¨å¯åŠ¨nginx&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker exec -it jd_nginx /bin/bash
/etc/init.d/nginx start
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4ã€ç¼–è¾‘é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# å°†nginxé…ç½®æ–‡ä»¶å¤åˆ¶å‡ºæ¥
docker cp jd_nginx:/etc/nginx/nginx.conf  nginx.conf
# ä¿®æ”¹nginx.conf
.......
# å°†æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨
docker cp nginx.conf jd_nginx:/etc/nginx/nginx.conf
#é‡å¯å®¹å™¨
docker restart jd_nginx
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;rediséƒ¨ç½²&#34;&gt;Rediséƒ¨ç½²&lt;/h3&gt;
&lt;p&gt;1ã€æ‹‰å–é•œåƒ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker pull redis
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€åˆ›å»ºå®¹å™¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker run -di --name=jd_redis -p 6379:6379 redis
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€æµ‹è¯•è¿æ¥&lt;/p&gt;
&lt;p&gt;&lt;code&gt;redis Desktop&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;å¤‡ä»½ä¸è¿ç§»&#34;&gt;å¤‡ä»½ä¸è¿ç§»&lt;/h2&gt;
&lt;h3 id=&#34;1-å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒ&#34;&gt;1ã€å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒ&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker commit jd_nginx mynginx
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;jd_nginxï¼šå®¹å™¨åç§°&lt;/p&gt;
&lt;p&gt;mynginxï¼šæ–°é•œåƒåç§°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;2-é•œåƒå¤‡ä»½&#34;&gt;2ã€é•œåƒå¤‡ä»½&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker save -o mynginx.tar mynginx
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;-o ï¼šè¾“å‡ºåˆ°çš„æ–‡ä»¶&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;3-é•œåƒæ¢å¤ä¸è¿ç§»&#34;&gt;3ã€é•œåƒæ¢å¤ä¸è¿ç§»&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker load -i mynginx.tar
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;-i ï¼šè¾“å…¥çš„æ–‡ä»¶&lt;/p&gt;
&lt;/blockquote&gt;
">Docker</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/redis-cluster/"" data-c="
          &lt;h2 id=&#34;æ­å»ºredis-cluster&#34;&gt;æ­å»ºRedis-Cluster&lt;/h2&gt;
&lt;h3 id=&#34;æ­å»ºè¦æ±‚&#34;&gt;æ­å»ºè¦æ±‚&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;éœ€è¦ 6 å° redis æœåŠ¡å™¨ã€‚æ­å»ºä¼ªé›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦ 6 ä¸ª redis å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦è¿è¡Œåœ¨ä¸åŒçš„ç«¯å£ 7001-7006&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;å‡†å¤‡å·¥ä½œ&#34;&gt;å‡†å¤‡å·¥ä½œ&lt;/h3&gt;
&lt;h4 id=&#34;1-å®‰è£…gcc&#34;&gt;1ã€å®‰è£…gcc&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yum install gcc-c++
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;2-ä½¿ç”¨yumå‘½ä»¤å®‰è£…-ruby-æˆ‘ä»¬éœ€è¦ä½¿ç”¨rubyè„šæœ¬æ¥å®ç°é›†ç¾¤æ­å»º&#34;&gt;2ã€ä½¿ç”¨yumå‘½ä»¤å®‰è£… ruby ï¼ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨rubyè„šæœ¬æ¥å®ç°é›†ç¾¤æ­å»ºï¼‰&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yum install ruby
yum install rubygems
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥ä¸Šä¸¤æ­¥é‡åˆ°é€‰æ‹©y/Nç›´æ¥å¡«yå³å¯&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;3-å°†redisæºç åŒ…ä¸Šä¼ åˆ°-linux-ç³»ç»Ÿ-è§£å‹redisæºç åŒ…&#34;&gt;3ã€å°†redisæºç åŒ…ä¸Šä¼ åˆ° linux ç³»ç»Ÿ ï¼Œè§£å‹redisæºç åŒ…&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;tar -zxvf redis-3.0.0.tar.gz&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;4-ç¼–è¯‘redisæºç -è¿›å…¥redisæºç æ–‡ä»¶å¤¹&#34;&gt;4ã€ç¼–è¯‘redisæºç  ï¼Œè¿›å…¥redisæºç æ–‡ä»¶å¤¹&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd redis-3.0.0
make
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;5-åˆ›å»ºç›®å½•usrlocalredis-clusterç›®å½•-å®‰è£…6ä¸ªrediså®ä¾‹åˆ†åˆ«å®‰è£…åœ¨ä»¥ä¸‹ç›®å½•&#34;&gt;5ã€åˆ›å»ºç›®å½•/usr/local/redis-clusterç›®å½•ï¼Œ å®‰è£…6ä¸ªrediså®ä¾‹ï¼Œåˆ†åˆ«å®‰è£…åœ¨ä»¥ä¸‹ç›®å½•&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;mkdir /usr/local/redis-cluster
cd redis-3.0.0
make install PREFIX=/usr/local/redis-cluster/redis-1
......
make install PREFIX=/usr/local/redis-cluster/redis-6
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;6-å¤åˆ¶é…ç½®æ–‡ä»¶-å°†-redis-300redisconf-å¤åˆ¶åˆ°redisä¸‹çš„binç›®å½•ä¸‹&#34;&gt;6ã€å¤åˆ¶é…ç½®æ–‡ä»¶ å°† /redis-3.0.0/redis.conf å¤åˆ¶åˆ°redisä¸‹çš„binç›®å½•ä¸‹&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cp redis.conf /usr/local/redis-cluster/redis-1/bin
......
cp redis.conf /usr/local/redis-cluster/redis-6/bin
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;é…ç½®é›†ç¾¤&#34;&gt;é…ç½®é›†ç¾¤&lt;/h3&gt;
&lt;p&gt;1ã€ä¿®æ”¹æ¯ä¸ªredisèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶redis.conf&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¿®æ”¹è¿è¡Œç«¯å£ä¸º7001 ï¼ˆ7002 7003 .....ï¼‰(45è¡Œ)&lt;/p&gt;
&lt;p&gt;å°†cluster-enabled yes å‰çš„æ³¨é‡Šå»æ‰(632è¡Œ)&lt;/p&gt;
&lt;p&gt;daemonize no æ”¹ä¸ºyes ï¼ˆ43è¡Œï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd /usr/local/redis-cluster/
vi redis-1/bin/redis.conf
......
vi redis-6/bin/redis.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€å¯åŠ¨æ¯ä¸ªrediså®ä¾‹&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd redis-1/bin/
./redis-server redis.conf
.......
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€ä¸Šä¼ redis-3.0.0.gem ï¼Œå®‰è£… rubyç”¨äºæ­å»ºredisé›†ç¾¤çš„è„šæœ¬ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd ~
cp redis-3.0.0.gem /usr/local/redis-cluster/
cd redis-3.0.0/src/
cp redis-trib.rb /usr/local/redis-cluster/
cd /usr/local/redis-cluster/
gem install redis-3.0.0.gem
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4ã€ä½¿ç”¨ ruby è„šæœ¬æ­å»ºé›†ç¾¤ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿›å…¥redisæºç ç›®å½•ä¸­çš„srcç›®å½• æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;./redis-trib.rb create --replicas 1 192.168.25.144:7001 192.168.25.144:7002 192.168.25.144:7003 192.168.25.144:7004 192.168.25.144:7005 192.168.25.144:7006
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;5ã€æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;ps -ef | grep redis
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;springdataredisè¿æ¥redisé›†ç¾¤&#34;&gt;SpringDataRedisè¿æ¥Redisé›†ç¾¤&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt; 
&amp;lt;beans xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot; 
  xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot; xmlns:p=&amp;quot;http://www.springframework.org/schema/p&amp;quot; 
  xmlns:context=&amp;quot;http://www.springframework.org/schema/context&amp;quot; 
  xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans   
            http://www.springframework.org/schema/beans/spring-beans.xsd   
            http://www.springframework.org/schema/context   
            http://www.springframework.org/schema/context/spring-context.xsd&amp;quot;&amp;gt;  
	&amp;lt;!-- åŠ è½½é…ç½®å±æ€§æ–‡ä»¶ --&amp;gt;  
&amp;lt;context:property-placeholder ignore-unresolvable=&amp;quot;true&amp;quot; location=&amp;quot;classpath:properties/redis-cluster-config.properties&amp;quot; /&amp;gt;  
&amp;lt;bean id=&amp;quot;redis-clusterConfiguration&amp;quot; class=&amp;quot;org.springframework.data.redis.connection.redis-clusterConfiguration&amp;quot;&amp;gt;  
	&amp;lt;property name=&amp;quot;maxRedirects&amp;quot; value=&amp;quot;${redis.maxRedirects}&amp;quot;&amp;gt;&amp;lt;/property&amp;gt;  
	&amp;lt;property name=&amp;quot;clusterNodes&amp;quot;&amp;gt;  
	&amp;lt;set&amp;gt;  
		&amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  
			&amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host1}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
			&amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port1}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
		&amp;lt;/bean&amp;gt;  
		&amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  
			&amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host2}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
			&amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port2}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
		&amp;lt;/bean&amp;gt;  
		&amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  
			&amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host3}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
			&amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port3}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
		&amp;lt;/bean&amp;gt;  
	     &amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  
	         &amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host4}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
	         &amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port4}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
	      &amp;lt;/bean&amp;gt;  
	      &amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  
	         &amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host5}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
	         &amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port5}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
	      &amp;lt;/bean&amp;gt;  
		 &amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  
			&amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host6}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
			&amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port6}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  
		 &amp;lt;/bean&amp;gt;  
	   &amp;lt;/set&amp;gt;  
	 &amp;lt;/property&amp;gt;  
&amp;lt;/bean&amp;gt;  
&amp;lt;bean id=&amp;quot;jedisPoolConfig&amp;quot;   class=&amp;quot;redis.clients.jedis.JedisPoolConfig&amp;quot;&amp;gt;  
	   &amp;lt;property name=&amp;quot;maxIdle&amp;quot; value=&amp;quot;${redis.maxIdle}&amp;quot; /&amp;gt;   
	   &amp;lt;property name=&amp;quot;maxTotal&amp;quot; value=&amp;quot;${redis.maxTotal}&amp;quot; /&amp;gt;   
&amp;lt;/bean&amp;gt;  
&amp;lt;bean id=&amp;quot;jeidsConnectionFactory&amp;quot; class=&amp;quot;org.springframework.data.redis.connection.jedis.JedisConnectionFactory&amp;quot;  &amp;gt;  
		&amp;lt;constructor-arg ref=&amp;quot;redis-clusterConfiguration&amp;quot; /&amp;gt;  
		&amp;lt;constructor-arg ref=&amp;quot;jedisPoolConfig&amp;quot; /&amp;gt;  
&amp;lt;/bean&amp;gt;    
&amp;lt;bean id=&amp;quot;redisTemplate&amp;quot; class=&amp;quot;org.springframework.data.redis.core.RedisTemplate&amp;quot;&amp;gt;  
		&amp;lt;property name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;jeidsConnectionFactory&amp;quot; /&amp;gt;  
&amp;lt;/bean&amp;gt;  
&amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;redis-cluster-config.properties&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;redis.host1=192.168.25.140
redis.port1=7001

redis.host2=192.168.25.140
redis.port2=7002

redis.host3=192.168.25.140
redis.port3=7003

redis.host4=192.168.25.140
redis.port4=7004

redis.host5=192.168.25.140
redis.port5=7005

redis.host6=192.168.25.140
redis.port6=7006

redis.maxRedirects=3
redis.maxIdle=100
redis.maxTotal=600
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸æµ‹è¯•&#34;&gt;æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;å…³é—­èŠ‚ç‚¹å‘½ä»¤&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;./redis-cli -p ç«¯å£ shutdown 
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;æµ‹è¯•å…³é—­7001 å’Œ7004, çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;æµ‹è¯•å…³é—­7001ã€7002ã€7003 ä¼šå‘ç”Ÿä»€ä¹ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
">Redis-Cluster</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/zookeeper-cluster/"" data-c="
          &lt;p&gt;æŸ¥çœ‹tomcatè¿è¡Œæ—¥å¿—ï¼štail -f logs/catalina.out&lt;/p&gt;
&lt;h2 id=&#34;zookeeperå®‰è£…&#34;&gt;ZooKeeperå®‰è£…&lt;/h2&gt;
&lt;p&gt;å®˜ç½‘ä¸‹è½½ï¼šhttp://zookeeper.apache.org/releases.html&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å¯åŠ¨ä¼šå‡ºç°é”™è¯¯&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼šæŠŠconfç›®å½•ä¸‹çš„zoo_sample.cfgå¤åˆ¶ä¸€ä»½ï¼Œå¹¶æ”¹åä¸ºzoo.cfg&lt;/p&gt;
&lt;p&gt;åœ¨zookeeperæ ¹ç›®å½•æ–°å»ºä¸€ä¸ªdataç›®å½•&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹zoo.cfgé‡Œé¢çš„dataDir=/tmp/zookeeper&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹ä¸ºï¼š../data&lt;/p&gt;
&lt;h2 id=&#34;æœåŠ¡æä¾›è€…&#34;&gt;æœåŠ¡æä¾›è€…&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--ä½¿ç”¨dubboæš´æ¼æœåŠ¡--&amp;gt;
&amp;lt;dubbo:protocol name=&amp;quot;dubbo&amp;quot; port=&amp;quot;20881&amp;quot;/&amp;gt;
&amp;lt;!--å°†å·¥ç¨‹æ³¨å†Œåˆ°dubboä¸­--&amp;gt;
&amp;lt;dubbo:application name=&amp;quot;jd-sellergoods-service&amp;quot;/&amp;gt;
&amp;lt;!--æ³¨å†Œä¸­å¿ƒåœ°å€--&amp;gt;
&amp;lt;dubbo:registry address=&amp;quot;zookeeper://192.168.25.128:2181&amp;quot;/&amp;gt;
&amp;lt;!--å¼€å¯æ³¨è§£å¼€å‘--&amp;gt;
&amp;lt;dubbo:annotation package=&amp;quot;com.jd.service.impl&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;æœåŠ¡æ¶ˆè´¹è€…&#34;&gt;æœåŠ¡æ¶ˆè´¹è€…&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- å¼•ç”¨dubbo æœåŠ¡ --&amp;gt;
&amp;lt;dubbo:application name=&amp;quot;jd-sellergoods-web&amp;quot; /&amp;gt;
&amp;lt;dubbo:registry address=&amp;quot;zookeeper://192.168.25.128:2181&amp;quot; timeout=&amp;quot;30000&amp;quot;/&amp;gt;
&amp;lt;dubbo:annotation package=&amp;quot;com.jd.controller&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;zookeeperé›†ç¾¤ç®€ä»‹&#34;&gt;Zookeeperé›†ç¾¤ç®€ä»‹&lt;/h2&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆæ­å»ºzookeeperé›†ç¾¤&#34;&gt;ä¸ºä»€ä¹ˆæ­å»ºZookeeperé›†ç¾¤&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¤§éƒ¨åˆ†åˆ†å¸ƒå¼åº”ç”¨éœ€è¦ä¸€ä¸ªä¸»æ§ã€åè°ƒå™¨æˆ–è€…æ§åˆ¶å™¨æ¥ç®¡ç†ç‰©ç†åˆ†å¸ƒçš„å­è¿›ç¨‹ã€‚ç›®å‰ï¼Œå¤§å¤šæ•°éƒ½è¦å¼€å‘ç§æœ‰çš„åè°ƒç¨‹åºï¼Œç¼ºä¹ä¸€ä¸ªé€šç”¨æœºåˆ¶ï¼Œåè°ƒç¨‹åºçš„åå¤ç¼–å†™æµªè´¹ï¼Œä¸”éš¾ä»¥å½¢æˆé€šç”¨ã€ä¼¸ç¼©æ€§å¥½çš„åè°ƒå™¨ï¼Œzookeeperæä¾›é€šç”¨çš„åˆ†å¸ƒå¼é”æœåŠ¡ï¼Œç”¨ä»¥åè°ƒåˆ†å¸ƒå¼åº”ç”¨ã€‚æ‰€ä»¥è¯´zookeeperæ˜¯åˆ†å¸ƒå¼åº”ç”¨çš„åä½œæœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;zookeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½è¦è®¿é—®ï¼Œå¦‚æœæœ‰å¤§é‡çš„å¹¶å‘ï¼Œè‚¯å®šä¼šæœ‰ç­‰å¾…ã€‚æ‰€ä»¥å¯ä»¥é€šè¿‡zookeeperé›†ç¾¤è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯zookeeperé›†ç¾¤éƒ¨ç½²ç»“æ„å›¾ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1590380537479.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;äº†è§£leaderé€‰ä¸¾&#34;&gt;äº†è§£Leaderé€‰ä¸¾&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Zookeeperçš„å¯åŠ¨è¿‡ç¨‹ä¸­leaderé€‰ä¸¾æ˜¯éå¸¸é‡è¦è€Œä¸”æœ€å¤æ‚çš„ä¸€ä¸ªç¯èŠ‚ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯leaderé€‰ä¸¾å‘¢ï¼Ÿzookeeperä¸ºä»€ä¹ˆéœ€è¦leaderé€‰ä¸¾å‘¢ï¼Ÿzookeeperçš„leaderé€‰ä¸¾çš„è¿‡ç¨‹åˆæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯leaderé€‰ä¸¾ã€‚å…¶å®è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œleaderé€‰ä¸¾å°±åƒæ€»ç»Ÿé€‰ä¸¾ä¸€æ ·ï¼Œæ¯äººä¸€ç¥¨ï¼Œè·å¾—å¤šæ•°ç¥¨çš„äººå°±å½“é€‰ä¸ºæ€»ç»Ÿäº†ã€‚åœ¨zookeeperé›†ç¾¤ä¸­ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šæŠ•ç¥¨ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹è·å¾—è¶…è¿‡åŠæ•°ä»¥ä¸Šçš„èŠ‚ç‚¹çš„æŠ•ç¥¨ï¼Œåˆ™è¯¥èŠ‚ç‚¹å°±æ˜¯leaderèŠ‚ç‚¹äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜æ•´ä¸ªé€‰ä¸¾çš„è¿‡ç¨‹.&lt;br&gt;
å‡è®¾æœ‰äº”å°æœåŠ¡å™¨ç»„æˆçš„zookeeperé›†ç¾¤,å®ƒä»¬çš„idä»1-5,åŒæ—¶å®ƒä»¬éƒ½æ˜¯æœ€æ–°å¯åŠ¨çš„,ä¹Ÿå°±æ˜¯æ²¡æœ‰å†å²æ•°æ®,åœ¨å­˜æ”¾æ•°æ®é‡è¿™ä¸€ç‚¹ä¸Š,éƒ½æ˜¯ä¸€æ ·çš„.å‡è®¾è¿™äº›æœåŠ¡å™¨ä¾åºå¯åŠ¨,æ¥çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ ã€‚&lt;br&gt;
1) æœåŠ¡å™¨1å¯åŠ¨,æ­¤æ—¶åªæœ‰å®ƒä¸€å°æœåŠ¡å™¨å¯åŠ¨äº†,å®ƒå‘å‡ºå»çš„æŠ¥æ²¡æœ‰ä»»ä½•å“åº”,æ‰€ä»¥å®ƒçš„é€‰ä¸¾çŠ¶æ€ä¸€ç›´æ˜¯LOOKINGçŠ¶æ€&lt;br&gt;
2) æœåŠ¡å™¨2å¯åŠ¨,å®ƒä¸æœ€å¼€å§‹å¯åŠ¨çš„æœåŠ¡å™¨1è¿›è¡Œé€šä¿¡,äº’ç›¸äº¤æ¢è‡ªå·±çš„é€‰ä¸¾ç»“æœ,ç”±äºä¸¤è€…éƒ½æ²¡æœ‰å†å²æ•°æ®,æ‰€ä»¥idå€¼è¾ƒå¤§çš„æœåŠ¡å™¨2èƒœå‡º,ä½†æ˜¯ç”±äºæ²¡æœ‰è¾¾åˆ°è¶…è¿‡åŠæ•°ä»¥ä¸Šçš„æœåŠ¡å™¨éƒ½åŒæ„é€‰ä¸¾å®ƒ(è¿™ä¸ªä¾‹å­ä¸­çš„åŠæ•°ä»¥ä¸Šæ˜¯3),æ‰€ä»¥æœåŠ¡å™¨1,2è¿˜æ˜¯ç»§ç»­ä¿æŒLOOKINGçŠ¶æ€.&lt;br&gt;
3) æœåŠ¡å™¨3å¯åŠ¨,æ ¹æ®å‰é¢çš„ç†è®ºåˆ†æ,æœåŠ¡å™¨3æˆä¸ºæœåŠ¡å™¨1,2,3ä¸­çš„è€å¤§,è€Œä¸ä¸Šé¢ä¸åŒçš„æ˜¯,æ­¤æ—¶æœ‰ä¸‰å°æœåŠ¡å™¨é€‰ä¸¾äº†å®ƒ,æ‰€ä»¥å®ƒæˆä¸ºäº†è¿™æ¬¡é€‰ä¸¾çš„leader.&lt;br&gt;
4) æœåŠ¡å™¨4å¯åŠ¨,æ ¹æ®å‰é¢çš„åˆ†æ,ç†è®ºä¸ŠæœåŠ¡å™¨4åº”è¯¥æ˜¯æœåŠ¡å™¨1,2,3,4ä¸­æœ€å¤§çš„,ä½†æ˜¯ç”±äºå‰é¢å·²ç»æœ‰åŠæ•°ä»¥ä¸Šçš„æœåŠ¡å™¨é€‰ä¸¾äº†æœåŠ¡å™¨3,æ‰€ä»¥å®ƒåªèƒ½æ¥æ”¶å½“å°å¼Ÿçš„å‘½äº†.&lt;br&gt;
5) æœåŠ¡å™¨5å¯åŠ¨,åŒ4ä¸€æ ·,å½“å°å¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;zookeeperé›†ç¾¤æ­å»º&#34;&gt;ZooKeeperé›†ç¾¤æ­å»º&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;çœŸå®çš„é›†ç¾¤æ˜¯éœ€è¦éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šçš„ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬æµ‹è¯•æ—¶åŒæ—¶å¯åŠ¨åå‡ ä¸ªè™šæ‹Ÿæœºå†…å­˜ä¼šåƒä¸æ¶ˆï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¼šæ­å»º&lt;strong&gt;ä¼ªé›†ç¾¤&lt;/strong&gt;ï¼Œä¹Ÿå°±æ˜¯æŠŠæ‰€æœ‰çš„æœåŠ¡éƒ½æ­å»ºåœ¨ä¸€å°è™šæ‹Ÿæœºä¸Šï¼Œç”¨ç«¯å£è¿›è¡ŒåŒºåˆ†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¿™é‡Œè¦æ±‚æ­å»ºä¸€ä¸ªä¸‰ä¸ªèŠ‚ç‚¹çš„Zookeeperé›†ç¾¤ï¼ˆä¼ªé›†ç¾¤ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æµ‹è¯•ç¯å¢ƒ&lt;/p&gt;
&lt;p&gt;â€‹	jdkï¼š1.7&lt;/p&gt;
&lt;p&gt;â€‹	zookeeperï¼š3.4.6&lt;/p&gt;
&lt;p&gt;â€‹	centos ï¼š6.x&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;1-åˆ›å»ºä¸€ä¸ªç›®å½•&#34;&gt;1ã€åˆ›å»ºä¸€ä¸ªç›®å½•&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt; mkdir /usr/local/zookeeper-cluster
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2-ä¸Šä¼ zookeeperæ–‡ä»¶å¹¶è§£å‹&#34;&gt;2ã€ä¸Šä¼ zookeeperæ–‡ä»¶å¹¶è§£å‹&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;tar -zxvf zookeeper-3.4.6.tar.gz
# æ–°å»ºæ–‡ä»¶å¤¹
mkdir zookeeper-3.4.6/data
#ä¿®æ”¹coo.cfgå
cd zookeeper-3.4.6/conf/
mv zoo_sample.cfg zoo.cfg
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3-å¤åˆ¶zookeeper&#34;&gt;3ã€å¤åˆ¶zookeeper&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cp -r  zookeeper-3.4.6 /usr/local/zookeeper-cluster/zookeeper-1
cp -r  zookeeper-3.4.6 /usr/local/zookeeper-cluster/zookeeper-2
cp -r  zookeeper-3.4.6 /usr/local/zookeeper-cluster/zookeeper-3
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4-é…ç½®æ¯ä¸€ä¸ªzookeeper&#34;&gt;4ã€é…ç½®æ¯ä¸€ä¸ªZookeeper&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;é…ç½®æ¯ä¸€ä¸ªZookeeper çš„dataDirï¼ˆzoo.cfgï¼‰ clientPort åˆ†åˆ«ä¸º2181 2182 2183&lt;/p&gt;
&lt;p&gt;vi /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;clientPort=2181&lt;/p&gt;
&lt;p&gt;dataDir=/usr/local/zookeeper-cluster/zookeeper-1/data&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;vi /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;clientPort=2182&lt;/p&gt;
&lt;p&gt;dataDir=/usr/local/zookeeper-cluster/zookeeper-2/data&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;vi /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;clientPort=2183&lt;/p&gt;
&lt;p&gt;dataDir=/usr/local/zookeeper-cluster/zookeeper-3/data&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;5-é…ç½®é›†ç¾¤&#34;&gt;5ã€é…ç½®é›†ç¾¤&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨æ¯ä¸ªzookeeperçš„ data ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª myid æ–‡ä»¶ï¼Œå†…å®¹åˆ†åˆ«æ˜¯1ã€2ã€3 ã€‚è¿™ä¸ªæ–‡ä»¶å°±æ˜¯è®°å½•æ¯ä¸ªæœåŠ¡å™¨çš„IDï¼ˆå†…å®¹ä¸ºè‡ªå®šä¹‰ï¼Œåé¢ä¼šç”¨åˆ°ï¼Œåªè¦ä¸é‡å¤å³å¯ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd /usr/local/zookeeper-cluster/
echo 1 &amp;gt;zookeeper-1/data/myid
echo 2 &amp;gt;zookeeper-2/data/myid
echo 3 &amp;gt;zookeeper-3/data/myid
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨æ¯ä¸€ä¸ªzookeeper çš„ zoo.cfgé…ç½®å®¢æˆ·ç«¯è®¿é—®ç«¯å£ï¼ˆclientPortï¼‰å’Œé›†ç¾¤æœåŠ¡å™¨IPåˆ—è¡¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è§£é‡Šï¼šserver.æœåŠ¡å™¨ID=æœåŠ¡å™¨IPåœ°å€:æœåŠ¡å™¨ä¹‹é—´é€šä¿¡ç«¯å£:æœåŠ¡å™¨ä¹‹é—´æŠ•ç¥¨é€‰ä¸¾ç«¯å£&lt;/p&gt;
&lt;p&gt;æœåŠ¡å™¨IDä¸ºä¸Šé¢è‡ªå®šä¹‰çš„å†…å®¹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;server.1=192.168.25.143:2881:3881
server.2=192.168.25.143:2882:3882
server.3=192.168.25.143:2883:3883
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;vi zookeeper-1/conf/zoo.cfg
vi zookeeper-2/conf/zoo.cfg
vi zookeeper-3/conf/zoo.cfg
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;6-å¯åŠ¨é›†ç¾¤&#34;&gt;6ã€å¯åŠ¨é›†ç¾¤&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯åŠ¨é›†ç¾¤å°±æ˜¯åˆ†åˆ«å¯åŠ¨æ¯ä¸ªå®ä¾‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;./zookeeper-1/bin/zkServer.sh start
./zookeeper-2/bin/zkServer.sh start
./zookeeper-3/bin/zkServer.sh start
# æŸ¥çœ‹å¯åŠ¨çŠ¶æ€
./zookeeper-1/bin/zkServer.sh status
./zookeeper-2/bin/zkServer.sh status
./zookeeper-3/bin/zkServer.sh status
# å¦‚æœå‡ºç°é”™è¯¯ï¼Œåˆ™éœ€è¦æŸ¥çœ‹æ—¥å¿—
vi zookeeper.out
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1590380587607.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;Modeä¸ºfollowerè¡¨ç¤ºæ˜¯&lt;strong&gt;è·Ÿéšè€…&lt;/strong&gt;ï¼ˆä»ï¼‰&lt;/p&gt;
&lt;p&gt;Mod ä¸ºleaderè¡¨ç¤ºæ˜¯&lt;strong&gt;é¢†å¯¼è€…&lt;/strong&gt;ï¼ˆä¸»ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;7-æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸&#34;&gt;7ã€æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬å…ˆæµ‹è¯•å¦‚æœæ˜¯ä»æœåŠ¡å™¨æŒ‚æ‰ï¼Œä¼šæ€ä¹ˆæ ·&lt;/p&gt;
&lt;p&gt;æŠŠ3å·æœåŠ¡å™¨åœæ‰ï¼Œè§‚å¯Ÿ1å·å’Œ2å·ï¼Œå‘ç°çŠ¶æ€å¹¶æ²¡æœ‰å˜åŒ–&lt;/p&gt;
&lt;p&gt;ç”±æ­¤å¾—å‡ºç»“è®ºï¼Œ3ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œä»æœåŠ¡å™¨æŒ‚æ‰ï¼Œé›†ç¾¤æ­£å¸¸&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1590380605531.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘ä»¬å†æŠŠ1å·æœåŠ¡å™¨ï¼ˆä»æœåŠ¡å™¨ï¼‰ä¹Ÿåœæ‰ï¼ŒæŸ¥çœ‹2å·ï¼ˆä¸»æœåŠ¡å™¨ï¼‰çš„çŠ¶æ€ï¼Œå‘ç°å·²ç»åœæ­¢è¿è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;ç”±æ­¤å¾—å‡ºç»“è®ºï¼Œ3ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œ2ä¸ªä»æœåŠ¡å™¨éƒ½æŒ‚æ‰ï¼Œä¸»æœåŠ¡å™¨ä¹Ÿæ— æ³•è¿è¡Œã€‚å› ä¸ºå¯è¿è¡Œçš„æœºå™¨æ²¡æœ‰è¶…è¿‡é›†ç¾¤æ€»æ•°é‡çš„åŠæ•°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1590380619018.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘ä»¬å†æ¬¡æŠŠ1å·æœåŠ¡å™¨å¯åŠ¨èµ·æ¥ï¼Œå‘ç°2å·æœåŠ¡å™¨åˆå¼€å§‹æ­£å¸¸å·¥ä½œäº†ã€‚è€Œä¸”ä¾ç„¶æ˜¯é¢†å¯¼è€…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;5&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1590380630247.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘ä»¬æŠŠ3å·æœåŠ¡å™¨ä¹Ÿå¯åŠ¨èµ·æ¥ï¼ŒæŠŠ2å·æœåŠ¡å™¨åœæ‰ï¼ˆæ±—~~å¹²å˜›ï¼Ÿé¢†å¯¼æŒ‚äº†ï¼Ÿï¼‰åœæ‰åè§‚å¯Ÿ1å·å’Œ3å·çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;å‘ç°æ–°çš„leaderäº§ç”Ÿäº†~&lt;/p&gt;
&lt;p&gt;ç”±æ­¤æˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œå½“é›†ç¾¤ä¸­çš„ä¸»æœåŠ¡å™¨æŒ‚äº†ï¼Œé›†ç¾¤ä¸­çš„å…¶ä»–æœåŠ¡å™¨ä¼šè‡ªåŠ¨è¿›è¡Œé€‰ä¸¾çŠ¶æ€ï¼Œç„¶åäº§ç”Ÿæ–°å¾—leader&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;6&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1590380642196.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘ä»¬å†æ¬¡æµ‹è¯•ï¼Œå½“æˆ‘ä»¬æŠŠ2å·æœåŠ¡å™¨é‡æ–°å¯åŠ¨èµ·æ¥ï¼ˆæ±—~~è¿™æ˜¯è¯ˆå°¸å•Š!ï¼‰å¯åŠ¨åï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ2å·æœåŠ¡å™¨ä¼šå†æ¬¡æˆä¸ºæ–°çš„é¢†å¯¼å—ï¼Ÿæˆ‘ä»¬çœ‹ç»“æœ&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¼šå‘ç°ï¼Œ2å·æœåŠ¡å™¨å¯åŠ¨åä¾ç„¶æ˜¯è·Ÿéšè€…ï¼ˆä»æœåŠ¡å™¨ï¼‰ï¼Œ3å·æœåŠ¡å™¨ä¾ç„¶æ˜¯é¢†å¯¼è€…ï¼ˆä¸»æœåŠ¡å™¨ï¼‰ï¼Œæ²¡æœ‰æ’¼åŠ¨3å·æœåŠ¡å™¨çš„é¢†å¯¼åœ°ä½ã€‚å“~é€€ä¼‘äº†å°±æ˜¯é€€ä¼‘äº†ï¼Œè¯´äº†ä¸ç®—äº†ï¼Œå“ˆå“ˆã€‚&lt;/p&gt;
&lt;p&gt;ç”±æ­¤æˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œå½“é¢†å¯¼è€…äº§ç”Ÿåï¼Œå†æ¬¡æœ‰æ–°æœåŠ¡å™¨åŠ å…¥é›†ç¾¤ï¼Œä¸ä¼šå½±å“åˆ°ç°ä»»é¢†å¯¼è€…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;7&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1590380653854.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;dubboxè¿æ¥zookeeperé›†ç¾¤&#34;&gt;Dubboxè¿æ¥zookeeperé›†ç¾¤&lt;/h2&gt;
&lt;p&gt;ä¿®æ”¹æœåŠ¡æä¾›è€…å’ŒæœåŠ¡è°ƒç”¨è€…çš„spring é…ç½®æ–‡ä»¶,å¤šä¸ªèŠ‚ç‚¹ä½¿ç”¨â€œ,â€åˆ†å‰²&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- æŒ‡å®šæ³¨å†Œä¸­å¿ƒåœ°å€ --&amp;gt;
&amp;lt;dubbo:registry protocol=&amp;quot;zookeeper&amp;quot; address=&amp;quot;192.168.25.129:2181,192.168.25.129:2182,192.168.25.129:2183&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
"> Zookeeper-Cluster</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/dan-dian-deng-lu-cas/"" data-c="
          &lt;h2 id=&#34;ä»€ä¹ˆæ˜¯å•ç‚¹ç™»å½•&#34;&gt;ä»€ä¹ˆæ˜¯å•ç‚¹ç™»å½•&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;http://baike.baidu.com/item/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95&#34;&gt;å•ç‚¹ç™»å½•&lt;/a&gt;ï¼ˆSingle Sign Onï¼‰ï¼Œç®€ç§°ä¸º SSOï¼Œæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„ä¼ä¸šä¸šåŠ¡æ•´åˆçš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€ã€‚SSOçš„å®šä¹‰æ˜¯åœ¨å¤šä¸ªåº”ç”¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·åªéœ€è¦ç™»å½•ä¸€æ¬¡å°±å¯ä»¥è®¿é—®æ‰€æœ‰ç›¸äº’ä¿¡ä»»çš„åº”ç”¨ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç›®å‰çš„ç³»ç»Ÿå­˜åœ¨è¯¸å¤šå­ç³»ç»Ÿï¼Œè€Œè¿™äº›å­ç³»ç»Ÿæ˜¯åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸­ï¼Œé‚£ä¹ˆä½¿ç”¨ä¼ ç»Ÿæ–¹å¼çš„sessionæ˜¯æ— æ³•è§£å†³çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç›¸å…³çš„å•ç‚¹ç™»å½•æŠ€æœ¯æ¥è§£å†³ã€‚&lt;br&gt;
&lt;img src=&#34;https://haohanya.github.io/post-images/1589897963520.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯cas&#34;&gt;ä»€ä¹ˆæ˜¯CAS&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;CAS æ˜¯ Yale å¤§å­¦å‘èµ·çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ—¨åœ¨ä¸º Web åº”ç”¨ç³»ç»Ÿæä¾›ä¸€ç§å¯é çš„å•ç‚¹ç™»å½•æ–¹æ³•ï¼ŒCAS åœ¨ 2004 å¹´ 12 æœˆæ­£å¼æˆä¸º JA-SIG çš„ä¸€ä¸ªé¡¹ç›®ã€‚CAS å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;ã€1ã€‘å¼€æºçš„ä¼ä¸šçº§å•ç‚¹ç™»å½•è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;ã€2ã€‘CAS Server ä¸ºéœ€è¦ç‹¬ç«‹éƒ¨ç½²çš„ Web åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ã€3ã€‘CAS Client æ”¯æŒéå¸¸å¤šçš„å®¢æˆ·ç«¯(è¿™é‡ŒæŒ‡å•ç‚¹ç™»å½•ç³»ç»Ÿä¸­çš„å„ä¸ª Web åº”ç”¨)ï¼ŒåŒ…æ‹¬ Java, .Net, PHP, Perl, Apache, uPortal, Ruby ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä»ç»“æ„ä¸Šçœ‹ï¼ŒCAS åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š CAS Server å’Œ CAS Clientã€‚CAS Server éœ€è¦ç‹¬ç«‹éƒ¨ç½²ï¼Œä¸»è¦è´Ÿè´£å¯¹ç”¨æˆ·çš„è®¤è¯å·¥ä½œï¼›CAS Client è´Ÿè´£å¤„ç†å¯¹å®¢æˆ·ç«¯å—ä¿æŠ¤èµ„æºçš„è®¿é—®è¯·æ±‚ï¼Œéœ€è¦ç™»å½•æ—¶ï¼Œé‡å®šå‘åˆ° CAS Serverã€‚ä¸‹å›¾æ˜¯ CAS æœ€åŸºæœ¬çš„åè®®è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1589897985205.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;SSOå•ç‚¹ç™»å½•è®¿é—®æµç¨‹ä¸»è¦æœ‰ä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è®¿é—®æœåŠ¡ï¼šSSOå®¢æˆ·ç«¯å‘é€è¯·æ±‚è®¿é—®åº”ç”¨ç³»ç»Ÿæä¾›çš„æœåŠ¡èµ„æºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®šå‘è®¤è¯ï¼šSSOå®¢æˆ·ç«¯ä¼šé‡å®šå‘ç”¨æˆ·è¯·æ±‚åˆ°SSOæœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æˆ·è®¤è¯ï¼šç”¨æˆ·èº«ä»½è®¤è¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘æ”¾ç¥¨æ®ï¼šSSOæœåŠ¡å™¨ä¼šäº§ç”Ÿä¸€ä¸ªéšæœºçš„Service Ticketã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éªŒè¯ç¥¨æ®ï¼šSSOæœåŠ¡å™¨éªŒè¯ç¥¨æ®Service Ticketçš„åˆæ³•æ€§ï¼ŒéªŒè¯é€šè¿‡åï¼Œå…è®¸å®¢æˆ·ç«¯è®¿é—®æœåŠ¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¼ è¾“ç”¨æˆ·ä¿¡æ¯ï¼šSSOæœåŠ¡å™¨éªŒè¯ç¥¨æ®é€šè¿‡åï¼Œä¼ è¾“ç”¨æˆ·è®¤è¯ç»“æœä¿¡æ¯ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;casæœåŠ¡ç«¯éƒ¨ç½²&#34;&gt;CASæœåŠ¡ç«¯éƒ¨ç½²&lt;/h2&gt;
&lt;h3 id=&#34;1-caså®‰è£…&#34;&gt;1ã€caså®‰è£…&lt;/h3&gt;
&lt;p&gt;åœ¨èµ„æº\cas\source\cas-server-4.0.0-release\cas-server-4.0.0\modulesç›®å½•ä¸‹&lt;/p&gt;
&lt;p&gt;cas-server-webapp-4.0.0.war å°†å…¶æ”¹åä¸ºcas.waræ”¾å…¥tomcatç›®å½•ä¸‹çš„webappsä¸‹ã€‚å¯åŠ¨tomcatè‡ªåŠ¨è§£å‹waråŒ…ã€‚æµè§ˆå™¨è¾“å…¥http://localhost:8080/cas/login ï¼Œå¯çœ‹åˆ°ç™»å½•é¡µé¢&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1589897998952.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸ªå›ºå®šçš„ç”¨æˆ·åå’Œå¯†ç   casuser/Mellon&lt;/p&gt;
&lt;p&gt;ç™»å½•æˆåŠŸåä¼šè·³åˆ°ç™»å½•æˆåŠŸçš„æç¤ºé¡µé¢&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1589898004970.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;2-ä¿®æ”¹ç«¯å£&#34;&gt;2ã€ä¿®æ”¹ç«¯å£&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä¿®æ”¹tomcatç«¯å£&lt;/p&gt;
&lt;p&gt;æ‰“å¼€tomcat ç›®å½• conf\server.xml æ‰¾åˆ°ä¸‹é¢çš„é…ç½®&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;Connector port=&amp;quot;8080&amp;quot; protocol=&amp;quot;HTTP/1.1&amp;quot;
               connectionTimeout=&amp;quot;20000&amp;quot;
               redirectPort=&amp;quot;8443&amp;quot; /&amp;gt;
&amp;lt;!--ä¿®æ”¹portä¸º9100--&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¿®æ”¹CASé…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;WEB-INF/cas.properties&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;server.name=http://localhost:9100
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-å»é™¤httpsè®¤è¯&#34;&gt;3ã€å»é™¤httpsè®¤è¯&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;CASé»˜è®¤ä½¿ç”¨çš„æ˜¯HTTPSåè®®ï¼Œå¦‚æœä½¿ç”¨HTTPSåè®®éœ€è¦SSLå®‰å…¨è¯ä¹¦ï¼ˆéœ€å‘ç‰¹å®šçš„æœºæ„ç”³è¯·å’Œè´­ä¹°ï¼‰ ã€‚å¦‚æœå¯¹å®‰å…¨è¦æ±‚ä¸é«˜æˆ–æ˜¯åœ¨å¼€å‘æµ‹è¯•é˜¶æ®µï¼Œå¯ä½¿ç”¨HTTPåè®®ã€‚æˆ‘ä»¬è¿™é‡Œè®²è§£é€šè¿‡ä¿®æ”¹é…ç½®ï¼Œè®©CASä½¿ç”¨HTTPåè®®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä¿®æ”¹casçš„WEB-INF/deployerConfigContext.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;bean class=&amp;quot;org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler&amp;quot;
p:httpClient-ref=&amp;quot;httpClient&amp;quot;/&amp;gt;
&amp;lt;!-- 
	è¿™é‡Œéœ€è¦å¢åŠ å‚æ•°p:requireSecure=&amp;quot;false&amp;quot;
	requireSecureå±æ€§æ„æ€ä¸ºæ˜¯å¦éœ€è¦å®‰å…¨éªŒè¯
	å³HTTPSï¼Œfalseä¸ºä¸é‡‡ç”¨
 --&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¿®æ”¹casçš„/WEB-INF/&lt;a href=&#34;http://lib.csdn.net/base/javaee&#34;&gt;&lt;strong&gt;spring&lt;/strong&gt;&lt;/a&gt;-configuration/ticketGrantingTicketCookieGenerator.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;bean id=&amp;quot;ticketGrantingTicketCookieGenerator&amp;quot; class=&amp;quot;org.jasig.cas.web.support.CookieRetrievingCookieGenerator&amp;quot;
      p:cookieSecure=&amp;quot;true&amp;quot;
      p:cookieMaxAge=&amp;quot;-1&amp;quot;
      p:cookieName=&amp;quot;CASTGC&amp;quot;
      p:cookiePath=&amp;quot;/cas&amp;quot; /&amp;gt;
&amp;lt;!--
	å‚æ•°p:cookieSecure=&amp;quot;true&amp;quot;ï¼ŒåŒç†ä¸ºHTTPSéªŒè¯ç›¸å…³ï¼ŒTRUEä¸ºé‡‡ç”¨HTTPSéªŒè¯ï¼ŒFALSEä¸ºä¸é‡‡ç”¨httpséªŒè¯ã€‚
    å‚æ•°p:cookieMaxAge=&amp;quot;-1&amp;quot;ï¼Œæ˜¯COOKIEçš„æœ€å¤§ç”Ÿå‘½å‘¨æœŸï¼Œ-1ä¸ºæ— ç”Ÿå‘½å‘¨æœŸï¼Œå³åªåœ¨å½“å‰æ‰“å¼€çš„çª—å£æœ‰æ•ˆï¼Œå…³é—­æˆ–é‡æ–°æ‰“å¼€å…¶å®ƒçª—å£ï¼Œä»ä¼šè¦æ±‚éªŒè¯ã€‚å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ä¸ºå¤§äº0çš„æ•°å­—ï¼Œæ¯”å¦‚3600ç­‰ï¼Œæ„æ€æ˜¯åœ¨3600ç§’å†…ï¼Œæ‰“å¼€ä»»æ„çª—å£ï¼Œéƒ½ä¸éœ€è¦éªŒè¯ã€‚
    æˆ‘ä»¬è¿™é‡Œå°†cookieSecureæ”¹ä¸ºfalse ,  cookieMaxAge æ”¹ä¸º3600
--&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¿®æ”¹casçš„WEB-INF/spring-configuration/warnCookieGenerator.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;bean id=&amp;quot;warnCookieGenerator&amp;quot; class=&amp;quot;org.jasig.cas.web.support.CookieRetrievingCookieGenerator&amp;quot;
    p:cookieSecure=&amp;quot;true&amp;quot;
    p:cookieMaxAge=&amp;quot;-1&amp;quot;
    p:cookieName=&amp;quot;CASPRIVACY&amp;quot;
    p:cookiePath=&amp;quot;/cas&amp;quot; /&amp;gt;
&amp;lt;!-- å°†cookieSecureæ”¹ä¸ºfalse ,  cookieMaxAge æ”¹ä¸º3600 --&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;caså®¢æˆ·ç«¯å…¥é—¨å°demo&#34;&gt;CASå®¢æˆ·ç«¯å…¥é—¨å°Demo&lt;/h2&gt;
&lt;h3 id=&#34;å®¢æˆ·ç«¯å·¥ç¨‹1æ­å»º&#34;&gt;å®¢æˆ·ç«¯å·¥ç¨‹1æ­å»º&lt;/h3&gt;
&lt;h4 id=&#34;1-æ­å»ºå·¥ç¨‹å¼•å…¥ä¾èµ–&#34;&gt;1ã€æ­å»ºå·¥ç¨‹å¼•å…¥ä¾èµ–&lt;/h4&gt;
&lt;p&gt;åˆ›å»ºMavenå·¥ç¨‹ ï¼ˆwarï¼‰casclient_demo1 å¼•å…¥caså®¢æˆ·ç«¯ä¾èµ–å¹¶åˆ¶å®štomcatè¿è¡Œç«¯å£ä¸º9001&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;dependencies&amp;gt;
    &amp;lt;!-- cas --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.jasig.cas.client&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;cas-client-core&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;3.3.3&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;javax.servlet&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;servlet-api&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;2.5&amp;lt;/version&amp;gt;
        &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;
    &amp;lt;/dependency&amp;gt;
&amp;lt;/dependencies&amp;gt;

&amp;lt;build&amp;gt;
    &amp;lt;plugins&amp;gt;
        &amp;lt;!-- é…ç½®Tomcatæ’ä»¶ --&amp;gt;
        &amp;lt;plugin&amp;gt;
            &amp;lt;groupId&amp;gt;org.apache.tomcat.maven&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;tomcat7-maven-plugin&amp;lt;/artifactId&amp;gt;
            &amp;lt;configuration&amp;gt;
                &amp;lt;port&amp;gt;9001&amp;lt;/port&amp;gt;
                &amp;lt;path&amp;gt;/&amp;lt;/path&amp;gt;
                &amp;lt;uriEncoding&amp;gt;utf-8&amp;lt;/uriEncoding&amp;gt;
            &amp;lt;/configuration&amp;gt;
        &amp;lt;/plugin&amp;gt;
    &amp;lt;/plugins&amp;gt;
&amp;lt;/build&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;2-ä¿®æ”¹webxml&#34;&gt;2ã€ä¿®æ”¹web.xml&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;web-app xmlns=&amp;quot;http://xmlns.jcp.org/xml/ns/javaee&amp;quot;
         xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;
         xsi:schemaLocation=&amp;quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&amp;quot;
         version=&amp;quot;4.0&amp;quot;&amp;gt;

    &amp;lt;!-- ç”¨äºå•ç‚¹é€€å‡ºï¼Œè¯¥è¿‡æ»¤å™¨ç”¨äºå®ç°å•ç‚¹ç™»å‡ºåŠŸèƒ½ï¼Œå¯é€‰é…ç½® --&amp;gt;
    &amp;lt;listener&amp;gt;
        &amp;lt;listener-class&amp;gt;org.jasig.cas.client.session.SingleSignOutHttpSessionListener&amp;lt;/listener-class&amp;gt;
    &amp;lt;/listener&amp;gt;

    &amp;lt;!-- è¯¥è¿‡æ»¤å™¨ç”¨äºå®ç°å•ç‚¹ç™»å‡ºåŠŸèƒ½ï¼Œå¯é€‰é…ç½®ã€‚ --&amp;gt;
    &amp;lt;filter&amp;gt;
        &amp;lt;filter-name&amp;gt;CAS Single Sign Out Filter&amp;lt;/filter-name&amp;gt;
        &amp;lt;filter-class&amp;gt;org.jasig.cas.client.session.SingleSignOutFilter&amp;lt;/filter-class&amp;gt;
    &amp;lt;/filter&amp;gt;
    &amp;lt;filter-mapping&amp;gt;
        &amp;lt;filter-name&amp;gt;CAS Single Sign Out Filter&amp;lt;/filter-name&amp;gt;
        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
    &amp;lt;/filter-mapping&amp;gt;

    &amp;lt;!-- è¯¥è¿‡æ»¤å™¨è´Ÿè´£ç”¨æˆ·çš„è®¤è¯å·¥ä½œï¼Œå¿…é¡»å¯ç”¨å®ƒ --&amp;gt;
    &amp;lt;filter&amp;gt;
        &amp;lt;filter-name&amp;gt;CASFilter&amp;lt;/filter-name&amp;gt;
        &amp;lt;filter-class&amp;gt;org.jasig.cas.client.authentication.AuthenticationFilter&amp;lt;/filter-class&amp;gt;
        &amp;lt;init-param&amp;gt;
            &amp;lt;param-name&amp;gt;casServerLoginUrl&amp;lt;/param-name&amp;gt;
            &amp;lt;param-value&amp;gt;http://localhost:9100/cas/login&amp;lt;/param-value&amp;gt;
            &amp;lt;!--è¿™é‡Œçš„serveræ˜¯æœåŠ¡ç«¯çš„IP --&amp;gt;
        &amp;lt;/init-param&amp;gt;
        &amp;lt;init-param&amp;gt;
            &amp;lt;param-name&amp;gt;serverName&amp;lt;/param-name&amp;gt;
            &amp;lt;param-value&amp;gt;http://localhost:9001&amp;lt;/param-value&amp;gt;
        &amp;lt;/init-param&amp;gt;
    &amp;lt;/filter&amp;gt;
    &amp;lt;filter-mapping&amp;gt;
        &amp;lt;filter-name&amp;gt;CASFilter&amp;lt;/filter-name&amp;gt;
        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
    &amp;lt;/filter-mapping&amp;gt;

    &amp;lt;!-- è¯¥è¿‡æ»¤å™¨è´Ÿè´£å¯¹Ticketçš„æ ¡éªŒå·¥ä½œï¼Œå¿…é¡»å¯ç”¨å®ƒ --&amp;gt;
    &amp;lt;filter&amp;gt;
        &amp;lt;filter-name&amp;gt;CAS Validation Filter&amp;lt;/filter-name&amp;gt;
        &amp;lt;filter-class&amp;gt;org.jasig.cas.client.validation.Cas20ProxyReceivingTicketValidationFilter&amp;lt;/filter-class&amp;gt;
        &amp;lt;init-param&amp;gt;
            &amp;lt;param-name&amp;gt;casServerUrlPrefix&amp;lt;/param-name&amp;gt;
            &amp;lt;param-value&amp;gt;http://localhost:9100/cas&amp;lt;/param-value&amp;gt;
        &amp;lt;/init-param&amp;gt;
        &amp;lt;init-param&amp;gt;
            &amp;lt;param-name&amp;gt;serverName&amp;lt;/param-name&amp;gt;
            &amp;lt;param-value&amp;gt;http://localhost:9001&amp;lt;/param-value&amp;gt;
        &amp;lt;/init-param&amp;gt;
    &amp;lt;/filter&amp;gt;
    &amp;lt;filter-mapping&amp;gt;
        &amp;lt;filter-name&amp;gt;CAS Validation Filter&amp;lt;/filter-name&amp;gt;
        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
    &amp;lt;/filter-mapping&amp;gt;

    &amp;lt;!-- è¯¥è¿‡æ»¤å™¨è´Ÿè´£å®ç°HttpServletRequestè¯·æ±‚çš„åŒ…è£¹ï¼Œ æ¯”å¦‚å…è®¸å¼€å‘è€…é€šè¿‡HttpServletRequestçš„getRemoteUser()æ–¹æ³•è·å¾—SSOç™»å½•ç”¨æˆ·çš„ç™»å½•åï¼Œå¯é€‰é…ç½®ã€‚ --&amp;gt;
    &amp;lt;filter&amp;gt;
        &amp;lt;filter-name&amp;gt;CAS HttpServletRequest Wrapper Filter&amp;lt;/filter-name&amp;gt;
        &amp;lt;filter-class&amp;gt;
            org.jasig.cas.client.util.HttpServletRequestWrapperFilter&amp;lt;/filter-class&amp;gt;
    &amp;lt;/filter&amp;gt;
    &amp;lt;filter-mapping&amp;gt;
        &amp;lt;filter-name&amp;gt;CAS HttpServletRequest Wrapper Filter&amp;lt;/filter-name&amp;gt;
        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
    &amp;lt;/filter-mapping&amp;gt;

    &amp;lt;!-- è¯¥è¿‡æ»¤å™¨ä½¿å¾—å¼€å‘è€…å¯ä»¥é€šè¿‡org.jasig.cas.client.util.AssertionHolderæ¥è·å–ç”¨æˆ·çš„ç™»å½•åã€‚ æ¯”å¦‚AssertionHolder.getAssertion().getPrincipal().getName()ã€‚ --&amp;gt;
    &amp;lt;filter&amp;gt;
        &amp;lt;filter-name&amp;gt;CAS Assertion Thread Local Filter&amp;lt;/filter-name&amp;gt;
        &amp;lt;filter-class&amp;gt;org.jasig.cas.client.util.AssertionThreadLocalFilter&amp;lt;/filter-class&amp;gt;
    &amp;lt;/filter&amp;gt;
    &amp;lt;filter-mapping&amp;gt;
        &amp;lt;filter-name&amp;gt;CAS Assertion Thread Local Filter&amp;lt;/filter-name&amp;gt;
        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
    &amp;lt;/filter-mapping&amp;gt;

&amp;lt;/web-app&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;3-ç¼–å†™indexjsp&#34;&gt;3ã€ç¼–å†™index.jsp&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-jsp&#34;&gt;&amp;lt;%@ page language=&amp;quot;java&amp;quot; contentType=&amp;quot;text/html; charset=utf-8&amp;quot; pageEncoding=&amp;quot;utf-8&amp;quot;%&amp;gt;
&amp;lt;!DOCTYPE html PUBLIC &amp;quot;-//W3C//DTD HTML 4.01 Transitional//EN&amp;quot; &amp;quot;http://www.w3.org/TR/html4/loose.dtd&amp;quot;&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html; charset=utf-8&amp;quot;&amp;gt;
    &amp;lt;title&amp;gt;Hello&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
æ¬¢è¿ç™»é™†ä¸€ï¼š
&amp;lt;%--ä¸ºè·å–è¿œç¨‹ç™»å½•å--%&amp;gt;
&amp;lt;%=request.getRemoteUser()%&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å®¢æˆ·ç«¯å·¥ç¨‹2æ­å»º&#34;&gt;å®¢æˆ·ç«¯å·¥ç¨‹2æ­å»º&lt;/h3&gt;
&lt;h4 id=&#34;1-æ­å»ºå·¥ç¨‹&#34;&gt;1ã€æ­å»ºå·¥ç¨‹&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;åˆ›å»ºMavenå·¥ç¨‹ ï¼ˆwarï¼‰casclient_demo2 å¼•å…¥caså®¢æˆ·ç«¯ä¾èµ–å¹¶åˆ¶å®štomcatè¿è¡Œç«¯å£ä¸º9002&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;2-ä¿®æ”¹webxml-2&#34;&gt;2ã€ä¿®æ”¹web.xml&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;åˆ›å»ºweb.xmlï¼Œå‚ç…§casclient_demo1 ,å°†serverNameçš„å€¼æ”¹ä¸ºhttp://localhost:9002ï¼Œä¸€å…±ä¸¤å¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;3-ç¼–å†™indexjsp-2&#34;&gt;3ã€ç¼–å†™index.jsp&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-jsp&#34;&gt;åˆ›å»ºindex.jsp  ,å†…å®¹æ˜¾ç¤ºâ€œæ¬¢è¿ç™»é™†äºŒï¼šâ€
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å•ç‚¹é€€å‡ºç™»å½•&#34;&gt;å•ç‚¹é€€å‡ºç™»å½•&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ°å€æ è¾“å…¥ &lt;a href=&#34;http://localhost:9000/cas/logout&#34;&gt;http://localhost:9100/cas/logout&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å³å¯çœ‹åˆ°é€€å‡ºåçš„æç¤ºé¡µé¢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;æŒ‡å®šé€€å‡ºåè·³è½¬åœ°å€&#34;&gt;æŒ‡å®šé€€å‡ºåè·³è½¬åœ°å€&lt;/h4&gt;
&lt;p&gt;1ã€ä¿®æ”¹casç³»ç»Ÿçš„é…ç½®æ–‡ä»¶cas-servlet.xmlï¼ˆ217è¡Œï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt; &amp;lt;bean id=&amp;quot;logoutAction&amp;quot; class=&amp;quot;org.jasig.cas.web.flow.LogoutAction&amp;quot;
        p:servicesManager-ref=&amp;quot;servicesManager&amp;quot;
        p:followServiceRedirects=&amp;quot;${cas.logout.followServiceRedirects:false}&amp;quot;/&amp;gt;
&amp;lt;!-- æŠŠp:followServiceRedirectsçš„falseä¿®æ”¹ä¸ºtrue --&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€å¡«å…¥è·³è½¬åœ°å€&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;!-- serviceå‚æ•°ä¸ºé€€å‡ºåè·³è½¬çš„åœ°å€ --&amp;gt;
&amp;lt;a href=&amp;quot;http://localhost:9100/cas/logout?service=http://www.baidu.com&amp;quot;&amp;gt;é€€å‡ºç™»å½•&amp;lt;/a&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;casæœåŠ¡ç«¯æ•°æ®æºè®¾ç½®&#34;&gt;CASæœåŠ¡ç«¯æ•°æ®æºè®¾ç½®&lt;/h2&gt;
&lt;h3 id=&#34;1-é…ç½®æ•°æ®æº&#34;&gt;1ã€é…ç½®æ•°æ®æº&lt;/h3&gt;
&lt;p&gt;ä¿®æ”¹casæœåŠ¡ç«¯ä¸­web-infä¸‹deployerConfigContext.xml ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- é…ç½®æ•°æ®æºc3p0è¿æ¥æ±  --&amp;gt;
&amp;lt;bean id=&amp;quot;dataSource&amp;quot; class=&amp;quot;com.mchange.v2.c3p0.ComboPooledDataSource&amp;quot;  
			  p:driverClass=&amp;quot;com.mysql.jdbc.Driver&amp;quot;  
			  p:jdbcUrl=&amp;quot;jdbc:mysql://127.0.0.1:3306/jd?characterEncoding=utf8&amp;quot;  
			  p:user=&amp;quot;root&amp;quot;  
			  p:password=&amp;quot;root&amp;quot; /&amp;gt; 
&amp;lt;!-- å¯†ç åŠ å¯†çš„æ–¹å¼ä¸º md5,åœ¨ç™»é™†æ—¶å…ˆåŠ å¯†å¯†ç ç„¶åå†å»æ•°æ®åº“æ¯”å¯¹ --&amp;gt;
&amp;lt;bean id=&amp;quot;passwordEncoder&amp;quot; class=&amp;quot;org.jasig.cas.authentication.handler.DefaultPasswordEncoder&amp;quot;  
		c:encodingAlgorithm=&amp;quot;MD5&amp;quot;  
		p:characterEncoding=&amp;quot;UTF-8&amp;quot; /&amp;gt; 
&amp;lt;!-- æ•°æ®æ ¡éªŒ --&amp;gt;
&amp;lt;bean id=&amp;quot;dbAuthHandler&amp;quot;  
		  class=&amp;quot;org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler&amp;quot;  
		  p:dataSource-ref=&amp;quot;dataSource&amp;quot;  
		  p:sql=&amp;quot;select password from tb_user where username = ?&amp;quot;  
		  p:passwordEncoder-ref=&amp;quot;passwordEncoder&amp;quot;/&amp;gt;  
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç„¶ååœ¨é…ç½®æ–‡ä»¶å¼€å§‹éƒ¨åˆ†æ‰¾åˆ°å¦‚ä¸‹é…ç½®&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;bean id=&amp;quot;authenticationManager&amp;quot; class=&amp;quot;org.jasig.cas.authentication.PolicyBasedAuthenticationManager&amp;quot;&amp;gt;
    &amp;lt;constructor-arg&amp;gt;
        &amp;lt;map&amp;gt;               
            &amp;lt;entry key-ref=&amp;quot;proxyAuthenticationHandler&amp;quot; value-ref=&amp;quot;proxyPrincipalResolver&amp;quot; /&amp;gt;
            &amp;lt;entry key-ref=&amp;quot;primaryAuthenticationHandler&amp;quot; value-ref=&amp;quot;primaryPrincipalResolver&amp;quot; /&amp;gt;
        &amp;lt;/map&amp;gt;
    &amp;lt;/constructor-arg&amp;gt;      
    &amp;lt;property name=&amp;quot;authenticationPolicy&amp;quot;&amp;gt;
        &amp;lt;bean class=&amp;quot;org.jasig.cas.authentication.AnyAuthenticationPolicy&amp;quot; /&amp;gt;
    &amp;lt;/property&amp;gt;
&amp;lt;/bean&amp;gt;
&amp;lt;!--
	å…¶ä¸­&amp;lt;entry key-ref=&amp;quot;primaryAuthenticationHandler&amp;quot; value-ref=&amp;quot;primaryPrincipalResolver&amp;quot; /&amp;gt;
	ä¸€å¥æ˜¯ä½¿ç”¨å›ºå®šçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæˆ‘ä»¬åœ¨ä¸‹é¢å¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªbean ,å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ•°æ®åº“è®¤è¯ç”¨æˆ·åå’Œå¯†ç ï¼Œéœ€è¦å°†è¿™å¥æ³¨é‡Šæ‰ã€‚
	æ·»åŠ ä¸‹é¢è¿™ä¸€å¥é…ç½®(54è¡Œ)
	&amp;lt;entry key-ref=&amp;quot;dbAuthHandler&amp;quot; value-ref=&amp;quot;primaryPrincipalResolver&amp;quot;/&amp;gt;
--&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2-æ·»åŠ jaråŒ…&#34;&gt;2ã€æ·»åŠ jaråŒ…&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å°†ä»¥ä¸‹ä¸‰ä¸ªjaråŒ…æ”¾å…¥webapps\cas\WEB-INF\libä¸‹&lt;/p&gt;
&lt;p&gt;c3p0-0.9.1.2.jar&lt;/p&gt;
&lt;p&gt;cas-server-support-jdbc-4.0.0.jar&lt;/p&gt;
&lt;p&gt;mysql-connector-java-5.1.32.jar&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;3-æµ‹è¯•&#34;&gt;3ã€æµ‹è¯•&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ç”¨æ•°æ®åº“ä¸­çš„ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œæµ‹è¯•&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ä¿®æ”¹é»˜è®¤ç™»é™†é¡µé¢&#34;&gt;ä¿®æ”¹é»˜è®¤ç™»é™†é¡µé¢&lt;/h2&gt;
&lt;h3 id=&#34;1-ä¸Šä¼ æ–‡ä»¶&#34;&gt;1ã€ä¸Šä¼ æ–‡ä»¶&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šä¼ è‡ªå·±çš„ç™»é™†é¡µé¢åˆ°WEB-INF\view\jsp\default\ui\casLoginView.jsp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;2-ç¼–è¾‘casloginviewjsp-å†…å®¹&#34;&gt;2ã€&lt;strong&gt;ç¼–è¾‘casLoginView.jsp&lt;/strong&gt; å†…å®¹&lt;/h3&gt;
&lt;h4 id=&#34;1-æ·»åŠ æŒ‡ä»¤&#34;&gt;1ã€æ·»åŠ æŒ‡ä»¤&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-jsp&#34;&gt;&amp;lt;%@ page pageEncoding=&amp;quot;UTF-8&amp;quot; %&amp;gt;
&amp;lt;%@ page contentType=&amp;quot;text/html; charset=UTF-8&amp;quot; %&amp;gt;
&amp;lt;%@ taglib prefix=&amp;quot;c&amp;quot; uri=&amp;quot;http://java.sun.com/jsp/jstl/core&amp;quot; %&amp;gt;
&amp;lt;%@ taglib prefix=&amp;quot;spring&amp;quot; uri=&amp;quot;http://www.springframework.org/tags&amp;quot; %&amp;gt;
&amp;lt;%@ taglib prefix=&amp;quot;form&amp;quot; uri=&amp;quot;http://www.springframework.org/tags/form&amp;quot; %&amp;gt;
&amp;lt;%@ taglib prefix=&amp;quot;fn&amp;quot; uri=&amp;quot;http://java.sun.com/jsp/jstl/functions&amp;quot; %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;2-ä¿®æ”¹formæ ‡ç­¾&#34;&gt;2ã€ä¿®æ”¹formæ ‡ç­¾&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-jsp&#34;&gt;&amp;lt;form:form method=&amp;quot;post&amp;quot; id=&amp;quot;fm1&amp;quot; commandName=&amp;quot;${commandName}&amp;quot; htmlEscape=&amp;quot;true&amp;quot; class=&amp;quot;sui-form&amp;quot;&amp;gt;
......
&amp;lt;/form:form&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;3-ä¿®æ”¹ç”¨æˆ·åæ¡†&#34;&gt;3ã€ä¿®æ”¹ç”¨æˆ·åæ¡†&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-jsp&#34;&gt;&amp;lt;form:input id=&amp;quot;username&amp;quot; tabindex=&amp;quot;1&amp;quot; 
	accesskey=&amp;quot;${userNameAccessKey}&amp;quot; path=&amp;quot;username&amp;quot; autocomplete=&amp;quot;off&amp;quot; htmlEscape=&amp;quot;true&amp;quot; 
	placeholder=&amp;quot;é‚®ç®±/ç”¨æˆ·å/æ‰‹æœºå·&amp;quot; class=&amp;quot;span2 input-xfat&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;4-ä¿®æ”¹å¯†ç æ¡†&#34;&gt;4ã€ä¿®æ”¹å¯†ç æ¡†&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-jsp&#34;&gt;&amp;lt;form:password  id=&amp;quot;password&amp;quot; tabindex=&amp;quot;2&amp;quot; path=&amp;quot;password&amp;quot; 
      accesskey=&amp;quot;${passwordAccessKey}&amp;quot; htmlEscape=&amp;quot;true&amp;quot; autocomplete=&amp;quot;off&amp;quot; 
	  placeholder=&amp;quot;è¯·è¾“å…¥å¯†ç &amp;quot; class=&amp;quot;span2 input-xfat&amp;quot;   /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;5-ä¿®æ”¹ç™»é™†æŒ‰é’®&#34;&gt;5ã€ä¿®æ”¹ç™»é™†æŒ‰é’®&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-jsp&#34;&gt;&amp;lt;input type=&amp;quot;hidden&amp;quot; name=&amp;quot;lt&amp;quot; value=&amp;quot;${loginTicket}&amp;quot; /&amp;gt;
&amp;lt;input type=&amp;quot;hidden&amp;quot; name=&amp;quot;execution&amp;quot; value=&amp;quot;${flowExecutionKey}&amp;quot; /&amp;gt;
&amp;lt;input type=&amp;quot;hidden&amp;quot; name=&amp;quot;_eventId&amp;quot; value=&amp;quot;submit&amp;quot; /&amp;gt;
&amp;lt;input class=&amp;quot;sui-btn btn-block btn-xlarge btn-danger&amp;quot; accesskey=&amp;quot;l&amp;quot; value=&amp;quot;ç™»é™†&amp;quot; type=&amp;quot;submit&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3-é”™è¯¯æç¤º&#34;&gt;3ã€é”™è¯¯æç¤º&lt;/h3&gt;
&lt;p&gt;åœ¨è¡¨å•å†…åŠ å…¥é”™è¯¯æç¤ºæ¡†&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-jsp&#34;&gt;&amp;lt;form:errors path=&amp;quot;*&amp;quot; id=&amp;quot;msg&amp;quot; cssClass=&amp;quot;errors&amp;quot; element=&amp;quot;div&amp;quot; htmlEscape=&amp;quot;false&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è®¾ç½®ç™»é™†å¤±è´¥ä¸­æ–‡æç¤º&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹cas-servlet.xmlä¸­çš„enï¼ˆ61è¡Œï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;bean id=&amp;quot;localeResolver&amp;quot; class=&amp;quot;org.springframework.web.servlet.i18n.CookieLocaleResolver&amp;quot; p:defaultLocale=&amp;quot;zh_CN&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å°†æ­¤ä¿¡æ¯æ‹·è´åˆ°WEB-INF\classes\messages_zh_CN.propertiesä¸‹ï¼Œå¹¶æ”¹ä¸ºä¸­æ–‡æç¤ºï¼ˆè½¬ç ï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;authenticationFailure.AccountNotFoundException=\u7528\u6237\u4E0D\u5B58\u5728.
authenticationFailure.FailedLoginException=\u5BC6\u7801\u9519\u8BEF.
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªæ˜¯ç”¨æˆ·åä¸å­˜åœ¨æ—¶çš„é”™è¯¯æç¤º&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒä¸ªæ˜¯å¯†ç é”™è¯¯çš„æç¤º&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;caså®¢æˆ·ç«¯ä¸springsecurityé›†æˆ&#34;&gt;CASå®¢æˆ·ç«¯ä¸SpringSecurityé›†æˆ&lt;/h2&gt;
&lt;h3 id=&#34;1-åˆ›å»ºå·¥ç¨‹&#34;&gt;1ã€åˆ›å»ºå·¥ç¨‹&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å»ºç«‹Mavené¡¹ç›®casclient_demo3 ï¼Œå¼•å…¥springä¾èµ–å’Œspring secrity ç›¸å…³ä¾èµ– ï¼Œtomcatç«¯å£è®¾ç½®ä¸º9003&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;2-å¼•å…¥ä¾èµ–&#34;&gt;2ã€å¼•å…¥ä¾èµ–&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;dependencies&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-webmvc&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;4.2.4.RELEASE&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;com.fasterxml.jackson.core&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;jackson-databind&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;2.4.2&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;javax.servlet&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;servlet-api&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;2.5&amp;lt;/version&amp;gt;
        &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;!-- èº«ä»½éªŒè¯ --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-security-web&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;4.1.0.RELEASE&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-security-config&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;4.1.0.RELEASE&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;com.github.penggle&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;kaptcha&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;2.3.2&amp;lt;/version&amp;gt;
        &amp;lt;exclusions&amp;gt;
            &amp;lt;exclusion&amp;gt;
                &amp;lt;groupId&amp;gt;javax.servlet&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;javax.servlet-api&amp;lt;/artifactId&amp;gt;
            &amp;lt;/exclusion&amp;gt;
        &amp;lt;/exclusions&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-security-cas&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;4.1.0.RELEASE&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.jasig.cas.client&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;cas-client-core&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;3.3.3&amp;lt;/version&amp;gt;
        &amp;lt;!-- æ’é™¤log4jåŒ…å†²çª --&amp;gt;
        &amp;lt;exclusions&amp;gt;
            &amp;lt;exclusion&amp;gt;
                &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;log4j-over-slf4j&amp;lt;/artifactId&amp;gt;
            &amp;lt;/exclusion&amp;gt;
        &amp;lt;/exclusions&amp;gt;
    &amp;lt;/dependency&amp;gt;
&amp;lt;/dependencies&amp;gt;

&amp;lt;build&amp;gt;
    &amp;lt;plugins&amp;gt;
        &amp;lt;!-- é…ç½®Tomcatæ’ä»¶ --&amp;gt;
        &amp;lt;plugin&amp;gt;
            &amp;lt;groupId&amp;gt;org.apache.tomcat.maven&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;tomcat7-maven-plugin&amp;lt;/artifactId&amp;gt;
            &amp;lt;configuration&amp;gt;
                &amp;lt;port&amp;gt;9003&amp;lt;/port&amp;gt;
                &amp;lt;path&amp;gt;/&amp;lt;/path&amp;gt;
                &amp;lt;uriEncoding&amp;gt;utf-8&amp;lt;/uriEncoding&amp;gt;
            &amp;lt;/configuration&amp;gt;
        &amp;lt;/plugin&amp;gt;
    &amp;lt;/plugins&amp;gt;
    &amp;lt;resources&amp;gt;
        &amp;lt;resource&amp;gt;
            &amp;lt;directory&amp;gt;src/main/java&amp;lt;/directory&amp;gt;
            &amp;lt;includes&amp;gt;
                &amp;lt;include&amp;gt;**/*.*&amp;lt;/include&amp;gt;
            &amp;lt;/includes&amp;gt;
        &amp;lt;/resource&amp;gt;
        &amp;lt;resource&amp;gt;
            &amp;lt;directory&amp;gt;src/main/resources&amp;lt;/directory&amp;gt;
            &amp;lt;includes&amp;gt;
                &amp;lt;include&amp;gt;**/*.*&amp;lt;/include&amp;gt;
            &amp;lt;/includes&amp;gt;
        &amp;lt;/resource&amp;gt;
    &amp;lt;/resources&amp;gt;
&amp;lt;/build&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3-åˆ›å»ºspring-mvcxml&#34;&gt;3ã€åˆ›å»ºspring-mvc.xml&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;beans xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;
       xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;
       xmlns:context=&amp;quot;http://www.springframework.org/schema/context&amp;quot;
       xmlns:mvc=&amp;quot;http://www.springframework.org/schema/mvc&amp;quot;
       xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&amp;quot;&amp;gt;

    &amp;lt;!-- æ‰«æç”¨@Controlleræ³¨è§£çš„ç±»ï¼Œå¹¶ä¸”åŠ è½½åˆ°springä¸­è¿›è¡Œç®¡ç† --&amp;gt;
    &amp;lt;context:component-scan base-package=&amp;quot;com.cn.controller&amp;quot;/&amp;gt;
    &amp;lt;!-- é…ç½®æ³¨è§£é©±åŠ¨ --&amp;gt;
    &amp;lt;mvc:annotation-driven&amp;gt;
        &amp;lt;!-- æ·»åŠ è½¬æ¢å™¨ï¼Œæ·»åŠ å¯¹äºå¯¹è±¡çš„æ”¯æŒ --&amp;gt;
        &amp;lt;mvc:message-converters&amp;gt;
            &amp;lt;ref bean=&amp;quot;stringHttpMessageConverter&amp;quot;/&amp;gt;
            &amp;lt;ref bean=&amp;quot;mappingJackson2HttpMessageConverter&amp;quot;/&amp;gt;
        &amp;lt;/mvc:message-converters&amp;gt;
    &amp;lt;/mvc:annotation-driven&amp;gt;

    &amp;lt;bean id=&amp;quot;stringHttpMessageConverter&amp;quot; class=&amp;quot;org.springframework.http.converter.StringHttpMessageConverter&amp;quot;/&amp;gt;
    &amp;lt;!--è§£å†³IEæµè§ˆå™¨jsonæ–‡ä»¶ä¸‹è½½å’Œjsonæ•°æ®ä¸­åˆä¹±ç çš„é—®é¢˜--&amp;gt;
    &amp;lt;bean id=&amp;quot;mappingJackson2HttpMessageConverter&amp;quot;
          class=&amp;quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&amp;quot;&amp;gt;
        &amp;lt;property name=&amp;quot;supportedMediaTypes&amp;quot;&amp;gt;
            &amp;lt;list&amp;gt;
                &amp;lt;value&amp;gt;text/html;charset=UTF-8&amp;lt;/value&amp;gt;
            &amp;lt;/list&amp;gt;
        &amp;lt;/property&amp;gt;
    &amp;lt;/bean&amp;gt;
    &amp;lt;mvc:default-servlet-handler/&amp;gt;
    &amp;lt;!-- jackson --&amp;gt;
    &amp;lt;mvc:annotation-driven&amp;gt;
        &amp;lt;mvc:message-converters&amp;gt;
            &amp;lt;bean class=&amp;quot;org.springframework.http.converter.StringHttpMessageConverter&amp;quot;/&amp;gt;
            &amp;lt;bean class=&amp;quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&amp;quot;/&amp;gt;
        &amp;lt;/mvc:message-converters&amp;gt;
    &amp;lt;/mvc:annotation-driven&amp;gt;

&amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4-åˆ›å»ºspring-securityxml&#34;&gt;4ã€åˆ›å»ºspring-security.xml&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;beans:beans xmlns=&amp;quot;http://www.springframework.org/schema/security&amp;quot;
             xmlns:beans=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;
             xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;
             xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
						http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd&amp;quot;&amp;gt;

    &amp;lt;!--   entry-point-ref  å…¥å£ç‚¹å¼•ç”¨ --&amp;gt;
    &amp;lt;http use-expressions=&amp;quot;false&amp;quot; entry-point-ref=&amp;quot;casProcessingFilterEntryPoint&amp;quot;&amp;gt;
        &amp;lt;intercept-url pattern=&amp;quot;/**&amp;quot; access=&amp;quot;ROLE_USER&amp;quot;/&amp;gt;
        &amp;lt;csrf disabled=&amp;quot;true&amp;quot;/&amp;gt;
        &amp;lt;!-- custom-filterä¸ºè¿‡æ»¤å™¨ï¼Œ position è¡¨ç¤ºå°†è¿‡æ»¤å™¨æ”¾åœ¨æŒ‡å®šçš„ä½ç½®ä¸Š(å‚ç…§ä½ç½®è¡¨)ï¼Œbeforeè¡¨ç¤ºæ”¾åœ¨æŒ‡å®šä½ç½®ä¹‹å‰  ï¼Œafterè¡¨ç¤ºæ”¾åœ¨æŒ‡å®šçš„ä½ç½®ä¹‹å  --&amp;gt;
        &amp;lt;custom-filter ref=&amp;quot;casAuthenticationFilter&amp;quot; position=&amp;quot;CAS_FILTER&amp;quot;/&amp;gt;
        &amp;lt;custom-filter ref=&amp;quot;requestSingleLogoutFilter&amp;quot; before=&amp;quot;LOGOUT_FILTER&amp;quot;/&amp;gt;
        &amp;lt;custom-filter ref=&amp;quot;singleLogoutFilter&amp;quot; before=&amp;quot;CAS_FILTER&amp;quot;/&amp;gt;
    &amp;lt;/http&amp;gt;

    &amp;lt;!-- CASå…¥å£ç‚¹ å¼€å§‹ --&amp;gt;
    &amp;lt;beans:bean id=&amp;quot;casProcessingFilterEntryPoint&amp;quot;
                class=&amp;quot;org.springframework.security.cas.web.CasAuthenticationEntryPoint&amp;quot;&amp;gt;
        &amp;lt;!-- å•ç‚¹ç™»å½•æœåŠ¡å™¨ç™»å½•URL --&amp;gt;
        &amp;lt;beans:property name=&amp;quot;loginUrl&amp;quot; value=&amp;quot;http://localhost:9100/cas/login&amp;quot;/&amp;gt;
        &amp;lt;beans:property name=&amp;quot;serviceProperties&amp;quot; ref=&amp;quot;serviceProperties&amp;quot;/&amp;gt;
    &amp;lt;/beans:bean&amp;gt;
    &amp;lt;beans:bean id=&amp;quot;serviceProperties&amp;quot; class=&amp;quot;org.springframework.security.cas.ServiceProperties&amp;quot;&amp;gt;
        &amp;lt;!--service é…ç½®è‡ªèº«å·¥ç¨‹çš„æ ¹åœ°å€+/login/cas   --&amp;gt;
        &amp;lt;beans:property name=&amp;quot;service&amp;quot; value=&amp;quot;http://localhost:9003/login/cas&amp;quot;/&amp;gt;
    &amp;lt;/beans:bean&amp;gt;
    &amp;lt;!-- CASå…¥å£ç‚¹ ç»“æŸ --&amp;gt;

    &amp;lt;!-- è®¤è¯è¿‡æ»¤å™¨ å¼€å§‹ --&amp;gt;
    &amp;lt;beans:bean id=&amp;quot;casAuthenticationFilter&amp;quot; class=&amp;quot;org.springframework.security.cas.web.CasAuthenticationFilter&amp;quot;&amp;gt;
        &amp;lt;beans:property name=&amp;quot;authenticationManager&amp;quot; ref=&amp;quot;authenticationManager&amp;quot;/&amp;gt;
    &amp;lt;/beans:bean&amp;gt;
    &amp;lt;!-- è®¤è¯ç®¡ç†å™¨ --&amp;gt;
    &amp;lt;authentication-manager alias=&amp;quot;authenticationManager&amp;quot;&amp;gt;
        &amp;lt;authentication-provider ref=&amp;quot;casAuthenticationProvider&amp;quot;&amp;gt;
        &amp;lt;/authentication-provider&amp;gt;
    &amp;lt;/authentication-manager&amp;gt;
    &amp;lt;!-- è®¤è¯æä¾›è€… --&amp;gt;
    &amp;lt;beans:bean id=&amp;quot;casAuthenticationProvider&amp;quot;
                class=&amp;quot;org.springframework.security.cas.authentication.CasAuthenticationProvider&amp;quot;&amp;gt;
        &amp;lt;beans:property name=&amp;quot;authenticationUserDetailsService&amp;quot;&amp;gt;
            &amp;lt;beans:bean class=&amp;quot;org.springframework.security.core.userdetails.UserDetailsByNameServiceWrapper&amp;quot;&amp;gt;
                &amp;lt;beans:constructor-arg ref=&amp;quot;userDetailsService&amp;quot;/&amp;gt;
            &amp;lt;/beans:bean&amp;gt;
        &amp;lt;/beans:property&amp;gt;
        &amp;lt;beans:property name=&amp;quot;serviceProperties&amp;quot; ref=&amp;quot;serviceProperties&amp;quot;/&amp;gt;
        &amp;lt;!-- ticketValidator ä¸ºç¥¨æ®éªŒè¯å™¨ --&amp;gt;
        &amp;lt;beans:property name=&amp;quot;ticketValidator&amp;quot;&amp;gt;
            &amp;lt;beans:bean class=&amp;quot;org.jasig.cas.client.validation.Cas20ServiceTicketValidator&amp;quot;&amp;gt;
                &amp;lt;beans:constructor-arg index=&amp;quot;0&amp;quot; value=&amp;quot;http://localhost:9100/cas&amp;quot;/&amp;gt;
            &amp;lt;/beans:bean&amp;gt;
        &amp;lt;/beans:property&amp;gt;
        &amp;lt;beans:property name=&amp;quot;key&amp;quot; value=&amp;quot;an_id_for_this_auth_provider_only&amp;quot;/&amp;gt;
    &amp;lt;/beans:bean&amp;gt;
    &amp;lt;!-- è®¤è¯ç±» --&amp;gt;
    &amp;lt;beans:bean id=&amp;quot;userDetailsService&amp;quot; class=&amp;quot;com.cn.service.impl.UserDetailServiceImpl&amp;quot;/&amp;gt;

    &amp;lt;!-- è®¤è¯è¿‡æ»¤å™¨ ç»“æŸ --&amp;gt;
    &amp;lt;!-- å•ç‚¹ç™»å‡º  å¼€å§‹  --&amp;gt;
    &amp;lt;beans:bean id=&amp;quot;singleLogoutFilter&amp;quot; class=&amp;quot;org.jasig.cas.client.session.SingleSignOutFilter&amp;quot;/&amp;gt;
    &amp;lt;beans:bean id=&amp;quot;requestSingleLogoutFilter&amp;quot;
                class=&amp;quot;org.springframework.security.web.authentication.logout.LogoutFilter&amp;quot;&amp;gt;
        &amp;lt;beans:constructor-arg value=&amp;quot;http://localhost:9100/cas/logout?service=http://www.baidu.com&amp;quot;/&amp;gt;
        &amp;lt;beans:constructor-arg&amp;gt;
            &amp;lt;beans:bean class=&amp;quot;org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler&amp;quot;/&amp;gt;
        &amp;lt;/beans:constructor-arg&amp;gt;
        &amp;lt;beans:property name=&amp;quot;filterProcessesUrl&amp;quot; value=&amp;quot;/logout/cas&amp;quot;/&amp;gt;
    &amp;lt;/beans:bean&amp;gt;
    &amp;lt;!-- å•ç‚¹ç™»å‡º  ç»“æŸ --&amp;gt;

&amp;lt;/beans:beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;5-åˆ›å»ºè®¤è¯ç±»&#34;&gt;5ã€åˆ›å»ºè®¤è¯ç±»&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class UserDetailServiceImpl implements UserDetailsService {

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        //æ„å»ºè§’è‰²é›†åˆ
        List&amp;lt;GrantedAuthority&amp;gt; authorities=new ArrayList();
        authorities.add(new SimpleGrantedAuthority(&amp;quot;ROLE_USER&amp;quot;));
        return new User(username, &amp;quot;&amp;quot;  , authorities);
    }

}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;6-ä¿®æ”¹webxml-æ·»åŠ è¿‡æ»¤å™¨ç­‰é…ç½®&#34;&gt;6ã€ä¿®æ”¹web.xml ,æ·»åŠ è¿‡æ»¤å™¨ç­‰é…ç½®&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;web-app xmlns=&amp;quot;http://xmlns.jcp.org/xml/ns/javaee&amp;quot;
         xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;
         xsi:schemaLocation=&amp;quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&amp;quot;
         version=&amp;quot;4.0&amp;quot;&amp;gt;
    &amp;lt;context-param&amp;gt;
        &amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;
        &amp;lt;param-value&amp;gt;classpath:spring-security.xml&amp;lt;/param-value&amp;gt;
    &amp;lt;/context-param&amp;gt;
    &amp;lt;listener&amp;gt;
        &amp;lt;listener-class&amp;gt;
            org.springframework.web.context.ContextLoaderListener
        &amp;lt;/listener-class&amp;gt;
    &amp;lt;/listener&amp;gt;
    &amp;lt;filter&amp;gt;
        &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;
        &amp;lt;filter-class&amp;gt;org.springframework.web.filter.DelegatingFilterProxy&amp;lt;/filter-class&amp;gt;
    &amp;lt;/filter&amp;gt;
    &amp;lt;filter-mapping&amp;gt;
        &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;
        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
    &amp;lt;/filter-mapping&amp;gt;
&amp;lt;!--------------------------------------------------------------------------------&amp;gt;
    &amp;lt;!-- è§£å†³postä¹±ç  --&amp;gt;
    &amp;lt;filter&amp;gt;
        &amp;lt;filter-name&amp;gt;CharacterEncodingFilter&amp;lt;/filter-name&amp;gt;
        &amp;lt;filter-class&amp;gt;org.springframework.web.filter.CharacterEncodingFilter&amp;lt;/filter-class&amp;gt;
        &amp;lt;init-param&amp;gt;
            &amp;lt;param-name&amp;gt;encoding&amp;lt;/param-name&amp;gt;
            &amp;lt;param-value&amp;gt;utf-8&amp;lt;/param-value&amp;gt;
        &amp;lt;/init-param&amp;gt;
        &amp;lt;init-param&amp;gt;
            &amp;lt;param-name&amp;gt;forceEncoding&amp;lt;/param-name&amp;gt;
            &amp;lt;param-value&amp;gt;true&amp;lt;/param-value&amp;gt;
        &amp;lt;/init-param&amp;gt;
    &amp;lt;/filter&amp;gt;
    &amp;lt;filter-mapping&amp;gt;
        &amp;lt;filter-name&amp;gt;CharacterEncodingFilter&amp;lt;/filter-name&amp;gt;
        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
    &amp;lt;/filter-mapping&amp;gt;

    &amp;lt;servlet&amp;gt;
        &amp;lt;servlet-name&amp;gt;springmvc&amp;lt;/servlet-name&amp;gt;
        &amp;lt;servlet-class&amp;gt;org.springframework.web.servlet.DispatcherServlet&amp;lt;/servlet-class&amp;gt;
        &amp;lt;!-- æŒ‡å®šåŠ è½½çš„é…ç½®æ–‡ä»¶ ï¼Œé€šè¿‡å‚æ•°contextConfigLocationåŠ è½½--&amp;gt;
        &amp;lt;init-param&amp;gt;
            &amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;
            &amp;lt;param-value&amp;gt;classpath:spring-mvc.xml&amp;lt;/param-value&amp;gt;
        &amp;lt;/init-param&amp;gt;
        &amp;lt;load-on-startup&amp;gt;1&amp;lt;/load-on-startup&amp;gt;
    &amp;lt;/servlet&amp;gt;

    &amp;lt;servlet-mapping&amp;gt;
        &amp;lt;servlet-name&amp;gt;springmvc&amp;lt;/servlet-name&amp;gt;
        &amp;lt;url-pattern&amp;gt;/&amp;lt;/url-pattern&amp;gt;
    &amp;lt;/servlet-mapping&amp;gt;
&amp;lt;/web-app&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;7-åˆ›å»ºusercontroller&#34;&gt;7ã€åˆ›å»ºUserController&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RestController
public class UserController {

    @RequestMapping(&amp;quot;/findLoginUser&amp;quot;)
    public void  findLoginUser(){
        String name = SecurityContextHolder.getContext().getAuthentication().getName();
        System.out.println(name);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;8-é€€å‡ºç™»é™†&#34;&gt;8ã€é€€å‡ºç™»é™†&lt;/h3&gt;
&lt;p&gt;ä¿®æ”¹spring-security.xml&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;http://localhost:9100/cas/logout?service=http://www.baidu.com&lt;/p&gt;
&lt;p&gt;service ç­‰äºç™»å‡ºåè·³è½¬çš„åœ°å€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- å•ç‚¹ç™»å‡º  å¼€å§‹  --&amp;gt;
&amp;lt;beans:bean id=&amp;quot;singleLogoutFilter&amp;quot; class=&amp;quot;org.jasig.cas.client.session.SingleSignOutFilter&amp;quot;/&amp;gt;
&amp;lt;beans:bean id=&amp;quot;requestSingleLogoutFilter&amp;quot;
            class=&amp;quot;org.springframework.security.web.authentication.logout.LogoutFilter&amp;quot;&amp;gt;
    &amp;lt;beans:constructor-arg value=&amp;quot;http://localhost:9100/cas/logout?service=http://www.baidu.com&amp;quot;/&amp;gt;
    &amp;lt;beans:constructor-arg&amp;gt;
        &amp;lt;beans:bean class=&amp;quot;org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler&amp;quot;/&amp;gt;
    &amp;lt;/beans:constructor-arg&amp;gt;
    &amp;lt;beans:property name=&amp;quot;filterProcessesUrl&amp;quot; value=&amp;quot;/logout/cas&amp;quot;/&amp;gt;
&amp;lt;/beans:bean&amp;gt;
&amp;lt;!-- å•ç‚¹ç™»å‡º  ç»“æŸ --&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨é¡µé¢ä¸Šæ·»åŠ &lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;a href=&amp;quot;/logout/cas&amp;quot;&amp;gt;é€€å‡ºç™»å½•&amp;lt;/a&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
">å•ç‚¹ç™»é™†-CAS</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/redis/"" data-c="
          &lt;h2 id=&#34;rediså®‰è£…&#34;&gt;rediså®‰è£…&lt;/h2&gt;
&lt;p&gt;å®‰è£…gcc&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yum install gcc-c++
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è§£å‹æºç &lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;tar -zxvf redis-3.0.0.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿›å…¥è§£å‹åçš„ç›®å½•è¿›è¡Œç¼–è¯‘&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd /usr/local/redis-3.0.0
make PREFIX=/usr/local/redis install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ‹·è´é…ç½®æ–‡ä»¶åˆ°å®‰è£…ç›®å½•ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd /usr/local/redis
mkdir conf
cp /usr/local/redis-3.0.0/redis.conf  /usr/local/redis/bin
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿è¡Œ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;bin/redis-server
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åç«¯æ¨¡å¼è¿è¡Œ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;ä¿®æ”¹redis.confæ–‡ä»¶ : daemonize yes
./bin/redis-server redis.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;springdataredisç®€ä»‹&#34;&gt;SpringDataRedisç®€ä»‹&lt;/h2&gt;
&lt;h3 id=&#34;redis&#34;&gt;Redis&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;redis&lt;/strong&gt;æ˜¯ä¸€æ¬¾å¼€æºçš„Key-Value&lt;strong&gt;æ•°æ®åº“&lt;/strong&gt;ï¼Œè¿è¡Œåœ¨å†…å­˜ä¸­ï¼Œç”±ANSI Cç¼–å†™ã€‚ä¼ä¸šå¼€å‘é€šå¸¸é‡‡ç”¨Redisæ¥å®ç°ç¼“å­˜ã€‚åŒç±»çš„äº§å“è¿˜æœ‰memcache ã€MongoDBç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;jedis&#34;&gt;Jedis&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Jedisæ˜¯Rediså®˜æ–¹æ¨å‡ºçš„ä¸€æ¬¾é¢å‘&lt;strong&gt;Java&lt;/strong&gt;çš„å®¢æˆ·ç«¯ï¼Œæä¾›äº†å¾ˆå¤šæ¥å£ä¾›Javaè¯­è¨€è°ƒç”¨ã€‚å¯ä»¥åœ¨Rediså®˜ç½‘ä¸‹è½½ï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›å¼€æºçˆ±å¥½è€…æä¾›çš„å®¢æˆ·ç«¯ï¼Œå¦‚Jredisã€SRPç­‰ç­‰ï¼Œæ¨èä½¿ç”¨Jedisã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;spring-data-redis&#34;&gt;Spring Data Redis&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Spring-data-redisæ˜¯springå¤§å®¶æ—çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†åœ¨srpingåº”ç”¨ä¸­é€šè¿‡ç®€å•çš„é…ç½®è®¿é—®redisæœåŠ¡ï¼Œå¯¹reidsåº•å±‚å¼€å‘åŒ…(Jedis,  JRedis, and RJC)è¿›è¡Œäº†é«˜åº¦å°è£…ï¼ŒRedisTemplateæä¾›äº†rediså„ç§æ“ä½œã€å¼‚å¸¸å¤„ç†åŠåºåˆ—åŒ–ï¼Œæ”¯æŒå‘å¸ƒè®¢é˜…ï¼Œå¹¶å¯¹spring 3.1 cacheè¿›è¡Œäº†å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;spring-data-redisé’ˆå¯¹jedisæä¾›äº†å¦‚ä¸‹åŠŸèƒ½ï¼š&lt;br&gt;
1ã€è¿æ¥æ± è‡ªåŠ¨ç®¡ç†ï¼Œæä¾›äº†ä¸€ä¸ªé«˜åº¦å°è£…çš„â€œRedisTemplateâ€ç±»&lt;/p&gt;
&lt;p&gt;â€‹	2ã€é’ˆå¯¹jediså®¢æˆ·ç«¯ä¸­å¤§é‡apiè¿›è¡Œäº†å½’ç±»å°è£…,å°†åŒä¸€ç±»å‹æ“ä½œå°è£…ä¸ºoperationæ¥å£&lt;/p&gt;
&lt;p&gt;â€‹     ValueOperationsï¼šç®€å•K-Væ“ä½œ&lt;/p&gt;
&lt;p&gt;â€‹     SetOperationsï¼šsetç±»å‹æ•°æ®æ“ä½œ&lt;/p&gt;
&lt;p&gt;â€‹     ZSetOperationsï¼šzsetç±»å‹æ•°æ®æ“ä½œ&lt;/p&gt;
&lt;p&gt;â€‹     HashOperationsï¼šé’ˆå¯¹mapç±»å‹çš„æ•°æ®æ“ä½œ&lt;/p&gt;
&lt;p&gt;â€‹     ListOperationsï¼šé’ˆå¯¹listç±»å‹çš„æ•°æ®æ“ä½œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;spring-data-rediså…¥é—¨å°demo&#34;&gt;Spring Data Rediså…¥é—¨å°Demo&lt;/h2&gt;
&lt;p&gt;1ã€å¼•å…¥ä¾èµ–&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- ç¼“å­˜ --&amp;gt;
&amp;lt;dependency&amp;gt; 
    &amp;lt;groupId&amp;gt;redis.clients&amp;lt;/groupId&amp;gt; 
    &amp;lt;artifactId&amp;gt;jedis&amp;lt;/artifactId&amp;gt; 
    &amp;lt;version&amp;gt;2.8.1&amp;lt;/version&amp;gt; 
&amp;lt;/dependency&amp;gt; 
&amp;lt;dependency&amp;gt; 
    &amp;lt;groupId&amp;gt;org.springframework.data&amp;lt;/groupId&amp;gt; 
    &amp;lt;artifactId&amp;gt;spring-data-redis&amp;lt;/artifactId&amp;gt; 
    &amp;lt;version&amp;gt;1.7.2.RELEASE&amp;lt;/version&amp;gt; 
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€åˆ›å»ºredis-config.properties&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;redis.host=127.0.0.1 
redis.port=6379 
redis.pass= 
redis.database=0 
redis.maxIdle=300 
redis.maxWait=3000 
redis.testOnBorrow=true 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€ç¼–å†™redisé…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;applicationContext-redis.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;context:property-placeholder location=&amp;quot;classpath*:properties/*.properties&amp;quot; /&amp;gt;   
&amp;lt;!-- redis ç›¸å…³é…ç½® --&amp;gt; 
&amp;lt;bean id=&amp;quot;poolConfig&amp;quot; class=&amp;quot;redis.clients.jedis.JedisPoolConfig&amp;quot;&amp;gt;  
 &amp;lt;property name=&amp;quot;maxIdle&amp;quot; value=&amp;quot;${redis.maxIdle}&amp;quot; /&amp;gt;   
 &amp;lt;property name=&amp;quot;maxWaitMillis&amp;quot; value=&amp;quot;${redis.maxWait}&amp;quot; /&amp;gt;  
 &amp;lt;property name=&amp;quot;testOnBorrow&amp;quot; value=&amp;quot;${redis.testOnBorrow}&amp;quot; /&amp;gt;  
&amp;lt;/bean&amp;gt;  
&amp;lt;bean id=&amp;quot;JedisConnectionFactory&amp;quot; class=&amp;quot;org.springframework.data.redis.connection.jedis.JedisConnectionFactory&amp;quot; 
   p:host-name=&amp;quot;${redis.host}&amp;quot; p:port=&amp;quot;${redis.port}&amp;quot; p:password=&amp;quot;${redis.pass}&amp;quot; p:pool-config-ref=&amp;quot;poolConfig&amp;quot;/&amp;gt;  

&amp;lt;bean id=&amp;quot;redisTemplate&amp;quot; class=&amp;quot;org.springframework.data.redis.core.RedisTemplate&amp;quot;&amp;gt;  
 &amp;lt;property name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;JedisConnectionFactory&amp;quot; /&amp;gt;  
&amp;lt;/bean&amp;gt;  
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;maxIdle ï¼šæœ€å¤§ç©ºé—²æ•°&lt;/p&gt;
&lt;p&gt;maxWaitMillis:è¿æ¥æ—¶çš„æœ€å¤§ç­‰å¾…æ¯«ç§’æ•°&lt;/p&gt;
&lt;p&gt;testOnBorrowï¼šåœ¨æå–ä¸€ä¸ªjediså®ä¾‹æ—¶ï¼Œæ˜¯å¦æå‰è¿›è¡ŒéªŒè¯æ“ä½œï¼›å¦‚æœä¸ºtrueï¼Œåˆ™å¾—åˆ°çš„jediså®ä¾‹å‡æ˜¯å¯ç”¨çš„ï¼›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;4ã€å€¼ç±»å‹æ“ä½œ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations=&amp;quot;classpath:spring/applicationContext-redis.xml&amp;quot;)
public class TestValue {
	@Autowired
	private RedisTemplate redisTemplate;	
	@Test
	public void setValue(){
		redisTemplate.boundValueOps(&amp;quot;name&amp;quot;).set(&amp;quot;zhangsan&amp;quot;);		
	}	
	@Test
	public void getValue(){
		String str = (String) redisTemplate.boundValueOps(&amp;quot;name&amp;quot;).get();
		System.out.println(str);
	}	
	@Test
	public void deleteValue(){
		redisTemplate.delete(&amp;quot;name&amp;quot;);;
	}	
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;5ã€Setç±»å‹æ“ä½œ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations=&amp;quot;classpath:spring/applicationContext-redis.xml&amp;quot;)
public class TestSet {
	@Autowired
	private RedisTemplate redisTemplate;
	/**
	 * å­˜å…¥å€¼
	 */
	@Test
	public void setValue(){
		redisTemplate.boundSetOps(&amp;quot;nameset&amp;quot;).add(&amp;quot;ç½—å¿—ç¥¥&amp;quot;);		
		redisTemplate.boundSetOps(&amp;quot;nameset&amp;quot;).add(&amp;quot;å‘¨æ‰¬é’&amp;quot;);	
		redisTemplate.boundSetOps(&amp;quot;nameset&amp;quot;).add(&amp;quot;è´è¶å§&amp;quot;);
	}
	/**
	 * æå–å€¼
	 */
	@Test
	public void getValue(){
		Set members = redisTemplate.boundSetOps(&amp;quot;nameset&amp;quot;).members();
		System.out.println(members);
	}
    /**
	 * åˆ é™¤é›†åˆä¸­çš„æŸä¸€ä¸ªå€¼
	 */
	@Test
	public void deleteValue(){
		redisTemplate.boundSetOps(&amp;quot;nameset&amp;quot;).remove(&amp;quot;è´è¶å§&amp;quot;);
	}
	
	/**
	 * åˆ é™¤æ•´ä¸ªé›†åˆ
	 */
	@Test
	public void deleteAllValue(){
		redisTemplate.delete(&amp;quot;nameset&amp;quot;);
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;6ã€Listç±»å‹æ“ä½œ&lt;/p&gt;
&lt;p&gt;6.1ã€å³å‹æ ˆ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * å³å‹æ ˆï¼šåæ·»åŠ çš„å¯¹è±¡æ’åœ¨åè¾¹
 */
@Test
public void testSetValue1(){		
    redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).rightPush(&amp;quot;åˆ˜å¤‡&amp;quot;);
    redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).rightPush(&amp;quot;å…³ç¾½&amp;quot;);
    redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).rightPush(&amp;quot;å¼ é£&amp;quot;);		
}
/**
 * æ˜¾ç¤ºå³å‹æ ˆé›†åˆ
 */
@Test
public void testGetValue1(){
    List list = redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).range(0, 10);
    System.out.println(list);
}
//è¿è¡Œç»“æœï¼š[åˆ˜å¤‡, å…³ç¾½, å¼ é£]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;6.2ã€å·¦å‹æ ˆ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * å·¦å‹æ ˆï¼šåæ·»åŠ çš„å¯¹è±¡æ’åœ¨å‰è¾¹
 */
@Test
public void testSetValue2(){		
    redisTemplate.boundListOps(&amp;quot;namelist2&amp;quot;).leftPush(&amp;quot;åˆ˜å¤‡&amp;quot;);
    redisTemplate.boundListOps(&amp;quot;namelist2&amp;quot;).leftPush(&amp;quot;å…³ç¾½&amp;quot;);
    redisTemplate.boundListOps(&amp;quot;namelist2&amp;quot;).leftPush(&amp;quot;å¼ é£&amp;quot;);		
}
/**
 * æ˜¾ç¤ºå·¦å‹æ ˆé›†åˆ
 */
@Test
public void testGetValue2(){
    List list = redisTemplate.boundListOps(&amp;quot;namelist2&amp;quot;).range(0, 10);
    System.out.println(list);
}
//è¿è¡Œç»“æœï¼š[å¼ é£, å…³ç¾½, åˆ˜å¤‡]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;6.3ã€æ ¹æ®ç´¢å¼•æŸ¥è¯¢å…ƒç´ &lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * æŸ¥è¯¢é›†åˆæŸä¸ªå…ƒç´ 
 */
@Test
public void testSearchByIndex(){
    String s = (String) redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).index(1);
    System.out.println(s);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;6.4ã€ç§»é™¤æŸä¸ªå…ƒç´ çš„å€¼&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * ç§»é™¤é›†åˆæŸä¸ªå…ƒç´ 
 */
@Test
public void testRemoveByIndex(){
    redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).remove(1, &amp;quot;å…³ç¾½&amp;quot;);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;7ã€Hashç±»å‹æ“ä½œ&lt;/p&gt;
&lt;p&gt;7.1ã€å­˜å…¥å€¼&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Test
public void testSetValue(){
    redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).put(&amp;quot;a&amp;quot;, &amp;quot;å”åƒ§&amp;quot;);
    redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).put(&amp;quot;b&amp;quot;, &amp;quot;æ‚Ÿç©º&amp;quot;);
    redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).put(&amp;quot;c&amp;quot;, &amp;quot;å…«æˆ’&amp;quot;);
    redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).put(&amp;quot;d&amp;quot;, &amp;quot;æ²™åƒ§&amp;quot;);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;7.2ã€æå–æ‰€æœ‰çš„KEY&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Test
public void testGetKeys(){
    Set s = redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).keys();		
    System.out.println(s);		
}
//è¿è¡Œç»“æœï¼š[a, b, c, d]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;7.3ã€æå–æ‰€æœ‰çš„å€¼&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Test
public void testGetValues(){
    List values = redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).values();
    System.out.println(values);		
}
//è¿è¡Œç»“æœï¼š[å”åƒ§, æ‚Ÿç©º, å…«æˆ’, æ²™åƒ§]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;7.4ã€æ ¹æ®KEYæå–å€¼&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Test
public void testGetValueByKey(){
    Object object = redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).get(&amp;quot;b&amp;quot;);
    System.out.println(object);
}
//è¿è¡Œç»“æœï¼šæ‚Ÿç©º
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;7.5ã€æ ¹æ®KEYç§»é™¤å€¼&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Test
public void testRemoveValueByKey(){
    redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).delete(&amp;quot;c&amp;quot;);
}
//è¿è¡Œç»“æœï¼š[å”åƒ§, æ‚Ÿç©º, æ²™åƒ§]
&lt;/code&gt;&lt;/pre&gt;
">Redis</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/activemq/"" data-c="
          &lt;h2 id=&#34;ä»€ä¹ˆæ˜¯jms&#34;&gt;ä»€ä¹ˆæ˜¯jms&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;JMSï¼ˆjava Messaging Serviceï¼‰æ˜¯Javaå¹³å°ä¸Šæœ‰å…³é¢å‘æ¶ˆæ¯ä¸­é—´ä»¶çš„æŠ€æœ¯è§„èŒƒï¼Œå®ƒä¾¿äºæ¶ˆæ¯ç³»ç»Ÿä¸­çš„Javaåº”ç”¨ç¨‹åºè¿›è¡Œæ¶ˆæ¯äº¤æ¢,å¹¶ä¸”é€šè¿‡æä¾›æ ‡å‡†çš„äº§ç”Ÿã€å‘é€ã€æ¥æ”¶æ¶ˆæ¯çš„æ¥å£ç®€åŒ–ä¼ä¸šåº”ç”¨çš„å¼€å‘ã€‚&lt;/p&gt;
&lt;p&gt;â€‹    JMSæœ¬èº«åªå®šä¹‰äº†ä¸€ç³»åˆ—çš„æ¥å£è§„èŒƒï¼Œæ˜¯ä¸€ç§ä¸å‚å•†æ— å…³çš„ APIï¼Œç”¨æ¥è®¿é—®æ¶ˆæ¯æ”¶å‘ç³»ç»Ÿã€‚å®ƒç±»ä¼¼äº JDBC(java Database Connectivity)ï¼šè¿™é‡Œï¼ŒJDBC æ˜¯å¯ä»¥ç”¨æ¥è®¿é—®è®¸å¤šä¸åŒå…³ç³»æ•°æ®åº“çš„ APIï¼Œè€Œ JMS åˆ™æä¾›åŒæ ·ä¸å‚å•†æ— å…³çš„è®¿é—®æ–¹æ³•ï¼Œä»¥è®¿é—®æ¶ˆæ¯æ”¶å‘æœåŠ¡ã€‚è®¸å¤šå‚å•†ç›®å‰éƒ½æ”¯æŒ JMSï¼ŒåŒ…æ‹¬ IBM çš„ MQSeriesã€BEAçš„ Weblogic JMS serviceå’Œ Progress çš„ SonicMQï¼Œè¿™åªæ˜¯å‡ ä¸ªä¾‹å­ã€‚ JMS ä½¿æ‚¨èƒ½å¤Ÿé€šè¿‡æ¶ˆæ¯æ”¶å‘æœåŠ¡ï¼ˆæœ‰æ—¶ç§°ä¸ºæ¶ˆæ¯ä¸­ä»‹ç¨‹åºæˆ–è·¯ç”±å™¨ï¼‰ä»ä¸€ä¸ª JMS å®¢æˆ·æœºå‘å¦ä¸€ä¸ª JML å®¢æˆ·æœºå‘é€æ¶ˆæ¯ã€‚æ¶ˆæ¯æ˜¯ JMS ä¸­çš„ä¸€ç§ç±»å‹å¯¹è±¡ï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šæŠ¥å¤´å’Œæ¶ˆæ¯ä¸»ä½“ã€‚æŠ¥å¤´ç”±è·¯ç”±ä¿¡æ¯ä»¥åŠæœ‰å…³è¯¥æ¶ˆæ¯çš„å…ƒæ•°æ®ç»„æˆã€‚æ¶ˆæ¯ä¸»ä½“åˆ™æºå¸¦ç€åº”ç”¨ç¨‹åºçš„æ•°æ®æˆ–æœ‰æ•ˆè´Ÿè½½ã€‚&lt;/p&gt;
&lt;p&gt;JMS å®šä¹‰äº†äº”ç§ä¸åŒçš„æ¶ˆæ¯æ­£æ–‡æ ¼å¼ï¼Œä»¥åŠè°ƒç”¨çš„æ¶ˆæ¯ç±»å‹ï¼Œå…è®¸ä½ å‘é€å¹¶æ¥æ”¶ä»¥ä¸€&lt;/p&gt;
&lt;p&gt;äº›ä¸åŒå½¢å¼çš„æ•°æ®ï¼Œæä¾›ç°æœ‰æ¶ˆæ¯æ ¼å¼çš„ä¸€äº›çº§åˆ«çš„å…¼å®¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;TextMessage--ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼ˆåº”ç”¨æœ€å¹¿æ³›çš„ä¸€ç§ï¼‰&lt;/p&gt;
&lt;p&gt;MapMessage--ä¸€å¥—åç§°-å€¼å¯¹&lt;/p&gt;
&lt;p&gt;ObjectMessage--ä¸€ä¸ªåºåˆ—åŒ–çš„ Java å¯¹è±¡&lt;/p&gt;
&lt;p&gt;BytesMessage--ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®æµ&lt;/p&gt;
&lt;p&gt;StreamMessage -- Java åŸå§‹å€¼çš„æ•°æ®æµ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;jmsæ¶ˆæ¯ä¼ é€’ç±»å‹&#34;&gt;JMSæ¶ˆæ¯ä¼ é€’ç±»å‹&lt;/h2&gt;
&lt;p&gt;å¯¹äºæ¶ˆæ¯çš„ä¼ é€’æœ‰ä¸¤ç§ç±»å‹ï¼š&lt;br&gt;
ä¸€ç§æ˜¯ç‚¹å¯¹ç‚¹çš„ï¼Œå³ä¸€ä¸ªç”Ÿäº§è€…å’Œä¸€ä¸ªæ¶ˆè´¹è€…ä¸€ä¸€å¯¹åº”ï¼›&lt;br&gt;
&lt;img src=&#34;https://haohanya.github.io/post-images/1589686388156.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
å¦ä¸€ç§æ˜¯å‘å¸ƒ/ è®¢é˜…æ¨¡å¼ï¼Œå³ä¸€ä¸ªç”Ÿäº§è€…äº§ç”Ÿæ¶ˆæ¯å¹¶è¿›è¡Œå‘é€åï¼Œå¯ä»¥ç”±å¤šä¸ªæ¶ˆè´¹è€…è¿›&lt;br&gt;
è¡Œæ¥æ”¶ã€‚&lt;br&gt;
&lt;img src=&#34;https://haohanya.github.io/post-images/1589686418709.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£…&#34;&gt;å®‰è£…&lt;/h2&gt;
&lt;p&gt;1ã€ä¸Šä¼ activeMQåˆ°æœåŠ¡å™¨&lt;/p&gt;
&lt;p&gt;2ã€è§£å‹ &lt;code&gt;tar -zxvf apache-activemq-5.12.0-bin.tar.gz&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;3ã€ç§»åŠ¨æ–‡ä»¶ &lt;code&gt;mv apache-activemq-5.12.0 /usr/local/java/activemq-5.12.0&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;4ã€è¿›å…¥bin &lt;code&gt;cd /usr/local/java/activemq-5.12.0/bin&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;5ã€å¯åŠ¨activeMQ &lt;code&gt;./activemq start&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;6ã€è®¿é—®ï¼š&lt;code&gt;ip:8161&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è´¦å·ï¼šadmin&lt;/p&gt;
&lt;p&gt;å¯†ç ï¼šadmin&lt;/p&gt;
&lt;h2 id=&#34;jmsæµ‹è¯•&#34;&gt;JMSæµ‹è¯•&lt;/h2&gt;
&lt;h3 id=&#34;ç‚¹å¯¹ç‚¹æ¨¡å¼&#34;&gt;ç‚¹å¯¹ç‚¹æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;1ã€å¼•å…¥ä¾èµ–&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt; &amp;lt;dependencies&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.apache.activemq&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;activemq-client&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;5.13.4&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
&amp;lt;/dependencies&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€åˆ›å»ºæ¶ˆæ¯ç”Ÿäº§è€…QueueProducer&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static void main(String[] args) throws JMSException {
    //1ã€åˆ›å»ºå·¥å‚
    ConnectionFactory connectionFactory  = new ActiveMQConnectionFactory(&amp;quot;tcp://192.168.25.135:61616&amp;quot;);
    //2ã€è·å–è¿æ¥
    Connection connection = connectionFactory.createConnection();
    //3ã€å¯åŠ¨è¿æ¥
    connection.start();
    /** 4ã€è·å–session  
    	å‚æ•°1ï¼šæ˜¯å¦å¯ç”¨äº‹åŠ¡ 
    	å‚æ•°2ï¼šæ¶ˆæ¯ç¡®è®¤æ¨¡å¼
            AUTO_ACKNOWLEDGE = 1    è‡ªåŠ¨ç¡®è®¤
            CLIENT_ACKNOWLEDGE = 2    å®¢æˆ·ç«¯æ‰‹åŠ¨ç¡®è®¤   
            DUPS_OK_ACKNOWLEDGE = 3    è‡ªåŠ¨æ‰¹é‡ç¡®è®¤
            SESSION_TRANSACTED = 0    äº‹åŠ¡æäº¤å¹¶ç¡®è®¤
	*/
    Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
    //5ã€åˆ›å»ºé˜Ÿåˆ—å¯¹è±¡
    Queue queue = session.createQueue(&amp;quot;test-queue&amp;quot;);
    //6ã€åˆ›å»ºæ¶ˆæ¯ç”Ÿäº§ç€
    MessageProducer messageProducer = session.createProducer(queue);
    //7ã€åˆ›å»ºæ¶ˆæ¯
    TextMessage textMessage = session.createTextMessage(&amp;quot;æµ‹è¯•æ–‡æœ¬å†…å®¹&amp;quot;);
    //8ã€å‘é€æ¶ˆæ¯
    messageProducer.send(textMessage);
    //9ã€å…³é—­èµ„æº
    messageProducer.close();
    session.close();
    connection.close();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€åˆ›å»ºæ¶ˆæ¯æ¶ˆè´¹è€…QueueConsumer&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static void main(String[] args) throws JMSException, IOException {
    //1ã€åˆ›å»ºè¿æ¥å·¥å‚
    ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(&amp;quot;tcp://192.168.25.135:61616&amp;quot;);
    //2ã€è·å–è¿æ¥
    Connection connection = connectionFactory.createConnection();
    //3ã€å¯åŠ¨è¿æ¥
    connection.start();
    //4ã€è·å–session
    Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
    //5ã€åˆ›å»ºé˜Ÿåˆ—å¯¹è±¡
    Queue queue = session.createQueue(&amp;quot;test-queue&amp;quot;);
    //6ã€åˆ›å»ºæ¶ˆæ¯æ¶ˆè´¹
    MessageConsumer consumer = session.createConsumer(queue);
    //7ã€ç›‘å¬æ¶ˆæ¯
    consumer.setMessageListener(new MessageListener() {
        @Override
        public void onMessage(Message message) {
            TextMessage textMessage = (TextMessage) message;
            try {
                System.out.println(&amp;quot;æ¥æ”¶æ¶ˆæ¯ä¸ºï¼š&amp;quot;+textMessage.getText());
            } catch (JMSException e) {
                e.printStackTrace();
            }
        }
    });
    //8ã€ç­‰å¾…é”®ç›˜è¾“å…¥
    System.in.read();
    //9ã€å…³é—­èµ„æº
    consumer.close();
    session.close();
    connection.close();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å‘å¸ƒè®¢é˜…æ¨¡å¼&#34;&gt;å‘å¸ƒ/è®¢é˜…æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;1ã€æ¶ˆæ¯ç”Ÿäº§è€…TopicProducer&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static void main(String[] args) throws JMSException, IOException {
    //1ã€åˆ›å»ºè¿æ¥å·¥å‚
    ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(&amp;quot;tcp://192.168.25.135:61616&amp;quot;);
    //2ã€è·å–è¿æ¥
    Connection connection = connectionFactory.createConnection();
    //3ã€å¯åŠ¨è¿æ¥
    connection.start();
    //4ã€è·å–session
    Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
    //5ã€åˆ›å»ºä¸»é¢˜å¯¹è±¡
    Topic topic = session.createTopic(&amp;quot;test-topic&amp;quot;);
    //6ã€åˆ›å»ºæ¶ˆæ¯æ¶ˆè´¹è€…
    MessageConsumer consumer = session.createConsumer(topic);
    //7ã€ç›‘å¬æ¶ˆæ¯
    consumer.setMessageListener(new MessageListener() {
        @Override
        public void onMessage(Message message) {
            TextMessage textMessage = (TextMessage) message;
            try {
                System.out.println(&amp;quot;æ¥æ”¶æ¶ˆæ¯ï¼š&amp;quot;+textMessage.getText());
            } catch (JMSException e) {
                e.printStackTrace();
            }
        }
    });
    //8ã€ç­‰å¾…é”®ç›˜è¾“å…¥
    System.in.read();
    //9ã€å…³é—­èµ„æº
    consumer.close();
    session.close();
    connection.close();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€æ¶ˆæ¯æ¶ˆè´¹è€…TopicProducer&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static void main(String[] args) throws JMSException {
    //1ã€åˆ›å»ºè¿æ¥å·¥å‚
    ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(&amp;quot;tcp://192.168.25.135:61616&amp;quot;);
    //2ã€è·å–è¿æ¥
    Connection connection = connectionFactory.createConnection();
    //3ã€å¯åŠ¨è¿æ¥
    connection.start();
    //4ã€è·å–session
    Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
    //5ã€åˆ›å»ºä¸»é¢˜å¯¹è±¡
    Topic topic = session.createTopic(&amp;quot;test-topic&amp;quot;);
    //6ã€åˆ›å»ºæ¶ˆæ¯ç”Ÿäº§è€…
    MessageProducer producer = session.createProducer(topic);
    //7ã€åˆ›å»ºæ¶ˆæ¯
    TextMessage topicTest = session.createTextMessage(&amp;quot;topicTest&amp;quot;);
    //8ã€å‘é€æ¶ˆæ¯
    producer.send(topicTest);
    //9ã€å…³é—­èµ„æº
    producer.close();
    session.close();
    connection.close();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;springæ•´åˆjms&#34;&gt;springæ•´åˆjms&lt;/h2&gt;
&lt;h3 id=&#34;ç‚¹å¯¹ç‚¹æ¨¡å¼-2&#34;&gt;ç‚¹å¯¹ç‚¹æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;1ã€å¼•å…¥ä¾èµ–&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--spring-jms--&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-jms&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;4.2.4.RELEASE&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;!-- activemq --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.apache.activemq&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;activemq-all&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;5.11.2&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;!-- å•å…ƒæµ‹è¯• --&amp;gt;
&amp;lt;!-- springJunit --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-test&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;4.2.4.RELEASE&amp;lt;/version&amp;gt;
    &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;junit&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;4.12&amp;lt;/version&amp;gt;
    &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€åˆ›å»ºç”Ÿäº§è€…é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;applicationContext-jms-producer-queue.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;beans xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;
       xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;
       xmlns:context=&amp;quot;http://www.springframework.org/schema/context&amp;quot;
       xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&amp;quot;&amp;gt;
    &amp;lt;!--æ¶ˆæ¯ç”Ÿäº§è€…:ç‚¹å¯¹ç‚¹--&amp;gt;

    &amp;lt;context:component-scan base-package=&amp;quot;com.springjms&amp;quot;/&amp;gt;

    &amp;lt;!--jmsæœåŠ¡å‚å•†æä¾›çš„è¿æ¥å·¥å‚--&amp;gt;
    &amp;lt;bean id=&amp;quot;targetConnectionFactory&amp;quot; class=&amp;quot;org.apache.activemq.ActiveMQConnectionFactory&amp;quot;&amp;gt;
        &amp;lt;property name=&amp;quot;brokerURL&amp;quot; value=&amp;quot;tcp://192.168.25.137:61616&amp;quot;/&amp;gt;
    &amp;lt;/bean&amp;gt;
    &amp;lt;!--springç”¨äºç®¡ç†çœŸæ­£çš„ConnectionFactory--&amp;gt;
    &amp;lt;bean id=&amp;quot;connectionFactory&amp;quot; class=&amp;quot;org.springframework.jms.connection.SingleConnectionFactory&amp;quot;&amp;gt;
        &amp;lt;property name=&amp;quot;targetConnectionFactory&amp;quot; ref=&amp;quot;targetConnectionFactory&amp;quot;/&amp;gt;
    &amp;lt;/bean&amp;gt;
    &amp;lt;!--springæä¾›çš„å·¥å…·ç±»--&amp;gt;
    &amp;lt;bean id=&amp;quot;jmsTemplate&amp;quot; class=&amp;quot;org.springframework.jms.core.JmsTemplate&amp;quot;&amp;gt;
        &amp;lt;constructor-arg name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;connectionFactory&amp;quot;/&amp;gt;
    &amp;lt;/bean&amp;gt;

    &amp;lt;!--queue--&amp;gt;
    &amp;lt;bean id=&amp;quot;queueTextDestination&amp;quot; class=&amp;quot;org.apache.activemq.command.ActiveMQQueue&amp;quot;&amp;gt;
        &amp;lt;constructor-arg name=&amp;quot;name&amp;quot; value=&amp;quot;queue_text&amp;quot;/&amp;gt;
    &amp;lt;/bean&amp;gt;
&amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€å‘é€æ¶ˆæ¯&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Component
public class QueueProducer {

    @Resource
    private JmsTemplate jmsTemplate;

    @Resource
    private Destination queueTextDestination;

    /**
     * å‘é€æ–‡æœ¬æ¶ˆæ¯
     * @param text  å‘é€çš„æ–‡æœ¬å†…å®¹
     */
    public void sendTextMessage(final String text){
        jmsTemplate.send(queueTextDestination, new MessageCreator() {
            @Override
            public Message createMessage(Session session) throws JMSException {
                return session.createTextMessage(text);
            }
        });
    }

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4ã€æµ‹è¯•å‘é€æ¶ˆæ¯&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = &amp;quot;classpath:applicationContext-jms-producer-queue.xml&amp;quot;)
public class MyTest {

    @Resource
    private QueueProducer queueProducer;

    @Test
    public void test(){
        queueProducer.sendTextMessage(&amp;quot;Hello! queue&amp;quot;);
    }

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;5ã€åˆ›å»ºæ¶ˆè´¹è€…é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;applicationContext-jms-consumer-queue.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;beans xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;
       xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;
       xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&amp;quot;&amp;gt;
    &amp;lt;!--æœåŠ¡æ¶ˆè´¹è€…:ç‚¹å¯¹ç‚¹--&amp;gt;

    &amp;lt;!--jsmæœåŠ¡å‚å•†æä¾›çš„è¿æ¥å·¥å‚--&amp;gt;
    &amp;lt;bean id=&amp;quot;targetConnectionFactory&amp;quot; class=&amp;quot;org.apache.activemq.ActiveMQConnectionFactory&amp;quot;&amp;gt;
        &amp;lt;property name=&amp;quot;brokerURL&amp;quot; value=&amp;quot;tcp://192.168.25.137:61616&amp;quot;/&amp;gt;
    &amp;lt;/bean&amp;gt;
    &amp;lt;!--springç”¨äºç®¡ç†çœŸæ­£çš„ConnectionFactory--&amp;gt;
    &amp;lt;bean id=&amp;quot;connectionFactory&amp;quot; class=&amp;quot;org.springframework.jms.connection.SingleConnectionFactory&amp;quot;&amp;gt;
        &amp;lt;property name=&amp;quot;targetConnectionFactory&amp;quot; ref=&amp;quot;targetConnectionFactory&amp;quot;/&amp;gt;
    &amp;lt;/bean&amp;gt;
    &amp;lt;!--springæä¾›çš„å·¥å…·ç±»--&amp;gt;
    &amp;lt;bean id=&amp;quot;jmsTemplate&amp;quot; class=&amp;quot;org.springframework.jms.core.JmsTemplate&amp;quot;&amp;gt;
        &amp;lt;constructor-arg name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;connectionFactory&amp;quot;/&amp;gt;
    &amp;lt;/bean&amp;gt;

    &amp;lt;!--queue--&amp;gt;
    &amp;lt;bean id=&amp;quot;queueTextDestination&amp;quot; class=&amp;quot;org.apache.activemq.command.ActiveMQQueue&amp;quot;&amp;gt;
        &amp;lt;constructor-arg name=&amp;quot;name&amp;quot; value=&amp;quot;queue_text&amp;quot;/&amp;gt;
    &amp;lt;/bean&amp;gt;
    &amp;lt;!--ç›‘å¬ç±»,ç”¨æ¥ç›‘å¬mqä¸­æ˜¯å¦æœ‰æ¶ˆæ¯--&amp;gt;
    &amp;lt;bean id=&amp;quot;myMessageListener&amp;quot; class=&amp;quot;com.springjms.MyMessageListener&amp;quot;/&amp;gt;
    &amp;lt;!--æ¶ˆæ¯çš„ç›‘å¬å™¨--&amp;gt;
    &amp;lt;bean class=&amp;quot;org.springframework.jms.listener.DefaultMessageListenerContainer&amp;quot;&amp;gt;
        &amp;lt;property name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;connectionFactory&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;destination&amp;quot; ref=&amp;quot;queueTextDestination&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;messageListener&amp;quot; ref=&amp;quot;myMessageListener&amp;quot;/&amp;gt;
    &amp;lt;/bean&amp;gt;
&amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;6ã€ç¼–å†™ç›‘å¬ç±»&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class MyMessageListener implements MessageListener {
    @Override
    public void onMessage(Message message) {
        TextMessage textMessage = (TextMessage) message;
        try {
            System.out.println(&amp;quot;æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š&amp;quot;+textMessage.getText());
        } catch (JMSException e) {
            e.printStackTrace();
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;7ã€æµ‹è¯•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations=&amp;quot;classpath:applicationContext-jms-consumer-queue.xml&amp;quot;)
public class MyTest1 {
    @Test
    public void testQueue(){
        try {
            System.in.read();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;å‘å¸ƒè®¢é˜…æ¨¡å¼-2&#34;&gt;å‘å¸ƒ/è®¢é˜…æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;1ã€åˆ›å»ºç”Ÿäº§è€…ï¼Œåœ¨applicationContext-jms-producer-queue.xmlæ–°å¢å†…å®¹&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--è¿™ä¸ªæ˜¯è®¢é˜…æ¨¡å¼  æ–‡æœ¬ä¿¡æ¯--&amp;gt;  
&amp;lt;bean id=&amp;quot;topicTextDestination&amp;quot; class=&amp;quot;org.apache.activemq.command.ActiveMQTopic&amp;quot;&amp;gt;  
    &amp;lt;constructor-arg value=&amp;quot;topic_text&amp;quot;/&amp;gt;  
&amp;lt;/bean&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€å‘é€æ¶ˆæ¯&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Component
public class TopicProducer {

    @Resource
    private JmsTemplate jmsTemplate;
    @Resource
    private Destination topicTextDestination;

    /**
     * å‘é€æ¶ˆæ¯
     * @param text
     */
    public void sendMessage(final String text){
        jmsTemplate.send(topicTextDestination, new MessageCreator() {
            @Override
            public Message createMessage(Session session) throws JMSException {
                return session.createTextMessage(text);
            }
        });
    }

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€æµ‹è¯•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = &amp;quot;classpath:applicationContext-jms-producer-topic.xml&amp;quot;)
public class MyTest2 {

    @Resource
    private TopicProducer topicProducer;

    @Test
    public void test(){
        topicProducer.sendMessage(&amp;quot;Hello! topic&amp;quot;);
    }

}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4ã€åˆ›å»ºæ¶ˆè´¹è€…ï¼Œåœ¨applicationContext-jms-consumer-queue.xmlæ–°å¢å†…å®¹&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--topic--&amp;gt;
&amp;lt;bean id=&amp;quot;topicTextDestination&amp;quot; class=&amp;quot;org.apache.activemq.command.ActiveMQTopic&amp;quot;&amp;gt;
    &amp;lt;constructor-arg name=&amp;quot;name&amp;quot; value=&amp;quot;topic_text&amp;quot;/&amp;gt;
&amp;lt;/bean&amp;gt;
&amp;lt;!--ç›‘å¬ç±»,ç”¨æ¥ç›‘å¬mqä¸­æ˜¯å¦æœ‰æ¶ˆæ¯--&amp;gt;
&amp;lt;bean id=&amp;quot;topicMessageListener&amp;quot; class=&amp;quot;com.springjms.TopicMessageListener&amp;quot;/&amp;gt;
&amp;lt;!--æ¶ˆæ¯çš„ç›‘å¬å™¨--&amp;gt;
&amp;lt;bean class=&amp;quot;org.springframework.jms.listener.DefaultMessageListenerContainer&amp;quot;&amp;gt;
    &amp;lt;property name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;connectionFactory&amp;quot;/&amp;gt;
    &amp;lt;property name=&amp;quot;destination&amp;quot; ref=&amp;quot;topicTextDestination&amp;quot;/&amp;gt;
    &amp;lt;property name=&amp;quot;messageListener&amp;quot; ref=&amp;quot;topicMessageListener&amp;quot;/&amp;gt;
&amp;lt;/bean&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;5ã€ç¼–å†™ç›‘å¬ç±»&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class TopicMessageListener implements MessageListener {
    @Override
    public void onMessage(Message message) {
        TextMessage textMessage = (TextMessage) message;
        try {
            System.out.println(&amp;quot;æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š&amp;quot;+textMessage.getText());
        } catch (JMSException e) {
            e.printStackTrace();
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;6ã€ç¼–å†™æµ‹è¯•ç±»&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations=&amp;quot;classpath:applicationContext-jms-consumer-topic.xml&amp;quot;)
public class MyTest3 {
    @Test
    public void testQueue(){
        try {
            System.in.read();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
">ActiveMQ</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/solr-an-zhuang-shi-yong/"" data-c="
          &lt;h2 id=&#34;ä»€ä¹ˆæ˜¯solr&#34;&gt;ä»€ä¹ˆæ˜¯Solr&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¤§å¤šæ•°æœç´¢å¼•æ“åº”ç”¨éƒ½å¿…é¡»å…·æœ‰æŸç§æœç´¢åŠŸèƒ½ï¼Œé—®é¢˜æ˜¯æœç´¢åŠŸèƒ½å¾€å¾€æ˜¯å·¨å¤§çš„èµ„æºæ¶ˆè€—å¹¶ä¸”å®ƒä»¬ç”±äºæ²‰é‡çš„æ•°æ®åº“åŠ è½½è€Œæ‹–å®ä½ çš„åº”ç”¨çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè½¬ç§»è´Ÿè½½åˆ°ä¸€ä¸ªå¤–éƒ¨çš„æœç´¢æœåŠ¡å™¨æ˜¯ä¸€ä¸ªä¸é”™çš„ä¸»æ„ï¼ŒApache Solræ˜¯ä¸€ä¸ªæµè¡Œçš„å¼€æºæœç´¢æœåŠ¡å™¨ï¼Œå®ƒé€šè¿‡ä½¿ç”¨ç±»ä¼¼RESTçš„HTTP APIï¼Œè¿™å°±ç¡®ä¿ä½ èƒ½ä»å‡ ä¹ä»»ä½•ç¼–ç¨‹è¯­è¨€æ¥ä½¿ç”¨solrã€‚&lt;/p&gt;
&lt;p&gt;Solræ˜¯ä¸€ä¸ªå¼€æºæœç´¢å¹³å°ï¼Œç”¨äºæ„å»ºæœç´¢åº”ç”¨ç¨‹åºã€‚ å®ƒå»ºç«‹åœ¨Lucene(å…¨æ–‡æœç´¢å¼•æ“)ä¹‹ä¸Šã€‚ Solræ˜¯ä¼ä¸šçº§çš„ï¼Œå¿«é€Ÿçš„å’Œé«˜åº¦å¯æ‰©å±•çš„ã€‚ ä½¿ç”¨Solræ„å»ºçš„åº”ç”¨ç¨‹åºéå¸¸å¤æ‚ï¼Œå¯æä¾›é«˜æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†åœ¨CNETç½‘ç»œçš„å…¬å¸ç½‘ç«™ä¸Šæ·»åŠ æœç´¢åŠŸèƒ½ï¼ŒYonik Seelyäº2004å¹´åˆ›å»ºäº†Solrã€‚å¹¶åœ¨2006å¹´1æœˆï¼Œå®ƒæˆä¸ºApacheè½¯ä»¶åŸºé‡‘ä¼šä¸‹çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ã€‚å¹¶äº2016å¹´å‘å¸ƒæœ€æ–°ç‰ˆæœ¬Solr 6.0ï¼Œæ”¯æŒå¹¶è¡ŒSQLæŸ¥è¯¢çš„æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;Solrå¯ä»¥å’ŒHadoopä¸€èµ·ä½¿ç”¨ã€‚ç”±äºHadoopå¤„ç†å¤§é‡æ•°æ®ï¼ŒSolrå¸®åŠ©æˆ‘ä»¬ä»è¿™ä¹ˆå¤§çš„æºä¸­æ‰¾åˆ°æ‰€éœ€çš„ä¿¡æ¯ã€‚ä¸ä»…é™äºæœç´¢ï¼ŒSolrä¹Ÿå¯ä»¥ç”¨äºå­˜å‚¨ç›®çš„ã€‚åƒå…¶ä»–NoSQLæ•°æ®åº“ä¸€æ ·ï¼Œå®ƒæ˜¯ä¸€ç§éå…³ç³»æ•°æ®å­˜å‚¨å’Œå¤„ç†æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ä¹‹ï¼ŒSolræ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„ï¼Œå¯éƒ¨ç½²ï¼Œæœç´¢/å­˜å‚¨å¼•æ“ï¼Œä¼˜åŒ–æœç´¢å¤§é‡ä»¥æ–‡æœ¬ä¸ºä¸­å¿ƒçš„æ•°æ®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;solrå®‰è£…&#34;&gt;solrå®‰è£…&lt;/h2&gt;
&lt;h3 id=&#34;1-ä¸Šä¼ æ–‡ä»¶&#34;&gt;1 ä¸Šä¼ æ–‡ä»¶&lt;/h3&gt;
&lt;p&gt;apache-tomcat-7.0.82.tar.gz&lt;/p&gt;
&lt;p&gt;solr-4.10.3.tgz.tgz&lt;/p&gt;
&lt;p&gt;IK Analyzer 2012FF_hf1&lt;/p&gt;
&lt;h3 id=&#34;2-åˆ›å»ºç›®å½•&#34;&gt;2 åˆ›å»ºç›®å½•&lt;/h3&gt;
&lt;p&gt;mkdir /usr/soft/solr&lt;/p&gt;
&lt;h3 id=&#34;3-è§£å‹tomcatå¹¶ç§»åŠ¨åˆ°solrç›®å½•&#34;&gt;3 è§£å‹tomcatå¹¶ç§»åŠ¨åˆ°solrç›®å½•&lt;/h3&gt;
&lt;p&gt;tar -zxvf apache-tomcat-7.0.82.tar.gz&lt;/p&gt;
&lt;p&gt;mv apache-tomcat-7.0.82 /usr/soft/solr/tomcat7&lt;/p&gt;
&lt;p&gt;tar -zxvf solr-4.10.3.tgz.tgz&lt;/p&gt;
&lt;p&gt;åœ¨solr-4.10.3/distç›®å½•ä¸‹æœ‰ä¸€ä¸ªwaråŒ… éœ€è¦æŠŠwaråŒ…ç§»åŠ¨åˆ°tomcaté‡Œè¿è¡Œ&lt;/p&gt;
&lt;p&gt;cp ~/solr-4.10.3/dist/solr-4.10.3.war /usr/soft/solr/tomcat7/webapps/solr.war&lt;/p&gt;
&lt;h3 id=&#34;4-å¯åŠ¨tomcat&#34;&gt;4 å¯åŠ¨tomcat&lt;/h3&gt;
&lt;p&gt;cd /usr/soft/solr/tomcat7&lt;/p&gt;
&lt;p&gt;./bin/startup.sh&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹tomcatæ—¥å¿—(å¯é€‰)&lt;/p&gt;
&lt;p&gt;tail -f logs/catalina.out&lt;/p&gt;
&lt;h3 id=&#34;5-å¼•å…¥ä¾èµ–jaråŒ…&#34;&gt;5 å¼•å…¥ä¾èµ–jaråŒ…&lt;/h3&gt;
&lt;p&gt;cd ~/solr-4.10.3/example/lib/ext&lt;/p&gt;
&lt;p&gt;cp * /usr/soft/solr/tomcat7/webapps/solr/WEB-INF/lib&lt;/p&gt;
&lt;h3 id=&#34;6-å¤åˆ¶é…ç½®æ–‡ä»¶&#34;&gt;6 å¤åˆ¶é…ç½®æ–‡ä»¶&lt;/h3&gt;
&lt;p&gt;cd ~/solr-4.10.3/example&lt;/p&gt;
&lt;p&gt;cp -r solr /usr/soft/solr/solrhome&lt;/p&gt;
&lt;h3 id=&#34;7-solrå’Œsolrhomeå»ºç«‹è”ç³»&#34;&gt;7 solrå’Œsolrhomeå»ºç«‹è”ç³»&lt;/h3&gt;
&lt;p&gt;cd /usr/soft/solr/tomcat7/webapps/solr/WEB-INF&lt;/p&gt;
&lt;p&gt;vi web.xml&lt;/p&gt;
&lt;p&gt;/usr/soft/solr/solrhome&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;env-entry&amp;gt;
	&amp;lt;env-entry-name&amp;gt;solr/home&amp;lt;/env-entry-name&amp;gt;
    &amp;lt;!-- è¿™é‡Œè®¾ç½®ä¸ºè‡ªå·±çš„solrhomeè·¯å¾„ --&amp;gt;
    &amp;lt;env-entry-value&amp;gt;/usr/soft/solr/solrhome&amp;lt;/env-entry-value&amp;gt;
    &amp;lt;env-entry-type&amp;gt;java.lang.String&amp;lt;/env-entry-type&amp;gt;
&amp;lt;/env-entry&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;:wq&lt;/p&gt;
&lt;h3 id=&#34;8-é‡å¯-tomcat&#34;&gt;8 é‡å¯ tomcat&lt;/h3&gt;
&lt;p&gt;cd /usr/soft/solr/tomcat7/bin&lt;/p&gt;
&lt;p&gt;./shutdown.sh&lt;/p&gt;
&lt;p&gt;./startup.sh&lt;/p&gt;
&lt;h3 id=&#34;9-è®¿é—®solr&#34;&gt;9 è®¿é—®solr&lt;/h3&gt;
&lt;p&gt;http://192.168.25.132:8080/solr/&lt;/p&gt;
&lt;h2 id=&#34;é…ç½®ikåˆ†è¯å™¨&#34;&gt;é…ç½®IKåˆ†è¯å™¨&lt;/h2&gt;
&lt;h3 id=&#34;ik-analyzerç®€ä»‹&#34;&gt;IK Analyzerç®€ä»‹&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;IK Analyzer æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼ŒåŸºäº java è¯­è¨€å¼€å‘çš„è½»é‡çº§çš„ä¸­æ–‡åˆ†è¯å·¥å…·åŒ…ã€‚ä» 2006å¹´ 12 æœˆæ¨å‡º 1.0 ç‰ˆå¼€å§‹ï¼Œ IKAnalyzer å·²ç»æ¨å‡ºäº† 4 ä¸ªå¤§ç‰ˆæœ¬ã€‚æœ€åˆï¼Œå®ƒæ˜¯ä»¥å¼€æºé¡¹ç›®Luence ä¸ºåº”ç”¨ä¸»ä½“çš„ï¼Œç»“åˆè¯å…¸åˆ†è¯å’Œæ–‡æ³•åˆ†æç®—æ³•çš„ä¸­æ–‡åˆ†è¯ç»„ä»¶ã€‚ä» 3.0 ç‰ˆæœ¬å¼€å§‹ï¼ŒIK å‘å±•ä¸ºé¢å‘ Java çš„å…¬ç”¨åˆ†è¯ç»„ä»¶ï¼Œç‹¬ç«‹äº Lucene é¡¹ç›®ï¼ŒåŒæ—¶æä¾›äº†å¯¹ Lucene çš„é»˜è®¤ä¼˜åŒ–å®ç°ã€‚åœ¨ 2012 ç‰ˆæœ¬ä¸­ï¼ŒIK å®ç°äº†ç®€å•çš„åˆ†è¯æ­§ä¹‰æ’é™¤ç®—æ³•ï¼Œæ ‡å¿—ç€ IK åˆ†è¯å™¨ä»å•çº¯çš„è¯å…¸åˆ†è¯å‘æ¨¡æ‹Ÿè¯­ä¹‰åˆ†è¯è¡åŒ–ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;1-å°†ikåˆ†è¯å™¨jaråŒ…ç§»åŠ¨åˆ°solrä¸­&#34;&gt;1 å°†ikåˆ†è¯å™¨jaråŒ…ç§»åŠ¨åˆ°solrä¸­&lt;/h3&gt;
&lt;p&gt;cp ~/IK\ Analyzer\ 2012FF_hf1/IKAnalyzer2012FF_u1.jar /usr/soft/solr/tomcat7/webapps/solr/WEB-INF/lib&lt;/p&gt;
&lt;h3 id=&#34;2-åœ¨solré¡¹ç›®çš„web-inf-ç›®å½•åˆ›å»ºä¸€ä¸ªclassesç›®å½•&#34;&gt;2 åœ¨solré¡¹ç›®çš„WEB-INF ç›®å½•åˆ›å»ºä¸€ä¸ªclassesç›®å½•&lt;/h3&gt;
&lt;p&gt;mkdir /usr/soft/solr/tomcat7/webapps/solr/WEB-INF/classes&lt;/p&gt;
&lt;h3 id=&#34;3-ç§»åŠ¨é…ç½®æ–‡ä»¶åˆ°classesç›®å½•&#34;&gt;3 ç§»åŠ¨é…ç½®æ–‡ä»¶åˆ°classesç›®å½•&lt;/h3&gt;
&lt;p&gt;cp IKAnalyzer.cfg.xml ext_stopword.dic mydict.dic /usr/soft/solr/tomcat7/webapps/solr/WEB-INF/classes&lt;/p&gt;
&lt;h3 id=&#34;4-å¯ç”¨-ç¼–è¾‘é…ç½®æ–‡ä»¶&#34;&gt;4 å¯ç”¨---ç¼–è¾‘é…ç½®æ–‡ä»¶&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨nppç¼–è¾‘æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;1 å®‰è£…npp (ç•¥)&lt;/p&gt;
&lt;p&gt;2  å®‰è£…NppFTP(ç•¥)&lt;/p&gt;
&lt;p&gt;3 è¿æ¥æœåŠ¡å™¨ (è™)&lt;/p&gt;
&lt;p&gt;4 ç¼–è¾‘xmlæ–‡ä»¶ : /usr/soft/solr/solrhome/collection1/conf/schema.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- é…ç½®IKåˆ†è¯å™¨ --&amp;gt;
&amp;lt;fieldType name=&amp;quot;text_ik&amp;quot; class=&amp;quot;solr.TextField&amp;quot;&amp;gt;
    &amp;lt;analyzer class=&amp;quot;org.wltea.analyzer.lucene.IKAnalyzer&amp;quot;&amp;gt;&amp;lt;/analyzer&amp;gt;
&amp;lt;/fieldType&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;5 é‡å¯tomcat&lt;/p&gt;
&lt;p&gt;cd /usr/soft/solr/tomcat7/bin&lt;/p&gt;
&lt;p&gt;./shutdown.sh&lt;/p&gt;
&lt;p&gt;./startup.sh&lt;/p&gt;
&lt;p&gt;6 è®¿é—®url&lt;/p&gt;
&lt;p&gt;http://192.168.25.132:8080/solr/&lt;/p&gt;
&lt;h2 id=&#34;åŸŸ&#34;&gt;åŸŸ&lt;/h2&gt;
&lt;p&gt;åŸŸ : ç›¸å½“äºæ•°æ®åº“è¡¨çš„å­—æ®µ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--
	name : æŒ‡å®šåŸŸçš„åç§°
	type : æŒ‡å®šåŸŸçš„ç±»å‹
	indexed : æ˜¯å¦ç´¢å¼•
	stored : æ˜¯å¦å­˜å‚¨
	required : æ˜¯å¦å¿…é¡»
	multiValued : æ˜¯å¦å¤šå€¼
--&amp;gt;
&amp;lt;field name=&amp;quot;id&amp;quot; type=&amp;quot;string&amp;quot; indexed=&amp;quot;true&amp;quot; stored=&amp;quot;true&amp;quot; required=&amp;quot;true&amp;quot; multiValued=&amp;quot;false&amp;quot; /&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;spring-data-solr-demo&#34;&gt;Spring Data Solr Demo&lt;/h2&gt;
&lt;p&gt;1ã€å¼•å…¥ä¾èµ–&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.data&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-data-solr&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;1.5.5.RELEASE&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2ã€applicationContext-solr.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;beans xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;
	xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot; xmlns:p=&amp;quot;http://www.springframework.org/schema/p&amp;quot;
	xmlns:context=&amp;quot;http://www.springframework.org/schema/context&amp;quot;
	xmlns:solr=&amp;quot;http://www.springframework.org/schema/data/solr&amp;quot;
	xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/data/solr 
  		http://www.springframework.org/schema/data/solr/spring-solr-1.0.xsd
		http://www.springframework.org/schema/beans 
		http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context 
		http://www.springframework.org/schema/context/spring-context.xsd&amp;quot;&amp;gt;
	&amp;lt;!-- solræœåŠ¡å™¨åœ°å€ --&amp;gt;
	&amp;lt;solr:solr-server id=&amp;quot;solrServer&amp;quot; url=&amp;quot;http://127.0.0.1:8080/solr&amp;quot; /&amp;gt;
	&amp;lt;!-- solræ¨¡æ¿ï¼Œä½¿ç”¨solræ¨¡æ¿å¯å¯¹ç´¢å¼•åº“è¿›è¡ŒCRUDçš„æ“ä½œ --&amp;gt;
	&amp;lt;bean id=&amp;quot;solrTemplate&amp;quot; class=&amp;quot;org.springframework.data.solr.core.SolrTemplate&amp;quot;&amp;gt;
		&amp;lt;constructor-arg ref=&amp;quot;solrServer&amp;quot; /&amp;gt;
	&amp;lt;/bean&amp;gt;
&amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3ã€@Field æ³¨è§£&lt;/p&gt;
&lt;p&gt;ä½œç”¨ï¼šå¦‚æœåœ¨pojoä¸Šæ·»åŠ äº†è¿™ä¸ªæ³¨è§£ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§ä¼šè¢«å¼•ç”¨åˆ°solrï¼Œvalueä¸ºæŒ‡å®šsolrä¸­fieldå®šä¹‰çš„nameï¼Œå¦‚æœä¸€æ ·å¯ä»¥çœç•¥&lt;/p&gt;
&lt;p&gt;@Dynamicæ³¨è§£ï¼Œåœ¨å±æ€§ä¸Šå®šä¹‰å°±è¡¨ç¤ºæ˜¯ä¸€ä¸ªåŠ¨æ€åŸŸ&lt;/p&gt;
&lt;p&gt;4ã€æ·»åŠ &lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Autowired
private SolrTemplate solrTemplate;

solrTemplate.saveBean(item);
//æ·»åŠ å¤šæ¡æ•°æ®å¯ä»¥ä½¿ç”¨saveBeans
solrTemplate.commit();//æäº¤äº‹åŠ¡
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;5ã€æŒ‰ä¸»é”®æŸ¥è¯¢&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//å‚æ•°1 ï¼šè¦æŸ¥è¯¢çš„ä¸»é”®ID
//å‚æ•°2 ï¼šè¿”å›çš„æ•°æ®ç±»å‹
solrTemplate.getById(1,TbItem.class)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;6ã€æŒ‰ä¸»é”®åˆ é™¤&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;solrTemplate.deleteById(&amp;quot;1&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;7ã€åˆ†é¡µæŸ¥è¯¢&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//æ¡ä»¶
Query query = newSimpleQuery(&amp;quot;*:*&amp;quot;);
//æŸ¥è¯¢æ¡ä»¶
Criteria criteria = new Criteria();
//and ï¼šæŸ¥è¯¢çš„åŸŸ
//contains ï¼šæŸ¥è¯¢çš„å…³é”®å­—
criteria.and(&amp;quot;item_title&amp;quot;).contains(&amp;quot;æ‰‹æœº&amp;quot;);
//å°†æŸ¥è¯¢æ¡ä»¶æ·»åŠ åˆ°queyrä¸­
query.addCriteria(criteria);
query.setOffset(0);//å¼€å§‹ç´¢å¼•ï¼Œé»˜è®¤ä¸º0ï¼Œç¿»é¡µè§„åˆ™ (pageNow - 1) * pageSize
query.setRows(20);//æ¯é¡µè®°å½•æ¡æ•°
//ScoredPage ï¼šsolrçš„åˆ†é¡µæŸ¥è¯¢
//å‚æ•°1ï¼šæŸ¥è¯¢æ¡ä»¶
//å‚æ•°2ï¼šè¿”å›ç±»å‹
ScoredPage&amp;lt;TbItem&amp;gt; page = solrTemplate.queryForPage(query,TbItem.class)
System.out.pringln(&amp;quot;æ€»è®°å½•æ•°:&amp;quot;+page.getTotalElements());
List&amp;lt;TbItem&amp;gt; list = page.getContent();
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;8ã€é«˜äº®æŸ¥è¯¢&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Resource
private SolrTemplate solrTemplate;

@Override
public Map&amp;lt;String, Object&amp;gt; search(Map&amp;lt;String, Object&amp;gt; searchMap) {

    Map&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;String, Object&amp;gt;();

    //è®¾ç½®æœç´¢é«˜äº®
    HighlightQuery query = new SimpleHighlightQuery();

    //è®¾ç½®é«˜äº®çš„åŸŸ
    HighlightOptions highlightOptions = new HighlightOptions().addField(&amp;quot;item_title&amp;quot;);

    //è®¾ç½®é«˜äº®å‰ç¼€
    highlightOptions.setSimplePrefix(&amp;quot;&amp;lt;em style=&#39;color:red&#39;&amp;gt;&amp;quot;);
    //è®¾ç½®é«˜äº®åç¼€
    highlightOptions.setSimplePostfix(&amp;quot;&amp;lt;/em&amp;gt;&amp;quot;);

    //è®¾ç½®é«˜äº®é€‰é¡¹
    query.setHighlightOptions(highlightOptions);

    //æŒ‰ç…§å…³é”®å­—æŸ¥è¯¢
    Criteria criteria = new Criteria(&amp;quot;item_keywords&amp;quot;).is(searchMap.get(&amp;quot;keywords&amp;quot;));

    //æ·»åŠ æ¡ä»¶
    query.addCriteria(criteria);

    //åˆ°solrä¸­æŸ¥è¯¢
    HighlightPage&amp;lt;TbItem&amp;gt; page = solrTemplate.queryForHighlightPage(query,TbItem.class);

    //å¾ªç¯é«˜äº®å…¥å£é›†åˆ
    for (HighlightEntry&amp;lt;TbItem&amp;gt; entry : page.getHighlighted()) {
        //è·å–åŸå®ä½“ç±»
        TbItem tbItem = entry.getEntity();

        //åˆ¤æ–­æ˜¯å¦æœ‰é«˜äº®å†…å®¹
        if(entry.getHighlights().size() &amp;gt; 0 &amp;amp;&amp;amp; entry.getHighlights().get(0).getSnipplets().size() &amp;gt; 0 ){
            //è®¾ç½®é«˜äº®çš„ç»“æœ
            tbItem.setTitle(entry.getHighlights().get(0).getSnipplets().get(0));
        }
    }
    map.put(&amp;quot;rows&amp;quot;,page.getContent());

    return map;
}
&lt;/code&gt;&lt;/pre&gt;
">solrå®‰è£…ä½¿ç”¨</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/spring-security/"" data-c="
          &lt;h2 id=&#34;spring-securityç®€ä»‹&#34;&gt;Spring Securityç®€ä»‹&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Spring Securityæ˜¯ä¸€ä¸ªèƒ½å¤Ÿä¸ºåŸºäºSpringçš„ä¼ä¸šåº”ç”¨ç³»ç»Ÿæä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®æ§åˆ¶è§£å†³æ–¹æ¡ˆçš„å®‰å…¨æ¡†æ¶ã€‚å®ƒæä¾›äº†ä¸€ç»„å¯ä»¥åœ¨Springåº”ç”¨ä¸Šä¸‹æ–‡ä¸­é…ç½®çš„Beanï¼Œå……åˆ†åˆ©ç”¨äº†Spring IoCï¼ŒDIï¼ˆæ§åˆ¶åè½¬Inversion of Control ,DI:Dependency Injection ä¾èµ–æ³¨å…¥ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰åŠŸèƒ½ï¼Œä¸ºåº”ç”¨ç³»ç»Ÿæä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®æ§åˆ¶åŠŸèƒ½ï¼Œå‡å°‘äº†ä¸ºä¼ä¸šç³»ç»Ÿå®‰å…¨æ§åˆ¶ç¼–å†™å¤§é‡é‡å¤ä»£ç çš„å·¥ä½œã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å•æœºç‰ˆ&#34;&gt;å•æœºç‰ˆ&lt;/h2&gt;
&lt;p&gt;1.å¼•å…¥ä¾èµ–&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt; &amp;lt;!-- èº«ä»½éªŒè¯ --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-security-web&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-security-config&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;!-- more --&gt;
&lt;p&gt;2.é…ç½®æ ¸å¿ƒé…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;beans:beans xmlns=&amp;quot;http://www.springframework.org/schema/security&amp;quot;
             xmlns:beans=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;
             xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;
             xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
						http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd&amp;quot;&amp;gt;
    &amp;lt;!-- ä»¥ä¸‹é¡µé¢ä¸è¢«æ‹¦æˆª --&amp;gt;
    &amp;lt;http pattern=&amp;quot;/login.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/css/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/img/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/js/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/plugins/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;

    &amp;lt;!--
            é¡µé¢æ‹¦æˆªè§„åˆ™
                use-expressions:æ˜¯å¦å¯ç”¨spelè¡¨è¾¾å¼, å¦‚æœä¸ºtrueé‚£ä¹ˆaccess=&amp;quot;hasRole(&#39;ROLE_USER&#39;)&amp;quot;
        --&amp;gt;
    &amp;lt;!-- é¡µé¢æ‹¦æˆªè§„åˆ™ --&amp;gt;
    &amp;lt;http use-expressions=&amp;quot;false&amp;quot;&amp;gt;
        &amp;lt;!--
            pattern : æ‹¦æˆªçš„url
            access : æ‹¥æœ‰å¦‚ä¸‹æƒé™å…è®¸è®¿é—®
        --&amp;gt;
        &amp;lt;intercept-url pattern=&amp;quot;/**&amp;quot; access=&amp;quot;ROLE_ADMIN&amp;quot; /&amp;gt;
        &amp;lt;!--
            login-page : è‡ªå®šä¹‰ç™»é™†é¡µé¢
            default-target-url : ç™»é™†æˆåŠŸåè·³è½¬çš„é¡µé¢,ä¸è®¾å®šé»˜è®¤è·³è½¬ä¸Šä¸€æ¬¡è®¿é—®çš„é¡µé¢
            authentication-failure-url : ç™»é™†å¤±è´¥æ—¶è·³è½¬çš„url
            always-use-default-target : ç™»é™†æˆåŠŸå æ€»æ˜¯è·³è½¬åˆ° default-target-url è®¾å®šçš„url
        --&amp;gt;
        &amp;lt;form-login login-page=&amp;quot;/login.html&amp;quot;  default-target-url=&amp;quot;/admin/index.html&amp;quot; authentication-failure-url=&amp;quot;/login.html&amp;quot; always-use-default-target=&amp;quot;true&amp;quot;/&amp;gt;
        &amp;lt;csrf disabled=&amp;quot;true&amp;quot;/&amp;gt;

        &amp;lt;!--
            logout-url : é€€å‡ºçš„åœ°å€
            logout-success-url : é€€å‡ºåè·³è½¬çš„åœ°å€
        --&amp;gt;
        &amp;lt;logout logout-url=&amp;quot;/logout&amp;quot; logout-success-url=&amp;quot;/login.html&amp;quot;/&amp;gt;
        &amp;lt;!--
            å¦‚æœä½¿ç”¨äº†iframe,éœ€è¦æŒ‡å®šæ¡†æ¶é¡µçš„ç­–ç•¥ä¸º SAMEORIGIN
        --&amp;gt;
        &amp;lt;headers&amp;gt;
            &amp;lt;frame-options policy=&amp;quot;SAMEORIGIN&amp;quot;/&amp;gt;  &amp;lt;!--å…è®¸ä½¿ç”¨frameset --&amp;gt;
        &amp;lt;/headers&amp;gt;
    &amp;lt;/http&amp;gt;

    &amp;lt;!--è®¤è¯ç®¡ç†å™¨--&amp;gt;
    &amp;lt;authentication-manager&amp;gt;
        &amp;lt;authentication-provider&amp;gt;
            &amp;lt;user-service&amp;gt;
                &amp;lt;!--ç”¨æˆ·åå’Œå¯†ç ,æƒé™--&amp;gt;
                &amp;lt;user name=&amp;quot;root&amp;quot; password=&amp;quot;root&amp;quot; authorities=&amp;quot;ROLE_ADMIN&amp;quot;/&amp;gt;
            &amp;lt;/user-service&amp;gt;
        &amp;lt;/authentication-provider&amp;gt;
    &amp;lt;/authentication-manager&amp;gt;

&amp;lt;/beans:beans&amp;gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3.é…ç½®web.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;context-param&amp;gt;
    &amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;
    &amp;lt;param-value&amp;gt;classpath:spring/spring-security.xml&amp;lt;/param-value&amp;gt;
&amp;lt;/context-param&amp;gt;
&amp;lt;listener&amp;gt;
    &amp;lt;listener-class&amp;gt;
        org.springframework.web.context.ContextLoaderListener
    &amp;lt;/listener-class&amp;gt;
&amp;lt;/listener&amp;gt;
&amp;lt;filter&amp;gt;
    &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;
    &amp;lt;filter-class&amp;gt;org.springframework.web.filter.DelegatingFilterProxy&amp;lt;/filter-class&amp;gt;
&amp;lt;/filter&amp;gt;
&amp;lt;filter-mapping&amp;gt;
    &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;
    &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
&amp;lt;/filter-mapping&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;è¿æ¥æ•°æ®åº“&#34;&gt;è¿æ¥æ•°æ®åº“&lt;/h2&gt;
&lt;p&gt;1.å¼•å…¥ä¾èµ–&lt;/p&gt;
&lt;p&gt;2.å®ç°UserDetailsServiceæ¥å£&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package com.jd.shop.service.impl;

import com.jd.pojo.TbSeller;
import com.jd.sellergoods.service.TbSellerService;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;

import java.util.ArrayList;
import java.util.List;

/**
 * è®¤è¯ç±»
 * @program: jd
 * @author: æ½˜
 * @create: 2020-04-29 22:43
 **/
public class UserDetailsServiceImpl implements UserDetailsService{

    private TbSellerService tbSellerService;

    public void setTbSellerService(TbSellerService tbSellerService) {
        this.tbSellerService = tbSellerService;
    }

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {

        if(username == null){
            return null;
        }

        TbSeller byId = tbSellerService.findById(username);

        if(byId == null){
            return null;
        }

        //æ„å»ºè§’è‰²åˆ—è¡¨
        List&amp;lt;GrantedAuthority&amp;gt; list = new ArrayList&amp;lt;&amp;gt;();

        //ç”¨æˆ·çš„æƒé™é›†åˆ
        list.add(new SimpleGrantedAuthority(&amp;quot;ROLE_USER&amp;quot;));

        return new User(username,byId.getPassword(),list);
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3.é…ç½®æ ¸å¿ƒé…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;beans:beans xmlns=&amp;quot;http://www.springframework.org/schema/security&amp;quot;
             xmlns:beans=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;
             xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;
             xmlns:dubbo=&amp;quot;http://code.alibabatech.com/schema/dubbo&amp;quot;
             xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
						http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&amp;quot;&amp;gt;
    &amp;lt;!-- ä»¥ä¸‹é¡µé¢ä¸è¢«æ‹¦æˆª --&amp;gt;
    &amp;lt;http pattern=&amp;quot;/login.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/css/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/img/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/js/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/plugins/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/*.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
&amp;lt;!--    &amp;lt;http pattern=&amp;quot;/login&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;--&amp;gt;

    &amp;lt;!--
            é¡µé¢æ‹¦æˆªè§„åˆ™
                use-expressions:æ˜¯å¦å¯ç”¨spelè¡¨è¾¾å¼, å¦‚æœä¸ºtrueé‚£ä¹ˆaccess=&amp;quot;hasRole(&#39;ROLE_USER&#39;)&amp;quot;
        --&amp;gt;
    &amp;lt;!-- é¡µé¢æ‹¦æˆªè§„åˆ™ --&amp;gt;
    &amp;lt;http use-expressions=&amp;quot;false&amp;quot;&amp;gt;
        &amp;lt;!--
            pattern : æ‹¦æˆªçš„url
            access : æ‹¥æœ‰å¦‚ä¸‹æƒé™å…è®¸è®¿é—®
        --&amp;gt;
        &amp;lt;intercept-url pattern=&amp;quot;/**&amp;quot; access=&amp;quot;ROLE_USER&amp;quot; /&amp;gt;
        &amp;lt;!--
            login-page : è‡ªå®šä¹‰ç™»é™†é¡µé¢
            default-target-url : ç™»é™†æˆåŠŸåè·³è½¬çš„é¡µé¢,ä¸è®¾å®šé»˜è®¤è·³è½¬ä¸Šä¸€æ¬¡è®¿é—®çš„é¡µé¢
            authentication-failure-url : ç™»é™†å¤±è´¥æ—¶è·³è½¬çš„url
            always-use-default-target : ç™»é™†æˆåŠŸå æ€»æ˜¯è·³è½¬åˆ° default-target-url è®¾å®šçš„url
        --&amp;gt;
        &amp;lt;form-login login-processing-url=&amp;quot;/login&amp;quot; login-page=&amp;quot;/shoplogin.html&amp;quot;  default-target-url=&amp;quot;/admin/index.html&amp;quot; authentication-failure-url=&amp;quot;/shoplogin.html&amp;quot; always-use-default-target=&amp;quot;true&amp;quot;/&amp;gt;
        &amp;lt;csrf disabled=&amp;quot;true&amp;quot;/&amp;gt;

        &amp;lt;!--
            logout-url : é€€å‡ºçš„åœ°å€
            logout-success-url : é€€å‡ºåè·³è½¬çš„åœ°å€
        --&amp;gt;
        &amp;lt;logout logout-url=&amp;quot;/logout&amp;quot; logout-success-url=&amp;quot;/shoplogin.html&amp;quot;/&amp;gt;
        &amp;lt;!--
            å¦‚æœä½¿ç”¨äº†iframe,éœ€è¦æŒ‡å®šæ¡†æ¶é¡µçš„ç­–ç•¥ä¸º SAMEORIGIN
        --&amp;gt;
        &amp;lt;headers&amp;gt;
            &amp;lt;frame-options policy=&amp;quot;SAMEORIGIN&amp;quot;/&amp;gt;  &amp;lt;!--å…è®¸ä½¿ç”¨frameset --&amp;gt;
        &amp;lt;/headers&amp;gt;
    &amp;lt;/http&amp;gt;

    &amp;lt;!--è®¤è¯ç®¡ç†å™¨--&amp;gt;
    &amp;lt;authentication-manager&amp;gt;
        &amp;lt;authentication-provider user-service-ref=&amp;quot;userDetailsServiceImpl&amp;quot;/&amp;gt;
    &amp;lt;/authentication-manager&amp;gt;

    &amp;lt;!-- å¼•ç”¨dubbo æœåŠ¡ --&amp;gt;
    &amp;lt;dubbo:application name=&amp;quot;jd-shop-web&amp;quot; /&amp;gt;
    &amp;lt;dubbo:registry address=&amp;quot;zookeeper://47.98.157.69:2181&amp;quot; timeout=&amp;quot;30000&amp;quot;/&amp;gt;
    &amp;lt;dubbo:annotation package=&amp;quot;com.jd.shop.controller&amp;quot; /&amp;gt;
    
    &amp;lt;dubbo:reference interface=&amp;quot;com.jd.sellergoods.service.TbSellerService&amp;quot; id=&amp;quot;tbSellerService&amp;quot;/&amp;gt;

    &amp;lt;beans:bean id=&amp;quot;userDetailsServiceImpl&amp;quot; class=&amp;quot;com.jd.shop.service.impl.UserDetailsServiceImpl&amp;quot;&amp;gt;
        &amp;lt;beans:property name=&amp;quot;tbSellerService&amp;quot; ref=&amp;quot;tbSellerService&amp;quot;/&amp;gt;
    &amp;lt;/beans:bean&amp;gt;

&amp;lt;/beans:beans&amp;gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4.é…ç½®web.xmlæ–‡ä»¶&lt;/p&gt;
&lt;h2 id=&#34;brcyåŠ å¯†&#34;&gt;BrcyåŠ å¯†&lt;/h2&gt;
&lt;p&gt;1.ç¼–å†™java&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
String encode = passwordEncoder.encode(tbSeller.getPassword());
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2.ç¼–å†™é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--è®¤è¯ç®¡ç†å™¨--&amp;gt;
&amp;lt;authentication-manager&amp;gt;
    &amp;lt;authentication-provider user-service-ref=&amp;quot;userDetailsServiceImpl&amp;quot;&amp;gt;
        &amp;lt;!-- è¿™å¥è¯è¡¨ç¤ºåœ¨ç™»é™†æ—¶ä½¿ç”¨bcryåŠ å¯†éªŒè¯ --&amp;gt;
        &amp;lt;password-encoder ref=&amp;quot;bCryptPasswordEncoder&amp;quot;/&amp;gt;
    &amp;lt;/authentication-provider&amp;gt;
&amp;lt;/authentication-manager&amp;gt;
&amp;lt;!--é…ç½®åŠ å¯†,åœ¨è®¤è¯ç®¡ç†å™¨ä¸­å¼•ç”¨--&amp;gt;
&amp;lt;beans:bean id=&amp;quot;bCryptPasswordEncoder&amp;quot; class=&amp;quot;org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;è®°ä½æˆ‘&#34;&gt;è®°ä½æˆ‘&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;input value=&amp;quot;1&amp;quot; name=&amp;quot;remember-me&amp;quot;/&amp;gt;

&lt;/code&gt;&lt;/pre&gt;
">Spring-Security</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/mybatis/"" data-c="
          &lt;h1 id=&#34;å¿«é€Ÿå¼€å§‹&#34;&gt;å¿«é€Ÿå¼€å§‹&lt;/h1&gt;
&lt;h2 id=&#34;1-mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶&#34;&gt;1ã€MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE configuration
  PUBLIC &amp;quot;-//mybatis.org//DTD Config 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-config.dtd&amp;quot;&amp;gt;
&amp;lt;configuration&amp;gt;
  &amp;lt;!-- é…ç½®æ•°æ®æº --&amp;gt;
  &amp;lt;environments default=&amp;quot;development&amp;quot;&amp;gt;
    &amp;lt;environment id=&amp;quot;development&amp;quot;&amp;gt;
     &amp;lt;!--äº‹åŠ¡å¤„ç†æ–¹å¼--&amp;gt;
      &amp;lt;transactionManager type=&amp;quot;JDBC&amp;quot;/&amp;gt;
      &amp;lt;dataSource type=&amp;quot;POOLED&amp;quot;&amp;gt;
        &amp;lt;property name=&amp;quot;driver&amp;quot; value=&amp;quot;com.mysql.jdbc.Driver&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;url&amp;quot; value=&amp;quot;jdbc:mysql://localhost:3306/mybatis&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;username&amp;quot; value=&amp;quot;root&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;password&amp;quot; value=&amp;quot;root&amp;quot;/&amp;gt;
      &amp;lt;/dataSource&amp;gt;
    &amp;lt;/environment&amp;gt;
  &amp;lt;/environments&amp;gt;
&amp;lt;!--æ˜ å°„å™¨ï¼šæ¯ä¸€ä¸ªMapperæ¥å£éƒ½åº”è¯¥åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶&amp;lt;mappers&amp;gt;æ ‡ç­¾ä¸­æ³¨å†Œ--&amp;gt;
  &amp;lt;mappers&amp;gt;
  	&amp;lt;!--ä½¿ç”¨XMLé…ç½®æ–‡ä»¶æ³¨å†Œ--&amp;gt;
    &amp;lt;mapper resource=&amp;quot;com/cn/mybatis/dao/IcpInfoMapper.xml&amp;quot;/&amp;gt;
    &amp;lt;!--ä½¿ç”¨ç±»æ³¨å†Œæ–¹å¼--&amp;gt;
    &amp;lt;mapper class=&amp;quot;com.cn.mybatis.dao.IcpInfoMapper&amp;quot; /&amp;gt;
  &amp;lt;/mappers&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;2-ormæ˜ å°„æ–‡ä»¶mapperxml&#34;&gt;2ã€ORMæ˜ å°„æ–‡ä»¶mapper.xml&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE mapper
  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;
&amp;lt;!-- è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸»è¦æ˜¯é…ç½®å®ä½“ç±»å’Œæ•°æ®åº“ä¸­çš„è¡¨æ˜ å°„å…³ç³» --&amp;gt;
&amp;lt;!-- mapperï¼šæ˜ å°„ä¿¡æ¯é…ç½® namesapce:å¦‚æœæ˜¯åœ¨ibatisçš„å¼€å‘ä¸­ï¼Œåå­—å¯ä»¥éšä¾¿å–ï¼Œä½†æ˜¯åœ¨mybatisä¸­å°†æœ‰ç‰¹æ®Šçš„æ„ä¹‰ --&amp;gt;
&amp;lt;mapper namespace=&amp;quot;test&amp;quot;&amp;gt;
	&amp;lt;!-- æŸ¥è¯¢æ‰€æœ‰çš„ä¹¦ç±ä¿¡æ¯ select:ä¸“é—¨ç”¨äºæŸ¥è¯¢çš„statement
	     id:æ˜¯statementçš„å”¯ä¸€æ ‡è¯†ç¬¦
	     resultType:è¿”å›å€¼å¾—ç±»å‹ï¼ˆè·Ÿè¿”å›çš„ä¸ªæ•°æ— å…³ï¼‰ï¼Œå°†è¿”å›ç±»å‹çš„å…¨é™å®šåå†™åˆ°è¿™é‡Œ
	 --&amp;gt;
	&amp;lt;select id=&amp;quot;selectAllBooks&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Book&amp;quot;&amp;gt;
		select * from book
	&amp;lt;/select&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;3-æ—¥å¿—æ–‡ä»¶&#34;&gt;3ã€æ—¥å¿—æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;log4j.properties&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;log4j.rootLogger=DEBUG,A1
log4j.logger.org.mybatis=DEBUG
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss,SSS} [%t] [%c]-[%p] %m%n
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4-æµ‹è¯•&#34;&gt;4ã€æµ‹è¯•&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//æŸ¥è¯¢å…¨éƒ¨
@Test
public void testFindAll() throws Exception{
    //é€šè¿‡æµçš„æ–¹å¼è¯»å–é…ç½®æ–‡ä»¶
    InputStream inputStream = Resources.getResourceAsStream(&amp;quot;mybatis-config.xml&amp;quot;);
    //1.è¯»å–é…ç½®æ–‡ä»¶,å¾—åˆ°SqlSessionFactory
    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream );
    //2.åˆ›å»ºSqlSession
    SqlSession sqlSession = sqlSessionFactory.openSession();
    //3.æŸ¥è¯¢æ‰€æœ‰(å‚æ•°ï¼šæ˜¯namespace.statementId)
    List&amp;lt;Book&amp;gt; list = sqlSession.selectList(&amp;quot;test.selectAllBooks&amp;quot;);
    System.out.println(list);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;propertieså±æ€§&#34;&gt;propertieså±æ€§&lt;/h1&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªå¤–éƒ¨çš„propertiesæ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;jdbc.dirver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;amp;characterEncoding=utf-8
jdbc.username=root
jdbc.password=root
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•ç”¨propertiesæ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;properties resource=&amp;quot;jdbc.properties&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;${jdbc.dirver}
${jdbc.url}
${jdbc.username}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;settings&#34;&gt;settings&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;mapUnderscoreToCamelCase&lt;/code&gt;:å¼€å¯é©¼å³°å‘½åï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆæ•°æ®åº“çš„ç»å…¸å‘½åè§„åˆ™ï¼Œåˆ°javaçš„ç»å…¸å‘½åè§„åˆ™ï¼ˆé©¼å³°å‘½åå‘ï¼‰&lt;/p&gt;
&lt;p&gt;å¦‚ï¼šæ•°æ®åº“å«user_name  åˆ°javaç±»ï¼ˆ&lt;code&gt;pojo&lt;/code&gt;ï¼‰ä¸­æ˜¯&lt;code&gt;userName&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;settings&amp;gt;
    &amp;lt;!-- å¼€å¯é©¼å³°å‘½å --&amp;gt;
    &amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
    &amp;lt;!--æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚
	æ—¥å¿—ç±»å‹ï¼š
	STDOUT_LOGGING ä¸éœ€è¦å¯¼å…¥jaråŒ…ï¼Œå› ä¸ºæ˜¯mybatisè‡ªå¸¦
	NO_LOGGING ä»£è¡¨ä¸éœ€è¦æ—¥å¿—è¾“å‡º
	SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING
 	--&amp;gt;
    &amp;lt;setting name=&amp;quot;logImpl&amp;quot; value=&amp;quot;STDOUT_LOGGING&amp;quot;/&amp;gt;
&amp;lt;/settings&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åˆ†ææ—¥å¿—è¾“å‡º&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;MyBatis.assets%5Cimage-20200307124719177.png&#34; alt=&#34;image-20200307124719177&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h1 id=&#34;typealiasesç±»å‹åˆ«å&#34;&gt;typeAliasesï¼ˆç±»å‹åˆ«åï¼‰&lt;/h1&gt;
&lt;h2 id=&#34;è‡ªå®šä¹‰åˆ«å&#34;&gt;è‡ªå®šä¹‰åˆ«å&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--åˆ«åï¼Œç”¨äºç®€åŒ–--&amp;gt;
&amp;lt;typeAliases&amp;gt;
    &amp;lt;!--typeï¼šåŒ…+ç±»åï¼Œaliasï¼šåˆ«å--&amp;gt;
    &amp;lt;typeAlias type=&amp;quot;com.cn.mybatis.entity.IcpInfo&amp;quot; alias=&amp;quot;Icp&amp;quot; /&amp;gt;
    &amp;lt;!--ä½¿ç”¨åŒ…çš„æ–¹å¼
		æ¯ä¸€ä¸ªåœ¨åŒ… domain.blog ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹
		ä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«å
		(è¿™å¥è¯æ„æ€æ˜¯ï¼š@Alias(&amp;quot;author&amp;quot;)
		åœ¨ä½¿ç”¨åŒ…æ–¹å¼æ—¶ï¼ŒjavaBeanæ²¡æœ‰æ·»åŠ æ³¨è§£æŒ‡å®šåˆ«åæ—¶è‡ªåŠ¨ä½¿ç”¨ç±»å{é¦–å­—æ¯å°å†™})
	--&amp;gt;
    &amp;lt;package name=&amp;quot;com.cn.mybatis.entity&amp;quot;/&amp;gt;
&amp;lt;/typeAliases&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;pluginsæ’ä»¶&#34;&gt;pluginsï¼ˆæ’ä»¶ï¼‰&lt;/h1&gt;
&lt;h1 id=&#34;xmlæ˜ å°„&#34;&gt;XMLæ˜ å°„&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cache&lt;/code&gt; â€“ å¯¹ç»™å®šå‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cache-ref&lt;/code&gt; â€“ å¯¹å…¶ä»–å‘½åç©ºé—´ç¼“å­˜é…ç½®çš„å¼•ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;resultMap&lt;/code&gt; â€“ æ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€å¼ºå¤§çš„å…ƒç´ ï¼Œç”¨æ¥æè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­æ¥åŠ è½½å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;parameterMap&lt;/code&gt; â€“ å·²è¢«åºŸå¼ƒï¼è€å¼é£æ ¼çš„å‚æ•°æ˜ å°„ã€‚æ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨å†…è”å‚æ•°ï¼Œæ­¤å…ƒç´ å¯èƒ½åœ¨å°†æ¥è¢«ç§»é™¤ã€‚æ–‡æ¡£ä¸­ä¸ä¼šä»‹ç»æ­¤å…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sql&lt;/code&gt; â€“ å¯è¢«å…¶ä»–è¯­å¥å¼•ç”¨çš„å¯é‡ç”¨è¯­å¥å—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;insert&lt;/code&gt; â€“ æ˜ å°„æ’å…¥è¯­å¥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;update&lt;/code&gt; â€“ æ˜ å°„æ›´æ–°è¯­å¥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;delete&lt;/code&gt; â€“ æ˜ å°„åˆ é™¤è¯­å¥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;select&lt;/code&gt; â€“ æ˜ å°„æŸ¥è¯¢è¯­å¥&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;select-æŸ¥è¯¢è¯­å¥&#34;&gt;select æŸ¥è¯¢è¯­å¥&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--
	idï¼šä¸€èˆ¬å’ŒMepperæ¥å£çš„æ–¹æ³•åç§°ç›¸åŒï¼Œåœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚
	parameterTypeï¼šæ¥æ”¶ä¸€ä¸ªintç±»å‹çš„å‚æ•°
		æ¥æ”¶å‚æ•°ä½¿ç”¨#{ }åŒ…è£¹ç€ï¼Œè¿™ä¸ªå‚æ•°å¯¹åº”ç€æ¥å£çš„å‚æ•°
	resultTypeï¼šè¿”å›ä¸€ä¸ªhashmap ç±»å‹çš„æ•°æ®

--&amp;gt;
&amp;lt;select id=&amp;quot;selectPerson&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;hashmap&amp;quot;&amp;gt;
  SELECT * FROM PERSON WHERE ID = #{id}
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;insert-updatea-delete&#34;&gt;insert updatea delete&lt;/h2&gt;
&lt;p&gt;åœ¨ä½¿ç”¨è¿™äº›è¯­å¥çš„æ—¶å€™éœ€è¦æäº¤äº‹åŠ¡ï¼šsession.commit();&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfo&amp;quot; parameterType=&amp;quot;icpInfo&amp;quot; &amp;gt;
    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values (#{icp}, #{name}, #{address}, #{home}, #{introduce}, #{author}, #{email}, #{date}, #{type})
&amp;lt;/insert&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è·å–æ’å…¥æ•°æ®åçš„ä¸»é”®idï¼šuseGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfo&amp;quot; useGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&amp;gt;
    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values (#{icp}, #{name}, #{address}, #{home}, #{introduce}, #{author}, #{email}, #{date}, #{type})
&amp;lt;/insert&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ’å…¥å¤šæ¡æ•°æ®ï¼šä¼ å…¥ä¸€ä¸ª æ•°ç»„æˆ–é›†åˆï¼Œå¹¶è¿”å›è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfoList&amp;quot; useGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&amp;gt;
    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values
    &amp;lt;foreach collection=&amp;quot;list&amp;quot; item=&amp;quot;item&amp;quot; separator=&amp;quot;,&amp;quot;&amp;gt;
        (#{item.icp}, #{item.name}, #{item.address}, #{item.home}, #{item.introduce}, #{item.author}, #{item.email}, #{item.date}, #{item.type})
    &amp;lt;/foreach&amp;gt;
&amp;lt;/insert&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;åŠ¨æ€sql&#34;&gt;åŠ¨æ€SQL&lt;/h1&gt;
&lt;h2 id=&#34;if&#34;&gt;if&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;å¯¹äºè¾“å…¥æ˜ å°„ç±»å‹ä¸ºpojoç±»å‹ï¼š
#{pojoä¸­çš„å±æ€§å}   ${pojoä¸­çš„å±æ€§å}
&amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;
    and grade_id = #{gradeId}
&amp;lt;/if&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;sqlæ³¨å…¥çš„é—®é¢˜&#34;&gt;sqlæ³¨å…¥çš„é—®é¢˜&lt;/h2&gt;
&lt;p&gt;åœ¨ä½¿ç”¨${}ä¼šå‡ºç°&lt;code&gt;sql&lt;/code&gt;æ³¨å…¥çš„é—®é¢˜ï¼ˆæ‹¼æ¥å­—ç¬¦ä¸²ï¼Œæ²¡æœ‰ä½¿ç”¨é¢„ç¼–è¯‘ï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;å¦‚æœä¸ºç®€å•æ•°æ®ç±»å‹éœ€è¦æŠŠnameæ¢æˆ_parameter
&amp;lt;bind name=&amp;quot;n&amp;quot; value=&amp;quot;&#39;%&#39;+name+&#39;%&#39;&amp;quot;/&amp;gt;
and name like #{n}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;when&#34;&gt;when&lt;/h2&gt;
&lt;p&gt;åº”ç”¨åœºæ™¯ï¼šå¯èƒ½æŸ¥è¯¢å…¨éƒ¨ï¼Œæœ‰å¯èƒ½æ ¹æ®æ¡ä»¶æŸ¥è¯¢ï¼Œå¹¶ä¸”å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶å‰é¢æœ‰andï¼Œwhereå­å¥ä¼šè‡ªåŠ¨æŠŠè¿™ä¸ªandåˆ é™¤å†ä½œä¸ºsqlè¯­å¥è¿è¡Œ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;select id=&amp;quot;findStudentByLike&amp;quot; resultType=&amp;quot;student&amp;quot; parameterType=&amp;quot;student&amp;quot;&amp;gt;
    select * from student
    &amp;lt;where&amp;gt;
        &amp;lt;if test=&amp;quot;name != null and name != &#39;&#39;&amp;quot;&amp;gt;
            &amp;lt;bind name=&amp;quot;n&amp;quot; value=&amp;quot;&#39;%&#39;+name+&#39;%&#39;&amp;quot;/&amp;gt;
            and name like #{n}
        &amp;lt;/if&amp;gt;
        &amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;
            and grade_id = #{gradeId}
        &amp;lt;/if&amp;gt;
    &amp;lt;/where&amp;gt;
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;choose&#34;&gt;choose&lt;/h2&gt;
&lt;p&gt;å…¶å®å°±æ˜¯javaä¸­çš„switch  æˆ–è€… if...else if ...else&lt;/p&gt;
&lt;h2 id=&#34;set&#34;&gt;set&lt;/h2&gt;
&lt;p&gt;setæ ‡ç­¾ä½œç”¨ï¼šèƒ½è‡ªåŠ¨çš„åˆ¤æ–­æ˜¯å¦åœ¨sqlè¯­å¥çš„ç»“å°¾å¤„æ˜¯å¦è¦æ·»åŠ é€—å·ï¼Œå¦‚æœä¸éœ€è¦é€—å·å®ƒè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ é™¤&lt;/p&gt;
&lt;p&gt;(å’Œwhereä¸€æ ·ä¸ä¼šè‡ªåŠ¨æ·»åŠ )&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;update id=&amp;quot;updateStudentByById&amp;quot; parameterType=&amp;quot;student&amp;quot;&amp;gt;
    update student
    &amp;lt;set&amp;gt;
        &amp;lt;if test=&amp;quot;name != null&amp;quot;&amp;gt;
            name = #{name},
        &amp;lt;/if&amp;gt;
        &amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;
            grade_id = #{gradeId}
        &amp;lt;/if&amp;gt;
    &amp;lt;/set&amp;gt;
    where id = #{id}
&amp;lt;/update&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;foreach&#34;&gt;foreach&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;select id=&amp;quot;findStudentsById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;student&amp;quot;&amp;gt;
        select * from student where id in
        &amp;lt;foreach collection=&amp;quot;list&amp;quot; open=&amp;quot;(&amp;quot; separator=&amp;quot;,&amp;quot; close=&amp;quot;)&amp;quot; item=&amp;quot;item&amp;quot;&amp;gt;
            #{item}
        &amp;lt;/foreach&amp;gt;
    &amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;sqlç‰‡æ®µ&#34;&gt;SQLç‰‡æ®µ&lt;/h1&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;sql id=&amp;quot;sql&amp;quot;&amp;gt;
    select * from student
&amp;lt;/sql&amp;gt;
è°ƒç”¨
&amp;lt;include refid=&amp;quot;sql&amp;quot;&amp;gt;&amp;lt;/include&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;å¤šè¡¨è”åˆæŸ¥è¯¢&#34;&gt;å¤šè¡¨è”åˆæŸ¥è¯¢&lt;/h1&gt;
&lt;h2 id=&#34;vo&#34;&gt;VO&lt;/h2&gt;
&lt;p&gt;è§£å†³æ€è·¯ï¼šè¦æ±‚è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœ&lt;code&gt;pojo&lt;/code&gt;ä¸èƒ½æ»¡è¶³(è¦è¿”å›çš„åˆ—ä¸å­˜åœ¨&lt;code&gt;pojo&lt;/code&gt;ä¸­)ï¼Œé‚£ä¹ˆåˆ›å»ºä¸€ä¸ªVOå¯¹è±¡ï¼Œè¿™ä¸ªVOå¯¹è±¡ä¸­åŒ…å«äº†æ‰€æœ‰è¦è¿”å›çš„å­—æ®µ&lt;/p&gt;
&lt;h3 id=&#34;åˆ›å»ºä¸€ä¸ªvo&#34;&gt;åˆ›å»ºä¸€ä¸ªVO&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package cn.kgc.vo;

import cn.kgc.pojo.Student;
//ç»§æ‰¿çš„åŸåˆ™ï¼šè¦è¿”å›çš„å­—æ®µå“ªä¸ªpojoä¸­å¤šï¼Œé‚£ä¹ˆå°±ç»§æ‰¿å“ªä¸ªpojo
public class StudentVO extends Student{
	private String gradeName;

	public String getGradeName() {
		return gradeName;
	}

	public void setGradeName(String gradeName) {
		this.gradeName = gradeName;
	}	
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;ç¼–å†™mapperæ¥å£&#34;&gt;ç¼–å†™mapperæ¥å£&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public interface StudentMapper {
	/**
	 * æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ï¼Œè¦æ±‚å±•ç¤ºå­¦ç”Ÿä¿¡æ¯ä¸­å¹´çº§åç§°(è”åˆæŸ¥è¯¢)
	 */
	List&amp;lt;StudentVO&amp;gt; getStudentVO();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;ç¼–å†™mapperxml&#34;&gt;ç¼–å†™mapper.xml&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;select id=&amp;quot;getStudentVO&amp;quot; resultType=&amp;quot;cn.kgc.vo.StudentVO&amp;quot;&amp;gt;
	SELECT s.*,g.name gradeName FROM student s,grade g WHERE s.grade_id=g.id
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;ä¸€å¯¹ä¸€&#34;&gt;ä¸€å¯¹ä¸€&lt;/h2&gt;
&lt;h3 id=&#34;æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†&#34;&gt;æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;resultMap id=&amp;quot;IcpInfoType&amp;quot; type=&amp;quot;icpInfo&amp;quot;&amp;gt;
&amp;lt;!-- propertyï¼šå®ä½“ç±»çš„å¯¹è±¡å±æ€§åï¼Œ
	columnï¼šæ•°æ®åº“ä¸­å…³è”çš„åˆ—ï¼Œ
	javaTypeï¼šå®ä½“ç±»å¯¹è±¡ï¼Œ
	selectï¼šä¸€ä¸ªsqlè¯­å¥æŸ¥è¯¢çš„æ˜¯å®ä½“å¯¹è±¡çš„sql
--&amp;gt;
    &amp;lt;association property=&amp;quot;type&amp;quot; column=&amp;quot;type&amp;quot; javaType=&amp;quot;type&amp;quot; select=&amp;quot;getTypeList&amp;quot; /&amp;gt;
&amp;lt;/resultMap&amp;gt;
&amp;lt;select id=&amp;quot;getList&amp;quot; resultMap=&amp;quot;IcpInfoType&amp;quot;&amp;gt;
    select * from icpinfo
&amp;lt;/select&amp;gt;
&amp;lt;!--è¿™ä¸ªtypeID è·å–çš„æ˜¯ column=&amp;quot;type&amp;quot; è¿™ä¸ªåˆ—çš„å€¼--&amp;gt;
&amp;lt;select id=&amp;quot;getTypeList&amp;quot; resultType=&amp;quot;type&amp;quot; &amp;gt;
    select * from type where tid = #{id}
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†&#34;&gt;æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;select id=&amp;quot;getList2&amp;quot; resultMap=&amp;quot;getList2&amp;quot; &amp;gt;
    select icp, name, address, home, introduce, author, email, `date`, type, tid, tname from icpinfo i ,type t
    where i.type = t.tid
&amp;lt;/select&amp;gt;
&amp;lt;!--type = è¦æŸ¥è¯¢çš„å¯¹è±¡--&amp;gt;
&amp;lt;resultMap id=&amp;quot;getList2&amp;quot; type=&amp;quot;icpInfo&amp;quot; &amp;gt;
    &amp;lt;!--property=å®ä½“ç±»çš„å±æ€§å column=åˆ—åoråˆ«å--&amp;gt;
    &amp;lt;result property=&amp;quot;icp&amp;quot; column=&amp;quot;icp&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;name&amp;quot; column=&amp;quot;name&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;address&amp;quot; column=&amp;quot;address&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;home&amp;quot; column=&amp;quot;home&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;introduce&amp;quot; column=&amp;quot;introduce&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;author&amp;quot; column=&amp;quot;author&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;email&amp;quot; column=&amp;quot;email&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;date&amp;quot; column=&amp;quot;date&amp;quot; /&amp;gt;
    &amp;lt;!--å¤æ‚ç±»å‹
		property=åœ¨icpInfoé‡Œçš„å±æ€§æ˜¯type
		javaType=typeçš„å¯¹è±¡
	--&amp;gt;
    &amp;lt;association property=&amp;quot;type&amp;quot; javaType=&amp;quot;type&amp;quot; &amp;gt;
        &amp;lt;result property=&amp;quot;tid&amp;quot; column=&amp;quot;tid&amp;quot; /&amp;gt;
        &amp;lt;result property=&amp;quot;tname&amp;quot; column=&amp;quot;tname&amp;quot; /&amp;gt;
    &amp;lt;/association&amp;gt;
&amp;lt;/resultMap&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;ä¸€å¯¹å¤š&#34;&gt;ä¸€å¯¹å¤š&lt;/h2&gt;
&lt;p&gt;ä¸€å¯¹å¤šåªéœ€è¦æŠŠassociationæ¢æˆ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--ofType=&amp;quot;&amp;quot;
	é›†åˆä¸­çš„æ³›å‹ä¿¡æ¯
--&amp;gt;
&amp;lt;collection property=&amp;quot;&amp;quot; ofType=&amp;quot;&amp;quot;&amp;gt;&amp;lt;/collection&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE mapper
  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;
&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.GradeMapper&amp;quot;&amp;gt;
	&amp;lt;!-- æŸ¥è¯¢å¹´çº§ï¼ŒæŠŠå±äºè¿™ä¸ªå¹´çº§çš„æ‰€æœ‰å­¦ç”ŸæŸ¥è¯¢å‡ºæ¥ --&amp;gt;
	&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Grade&amp;quot; id=&amp;quot;gradeStudentMap&amp;quot;&amp;gt;
		&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
		&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
		&amp;lt;!-- collection:ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³»
			property:è¡¨ç¤ºä¸€å¯¹å¤šæ˜ å°„å…³ç³»åœ¨pojoä¸­çš„å±æ€§å
			ofType:è¡¨ç¤ºè¯¥é›†åˆçš„æ³›å‹çš„å…¨é™å®šå
		 --&amp;gt;
		&amp;lt;collection property=&amp;quot;studentList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.Student&amp;quot;&amp;gt;
			&amp;lt;id column=&amp;quot;sid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
			&amp;lt;result column=&amp;quot;sname&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
			&amp;lt;!-- gradeidå› ä¸ºåœ¨gradeä¸­å·²ç»æœ‰äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦å†é…ç½® --&amp;gt;
		&amp;lt;/collection&amp;gt;
	&amp;lt;/resultMap&amp;gt;
	
	&amp;lt;select id=&amp;quot;getGradeById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultMap=&amp;quot;gradeStudentMap&amp;quot;&amp;gt;
		SELECT 
		  g.*,
		  s.id sid,
		  s.name sname
		FROM
		  grade g,
		  student s 
		WHERE g.id = s.grade_id 
		  AND g.id = #{id}
	&amp;lt;/select&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å¤šå¯¹å¤š&#34;&gt;å¤šå¯¹å¤š&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE mapper
  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;
&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;
	&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Student&amp;quot; id=&amp;quot;studentMap&amp;quot;&amp;gt;
		&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
		&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
		&amp;lt;result column=&amp;quot;grade_id&amp;quot; property=&amp;quot;gradeId&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
		&amp;lt;!-- ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³» --&amp;gt;
		&amp;lt;collection property=&amp;quot;studentCourseList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.StudentCourse&amp;quot;&amp;gt;
			&amp;lt;id column=&amp;quot;scid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
			&amp;lt;!-- studentCourseå’Œcourseæ˜¯ä¸€å¯¹ä¸€çš„æ˜ å°„ä¿„å…³ç³» --&amp;gt;
			&amp;lt;association property=&amp;quot;course&amp;quot; javaType=&amp;quot;cn.kgc.pojo.Course&amp;quot;&amp;gt;
				&amp;lt;id column=&amp;quot;cid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
				&amp;lt;result column=&amp;quot;cname&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
			&amp;lt;/association&amp;gt;
		&amp;lt;/collection&amp;gt;
	&amp;lt;/resultMap&amp;gt;

	&amp;lt;select id=&amp;quot;getStudentById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultMap=&amp;quot;studentMap&amp;quot;&amp;gt;
	SELECT 
	  s.*,
	  sc.id scid,
	  c.id cid,
	  c.name cname 
	FROM
	  student s,
	  student_course sc,
	  course c 
	WHERE s.id = sc.sid 
	  AND c.id = sc.cid 
	  AND s.id = #{id}
	&amp;lt;/select&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;å»¶è¿ŸåŠ è½½&#34;&gt;å»¶è¿ŸåŠ è½½&lt;/h1&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯æ‡’åŠ è½½&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;æ‡’åŠ è½½ï¼šå°±æ˜¯åœ¨éœ€è¦æ•°æ®çš„æ—¶å€™æ‰åŠ è½½ï¼Œä¸éœ€è¦æ•°æ®çš„æ—¶å€™ä¸åŠ è½½ï¼Œè¿™æ ·æœ‰åˆ©äºç³»ç»Ÿæ€§èƒ½çš„æå‡ï¼Œè¿™å°±æ˜¯æ‡’åŠ è½½ï¼ˆä¹Ÿå«åšå»¶è¿ŸåŠ è½½ï¼‰

å¥½å¤„ï¼šåœ¨å…³è”æŸ¥è¯¢çš„æ—¶å€™ï¼Œæ ¹æ®éœ€æ±‚è¿›è¡Œå…³è”æŸ¥è¯¢ï¼Œå¤§å¤§æé«˜äº†æ•°æ®åº“çš„æŸ¥è¯¢æ€§èƒ½ã€‚ï¼ˆå•è¡¨çš„æŸ¥è¯¢æ•ˆç‡æ°¸è¿œè¦æ¯”å¤šè¡¨è”åˆæŸ¥è¯¢çš„æ•ˆç‡é«˜ï¼‰

åå¤„ï¼šå› ä¸ºéœ€è¦ç”¨åˆ°æ•°æ®çš„æ—¶å€™æ‰å»åšæŸ¥è¯¢ï¼Œè¿™æ ·å¤§æ‰¹é‡çš„æ•°æ®æŸ¥è¯¢çš„æ—¶å€™ç­‰å¾…æ—¶é—´ä¼šå˜å¾—æ›´é•¿ï¼Œé€ æˆç”¨æˆ·çš„ä½“éªŒä¸‹é™
(select * from student)ä¼šæŠŠæ‰€æœ‰çš„å­¦ç”Ÿçš„å¹´çº§ç¼–å·ä¹Ÿåœ¨é‡Œé¢
çªç„¶è¦æŸ¥è¯¢å¹´çº§ä¿¡æ¯ï¼Œå®ƒåº•å±‚æ“ä½œæ˜¯ï¼šæ ¹æ®å¹´çº§idä¸€ä¸ªä¸€ä¸ªå»æ‰§è¡ŒæŸ¥è¯¢
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;ä½¿ç”¨associationå®ç°æ‡’åŠ è½½&#34;&gt;ä½¿ç”¨&lt;code&gt;association&lt;/code&gt;å®ç°æ‡’åŠ è½½&lt;/h2&gt;
&lt;h3 id=&#34;æ ¸å¿ƒé…ç½®å¼€å¯æ‡’åŠ è½½&#34;&gt;æ ¸å¿ƒé…ç½®å¼€å¯æ‡’åŠ è½½&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt; &amp;lt;settings&amp;gt;
  	&amp;lt;!-- å¼€å¯æ‡’åŠ è½½ --&amp;gt;
  	&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
  	&amp;lt;!-- mybatis3.4.1ä¹‹å‰é»˜è®¤å€¼æ˜¯trueï¼Œéœ€è¦è®¾ç½®ä¸ºfalseï¼ˆå°†ç§¯æåŠ è½½æ”¹ä¸ºæ¶ˆæ¯åŠ è½½ä¹Ÿå°±æ˜¯æŒ‰éœ€åŠ è½½ï¼‰ --&amp;gt;
  	&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;
  	&amp;lt;!-- å› ä¸ºæˆ‘è¿™é‡Œä¸ºäº†æ‰“å°å¯¹è±¡é‡Œä¿¡æ¯çš„æ–¹ä¾¿ï¼Œæ‰€ä»¥éƒ½é‡å†™äº†toStringæ–¹æ³•ï¼Œmybatisä¸­é»˜è®¤æ˜¯å¦‚æœä½¿ç”¨(equals,clone,hashCode,toStringä»»æ„ä¸€ä¸ªæ–¹æ³•)é‚£ä¹ˆå°±ä¸å†å»¶è¿ŸåŠ è½½ --&amp;gt;
  	&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;
  &amp;lt;/settings&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;GradeMapper.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE mapper
  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;
&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.GradeMapper&amp;quot;&amp;gt;
	&amp;lt;!-- æ ¹æ®idæŸ¥è¯¢å¹´çº§å¯¹è±¡ --&amp;gt;
	&amp;lt;select id=&amp;quot;getGradeById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Grade&amp;quot;&amp;gt;
		select * from grade where id=#{id}
	&amp;lt;/select&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;StudentMapper.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE mapper
  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;
&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;
	
	&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Student&amp;quot; id=&amp;quot;studentMap&amp;quot;&amp;gt;
		&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
		&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
		&amp;lt;!-- ä¸€ä¸ªå­¦ç”Ÿå¯¹åº”ä¸€ä¸ªå¹´çº§ï¼šä¸€å¯¹ä¸€çš„å…³ç³»æ˜ å°„
			å¯¹äºassociationæ–¹å¼çš„æ‡’åŠ è½½ï¼š
				select:æ­¤å¤„è¦æ±‚æ˜¯æ ¹æ®å¹´çº§çš„idæŸ¥è¯¢å¹´çº§å¯¹è±¡çš„mapperæ¥å£ä¸­æ–¹æ³•çš„å…¨é™å®šå
				column:åœ¨æ•°æ®åº“ä¸­è¡¨ä¸è¡¨ä¹‹é—´å…³ç³»çš„å¤–é”®
		 --&amp;gt;
		&amp;lt;association property=&amp;quot;grade&amp;quot; javaType=&amp;quot;cn.kgc.pojo.Grade&amp;quot;
			select=&amp;quot;cn.kgc.mapper.GradeMapper.getGradeById&amp;quot; column=&amp;quot;grade_id&amp;quot;&amp;gt;&amp;lt;/association&amp;gt;
	&amp;lt;/resultMap&amp;gt;
	
	&amp;lt;select id=&amp;quot;getAllStudents&amp;quot; resultMap=&amp;quot;studentMap&amp;quot;&amp;gt;
		select * from student
	&amp;lt;/select&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;ä½¿ç”¨collectionå®ç°æ‡’åŠ è½½&#34;&gt;ä½¿ç”¨&lt;code&gt;collection&lt;/code&gt;å®ç°æ‡’åŠ è½½&lt;/h2&gt;
&lt;h3 id=&#34;æ ¸å¿ƒé…ç½®å¼€å¯æ‡’åŠ è½½-2&#34;&gt;æ ¸å¿ƒé…ç½®å¼€å¯æ‡’åŠ è½½&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;settings&amp;gt;
&amp;lt;!-- å¼€å¯æ‡’åŠ è½½ --&amp;gt;
&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
&amp;lt;!-- mybatis3.4.1ä¹‹å‰é»˜è®¤å€¼æ˜¯trueï¼Œéœ€è¦è®¾ç½®ä¸ºfalseï¼ˆå°†ç§¯æåŠ è½½æ”¹ä¸ºæ¶ˆæ¯åŠ è½½ä¹Ÿå°±æ˜¯æŒ‰éœ€åŠ è½½ï¼‰ --&amp;gt;
&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;
&amp;lt;!-- å› ä¸ºæˆ‘è¿™é‡Œä¸ºäº†æ‰“å°å¯¹è±¡é‡Œä¿¡æ¯çš„æ–¹ä¾¿ï¼Œæ‰€ä»¥éƒ½é‡å†™äº†toStringæ–¹æ³•ï¼Œmybatisä¸­é»˜è®¤æ˜¯å¦‚æœä½¿ç”¨(equals,clone,hashCode,toStringä»»æ„ä¸€ä¸ªæ–¹æ³•)é‚£ä¹ˆå°±ä¸å†å»¶è¿ŸåŠ è½½ --&amp;gt;
&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;
&amp;lt;/settings&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;StudentMapper.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;select id=&amp;quot;getStudentsByGradeId&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Student&amp;quot;&amp;gt;
    select * from student where grade_id=#{gradeId}
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;GradeMapper.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- æŸ¥è¯¢å¹´çº§ä¿¡æ¯ï¼Œæœ‰å¯èƒ½æŸ¥è¯¢å¹´çº§ä¸­æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯ --&amp;gt;
&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Grade&amp;quot; id=&amp;quot;gradeMap&amp;quot;&amp;gt;
    &amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
    &amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
    &amp;lt;!-- ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³»
        select:æ ¹æ®å¹´çº§ç¼–å·æŸ¥è¯¢å­¦ç”Ÿåˆ—è¡¨çš„æ–¹æ³•
        column:å°±æ˜¯gradeçš„idï¼ˆå®ƒå°±æ˜¯gradeè¡¨çš„ä¸»é”®ï¼‰
     --&amp;gt;
    &amp;lt;collection property=&amp;quot;studentList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.Student&amp;quot;
        select=&amp;quot;cn.kgc.mapper.StudentMapper.getStudentsByGradeId&amp;quot; column=&amp;quot;id&amp;quot;&amp;gt;&amp;lt;/collection&amp;gt;
&amp;lt;/resultMap&amp;gt;
&amp;lt;select id=&amp;quot;getAllGrades&amp;quot; resultMap=&amp;quot;gradeMap&amp;quot;&amp;gt;
    select * from grade
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;mybatisç¼“å­˜&#34;&gt;mybatisç¼“å­˜&lt;/h1&gt;
&lt;h2 id=&#34;ä¸€çº§ç¼“å­˜&#34;&gt;ä¸€çº§ç¼“å­˜&lt;/h2&gt;
&lt;p&gt;å®ƒæ˜¯&lt;code&gt;SqlSession&lt;/code&gt;çº§åˆ«çš„ï¼ŒåŒä¸€ä¸ª&lt;code&gt;SqlSession&lt;/code&gt;æ‰æ¶‰åŠåˆ°ä¸€çº§ç¼“å­˜&lt;/p&gt;
&lt;p&gt;ä¸€çº§ç¼“å­˜æ˜¯é»˜è®¤å­˜åœ¨ï¼Œå®ƒä¸éœ€è¦å»åšä»»ä½•çš„è®¾ç½®&lt;/p&gt;
&lt;h2 id=&#34;äºŒçº§ç¼“å­˜&#34;&gt;äºŒçº§ç¼“å­˜&lt;/h2&gt;
&lt;p&gt;å®ƒæ˜¯mapperçº§åˆ«çš„ï¼Œéœ€è¦å¼€å¯æ‰èƒ½ä½¿ç”¨&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç¼“å­˜åœ¨å®é™…å¼€å‘ä¸­æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå®ƒèƒ½å¤§å¤§çš„æå‡æŸ¥è¯¢çš„æ•ˆç‡ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜&#34;&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- å¼€å¯äºŒçº§ç¼“å­˜(é»˜è®¤å€¼å°±æ˜¯trueï¼Œå‡†å¤‡æˆ‘ä»¬ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œå¯ä»¥ä¸ç”¨è®¾ç½®) --&amp;gt;
&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;åœ¨mappexmlä¸­å¼€å¯äºŒçº§ç¼“å­˜&#34;&gt;åœ¨mappe.xmlä¸­å¼€å¯äºŒçº§ç¼“å­˜&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;
	&amp;lt;!-- åœ¨StudentMapper.xmlä¸­å¼€å¯äºŒçº§ç¼“å­˜ ,å› ä¸ºmybatisä¸­äºŒçº§ç¼“å­˜çš„å®ç°ç±»åªæœ‰ä¸€ä¸ªï¼Œé»˜è®¤å°±æ˜¯è¿™ä¸ªï¼Œtypeå¯ä»¥çœç•¥ä¸å†™--&amp;gt;
	&amp;lt;cache type=&amp;quot;org.apache.ibatis.cache.impl.PerpetualCache&amp;quot;&amp;gt;&amp;lt;/cache&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;pojoéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£&#34;&gt;pojoéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£&lt;/h3&gt;
&lt;p&gt;å› ä¸ºç¼“å­˜çš„æ—¶å€™è¦å°†pojoæµåŒ–ç„¶åå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ŒæŸ¥è¯¢å†å–å‡º&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class Student implements Serializable{
}
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;è¡¥å……ï¼šåœ¨mapperåº”ç”¨äºŒçº§ç¼“å­˜åï¼Œé»˜è®¤æ˜¯æ‰€æœ‰çš„æŸ¥è¯¢æ–¹æ³•éƒ½å¼€å¯äºŒçº§ç¼“å­˜ï¼Œå¦‚æœè¦æŸä¸ªæŸ¥è¯¢ä¸ä½¿ç”¨äºŒçº§ç¼“å­˜å¯ä»¥æ·»åŠ &lt;code&gt;useCache=&amp;quot;false&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;æ³¨è§£å¼€å‘å…¥é—¨&#34;&gt;æ³¨è§£å¼€å‘å…¥é—¨&lt;/h1&gt;
&lt;p&gt;åœ¨spring4.xå¼€å§‹å°±æ¨èæˆ‘ä»¬ä½¿ç”¨æ³¨è§£ï¼Œå®Œå…¨å»å–ä»£xmlçš„é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;ç›®å‰æœ€ä¸»æµçš„å¼€å‘æ–¹å¼å°±æ˜¯ï¼šåªä½¿ç”¨æ³¨è§£ï¼Œä¸å†ä½¿ç”¨xmlé…ç½®&lt;/p&gt;
&lt;p&gt;mybatisæ³¨è§£æ–¹å¼çš„å¼€å‘æ˜¯ä¸€ç§æœªæ¥çš„è¶‹åŠ¿,è¿™ç§æ–¹å¼æ¯”ä¼ ç»Ÿçš„xmlçš„å¼€å‘è¦ç®€å•å¹¶ä¸”é«˜æ•ˆ&lt;/p&gt;
&lt;h2 id=&#34;å¯¼å…¥jaråŒ…&#34;&gt;å¯¼å…¥jaråŒ…&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;dependencies&amp;gt;
    &amp;lt;!-- mysqlé©±åŠ¨ --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;mysql&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;mysql-connector-java&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;5.1.38&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;!-- mybatisçš„æ ¸å¿ƒåŒ… --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.mybatis&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;mybatis&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;3.4.6&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;!-- junitå•å…ƒæµ‹è¯• --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;junit&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;4.12&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;!-- slf4j-log4j12  (slf4j:é…¸è¾£ç²‰) --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;slf4j-log4j12&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.7.25&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
&amp;lt;/dependencies&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;é…ç½®æ–‡ä»¶&#34;&gt;é…ç½®æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;log4j.properties&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;log4j.rootLogger=DEBUG,A1
log4j.logger.org.mybatis=DEBUG
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss,SSS} [%t] [%c]-[%p] %m%n
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;jdbc.properties&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;jdbc.dirver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;amp;characterEncoding=utf-8
jdbc.username=root
jdbc.password=root
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;mybatis-config.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE configuration
  PUBLIC &amp;quot;-//mybatis.org//DTD Config 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-config.dtd&amp;quot;&amp;gt;
&amp;lt;configuration&amp;gt;
  &amp;lt;!-- å¼•å…¥å¤–éƒ¨çš„å±æ€§æ–‡ä»¶ --&amp;gt;
  &amp;lt;properties resource=&amp;quot;jdbc.properties&amp;quot;&amp;gt;&amp;lt;/properties&amp;gt;
  &amp;lt;settings&amp;gt;
  	&amp;lt;!-- å¼€å¯é©¼å³°å‘½å --&amp;gt;
  	&amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
  &amp;lt;/settings&amp;gt;
  &amp;lt;!-- é…ç½®æ•°æ®æº --&amp;gt;
  &amp;lt;environments default=&amp;quot;development&amp;quot;&amp;gt;
    &amp;lt;environment id=&amp;quot;development&amp;quot;&amp;gt;
      &amp;lt;transactionManager type=&amp;quot;JDBC&amp;quot;/&amp;gt;
      &amp;lt;dataSource type=&amp;quot;POOLED&amp;quot;&amp;gt;
        &amp;lt;property name=&amp;quot;driver&amp;quot; value=&amp;quot;${jdbc.dirver}&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;url&amp;quot; value=&amp;quot;${jdbc.url}&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;username&amp;quot; value=&amp;quot;${jdbc.username}&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;password&amp;quot; value=&amp;quot;${jdbc.password}&amp;quot;/&amp;gt;
      &amp;lt;/dataSource&amp;gt;
    &amp;lt;/environment&amp;gt;
  &amp;lt;/environments&amp;gt;
  &amp;lt;mappers&amp;gt;
    &amp;lt;package name=&amp;quot;cn.kgc.mapper&amp;quot;/&amp;gt;
  &amp;lt;/mappers&amp;gt;
  
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;@Select(&amp;quot;SQL&amp;quot;)&lt;/p&gt;
&lt;p&gt;@Insert(&amp;quot;SQL&amp;quot;)&lt;/p&gt;
&lt;p&gt;@Delete(&amp;quot;SQL&amp;quot;)&lt;/p&gt;
&lt;p&gt;@Update(&amp;quot;SQL&amp;quot;)&lt;/p&gt;
&lt;h2 id=&#34;è§£å†³æ•°æ®åº“è¡¨ä¸­çš„åˆ—åå’Œpojoä¸­å±æ€§åä¸ä¸€è‡´&#34;&gt;è§£å†³æ•°æ®åº“è¡¨ä¸­çš„åˆ—åå’Œpojoä¸­å±æ€§åä¸ä¸€è‡´&lt;/h2&gt;
&lt;h3 id=&#34;ç¬¬ä¸€ç§&#34;&gt;ç¬¬ä¸€ç§&lt;/h3&gt;
&lt;p&gt;ç»™sql è¯­å¥èµ·åˆ«å&lt;/p&gt;
&lt;h3 id=&#34;ç¬¬äºŒç§&#34;&gt;ç¬¬äºŒç§&lt;/h3&gt;
&lt;p&gt;@Results  ç›¸å½“äºæ˜¯&lt;code&gt;resultMap&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Select(&amp;quot;select * from book&amp;quot;)
@Results(id=&amp;quot;bookMap&amp;quot;,
    value={
        @Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),
        @Result(column=&amp;quot;book_name&amp;quot;,property=&amp;quot;name&amp;quot;),
        @Result(column=&amp;quot;price&amp;quot;,property=&amp;quot;price&amp;quot;)
})
List&amp;lt;Book&amp;gt; getAllBooks();
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;æ³¨è§£å¼€å‘ä¸­çš„åŠ¨æ€sql&#34;&gt;æ³¨è§£å¼€å‘ä¸­çš„åŠ¨æ€sql&lt;/h2&gt;
&lt;h3 id=&#34;è¾“å…¥æ˜ å°„ç±»å‹ä¸ºç®€å•ç±»å‹&#34;&gt;è¾“å…¥æ˜ å°„ç±»å‹ä¸ºç®€å•ç±»å‹&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * æœ‰å¯èƒ½æŸ¥è¯¢å…¨éƒ¨ï¼Œæœ‰å¯èƒ½æ ¹æ®idæŸ¥è¯¢
 * åŠ¨æ€sqlä¸­è¾“å…¥æ˜ å°„ä¸ºç®€å•ç±»å‹ï¼Œè¾“å…¥æ˜ å°„ä¸ºç®€å•ç±»å‹  testä¸­å˜é‡åå¿…é¡»å«_parameter
 */
@Select(&amp;quot;&amp;lt;script&amp;gt;SELECT * FROM book &amp;lt;if test=&#39;_parameter != null&#39;&amp;gt;WHERE id=#{id}&amp;lt;/if&amp;gt;&amp;lt;/script&amp;gt;&amp;quot;)
List&amp;lt;Book&amp;gt; getBooksOrById(Integer id);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;è¾“å…¥æ˜ å°„ç±»å‹ä¸ºpojo&#34;&gt;è¾“å…¥æ˜ å°„ç±»å‹ä¸ºpojo&lt;/h3&gt;
&lt;p&gt;å¼€å‘äº§ç”ŸSQLè¯­å¥çš„ç±»å’Œæ–¹æ³•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package cn.kgc.sql.provider;

import cn.kgc.pojo.Book;

public class BookMapperProvider {
	/**
	 * ä¸“é—¨ç”¨æ¥ç»™BookMapperæ¥å£æ¥æä¾›åŠ¨æ€sqlè¯­å¥çš„
	 * @param book
	 * @return
	 */
	public String getBooks(Book book){
		String sql = &amp;quot;select * from book&amp;quot;;
		if(book != null){
			if(book.getId() != null){
				//idæœ‰å€¼
				sql = &amp;quot;select * from book where id=#{id}&amp;quot;;
			}
			if(book.getName() != null &amp;amp;&amp;amp; !book.getName().equals(&amp;quot;&amp;quot;)){
				sql = &amp;quot;select * from book where name like #{name}&amp;quot;;
			}
			if(book.getId() != null &amp;amp;&amp;amp; (book.getName() != null &amp;amp;&amp;amp; !book.getName().equals(&amp;quot;&amp;quot;))){
				sql = &amp;quot;select * from book where id=#{id} and name like #{name}&amp;quot;;
			}
		}
		return sql;
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¥å£&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * æŸ¥è¯¢ï¼šæœ‰å¯èƒ½æŸ¥è¯¢å…¨éƒ¨ï¼Œæœ‰å¯èƒ½æ ¹æ®idæŸ¥è¯¢ï¼Œæœ‰å¯èƒ½æ ¹æ®nameåšæ¨¡ç³ŠæŸ¥è¯¢
 * @param book
 * @return
 */
@SelectProvider(type=BookMapperProvider.class,method=&amp;quot;getBooks&amp;quot;)
List&amp;lt;Book&amp;gt; getBooks(Book book);
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;æ³¨è§£å¼€å‘å®ç°å¤æ‚çš„æ˜ å°„å…³ç³»&#34;&gt;æ³¨è§£å¼€å‘å®ç°å¤æ‚çš„æ˜ å°„å…³ç³»&lt;/h2&gt;
&lt;p&gt;å¤æ‚çš„æ˜ å°„å¼€å‘æœ¬è´¨æ˜¯ä¸¤ç§ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤š&lt;/p&gt;
&lt;p&gt;æ³¨è§£å°±å¯¹åº”çš„æ˜¯ï¼š@One(ä¸€å¯¹ä¸€)  @Many(ä¸€å¯¹å¤š)&lt;/p&gt;
&lt;p&gt;è¦æ±‚æˆ‘ä»¬ä½¿ç”¨æ‡’åŠ è½½&lt;/p&gt;
&lt;h3 id=&#34;ä¸€å¯¹ä¸€å…³ç³»&#34;&gt;ä¸€å¯¹ä¸€å…³ç³»&lt;/h3&gt;
&lt;p&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯æ‡’åŠ è½½&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt; &amp;lt;settings&amp;gt;
  	&amp;lt;!-- å¼€å¯é©¼å³°å‘½å --&amp;gt;
  	&amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
  	&amp;lt;!-- å¼€å¯æ‡’åŠ è½½ --&amp;gt;
  	&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
  	&amp;lt;!-- mybatis3.4.1ä¹‹å‰é»˜è®¤å€¼æ˜¯trueï¼Œéœ€è¦è®¾ç½®ä¸ºfalseï¼ˆå°†ç§¯æåŠ è½½æ”¹ä¸ºæ¶ˆæ¯åŠ è½½ä¹Ÿå°±æ˜¯æŒ‰éœ€åŠ è½½ï¼‰ --&amp;gt;
  	&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;
  	&amp;lt;!-- å› ä¸ºæˆ‘è¿™é‡Œä¸ºäº†æ‰“å°å¯¹è±¡é‡Œä¿¡æ¯çš„æ–¹ä¾¿ï¼Œæ‰€ä»¥éƒ½é‡å†™äº†toStringæ–¹æ³•ï¼Œmybatisä¸­é»˜è®¤æ˜¯å¦‚æœä½¿ç”¨(equals,clone,hashCode,toStringä»»æ„ä¸€ä¸ªæ–¹æ³•)é‚£ä¹ˆå°±ä¸å†å»¶è¿ŸåŠ è½½ --&amp;gt;
  	&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;
  &amp;lt;/settings&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public interface GradeMapper {
	/**
	 * æ ¹æ®idæŸ¥è¯¢å¯¹è±¡
	 * @param id
	 * @return
	 */
	@Select(&amp;quot;select * from grade where id=#{id}&amp;quot;)
	Grade getGradeById(Integer id);
}

&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public interface StudentMapper {
	/**
	 * æŸ¥è¯¢å­¦ç”Ÿé¡ºä¾¿å°†å­¦ç”Ÿæ‰€åœ¨çš„å¹´çº§åç§°æŸ¥è¯¢å‡ºæ¥
	 */
	@Select(&amp;quot;select * from student&amp;quot;)
	@Results(id=&amp;quot;studentMap&amp;quot;,
			value={
			@Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),
			@Result(column=&amp;quot;name&amp;quot;,property=&amp;quot;name&amp;quot;),
			@Result(column=&amp;quot;grade_id&amp;quot;,property=&amp;quot;grade&amp;quot;,
					one=@One(select=&amp;quot;cn.kgc.mapper.GradeMapper.getGradeById&amp;quot;,fetchType=FetchType.LAZY))
			
	})
	List&amp;lt;Student&amp;gt; getAllStudents();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;FetchType.LAZYè¡¨ç¤ºåŠ è½½çš„æ–¹å¼æ˜¯æ‡’åŠ è½½,   FetchType.EAGERè¡¨ç¤ºä¸€å®šè”åˆæŸ¥è¯¢&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸æ·»åŠ fetchTypeï¼Œé»˜è®¤å°±æ˜¯æ‡’åŠ è½½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ä¸€å¯¹å¤šçš„å…³ç³»&#34;&gt;ä¸€å¯¹å¤šçš„å…³ç³»&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public interface StudentMapper {
	/**
	 * æ ¹æ®å¹´çº§ç¼–å·æŸ¥è¯¢å­¦ç”Ÿåˆ—è¡¨
	 * @param id
	 * @return
	 */
	@Select(&amp;quot;select * from student where grade_id=#{gid}&amp;quot;)
	List&amp;lt;Student&amp;gt; findStudentsListByGradeId(Integer id);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package cn.kgc.mapper;

import java.util.List;

import org.apache.ibatis.annotations.Many;
import org.apache.ibatis.annotations.Result;
import org.apache.ibatis.annotations.Results;
import org.apache.ibatis.annotations.Select;
import org.apache.ibatis.mapping.FetchType;

import cn.kgc.pojo.Grade;

public interface GradeMapper {

	@Select(&amp;quot;select * from grade&amp;quot;)
	@Results(id=&amp;quot;gradeMap&amp;quot;,
			value={
				@Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),
				@Result(column=&amp;quot;name&amp;quot;,property=&amp;quot;name&amp;quot;),
				@Result(column=&amp;quot;id&amp;quot;,property=&amp;quot;studentList&amp;quot;,
						many=@Many(select=&amp;quot;cn.kgc.mapper.StudentMapper.findStudentsListByGradeId&amp;quot;,fetchType=FetchType.LAZY))
	})
	List&amp;lt;Grade&amp;gt; getGrades();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;mybatisåŸºäºäºŒçº§ç¼“å­˜çš„å¼€å‘&#34;&gt;mybatisåŸºäºäºŒçº§ç¼“å­˜çš„å¼€å‘&lt;/h2&gt;
&lt;p&gt;ä¸€çº§ç¼“å­˜åŸºäº&lt;code&gt;sqlSession&lt;/code&gt;çš„ï¼Œé»˜è®¤å°±å­˜åœ¨çš„ï¼Œå’±ä»¬å¯ä»¥ä¸ç”¨ç®¡ï¼Œå®ƒä¸€å®šä¼šå­˜åœ¨&lt;/p&gt;
&lt;h3 id=&#34;4-1-åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜&#34;&gt;4-1 åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- å¼€å¯äºŒçº§ç¼“å­˜(æ–°ç‰ˆæœ¬çš„mybatisé»˜è®¤å°±å·²ç»å¼€å¯äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨ä¸“é—¨å¼€) --&amp;gt;
&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4-2-åœ¨mapperæ¥å£ä¸­ä½¿ç”¨æ³¨è§£é…ç½®å¼€å¯äºŒçº§ç¼“å­˜&#34;&gt;4-2 åœ¨mapperæ¥å£ä¸­ä½¿ç”¨æ³¨è§£é…ç½®å¼€å¯äºŒçº§ç¼“å­˜&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- å¼€å¯äºŒçº§ç¼“å­˜(æ–°ç‰ˆæœ¬çš„mybatisé»˜è®¤å°±å·²ç»å¼€å¯äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨ä¸“é—¨å¼€) --&amp;gt;
&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4-2-pojoéœ€è¦å®ç°åºåˆ—åŒ–-æ¥å£&#34;&gt;4-2 &lt;code&gt;pojo&lt;/code&gt;éœ€è¦å®ç°åºåˆ—åŒ– æ¥å£&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class Book implements Serializable{
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4-3-mapperå¼€å¯äºŒçº§ç¼“å­˜&#34;&gt;4-3 mapperå¼€å¯äºŒçº§ç¼“å­˜&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@CacheNamespace(blocking=true)		//åœ¨mapperæ¥å£ä¸­å¼€å¯äºŒçº§ç¼“å­˜ï¼Œé»˜è®¤æ˜¯æ‰€æœ‰çš„æŸ¥è¯¢éƒ½ä½¿ç”¨äºŒçº§ç¼“å­˜
public interface BookMapper {
    /**
	 * æŸ¥è¯¢:æ ¹æ®ä¸»é”®æŸ¥è¯¢
	 * åŒæ ·å‡†å®ˆï¼šè¾“å…¥æ˜ å°„ç±»å‹ä¸ºç®€å•ç±»å‹ #{éšä¾¿å†™}
	 * å¦‚æœåˆ—åä¸ä¸€æ ·,å¯ä»¥ç›´æ¥å¼•ç”¨ä¸Šé¢å·²ç»å†™å¥½çš„@Resultså®šä¹‰çš„åˆ—å’Œpojoå±æ€§æ˜ å°„çš„å…³ç³»ï¼Œæ–¹å¼ï¼š@ResultMap(&amp;quot;@Resultsçš„id&amp;quot;)
	 */
	@Select(&amp;quot;SELECT * FROM book WHERE id=#{id}&amp;quot;)
	@ResultMap(&amp;quot;bookMap&amp;quot;)
	//@Options(useCache=true)   //é»˜è®¤å°±æ˜¯å¼€å¯äºŒçº§ç¼“å­˜ï¼Œå¯ä»¥ä¸ç”¨æ·»åŠ è¯¥æ³¨è§£
	Book getBookById(Integer id);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;åˆ†é¡µæŸ¥è¯¢&#34;&gt;åˆ†é¡µæŸ¥è¯¢&lt;/h1&gt;
&lt;h2 id=&#34;æ·»åŠ åˆ†é¡µæ’ä»¶çš„jaråŒ…ä¾èµ–&#34;&gt;æ·»åŠ åˆ†é¡µæ’ä»¶çš„jaråŒ…ä¾èµ–&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- pageHelper --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;com.github.pagehelper&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;pagehelper&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;5.1.6&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ†é¡µæ‹¦æˆªå™¨&#34;&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ†é¡µæ‹¦æˆªå™¨&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- æ·»åŠ åˆ†é¡µæ’ä»¶ --&amp;gt;
&amp;lt;plugins&amp;gt;
&amp;lt;plugin interceptor=&amp;quot;com.github.pagehelper.PageInterceptor&amp;quot;&amp;gt;&amp;lt;/plugin&amp;gt;
&amp;lt;/plugins&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;å®ç°åˆ†é¡µæ“ä½œ&#34;&gt;å®ç°åˆ†é¡µæ“ä½œ&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * åˆ†é¡µæŸ¥è¯¢:åœ¨å®é™…å¼€å‘ä¸­æˆ‘ä»¬éƒ½ä¼šå»ä½¿ç”¨åˆ†é¡µæ’ä»¶æ¥å®Œæˆ
 * pageHelperæ˜¯å›½äººåšçš„åˆ†é¡µæ’ä»¶ï¼Œéå¸¸çš„ä¼˜ç§€
 */
@Test
public void testPage(){
    //1.å¼€å§‹åˆ†é¡µ(å‚æ•°ä¸€ï¼šå½“å‰è¦å±•ç¤ºçš„é¡µç (1,2..)ï¼Œ  å‚æ•°äºŒï¼šæ¯é¡µæ˜¾ç¤ºçš„ä¿¡æ¯æ¡æ•°)
    PageHelper.startPage(1, 3);
    //2.æ‰§è¡ŒæŸ¥è¯¢(æ­£å¸¸çš„æ‰§è¡Œ)
    BookExample example = new BookExample();
    /*å¦‚æœåˆ†é¡µä¸­æœ‰æ¡ä»¶
    Criteria criteria = example.createCriteria();
    criteria.andNameLike(&amp;quot;%é¾™%&amp;quot;);
    */
    List&amp;lt;Book&amp;gt; list = bookMapper.selectByExample(example);
    //3.åˆ†é¡µå°±é€šè¿‡pageHelperæ‹¦æˆªå™¨æ¥å®ç°åˆ†é¡µ
    PageInfo&amp;lt;Book&amp;gt; pageInfo = new PageInfo&amp;lt;Book&amp;gt;(list);
    //ä¸€é¡µä¿¡æ¯
    List&amp;lt;Book&amp;gt; bookList = pageInfo.getList();
    for (Book book : bookList) {
        System.out.println(book);
    }
    System.out.println(&amp;quot;æ€»çš„é¡µæ•°ï¼š&amp;quot; + pageInfo.getPages());
}
&lt;/code&gt;&lt;/pre&gt;
">MyBatis</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/java-fan-she/"" data-c="
          &lt;h2 id=&#34;è·å–classå¯¹è±¡çš„æ–¹å¼&#34;&gt;è·å–Classå¯¹è±¡çš„æ–¹å¼&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Class.forName(&amp;quot;å…¨ç±»å&amp;quot;);//å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œè¿”å›Classå¯¹è±¡
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¤šç”¨äºé…ç½®æ–‡ä»¶ï¼Œå°†ç±»åå®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚è¯»å–æ–‡ä»¶ï¼ŒåŠ è½½ç±»&lt;br&gt;
ç±»å.classï¼šé€šè¿‡ç±»åçš„å±æ€§classè·å–&lt;br&gt;
å¤šç”¨äºå‚æ•°çš„ä¼ é€’&lt;br&gt;
å¯¹è±¡.getClass()ï¼šgetClass()æ–¹æ³•åœ¨Objectç±»ä¸­å®šä¹‰ç€ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//å¤šç”¨äºå¯¹è±¡çš„è·å–å­—èŠ‚ç çš„æ–¹å¼
Class clazz = News.class;
Object obj = clazz.newInstance();           //å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼šç­‰åŒäº new ä¸€ä¸ªå¯¹è±¡
System.out.println(clazz.getSimpleName());  //è·å–ç±»å
System.out.println(clazz.getName());        //è·å–å®Œæ•´çš„åŒ…å+ç±»å
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;classå¯¹è±¡åŠŸèƒ½&#34;&gt;Classå¯¹è±¡åŠŸèƒ½&lt;/h2&gt;
&lt;h3 id=&#34;è·å–æˆå‘˜å˜é‡&#34;&gt;è·å–æˆå‘˜å˜é‡&lt;/h3&gt;
&lt;p&gt;â€‹        Field[] getFields() ï¼šè·å–æ‰€æœ‰publicä¿®é¥°çš„æˆå‘˜å˜é‡&lt;/p&gt;
&lt;p&gt;â€‹		Field getField(String name)   è·å–æŒ‡å®šåç§°çš„ publicä¿®é¥°çš„æˆå‘˜å˜é‡&lt;/p&gt;
&lt;p&gt;â€‹		Field[] getDeclaredFields();  //è·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡ï¼Œä¸è€ƒè™‘ä¿®é¥°ç¬¦&lt;/p&gt;
&lt;p&gt;â€‹		Field getDeclaredField(String name); // è·å–æŒ‡å®šåç§°çš„æˆå‘˜å˜é‡ï¼Œä¸è€ƒè™‘ä¿®é¥°ç¬¦&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Class clazz = News.class;
System.out.println(clazz.getSimpleName());//è·å–ç±»å
System.out.println(clazz.getName());//è·å–åŒ…å+ç±»å
Object obj = clazz.newInstance();//å®ä¾‹åŒ–Newsçš„è¿™ä¸ªå¯¹è±¡
Table table = obj.getClass().getAnnotation(Table.class);//è·å–objå¯¹è±¡çš„Tableæ³¨è§£ï¼Œæ²¡æœ‰è¿”å›null
System.out.println(table.value());
Field[] fields = clazz.getDeclaredFields();
for (Field field : fields) {
	field.setAccessible(true);//æš´åŠ›åå°„,å¦‚æœä¸å†™è¿™ä¸ªå°†ä¼šæŠ¥é”™
    //è·å–å±æ€§çš„æ³¨è§£
    //Field field1 = obj.getClass().getDeclaredField(field.getName());//è·å–objå¯¹è±¡çš„æŒ‡å®šå±æ€§
    PK pk = field.getAnnotation(PK.class);//è·å–å±æ€§çš„æ³¨è§£

	if(pk!=null){
    	System.out.println(field.getName()+&amp;quot;&amp;gt;&amp;gt;&amp;gt;&amp;quot;+pk);//è·å–å±æ€§åç§°
    }
        field.set(obj,null);//ç»™å½“å‰clazzå¯¹è±¡çš„fieldå±æ€§èµ‹å€¼ä¸ºi
        System.out.println(field.get(obj));//è¾“å‡ºclazzå¯¹è±¡çš„fieldçš„å±æ€§å€¼
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;è·å–æ„é€ æ–¹æ³•&#34;&gt;è·å–æ„é€ æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;â€‹	Constructor&amp;lt;?&amp;gt;[] getConstructors()&lt;/p&gt;
&lt;p&gt;â€‹	Constructor&lt;T&gt; getConstructor(ç±»&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;
&lt;p&gt;â€‹	Constructor&lt;T&gt; getDeclaredConstructor(ç±»&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;
&lt;p&gt;â€‹	Constructor&amp;lt;?&amp;gt;[] getDeclaredConstructors()&lt;/p&gt;
&lt;h3 id=&#34;è·å–æˆå‘˜æ–¹æ³•&#34;&gt;è·å–æˆå‘˜æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;â€‹	Method[] getMethods()&lt;/p&gt;
&lt;p&gt;â€‹	Method getMethod(String name, ç±»&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;
&lt;p&gt;â€‹	Method[] getDeclaredMethods()&lt;/p&gt;
&lt;p&gt;â€‹	Method getDeclaredMethod(String name, ç±»&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;
&lt;h3 id=&#34;fieldæˆå‘˜å˜é‡&#34;&gt;Fieldï¼šæˆå‘˜å˜é‡&lt;/h3&gt;
&lt;p&gt;è®¾ç½®å€¼&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;void set(Object obj, Object value)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è·å–å€¼ï¼Œä¼ çš„æ˜¯å¯¹è±¡&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;get(Object obj) 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¿½ç•¥è®¿é—®æƒé™ä¿®é¥°ç¬¦çš„å®‰å…¨æ£€æŸ¥&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;setAccessible(true)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;constructoræ„é€ æ–¹æ³•&#34;&gt;Constructor:æ„é€ æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºå¯¹è±¡ï¼Œå¦‚æœä½¿ç”¨ç©ºå‚æ•°æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œæ“ä½œå¯ä»¥ç®€åŒ–ï¼šClasså¯¹è±¡çš„newInstanceæ–¹æ³•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;T newInstance(Object... initargs)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;methodæ–¹æ³•å¯¹è±¡&#34;&gt;Methodï¼šæ–¹æ³•å¯¹è±¡&lt;/h3&gt;
&lt;p&gt;æ‰§è¡Œæ–¹æ³•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Object invoke(Object obj, Object... args)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è·å–æ–¹æ³•åç§°&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;String getName
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;åå°„è·å–æ³¨è§£&#34;&gt;åå°„è·å–æ³¨è§£&lt;/h2&gt;
&lt;p&gt;è·å–objå¯¹è±¡çš„Tableæ³¨è§£ï¼Œæ²¡æœ‰è¿”å›nullï¼Œobjæ˜¯è¦è·å–çš„å¯¹è±¡&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Table table = obj.getClass().getAnnotation(Table.class);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è·å–å±æ€§çš„æ³¨è§£ï¼Œè·å–objå¯¹è±¡çš„field.getName()çš„å±æ€§æ³¨è§£&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Field field1 = obj.getClass().getDeclaredField(field.getName());//è·å–objå¯¹è±¡çš„æŒ‡å®šå±æ€§
PK pk = field1.getAnnotation(PK.class);//è·å–å±æ€§çš„æ³¨è§£
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;è·å–å½“å‰è°ƒç”¨çš„æ–¹æ³•ä¸Šçš„æ³¨è§£&#34;&gt;è·å–å½“å‰è°ƒç”¨çš„æ–¹æ³•ä¸Šçš„æ³¨è§£&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;StackTraceElement[] stack = new Throwable().getStackTrace();
Method method = this.getClass().getMethod(stack[1].getMethodName());//è¿™é‡Œ0æ˜¯å½“å‰æ–¹æ³•çš„æ³¨è§£ï¼Œ1æ˜¯è°ƒç”¨è€…æ–¹æ³•çš„æ³¨è§£
for(Annotation an : method.getAnnotations()){
    System.out.println(an);
}
&lt;/code&gt;&lt;/pre&gt;
">Javaåå°„</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/FastDFS/"" data-c="
          &lt;h2 id=&#34;ä»€ä¹ˆæ˜¯fastdfs&#34;&gt;ä»€ä¹ˆæ˜¯FastDFS&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;FastDFS æ˜¯ç”¨ c è¯­è¨€ç¼–å†™çš„ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚FastDFS ä¸ºäº’è”ç½‘é‡èº«å®šåˆ¶ï¼Œå……åˆ†è€ƒè™‘äº†å†—ä½™å¤‡ä»½ã€è´Ÿè½½å‡è¡¡ã€çº¿æ€§æ‰©å®¹ç­‰æœºåˆ¶ï¼Œå¹¶æ³¨é‡é«˜å¯ç”¨ã€é«˜æ€§èƒ½ç­‰æŒ‡æ ‡ï¼Œä½¿ç”¨ FastDFSå¾ˆå®¹æ˜“æ­å»ºä¸€å¥—é«˜æ€§èƒ½çš„æ–‡ä»¶æœåŠ¡å™¨é›†ç¾¤æä¾›æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ç­‰æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;FastDFS æ¶æ„åŒ…æ‹¬ Tracker server å’Œ Storage serverã€‚å®¢æˆ·ç«¯è¯·æ±‚ Tracker server è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ï¼Œé€šè¿‡ Tracker server è°ƒåº¦æœ€ç»ˆç”± Storage server å®Œæˆæ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ã€‚&lt;/p&gt;
&lt;p&gt;Tracker server ä½œç”¨æ˜¯è´Ÿè½½å‡è¡¡å’Œè°ƒåº¦ï¼Œé€šè¿‡ Tracker server åœ¨æ–‡ä»¶ä¸Šä¼ æ—¶å¯ä»¥æ ¹æ®ä¸€äº›ç­–ç•¥æ‰¾åˆ° Storage server æä¾›æ–‡ä»¶ä¸Šä¼ æœåŠ¡ã€‚å¯ä»¥å°† tracker ç§°ä¸ºè¿½è¸ªæœåŠ¡å™¨æˆ–è°ƒåº¦æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;p&gt;Storage server ä½œç”¨æ˜¯æ–‡ä»¶å­˜å‚¨ï¼Œå®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶æœ€ç»ˆå­˜å‚¨åœ¨ Storage æœåŠ¡å™¨ä¸Šï¼ŒStorageserver æ²¡æœ‰å®ç°è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿè€Œæ˜¯åˆ©ç”¨æ“ä½œç³»ç»Ÿ çš„æ–‡ä»¶ç³»ç»Ÿæ¥ç®¡ç†æ–‡ä»¶ã€‚å¯ä»¥å°†storageç§°ä¸ºå­˜å‚¨æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1589686914052.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;æœåŠ¡ç«¯ä¸¤ä¸ªè§’è‰²ï¼š&lt;/p&gt;
&lt;p&gt;Trackerï¼šç®¡ç†é›†ç¾¤ï¼Œtracker ä¹Ÿå¯ä»¥å®ç°é›†ç¾¤ã€‚æ¯ä¸ª tracker èŠ‚ç‚¹åœ°ä½å¹³ç­‰ã€‚æ”¶é›† Storage é›†ç¾¤çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;Storageï¼šå®é™…ä¿å­˜æ–‡ä»¶  Storage åˆ†ä¸ºå¤šä¸ªç»„ï¼Œæ¯ä¸ªç»„ä¹‹é—´ä¿å­˜çš„æ–‡ä»¶æ˜¯ä¸åŒçš„ã€‚æ¯ä¸ªç»„å†…éƒ¨å¯ä»¥æœ‰å¤šä¸ªæˆå‘˜ï¼Œç»„æˆå‘˜å†…éƒ¨ä¿å­˜çš„å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œç»„æˆå‘˜çš„åœ°ä½æ˜¯ä¸€è‡´çš„ï¼Œæ²¡æœ‰ä¸»ä»çš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æ–‡ä»¶ä¸Šä¼ æµç¨‹&#34;&gt;æ–‡ä»¶ä¸Šä¼ æµç¨‹&lt;/h2&gt;
&lt;blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1589687036366.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;å®¢æˆ·ç«¯ä¸Šä¼ æ–‡ä»¶åå­˜å‚¨æœåŠ¡å™¨å°†æ–‡ä»¶ ID è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ–‡ä»¶ ID ç”¨äºä»¥åè®¿é—®è¯¥æ–‡ä»¶çš„ç´¢å¼•ä¿¡æ¯ã€‚æ–‡ä»¶ç´¢å¼•ä¿¡æ¯åŒ…æ‹¬ï¼šç»„åï¼Œè™šæ‹Ÿç£ç›˜è·¯å¾„ï¼Œæ•°æ®ä¸¤çº§ç›®å½•ï¼Œæ–‡ä»¶åã€‚&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1589687044591.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;ç»„å&lt;/strong&gt;ï¼šæ–‡ä»¶ä¸Šä¼ åæ‰€åœ¨çš„ storage ç»„åç§°ï¼Œåœ¨æ–‡ä»¶ä¸Šä¼ æˆåŠŸåæœ‰ storage æœåŠ¡å™¨è¿”å›ï¼Œéœ€è¦å®¢æˆ·ç«¯è‡ªè¡Œä¿å­˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è™šæ‹Ÿç£ç›˜è·¯å¾„&lt;/strong&gt;ï¼šstorage é…ç½®çš„è™šæ‹Ÿè·¯å¾„ï¼Œä¸ç£ç›˜é€‰é¡¹ store_path*å¯¹åº”ã€‚å¦‚æœé…ç½®äº†&lt;/p&gt;
&lt;p&gt;store_path0 åˆ™æ˜¯ M00ï¼Œå¦‚æœé…ç½®äº† store_path1 åˆ™æ˜¯ M01ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®ä¸¤çº§ç›®å½•&lt;/strong&gt;ï¼šstorage æœåŠ¡å™¨åœ¨æ¯ä¸ªè™šæ‹Ÿç£ç›˜è·¯å¾„ä¸‹åˆ›å»ºçš„ä¸¤çº§ç›®å½•ï¼Œç”¨äºå­˜å‚¨æ•°æ®&lt;/p&gt;
&lt;p&gt;æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ–‡ä»¶å&lt;/strong&gt;ï¼šä¸æ–‡ä»¶ä¸Šä¼ æ—¶ä¸åŒã€‚æ˜¯ç”±å­˜å‚¨æœåŠ¡å™¨æ ¹æ®ç‰¹å®šä¿¡æ¯ç”Ÿæˆï¼Œæ–‡ä»¶ååŒ…å«ï¼šæºå­˜å‚¨&lt;/p&gt;
&lt;p&gt;æœåŠ¡å™¨ IP åœ°å€ã€æ–‡ä»¶åˆ›å»ºæ—¶é—´æˆ³ã€æ–‡ä»¶å¤§å°ã€éšæœºæ•°å’Œæ–‡ä»¶æ‹“å±•åç­‰ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æ–‡ä»¶ä¸‹è½½æµç¨‹&#34;&gt;æ–‡ä»¶ä¸‹è½½æµç¨‹&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;4&#34;&gt;&lt;img src=&#34;https://haohanya.github.io/post-images/1589687076743.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;0-å‡†å¤‡å®‰è£…åŒ…ä¸Šä¼ åˆ°usrlocal&#34;&gt;0. å‡†å¤‡å®‰è£…åŒ…ä¸Šä¼ åˆ°/usr/local/&lt;/h2&gt;
&lt;p&gt;FastDFS_v5.05.tar.gz  ï¼ˆFastDFSå®‰è£…åŒ…ï¼‰&lt;/p&gt;
&lt;p&gt;libfastcommonV1.0.7.tar.gz ï¼ˆFastDFSä¾èµ–ç¨‹åºï¼‰&lt;/p&gt;
&lt;p&gt;nginx-1.8.0.tar.gz ï¼ˆnginxå®‰è£…åŒ…ï¼Œç”¨äºåšæ–‡ä»¶è¯·æ±‚httpä»£ç†æœåŠ¡å™¨ï¼‰&lt;/p&gt;
&lt;p&gt;fastdfs-nginx-module_v1.16.tar.gz ï¼ˆnginxå’Œfastdfsçš„æ¡¥æ¢æ’ä»¶æ¨¡å—ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;1-å®‰è£…ccç¼–è¯‘ç¯å¢ƒ&#34;&gt;1. å®‰è£…c/c++ç¼–è¯‘ç¯å¢ƒ&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;yum install gcc-c++
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;2-å®‰è£…libevent&#34;&gt;2. å®‰è£…libevent&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;yum -y install libevent
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;3-å®‰è£…libfastcommon&#34;&gt;3. å®‰è£…libfastcommon&lt;/h2&gt;
&lt;p&gt;å°†&lt;code&gt;libfastcommonV1.0.7.tar.gz&lt;/code&gt;æ‹·è´è‡³&lt;code&gt;/usr/local/&lt;/code&gt;ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /usr/local
tar -zxvf libfastcommonV1.0.7.tar.gz
cd libfastcommon-1.0.7
./make.sh
./make.sh install
cp /usr/lib64/libfastcommon.so /usr/lib
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•&#34;&gt;4.åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;mkdir -p /home/FastDFS/tracker /home/FastDFS/storage /home/FastDFS/client
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;5-trackerç¼–è¯‘å®‰è£…&#34;&gt;5. trackerç¼–è¯‘å®‰è£…&lt;/h2&gt;
&lt;p&gt;å°†FastDFS_v5.05.tar.gzæ‹·è´è‡³/usr/local/ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar -zxvf FastDFS_v5.05.tar.gz
cd FastDFS
./make.sh
./make.sh install
cd conf
cp * /etc/fdfs
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;6-ç¼–è¾‘etcfdfstrackerconf&#34;&gt;6. ç¼–è¾‘/etc/fdfs/tracker.conf&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;vi /etc/fdfs/tracker.conf
	base_path=/home/FastDFS/tracker
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;7-å¯åŠ¨tracker&#34;&gt;7. å¯åŠ¨tracker&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;/usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf [restart](é‡å¯)
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;8-é…ç½®storageèŠ‚ç‚¹&#34;&gt;8. é…ç½®storageèŠ‚ç‚¹&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;vi /etc/fdfs/storage.conf
    base_path=/home/FastDFS/storage
    store_path0=/home/FastDFS/storage
    tracker_server = 192.168.100.151:22122
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;9-å¯åŠ¨storageèŠ‚ç‚¹&#34;&gt;9. å¯åŠ¨storageèŠ‚ç‚¹&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;/usr/bin/fdfs_storage{fdfs_storaged} /etc/fdfs/storage.conf
fdfs_storageä¸å­˜åœ¨å°±ä½¿ç”¨fdfs_storaged
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;10-å®‰è£…nginx&#34;&gt;10. å®‰è£…nginx&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;yum install -y gcc-c++   (å·²å®‰è£…)
yum install -y pcre pcre-devel
yum install -y zlib zlib-devel
yum install -y openssl openssl-devel
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;11è§£å‹fastdfs-nginx-module_v116targz&#34;&gt;11.è§£å‹fastdfs-nginx-module_v1.16.tar.gz&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;cd /usr/local/
tar -zxf fastdfs-nginx-module_v1.16.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;12ä¿®æ”¹fastdfs-nginx-modulesrcconfigé…ç½®æ–‡ä»¶&#34;&gt;12.ä¿®æ”¹fastdfs-nginx-module/src/configé…ç½®æ–‡ä»¶&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;vi fastdfs-nginx-module/src/config
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;æŠŠCORE_INCS=&amp;quot;$CORE_INCS /usr/local/include/fastdfs /usr/include/fastcommon/&amp;quot;&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹ä¸ºï¼šCORE_INCS=&amp;quot;$CORE_INCS /usr/include/fastdfs /usr/include/fastcommon/&amp;quot;&lt;/p&gt;
&lt;p&gt;æŠŠCORE_LIBS=&amp;quot;$CORE_LIBS -L/usr/local/lib -lfastcommon -lfdfsclient&amp;quot;&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹ä¸ºï¼šCORE_LIBS=&amp;quot;$CORE_LIBS -L/usr/lib -lfastcommon -lfdfsclient&amp;quot;&lt;/p&gt;
&lt;p&gt;å®é™…å°±æ˜¯æŠŠè·¯å¾„ä¸­çš„localè¿™ä¸€å±‚åˆ é™¤æ‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;13å¤åˆ¶fastdfs-nginx-modulesrcmod_fastdfsconf-åˆ°etcfdfsç›®å½•ä¸‹å¹¶ç¼–è¾‘&#34;&gt;13.å¤åˆ¶fastdfs-nginx-module/src/mod_fastdfs.conf åˆ°/etc/fdfsç›®å½•ä¸‹å¹¶ç¼–è¾‘&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;cp fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/
	vi /etc/fdfs/mod_fastdfs.conf
        tracker_server=192.168.100.151:22122
        url_have_group_name = true
        storage_server_port=23000
        group_name=group1
        store_path0=/home/FastDFS/storage
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;14å®‰è£…nginx&#34;&gt;14.å®‰è£…nginx&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;cd /usr/local/
tar -zxf  nginx-1.8.1.tar.gz
cd nginx-1.8.1
./configure --add-module=/usr/local/fastdfs-nginx-module/src/
make
make install
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;15-é…ç½®nginx&#34;&gt;15. é…ç½®nginx&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;cd /usr/local/nginx/conf
vi nginx.conf
	
	server{
        listen     80;
        server_name     localhost;
        location /group1/M00/{
            ngx_fastdfs_module;
        }
    }

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é‡å¯nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/usr/local/nginx/sbin/nginx
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;å¼•å…¥ä¾èµ–&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;commons-fileupload&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;commons-fileupload&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;1.3.1&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;!--fastdfs--&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.csource.fastdfs&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;fastdfs&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;1.2&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;ç¼–å†™é…ç½®æ–‡ä»¶&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt; &amp;lt;!-- é…ç½®å¤šåª’ä½“è§£æå™¨ --&amp;gt;
 &amp;lt;bean id=&amp;quot;multipartResolver&amp;quot; class=&amp;quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&amp;quot;&amp;gt;
 	&amp;lt;property name=&amp;quot;defaultEncoding&amp;quot; value=&amp;quot;UTF-8&amp;quot;/&amp;gt;
 	&amp;lt;!-- è®¾å®šæ–‡ä»¶ä¸Šä¼ çš„æœ€å¤§å€¼5MBï¼Œ5*1024*1024 --&amp;gt;
 	&amp;lt;property name=&amp;quot;maxUploadSize&amp;quot; value=&amp;quot;5242880&amp;quot;/&amp;gt;
 &amp;lt;/bean&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;UploadController&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt; /**
  * æ–‡ä»¶æœåŠ¡å™¨åœ°å€
  */
 @Value(&amp;quot;${FILE_SERVER_URL}&amp;quot;)
 private String FILE_SERVER_URL;

 @RequestMapping(&amp;quot;/upload&amp;quot;)
 public JdResult upload(MultipartFile file) {
     //1ã€å–æ–‡ä»¶çš„æ‰©å±•å
     String originalFilename = file.getOriginalFilename();
     String extName = originalFilename.substring(originalFilename.lastIndexOf(&amp;quot;.&amp;quot;) + 1);
     try {
         //2ã€åˆ›å»ºä¸€ä¸ª FastDFS çš„å®¢æˆ·ç«¯
         FastDFSClient dfsClient = new FastDFSClient(&amp;quot;classpath:conf/fdfs_client.conf&amp;quot;);
         //3ã€æ‰§è¡Œä¸Šä¼ å¤„ç†
         String path = dfsClient.uploadFile(file.getBytes(), extName);
         //4ã€æ‹¼æ¥è¿”å›çš„ url å’Œ ip åœ°å€ï¼Œæ‹¼è£…æˆå®Œæ•´çš„ url
         String url = FILE_SERVER_URL + path;
         return JdResult.ok(url);
     } catch (Exception e) {
         e.printStackTrace();
         return JdResult.error(&amp;quot;æ–‡ä»¶ä¸Šä¼ å¤±è´¥&amp;quot;);
     }
 }
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
">FastDFS</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/freemarker/"" data-c="
          &lt;h2 id=&#34;1-freemarkerå…¥é—¨&#34;&gt;1ã€freemarkerå…¥é—¨&lt;/h2&gt;
&lt;h3 id=&#34;1ä¾èµ–æ ¸å¿ƒåŒ…&#34;&gt;1.ä¾èµ–æ ¸å¿ƒåŒ…&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- ä¾èµ–freemarker --&amp;gt;
&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.freemarker&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;freemarker&amp;lt;/artifactId&amp;gt;
	&amp;lt;version&amp;gt;2.3.23&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2åˆ›å»ºæ¨¡æ¿æ–‡ä»¶&#34;&gt;2.åˆ›å»ºæ¨¡æ¿æ–‡ä»¶&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta charset=&amp;quot;UTF-8&amp;quot;&amp;gt;
&amp;lt;title&amp;gt;è¿™ä¸ªæ˜¯æ¨¡æ¿&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
	&amp;lt;#--  è¿™æ˜¯æˆ‘çš„æ³¨é‡Šï¼Œä¸ä¼šè¢«è¾“å‡º --&amp;gt;
	hello ${name}
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3ç”Ÿæˆæ–‡ä»¶&#34;&gt;3.ç”Ÿæˆæ–‡ä»¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºConfigurationå¯¹è±¡ï¼ˆç›´æ¥newï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­æ·»åŠ &lt;code&gt;freemarker&lt;/code&gt;çš„ç‰ˆæœ¬å·ï¼‰&lt;br&gt;
ç¬¬äºŒæ­¥ï¼šè®¾ç½®æ¨¡æ¿æ‰€åœ¨çš„è·¯å¾„&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æ¨¡æ¿æ–‡ä»¶çš„ç¼–ç å­—ç¬¦é›†ï¼ˆä¸€èˆ¬ä½¿ç”¨&lt;code&gt;utf-8&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;ç¬¬å››æ­¥ï¼šåŠ è½½ä¸€ä¸ªæ¨¡æ¿ï¼Œåˆ›å»ºä¸€ä¸ªæ¨¡æ¿å¯¹è±¡&lt;/li&gt;
&lt;li&gt;ç¬¬äº”æ­¥ï¼šåˆ›å»ºæ•°æ®æ¨¡å‹ï¼ˆä½¿ç”¨çš„æ˜¯Map&amp;lt;String,Object&amp;gt; è¿˜å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„&lt;code&gt;pojo&lt;/code&gt;å®é™…å¼€å‘ä¸­éƒ½ç”¨mapï¼‰&lt;/li&gt;
&lt;li&gt;ç¬¬å…­æ­¥ï¼šåˆ›å»ºwriterå¯¹è±¡ï¼Œä¸€èˆ¬ç”¨&lt;code&gt;FileWriter&lt;/code&gt;å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–ï¼Œæ‰§è¡Œç”Ÿæˆçš„æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸ƒæ­¥ï¼šè°ƒç”¨æ¨¡æ¿å¯¹è±¡çš„processæ–¹æ³•è¾“å‡ºæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;ç¬¬å…«æ­¥ï¼šå…³é—­æµ&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static void main(String[] args) throws Exception{
    //1.åˆ›å»ºé…ç½®ç±»
    Configuration configuration = new Configuration(Configuration.getVersion());
    //2.è®¾ç½®æ¨¡æ¿æ‰€åœ¨ç›®å½•
    configuration.setDirectoryForTemplateLoading(new File(&amp;quot;F:\\workspace002\\freemarker-demo01\\src\\main\\resources&amp;quot;));
    //3.è®¾ç½®ç¼–ç é›†
    configuration.setDefaultEncoding(&amp;quot;UTF-8&amp;quot;);
    //4.åŠ è½½æ¨¡æ¿
    Template template = configuration.getTemplate(&amp;quot;hello.html&amp;quot;);
    //5.åˆ›å»ºæ•°æ®æ¨¡å‹
    Map&amp;lt;String, Object&amp;gt; data = new HashMap&amp;lt;String, Object&amp;gt;();
    data.put(&amp;quot;name&amp;quot;, &amp;quot;å¼ ä¸‰&amp;quot;);
    //6.åˆ›å»ºwriterå¯¹è±¡ï¼Œå‡†å¤‡ç”¨æ¥è¾“å‡ºæ–‡ä»¶
    Writer out = new FileWriter(new File(&amp;quot;E:\\freemarker\\hello.html&amp;quot;));
    //7,è¾“å‡ºæ–‡ä»¶
    template.process(data, out);
    //8.å…³é—­æµ
    out.close();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;ftlæŒ‡ä»¤&#34;&gt;FTLæŒ‡ä»¤&lt;/h2&gt;
&lt;h3 id=&#34;1assign&#34;&gt;1.assign&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œç”¨ï¼šç”¨äºåœ¨é¡µé¢ä¸Šå®šä¹‰ä¸€ä¸ªå˜é‡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;	&amp;lt;#-- assignï¼šç”¨æ¥åœ¨é¡µé¢ä¸Šå®šä¹‰ä¸€ä¸ªå˜é‡ --&amp;gt;
	&amp;lt;#assign name=&amp;quot;å¼ ä¸‰&amp;quot;&amp;gt;
	è·å–å˜é‡ï¼š${name}
	&amp;lt;hr/&amp;gt;
	&amp;lt;#-- assign:è¿˜å¯ä»¥ç”¨æ¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡ --&amp;gt;
	&amp;lt;#assign info={&amp;quot;name&amp;quot;:&amp;quot;æå››&amp;quot;,&amp;quot;age&amp;quot;:18,&amp;quot;hobs&amp;quot;:&amp;quot;java&amp;quot;}&amp;gt;
	è·å–åˆ°å¯¹è±¡çš„å±æ€§:å§“å-${info.name},å¹´é¾„-${info.age},çˆ±å¥½-${info.hobs}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2include&#34;&gt;2.include&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œç”¨ï¼šæ­¤æŒ‡ä»¤ç”¨äºæ¨¡æ¿æ–‡ä»¶ä¹‹é—´çš„ç›¸äº’åµŒå¥—&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;#include &amp;quot;head.ftl&amp;quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3if&#34;&gt;3.if&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œç”¨ï¼šç”¨äºæ¡ä»¶åˆ¤æ–­&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;data.put(&amp;quot;success&amp;quot;, true);

&amp;lt;#if success = true&amp;gt;
	successçš„å€¼æ˜¯true
&amp;lt;#else&amp;gt;
	successçš„å€¼æ˜¯false
&amp;lt;/#if&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4list&#34;&gt;4.list&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œç”¨ï¼šåœ¨é¡µé¢ä¸­éå†é›†åˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;ul&amp;gt;
	&amp;lt;#list mylist as user&amp;gt;
		&amp;lt;li&amp;gt;${user.name}&amp;lt;/li&amp;gt;
	&amp;lt;/#list&amp;gt;
&amp;lt;/ul&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;5å†…å»ºå‡½æ•°&#34;&gt;5.å†…å»ºå‡½æ•°&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;è¯­æ³•ï¼šå˜é‡ + ? + å‡½æ•°å&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;5-1-è·å–é›†åˆçš„å¤§å°size&#34;&gt;5-1 è·å–é›†åˆçš„å¤§å°(size)&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;${mylist?size}&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;5-2-è½¬æ¢jsonå­—ç¬¦ä¸²ä¸ºjsonå¯¹è±¡&#34;&gt;5-2 è½¬æ¢&lt;code&gt;json&lt;/code&gt;å­—ç¬¦ä¸²ä¸º&lt;code&gt;json&lt;/code&gt;å¯¹è±¡&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;#-- å®šä¹‰ä¸€ä¸ªjsonå­—ç¬¦ä¸²  --&amp;gt;
&amp;lt;#assign text=&amp;quot;{&#39;name&#39;:&#39;å¼ ä¸‰&#39;,&#39;sex&#39;:&#39;ç”·&#39;}&amp;quot;&amp;gt;
&amp;lt;#-- å°†jsonå­—ç¬¦ä¸²è½¬æ¢æˆjsonå¯¹è±¡ --&amp;gt;
&amp;lt;#assign person=text?eval&amp;gt;
å§“åï¼š${person.name}ï¼Œæ€§åˆ«:${person.sex}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;5-3-æ—¥æœŸ&#34;&gt;5-3 æ—¥æœŸ&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;å¹´æœˆæ—¥ï¼š${mydate?date}
&amp;lt;br/&amp;gt;
æ—¶åˆ†ç§’ï¼š${mydate?time}
&amp;lt;br/&amp;gt;
å¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼š${mydate?datetime}
&amp;lt;br/&amp;gt;
è‡ªå®šä¹‰æ—¥æœŸï¼š${mydate?string(&#39;yyyyå¹´MMæœˆddæ—¥  hhæ—¶mmåˆ†ssç§’&#39;)}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;5-4-æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸²&#34;&gt;5-4 æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸²&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;${mynum?c}&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;6ç©ºå€¼å¤„ç†&#34;&gt;6.ç©ºå€¼å¤„ç†&lt;/h3&gt;
&lt;h4 id=&#34;6-1-å¤„ç†æ–¹æ¡ˆä¸€ç¼ºå€¼è¡¨è¾¾å¼&#34;&gt;6-1 å¤„ç†æ–¹æ¡ˆä¸€(ç¼ºå€¼è¡¨è¾¾å¼)&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;${mytest!&amp;quot;å€¼ä¸ºnull&amp;quot;}
&amp;lt;/br&amp;gt;
${mytest!}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;6-2-å¤„ç†æ–¹æ¡ˆäºŒ&#34;&gt;6-2 å¤„ç†æ–¹æ¡ˆäºŒ&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;#if mytest??&amp;gt;
	mytestå€¼æ˜¯å­˜åœ¨çš„:${mytest}
&amp;lt;#else&amp;gt;
	mytestçš„å€¼ä¸ºnull
&amp;lt;/#if&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;7è¿ç®—ç¬¦&#34;&gt;7.è¿ç®—ç¬¦&lt;/h3&gt;
&lt;h4 id=&#34;7-1-ç®—æœ¯è¿ç®—ç¬¦&#34;&gt;7-1 ç®—æœ¯è¿ç®—ç¬¦&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;+ - * / %&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;7-2-é€»è¾‘è¿ç®—ç¬¦&#34;&gt;7-2 é€»è¾‘è¿ç®—ç¬¦&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;&amp;amp;&amp;amp; ã€ || ã€ !&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;7-3-æ¯”è¾ƒè¿ç®—ç¬¦&#34;&gt;7-3 æ¯”è¾ƒè¿ç®—ç¬¦&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;= æˆ–è€… ==&lt;/li&gt;
&lt;li&gt;!=&lt;/li&gt;
&lt;li&gt;&amp;gt;  æˆ–è€…æ˜¯ gt&lt;/li&gt;
&lt;li&gt;&amp;lt; æˆ–è€…æ˜¯ lt&lt;/li&gt;
&lt;li&gt;&amp;gt;= æˆ–è€…æ˜¯ gte&lt;/li&gt;
&lt;li&gt;&amp;lt;= æˆ–è€…æ˜¯ lte&lt;/li&gt;
&lt;/ul&gt;
">freemarker</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/about/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å…³äºæœ¬ç«™&#34;&gt;ğŸ  å…³äºæœ¬ç«™&lt;/h2&gt;
&lt;p&gt;ç£•ç£•ç¢°ç¢°çš„å°ç ´ç«™,å‰ä¸ä¹…åŸŸåçš„å¤‡æ¡ˆè¢«æ³¨é”€...åæ¢åˆ°Gridea,æ‰˜ç®¡åœ¨GitHub&lt;/p&gt;
&lt;h2 id=&#34;åšä¸»æ˜¯è°&#34;&gt;ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°&lt;/h2&gt;
&lt;p&gt;ä¸€ä½æ­£åœ¨åŠªåŠ›æˆé•¿çš„ç å†œ...&lt;/p&gt;
&lt;h2 id=&#34;å…´è¶£çˆ±å¥½&#34;&gt;â›¹ å…´è¶£çˆ±å¥½&lt;/h2&gt;
&lt;p&gt;åƒ,ç¡,coding&lt;/p&gt;
&lt;h2 id=&#34;è”ç³»æˆ‘å‘€&#34;&gt;ğŸ“¬ è”ç³»æˆ‘å‘€&lt;/h2&gt;
&lt;p&gt;QQ : 2369710264&lt;/p&gt;
">å…³äº</a>
      </div>
      
    </div>
  </div>
</div>
<script>
  // var escape = "[{&#34;content&#34;:&#34;&lt;h2 id=\&#34;spring-cloud-busç®€ä»‹\&#34;&gt;spring cloud busç®€ä»‹&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å®ƒæ˜¯ç”¨è½»é‡çš„æ¶ˆæ¯ä»£æ›¿å°†åˆ†å¸ƒå¼èŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œå¯ä»¥ç”¨äºå¹¿æ’­é…ç½®æ–‡ä»¶çš„æ›´æ”¹æˆ–è€…æ˜¯æœåŠ¡çš„ç›‘æ§ç®¡ç†ã€‚ä¹Ÿå°±æ˜¯æ¶ˆæ¯æ€»çº¿å¯ä»¥ä¸ºå¾®æœåŠ¡åšç›‘æ§ï¼Œä¹Ÿå¯ä»¥å®ç°åº”ç”¨ç¨‹åºä¹‹é—´çš„ç›¸äº’é€šè®¯ã€‚Spring Cloud Buså¯é€‰çš„æ¶ˆæ¯ä»£ç†æœ‰RabbitMQå’ŒKafaka&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h1 id=\&#34;mqçš„åŸºæœ¬æ¦‚å¿µ\&#34;&gt;MQçš„åŸºæœ¬æ¦‚å¿µ&lt;/h1&gt;\n&lt;h2 id=\&#34;mqçš„æ¦‚è¿°\&#34;&gt;MQçš„æ¦‚è¿°&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;MQå…¨ç§° ï¼šMessage Queueï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œæ˜¯åœ¨æ¶ˆæ¯çš„ä¼ è¾“è¿‡ç¨‹ä¸­ä¿æŒæ¶ˆæ¯çš„å®¹å™¨ï¼Œå¤šç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´è¿›è¡Œé€šä¿¡&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158533815.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h2 id=\&#34;mqçš„ä¼˜ç‚¹å’Œç¼ºç‚¹\&#34;&gt;MQçš„ä¼˜ç‚¹å’Œç¼ºç‚¹&lt;/h2&gt;\n&lt;h3 id=\&#34;ä¼˜ç‚¹\&#34;&gt;ä¼˜ç‚¹&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;åº”ç”¨è§£è€¦&lt;/li&gt;\n&lt;li&gt;å¼‚æ­¥æé€Ÿ&lt;/li&gt;\n&lt;li&gt;å‰Šå³°å¡«è°·&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3 id=\&#34;ç¼ºç‚¹\&#34;&gt;ç¼ºç‚¹&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;ç³»ç»Ÿå¯ç”¨æ€§é™ä½&lt;/li&gt;\n&lt;li&gt;ç³»ç»Ÿå¤æ‚åº¦æé«˜&lt;/li&gt;\n&lt;li&gt;ä¸€è‡´æ€§é—®é¢˜&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3 id=\&#34;ä¼˜ç‚¹ä¸€åº”ç”¨è§£è€¦\&#34;&gt;ä¼˜ç‚¹ä¸€ï¼šåº”ç”¨è§£è€¦&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ç³»ç»Ÿçš„è€¦åˆæ€§è¶Šé«˜ï¼Œå®¹é”™æ€§å°±è¶Šä½å¯ç»´æŠ¤æ€§å°±è¶Šä½&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;2\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158545429.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä½¿ç”¨MQä½¿å¾—åº”ç”¨è§£è€¦ï¼Œæé«˜äº†å®¹é”™æ€§å’Œå¯ç»´æŠ¤æ€§&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;3\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158557018.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h3 id=\&#34;ä¼˜ç‚¹äºŒå¼‚æ­¥æé€Ÿ\&#34;&gt;ä¼˜ç‚¹äºŒï¼šå¼‚æ­¥æé€Ÿ&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä¸€ä¸ªè®¢å•æ“ä½œè€—æ—¶ï¼š20+300+300+300=920ms&lt;/p&gt;\n&lt;p&gt;ç”¨æˆ·ç‚¹å‡»å®Œæˆä¸‹å•æŒ‰é’®åéœ€è¦ç­‰å¾…920msæ‰èƒ½å¾—åˆ°ä¸‹å•æˆåŠŸçš„å“åº”ï¼Œå¤ªæ…¢äº†ï¼&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;4\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158577381.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;è€Œä½¿ç”¨äº†MQç”¨æˆ·ç‚¹å‡»ä¸‹å•æŒ‰é’®ååªéœ€è¦ç­‰å¾…25mså°±èƒ½å¾—åˆ°ä¸‹å•çš„å“åº”ï¼Œæå‡ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿååé‡&lt;/p&gt;\n&lt;p&gt;ï¼ˆååé‡:å•ä½æ—¶é—´å†…å¤„ç†è¯·æ±‚çš„æ•°ç›®ï¼‰&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;5\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158593534.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h3 id=\&#34;ä¼˜ç‚¹ä¸‰å‰Šå³°å¡«è°·\&#34;&gt;ä¼˜ç‚¹ä¸‰ï¼šå‰Šå³°å¡«è°·&lt;/h3&gt;\n&lt;h4 id=\&#34;å‰Šå³°\&#34;&gt;å‰Šå³°&lt;/h4&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä¸ºäº†æé«˜è¥ä¸šé¢ï¼Œåœ¨Aç³»ç»Ÿä¸­åšäº†ä¸€ä¸ªæ´»åŠ¨ï¼Œå«ï¼šä¸€å…ƒç§’æ€å¤–æ˜Ÿäººï¼Œåœ¨æ´»åŠ¨å¼€å§‹åï¼Œç”¨æˆ·åå¤åˆ·æ–°é¡µé¢ï¼Œå¹¶ä¸”æ–°ç”¨æˆ·å¢å¤šï¼Œè¯·æ±‚ç¬é—´å¢å¤šæ¯ç§’5000ä¸ªè¯·æ±‚&lt;/p&gt;\n&lt;p&gt;è€Œåº”ç”¨Aç³»ç»Ÿèƒ½æ¯ç§’èƒ½å¤„ç†çš„è¯·æ±‚æ•°åªèƒ½æ˜¯1000ä¸ªï¼Œç°åœ¨è¯·æ±‚æ•°è¾¾åˆ°5000é‚£ä¹ˆAç³»ç»Ÿå°†ä¼šç›´æ¥å®•æœº&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;6\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158606222.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ç”¨æˆ·çš„è¯·æ±‚å…ˆå‘é€ç»™MQï¼Œ5000ä¸ªè¯·æ±‚åŒæ—¶å‘ç»™MQï¼ˆåœ¨MQçœ‹æ¥æ˜¯å°æ„æ€ï¼‰Aç³»ç»Ÿæ¯ç§’ä»MQä¸­æ‹‰å–1000ä¸ªè¯·æ±‚ï¼Œå¤„ç†å®Œäº†ä¹‹åå†ä»MQç»§ç»­æ‹‰å–ï¼Œç›´åˆ°æ¶ˆæ¯å…¨éƒ¨æ‹‰å–å®Œæ¯•&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;7\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158616267.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h4 id=\&#34;å¡«è°·\&#34;&gt;å¡«è°·&lt;/h4&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä½¿ç”¨äº†MQä¹‹åï¼Œé™åˆ¶æ•ˆéæ¶ˆæ¯çš„é€Ÿåº¦ä¸º1000ï¼Œè¿™æ ·ä¾èµ–ï¼Œé«˜å³°æœŸäº§ç”Ÿçš„æ•°æ®åŠ¿å¿…ä¼šè¢«æŒ¤å‹åœ¨MQä¸­ï¼Œé«˜å³°å°±è¢«æ¶ˆæ‰äº†ï¼Œä½†æ˜¯å› ä¸ºæ¶ˆæ¯ç§¯å‹ï¼Œåœ¨é«˜å³°æœŸè¿‡åçš„ä¸€æ®µæ—¶é—´å†…ï¼Œæ¶ˆè´¹æ¶ˆæ¯çš„é€Ÿåº¦è¿˜æ˜¯ä¼šç»´æŒåœ¨1000ï¼Œç›´åˆ°æ¶ˆæ¯æ¶ˆè´¹å®Œç§¯å‹çš„æ¶ˆæ¯ï¼Œè¿™å°±å«åšâ€œå¡«è°·â€&lt;/p&gt;\n&lt;p&gt;ä½¿ç”¨äº†MQåå¯ä»¥æé«˜ç³»ç»Ÿç¨³å®šæ€§&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;8\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158627638.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h3 id=\&#34;å°ç»“\&#34;&gt;å°ç»“&lt;/h3&gt;\n&lt;h4 id=\&#34;ä¼˜ç‚¹å°ç»“\&#34;&gt;ä¼˜ç‚¹å°ç»“&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;åº”ç”¨è§£è€¦ï¼šæé«˜ç³»ç»Ÿå®¹é”™æ€§å’Œå¯ç»´æŠ¤æ€§&lt;/li&gt;\n&lt;li&gt;å¼‚æ­¥æé€Ÿï¼šæå‡ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿååé‡&lt;/li&gt;\n&lt;li&gt;å‰Šå³°å¡«è°·ï¼šæé«˜äº†ç³»ç»Ÿçš„ç¨³å®šæ€§&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3 id=\&#34;mqçš„ç¼ºç‚¹\&#34;&gt;MQçš„ç¼ºç‚¹&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;ç³»ç»Ÿå¯ç”¨æ€§é™ä½\n&lt;ul&gt;\n&lt;li&gt;ç³»ç»Ÿå¼•å…¥çš„å¤–éƒ¨ä¾èµ–è¶Šå¤šï¼Œç³»ç»Ÿç¨³å®šæ€§è¶Šå·®ï¼Œä¸€æ—¦MQå®•æœºï¼Œå°±ä¼šå¯¹ä¸šåŠ¡é€ æˆå½±å“ï¼Œå¦‚ä½•ä¿è¯MQçš„é«˜å¯ç”¨ï¼Ÿ&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;ç³»ç»Ÿå¤æ‚åº¦æé«˜\n&lt;ul&gt;\n&lt;li&gt;MQçš„åŠ å…¥å¤§å¤§å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œä»¥å‰ç³»ç»Ÿä¹‹é—´åŒæ­¥çš„è¿œç¨‹è°ƒç”¨ï¼Œç°åœ¨æ˜¯é€šè¿‡MQè¿›è¡Œå¼‚æ­¥è°ƒç”¨ï¼Œå¦‚ä½•ä¿è¯æ¶ˆæ¯æ²¡æœ‰è¢«é‡å¤æ¶ˆè´¹ï¼Ÿæ€ä¹ˆå¤„ç†æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µï¼Œé‚£ä¹ˆä¿è¯æ¶ˆæ¯ä¼ é€’çš„é¡ºåºæ€§ï¼Ÿ&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;ä¸€è‡´æ€§é—®é¢˜\n&lt;ul&gt;\n&lt;li&gt;Aç³»ç»Ÿå¤„ç†å®Œä¸šåŠ¡ï¼Œé€šè¿‡MQç»™Bã€Cã€Dç³»ç»Ÿä¸‰ä¸ªç³»ç»Ÿå‘é€æ¶ˆæ¯æ•°æ®ï¼Œå¦‚æœBç³»ç»Ÿã€Cç³»ç»Ÿå¤„ç†æˆåŠŸï¼Œä½†æ˜¯Dç³»ç»Ÿå¤„ç†å¤±è´¥ï¼Œå¦‚ä½•ä¿è¯æ¶ˆæ¯æ•°æ®å¤„ç†çš„ä¸€è‡´æ€§å‘¢ï¼Ÿ&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;å¸¸è§çš„mqäº§å“\&#34;&gt;å¸¸è§çš„MQäº§å“&lt;/h2&gt;\n&lt;p&gt;ç›®å‰ä¸šç•Œæœ‰å¾ˆå¤šçš„MQäº§å“ï¼Œå¦‚ï¼šRabbitMQã€RocaketMQã€ActiveMQã€Kafakaã€ZeroMQã€MetaMQç­‰ç­‰ï¼Œä¹Ÿæœ‰å…¬å¸ç›´æ¥ä½¿ç”¨Rediså……å½“æ¶ˆæ¯é˜Ÿåˆ—çš„æ¡ˆä¾‹ï¼Œè€Œè¿™äº›æ¶ˆæ¯é˜Ÿåˆ—äº§å“å„æœ‰åé‡ï¼Œåœ¨å®é™…é€‰å‹ä¸­ï¼Œéœ€è¦ç»“åˆè‡ªèº«éœ€æ±‚ä»¥åŠMQäº§å“çš„ç‰¹æ€§ï¼Œç»¼åˆè€ƒè™‘&lt;/p&gt;\n&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;&lt;/th&gt;\n&lt;th&gt;RabbitMQ&lt;/th&gt;\n&lt;th&gt;ActiveMQ&lt;/th&gt;\n&lt;th&gt;RocketMQ&lt;/th&gt;\n&lt;th&gt;Kafaka&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td&gt;å…¬å¸/ç¤¾åŒº&lt;/td&gt;\n&lt;td&gt;Rabbit&lt;/td&gt;\n&lt;td&gt;Apache&lt;/td&gt;\n&lt;td&gt;Alibaba&lt;/td&gt;\n&lt;td&gt;Apache&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;å¼€å‘è¯­è¨€&lt;/td&gt;\n&lt;td&gt;Erlangï¼ˆäºŒéƒç¥ï¼‰&lt;/td&gt;\n&lt;td&gt;Java&lt;/td&gt;\n&lt;td&gt;Java&lt;/td&gt;\n&lt;td&gt;Java&amp;amp;Scala&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;åè®®æ”¯æŒ&lt;/td&gt;\n&lt;td&gt;AMQPã€SMTP...&lt;/td&gt;\n&lt;td&gt;RESTã€AMQPã€STOMP...&lt;/td&gt;\n&lt;td&gt;è‡ªå®šä¹‰&lt;/td&gt;\n&lt;td&gt;è‡ªå®šä¹‰åè®®ã€ç¤¾åŒºå°è£…äº†httpåè®®æ”¯æŒ&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;å®¢æˆ·ç«¯æ”¯æŒè¯­è¨€&lt;/td&gt;\n&lt;td&gt;å®˜æ–¹æ”¯æŒErlangã€javaã€Rubyç­‰&lt;/td&gt;\n&lt;td&gt;Javaã€Cã€C++ã€Pythonã€PHP...&lt;/td&gt;\n&lt;td&gt;Javaã€C++(ä¸æˆç†Ÿ)&lt;/td&gt;\n&lt;td&gt;å®˜æ–¹æ”¯æŒJAVAã€ç¤¾åŒºäº§å‡ºäº†å¤šç§APIï¼Œå¦‚PHPå’ŒPythonç­‰&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;å•æœºååé‡&lt;/td&gt;\n&lt;td&gt;ä¸‡çº§ï¼ˆå…¶æ¬¡ï¼‰&lt;/td&gt;\n&lt;td&gt;ä¸‡çº§ï¼ˆæœ€å·®ï¼‰&lt;/td&gt;\n&lt;td&gt;åä¸‡çº§ï¼ˆæœ€å¥½ï¼‰&lt;/td&gt;\n&lt;td&gt;åä¸‡çº§ï¼ˆæ¬¡ä¹‹ï¼‰&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;æ¶ˆæ¯å»¶è¿Ÿ&lt;/td&gt;\n&lt;td&gt;å¾®ç§’çº§&lt;/td&gt;\n&lt;td&gt;æ¯«ç§’çº§&lt;/td&gt;\n&lt;td&gt;æ¯«ç§’çº§&lt;/td&gt;\n&lt;td&gt;æ¯«ç§’çº§ä»¥å†…&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;åŠŸèƒ½ç‰¹æ€§&lt;/td&gt;\n&lt;td&gt;å¹¶å‘èƒ½åŠ›å¼ºã€æ€§èƒ½æå…¶å¥½ã€å»¶è¿Ÿä½ã€ç¤¾åŒºæ´»è·ƒã€ç®¡ç†ç•Œé¢ä¸°å¯Œ&lt;/td&gt;\n&lt;td&gt;è€ç‰Œäº§å“ã€æˆç†Ÿåº¦é«˜ã€æ–‡æ¡£è¾ƒå¤š&lt;/td&gt;\n&lt;td&gt;MQåŠŸèƒ½æ¯”è¾ƒå®Œå¤‡ã€æ‰©å±•æ€§ä½³&lt;/td&gt;\n&lt;td&gt;æ”¯æ”¯æŒä¸»è¦çš„MQåŠŸèƒ½ï¼Œæ¯•ç«Ÿæ˜¯ä¸ºå¤§æ•°æ®é¢†åŸŸå‡†å¤‡çš„&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;h2 id=\&#34;rabbitmq\&#34;&gt;RabbitMQ&lt;/h2&gt;\n&lt;h3 id=\&#34;amqpç®€ä»‹\&#34;&gt;AMQPç®€ä»‹&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;code&gt;AMQP&lt;/code&gt;ï¼šAdvanced  Message Queuing Protocol (é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®)ï¼Œå®ƒæ˜¯ä¸€ä¸ªç½‘è·¯åè®®ï¼Œæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€å‘æ ‡å‡†ï¼Œä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ã€‚åŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸æ¶ˆæ¯ä¸­é—´ä»¶å¯ä¼ é€’æ¶ˆæ¯ï¼Œå¹¶ä¸å—å®¢æˆ·ç«¯/ä¸­é—´ä»¶ä¸åŒäº§å“ï¼Œä¸åŒçš„å¼€å‘è¯­è¨€ç­‰æ¡ä»¶é™åˆ¶&lt;/p&gt;\n&lt;p&gt;AMQPæ˜¯2006å¹´SUNå…¬å¸å‘å¸ƒçš„ä¸€ä¸ªè§„èŒƒ&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;9\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158643503.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h3 id=\&#34;rabbitmqç®€ä»‹\&#34;&gt;RabbitMQç®€ä»‹&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;RabbitæŠ€æœ¯å…¬å¸ï¼ˆç¾å›½ï¼‰åŸºäºAMQPæ ‡å‡†å¼€å‘çš„RabbitMQäº2007å¹´å‘å¸ƒV1.0ç‰ˆï¼ŒRabbitMQé‡‡ç”¨Erlangè¯­è¨€å¼€å‘ã€‚&lt;/p&gt;\n&lt;p&gt;Erlangè¯­è¨€ä¸“é—¨ä¸ºé«˜å¹¶å‘å’Œåˆ†å¸ƒå¼ç»Ÿè®¾è®¡çš„ä¸€ç§è¯­è¨€ï¼Œåœ¨ç”µä¿¡é¢†åŸŸä½¿ç”¨å¹¿æ³›&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;10\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158653524.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;ul&gt;\n&lt;li&gt;Broker:å°±æ˜¯RabbitMQ Serverï¼Œç”¨æ¥æ¥æ”¶å’Œåˆ†å‘æ¶ˆæ¯çš„åº”ç”¨&lt;/li&gt;\n&lt;li&gt;Virtual Host:å‡ºäºå¤šç§Ÿæˆ·å’Œå®‰å…¨å› ç´ è®¾è®¡çš„ï¼ŒæŠŠAMQPçš„åŸºæœ¬ç»„ä»¶åˆ’åˆ†åˆ°ä¸€ä¸ªè™šæ‹Ÿçš„åˆ†ç»„ä¸­ï¼Œé›·é€Ÿä¸ç½‘ç»œä¸­çš„namesapceæ¦‚å¿µã€‚å½“å¤šä¸ªä¸åŒçš„ç”¨æˆ·ä½¿ç”¨ä¸€ä¸ªRabbitMQ serveræä¾›æœåŠ¡çš„æ—¶å€™ï¼Œå¯ä»¥åˆ’åˆ†å‡ºå¤šä¸ªVirtual Hostï¼Œæ¯ä¸ªç”¨æˆ·éƒ½åœ¨è‡ªå·±çš„vhoståˆ›å»ºexchangeå’Œqueueç­‰&lt;/li&gt;\n&lt;li&gt;Connectionï¼šç”Ÿäº§è€…/æ¶ˆè´¹è€… å’Œbrokerä¹‹é—´çš„TCPè¿æ¥&lt;/li&gt;\n&lt;li&gt;Channelï¼šï¼ˆä¿¡é“ï¼‰å¦‚æœæ¯ä¸€æ¬¡è®¿é—®RabbitMQéƒ½å»ºç«‹ä¸€ä¸ªConnectionï¼Œåœ¨æ¶ˆæ¯é‡å¤§çš„æ—¶å€™å»ºç«‹Tcp Connectionçš„å¼€é”€å°†æ˜¯å·¨å¤§çš„ã€æ•ˆç‡ä¹Ÿè¾ƒä½ã€‚Channelæ˜¯åœ¨Connectionå†…éƒ¨å»ºç«‹çš„é€»è¾‘è¿æ¥ï¼Œå¦‚æœåº”ç”¨ç¨‹åºæ”¯æŒå¤šçº¿ç¨‹ï¼Œé€šå¸¸æ¯ä¸ªthreadåˆ›å»ºå•ç‹¬çš„channelè¿›è¡Œé€šä¿¡ï¼ŒAMQP methodåŒ…å«äº†channel idå¸®åŠ©å®¢æˆ·ç«¯å’Œmessage borkerè¯†åˆ«channelï¼Œæ‰€ä»¥channelä¹‹é—´æ˜¯å®Œå…¨éš”ç¦»çš„ã€‚Channelä½œä¸ºè½»é‡çº§çš„Connectionæå¤§å‡å°‘äº†æ“ä½œç³»ç»Ÿå»ºç«‹TCP connectionçš„å¼€é”€&lt;/li&gt;\n&lt;li&gt;Exchangeï¼šæ¶ˆæ¯è¾¾åˆ°RabbitMQçš„ç¬¬ä¸€ç«™ï¼Œæ ¹æ®åˆ†å‘è§„åˆ™ï¼ŒåŒ¹é…æŸ¥è¯¢è¡¨ä¸­çš„&lt;code&gt;routing key&lt;/code&gt;(è·¯ç”±é”®)ï¼Œåˆ†å‘æ¶ˆæ¯åˆ°queueä¸­å»ï¼Œå¸¸æœ‰çš„ç±»å‹æœ‰ï¼šdirect (ç‚¹å¯¹ç‚¹å’ŒactiveMQä¸­çš„queueæ˜¯ä¸€æ ·çš„)ã€topicã€fanoutï¼ˆè¿™ä¸ªå’ŒactiveMQä¸­çš„topicæ¨¡å¼æ˜¯ä¸€æ ·çš„ï¼‰&lt;/li&gt;\n&lt;li&gt;Queueï¼šæ¶ˆæ¯æœ€ç»ˆè¢«é€åˆ°è¿™é‡Œç­‰å¾…æ¶ˆè´¹è€…å–èµ°&lt;/li&gt;\n&lt;li&gt;Bindingï¼šExchangeå’ŒQueueä¹‹é—´çš„è™šæ‹Ÿè¿æ¥ï¼Œbindingä¸­å¯ä»¥åŒ…å«è·¯ç”±é”®&lt;code&gt;routing key&lt;/code&gt;ã€Bindingä¿¡æ¯è¢«ä¿å­˜åˆ°exchangeä¸­çš„æŸ¥è¯¢è¡¨ä¸­ï¼Œç”¨äºæ¶ˆæ¯çš„åˆ†å‘ä¾æ®&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3 id=\&#34;ä½¿ç”¨dockerå®‰è£…rabbitmq\&#34;&gt;ä½¿ç”¨Dockerå®‰è£…RabbitMQ&lt;/h3&gt;\n&lt;h4 id=\&#34;æ‹‰å–é•œåƒ\&#34;&gt;æ‹‰å–é•œåƒ&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-powershell\&#34;&gt;docker pull rabbitmq:3.8.4-management\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;é€šè¿‡å®¹å™¨å¯åŠ¨rabbitmq\&#34;&gt;é€šè¿‡å®¹å™¨å¯åŠ¨RabbitMQ&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-powershell\&#34;&gt;docker run -i -d --name=myrabbitmq -p 5672:5672 -p 15672:15672 imageid\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;è®¿é—®rabbitmq\&#34;&gt;è®¿é—®RabbitMQ&lt;/h4&gt;\n&lt;blockquote&gt;\n&lt;p&gt;IP:15672&lt;/p&gt;\n&lt;p&gt;ç”¨æˆ·åå’Œå¯†ç é»˜è®¤éƒ½æ˜¯guest&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;é€šè¿‡springbootæ•´åˆrabbitmq\&#34;&gt;é€šè¿‡SpringBootæ•´åˆRabbitMQ&lt;/h3&gt;\n&lt;h4 id=\&#34;åˆ›å»ºå·¥ç¨‹\&#34;&gt;åˆ›å»ºå·¥ç¨‹&lt;/h4&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;11\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158665947.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h4 id=\&#34;é…ç½®æ–‡ä»¶\&#34;&gt;é…ç½®æ–‡ä»¶&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-yml\&#34;&gt;#ç«¯å£å·\nserver:\n  port: 8080\n#é…ç½®rabbitMQ\nspring:\n  rabbitmq:\n    host: 192.168.25.134\n    username: guest\n    password: guest\n    #port: 5672\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;åˆ›å»ºexchange\&#34;&gt;åˆ›å»ºExchange&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Autowired\nprivate AmqpAdmin amqpAdmin;\n/**\n * é€šè¿‡ä»£ç åˆ›å»ºexchange\n */\n@Test\npublic void createExchange(){\n    amqpAdmin.declareExchange(new DirectExchange(&amp;quot;amqp.exchange&amp;quot;));\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åˆ›å»ºä¸åŒçš„æ¶ˆæ¯newä¸åŒçš„å¯¹è±¡å³å¯&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;12\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158676615.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h4 id=\&#34;å¸¸è§queue\&#34;&gt;å¸¸è§Queue&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Autowired\nprivate AmqpAdmin amqpAdmin;\n\n@Test\npublic void createQueue(){\n    amqpAdmin.declareQueue(new Queue(&amp;quot;amqp.queue&amp;quot;));\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;ç»‘å®šexchangeå’Œqueue\&#34;&gt;ç»‘å®šexchangeå’Œqueue&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Autowired\nprivate AmqpAdmin amqpAdmin;\n\n@Test\npublic void bindingQueueAndExchange(){\n    //å‚æ•°ä¸€ï¼šqueue\n    //å‚æ•°äºŒï¼šæ˜¯queueçš„ç±»å‹\n    //å‚æ•°ä¸‰ï¼šäº¤æ¢å™¨\n    //å‚æ•°å››ï¼šrouting key  ï¼ˆè·¯ç”±é”®ï¼‰\n    //å‚æ•°äº”ï¼šç»‘å®šçš„æ—¶å€™ç»™ä¸€ä¸ªåˆå§‹åŒ–çš„æ¶ˆæ¯\n    amqpAdmin.declareBinding(new Binding(&amp;quot;amqp.queue&amp;quot;,Binding.DestinationType.QUEUE,&amp;quot;amqp.exchange&amp;quot;,&amp;quot;amqp.test&amp;quot;,null));\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;æµ‹è¯•direct\&#34;&gt;æµ‹è¯•direct&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Resource\nprivate RabbitTemplate rabbitTemplate;\n\n/**\n * æµ‹è¯•directå‘é€æ¶ˆæ¯\n */\n@Test\nvoid testPublishDirect() {\n    Map&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;&amp;gt;();\n    map.put(&amp;quot;id&amp;quot;,1);\n    map.put(&amp;quot;list&amp;quot;, Arrays.asList(&amp;quot;å¼ ä¸‰&amp;quot;,&amp;quot;æå››&amp;quot;));\n    /**\n     * å‚æ•°1ã€exchangeï¼ˆäº¤æ¢å™¨ï¼‰é€šè¿‡äº¤æ¢å™¨çš„ç±»å‹ï¼Œå¯ä»¥å†³å®šæ¶ˆæ¯å‘é€çš„æ–¹å¼ï¼Œå¦‚ï¼šdirectå°±æ˜¯ç‚¹å¯¹ç‚¹ï¼Œä¸€ä¸ªç”Ÿäº§è€…å¯¹åº”ä¸€ä¸ªæ¶ˆè´¹è€…\n     * å‚æ•°2ã€routingKeyï¼ˆè·¯ç”±é”®ï¼‰  è¡¨ç¤ºæ¶ˆæ¯åˆ°queuesä¸­å“ªä¸ªåœ°æ–¹å­˜å‚¨\n     * å‚æ•°3ã€è·¯ç”±è¯•é¢˜\n     */\n    rabbitTemplate.convertAndSend(&amp;quot;amqp.exchange&amp;quot;,&amp;quot;amqp.test&amp;quot;,map);\n}\n\n/**\n * æµ‹è¯•directæ¥æ”¶æ¶ˆæ¯\n */\n@Test\npublic void testReceiveDirect(){\n    //å‚æ•°ï¼šqueueçš„name\n    Object convert = rabbitTemplate.receiveAndConvert(&amp;quot;amqp.queue&amp;quot;);\n    System.out.println(convert);\n    System.out.println(convert.getClass());\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;æµ‹è¯•fanout\&#34;&gt;æµ‹è¯•fanout&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * æµ‹è¯•fanoutå‘é€æ¶ˆæ¯(å’ŒactiveMQä¸­çš„topicä¸€æ ·çš„)\n */\n@Test\npublic void testPublishFanout(){\n    Map&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;&amp;gt;();\n    map.put(&amp;quot;id&amp;quot;,1);\n    map.put(&amp;quot;list&amp;quot;, Arrays.asList(&amp;quot;å¼ ä¸‰&amp;quot;,&amp;quot;æå››&amp;quot;));\n    rabbitTemplate.convertAndSend(&amp;quot;amqp.exchange.fanout&amp;quot;,&amp;quot;amqp.exchange.fanout.test&amp;quot;,map);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;åˆ›å»ºç›‘å¬å™¨\&#34;&gt;åˆ›å»ºç›‘å¬å™¨&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Service\npublic class MyListener {\n    @RabbitListener(queues = &amp;quot;amqp.queue&amp;quot;)\n    public void receive(Map&amp;lt;String,Object&amp;gt; map){\n        System.out.println(&amp;quot;ä»ç›‘å¬å™¨ä¸­å–å‡ºæ¶ˆæ¯ï¼š&amp;quot; + map);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;æµ‹è¯•topic\&#34;&gt;æµ‹è¯•topic&lt;/h4&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åœ¨RabbitMQä¸­   direct==activeMQä¸­çš„queue&lt;/p&gt;\n&lt;p&gt;â€‹                             fanout==activeMQä¸­çš„topic&lt;/p&gt;\n&lt;p&gt;â€‹                             topic   åŒ¹é…æ¨¡å¼&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;13\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592158693339.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;.#  (è¡¨ç¤ºä¸€ä¸ªå•è¯æˆ–å¤šä¸ªå•è¯)&lt;/p&gt;\n&lt;p&gt;*.  (è¡¨ç¤ºåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯)&lt;/p&gt;\n&lt;/blockquote&gt;\n&#34;,&#34;fileName&#34;:&#34;rabbitmqyi&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;RabbitMQï¼ˆä¸€ï¼‰&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;Rabbit&#34;,&#34;slug&#34;:&#34;J76me16vj&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/J76me16vj/&#34;},{&#34;name&#34;:&#34;æ¶ˆæ¯ä¸­é—´ä»¶&#34;,&#34;slug&#34;:&#34;Nutx1bfO8U&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/Nutx1bfO8U/&#34;}],&#34;date&#34;:&#34;2020-06-15 02:14:28&#34;,&#34;dateFormat&#34;:&#34;2020-06-15&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/rabbitmqyi/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;9 min read&#34;,&#34;time&#34;:518000,&#34;words&#34;:2228,&#34;minutes&#34;:9},&#34;description&#34;:&#34;spring cloud busç®€ä»‹\n\nå®ƒæ˜¯ç”¨è½»é‡çš„æ¶ˆæ¯ä»£æ›¿å°†åˆ†å¸ƒå¼èŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œå¯ä»¥ç”¨äºå¹¿æ’­é…ç½®æ–‡ä»¶çš„æ›´æ”¹æˆ–è€…æ˜¯æœåŠ¡çš„ç›‘æ§ç®¡ç†ã€‚ä¹Ÿå°±æ˜¯æ¶ˆæ¯æ€»çº¿å¯ä»¥ä¸ºå¾®æœåŠ¡åšç›‘æ§ï¼Œä¹Ÿå¯ä»¥å®ç°åº”ç”¨ç¨‹åºä¹‹é—´çš„ç›¸äº’é€šè®¯ã€‚Spring Cloud Buså¯é€‰çš„æ¶ˆæ¯...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#spring-cloud-bus%E7%AE%80%E4%BB%8B\&#34;&gt;spring cloud busç®€ä»‹&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#mq%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\&#34;&gt;MQçš„åŸºæœ¬æ¦‚å¿µ&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#mq%E7%9A%84%E6%A6%82%E8%BF%B0\&#34;&gt;MQçš„æ¦‚è¿°&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#mq%E7%9A%84%E4%BC%98%E7%82%B9%E5%92%8C%E7%BC%BA%E7%82%B9\&#34;&gt;MQçš„ä¼˜ç‚¹å’Œç¼ºç‚¹&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BC%98%E7%82%B9\&#34;&gt;ä¼˜ç‚¹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%BC%BA%E7%82%B9\&#34;&gt;ç¼ºç‚¹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BC%98%E7%82%B9%E4%B8%80%E5%BA%94%E7%94%A8%E8%A7%A3%E8%80%A6\&#34;&gt;ä¼˜ç‚¹ä¸€ï¼šåº”ç”¨è§£è€¦&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BC%98%E7%82%B9%E4%BA%8C%E5%BC%82%E6%AD%A5%E6%8F%90%E9%80%9F\&#34;&gt;ä¼˜ç‚¹äºŒï¼šå¼‚æ­¥æé€Ÿ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BC%98%E7%82%B9%E4%B8%89%E5%89%8A%E5%B3%B0%E5%A1%AB%E8%B0%B7\&#34;&gt;ä¼˜ç‚¹ä¸‰ï¼šå‰Šå³°å¡«è°·&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%89%8A%E5%B3%B0\&#34;&gt;å‰Šå³°&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%A1%AB%E8%B0%B7\&#34;&gt;å¡«è°·&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%B0%8F%E7%BB%93\&#34;&gt;å°ç»“&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BC%98%E7%82%B9%E5%B0%8F%E7%BB%93\&#34;&gt;ä¼˜ç‚¹å°ç»“&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#mq%E7%9A%84%E7%BC%BA%E7%82%B9\&#34;&gt;MQçš„ç¼ºç‚¹&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%B8%B8%E8%A7%81%E7%9A%84mq%E4%BA%A7%E5%93%81\&#34;&gt;å¸¸è§çš„MQäº§å“&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#rabbitmq\&#34;&gt;RabbitMQ&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#amqp%E7%AE%80%E4%BB%8B\&#34;&gt;AMQPç®€ä»‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#rabbitmq%E7%AE%80%E4%BB%8B\&#34;&gt;RabbitMQç®€ä»‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BD%BF%E7%94%A8docker%E5%AE%89%E8%A3%85rabbitmq\&#34;&gt;ä½¿ç”¨Dockerå®‰è£…RabbitMQ&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F\&#34;&gt;æ‹‰å–é•œåƒ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%80%9A%E8%BF%87%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8rabbitmq\&#34;&gt;é€šè¿‡å®¹å™¨å¯åŠ¨RabbitMQ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%AE%BF%E9%97%AErabbitmq\&#34;&gt;è®¿é—®RabbitMQ&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%80%9A%E8%BF%87springboot%E6%95%B4%E5%90%88rabbitmq\&#34;&gt;é€šè¿‡SpringBootæ•´åˆRabbitMQ&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B\&#34;&gt;åˆ›å»ºå·¥ç¨‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\&#34;&gt;é…ç½®æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%88%9B%E5%BB%BAexchange\&#34;&gt;åˆ›å»ºExchange&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%B8%B8%E8%A7%81queue\&#34;&gt;å¸¸è§Queue&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%BB%91%E5%AE%9Aexchange%E5%92%8Cqueue\&#34;&gt;ç»‘å®šexchangeå’Œqueue&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B5%8B%E8%AF%95direct\&#34;&gt;æµ‹è¯•direct&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B5%8B%E8%AF%95fanout\&#34;&gt;æµ‹è¯•fanout&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%88%9B%E5%BB%BA%E7%9B%91%E5%90%AC%E5%99%A8\&#34;&gt;åˆ›å»ºç›‘å¬å™¨&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B5%8B%E8%AF%95topic\&#34;&gt;æµ‹è¯•topic&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h1 id=\&#34;ç†”æ–­å™¨hystrix\&#34;&gt;ç†”æ–­å™¨Hystrix&lt;/h1&gt;\n&lt;h2 id=\&#34;ç®€ä»‹\&#34;&gt;ç®€ä»‹&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;hystrixåœ¨è‹±æ–‡é‡Œçš„æ„æ€æ˜¯è±ªçŒªï¼Œå®ƒçš„logoå°±æ˜¯ä¸€å¤´è±ªçŒªï¼Œåˆºè®©æˆ‘æƒ³åˆ°çš„æ˜¯è‡ªæˆ‘ä¿æŠ¤ï¼Œhystrixå®ƒå°±æ˜¯ä¸€æ¬¾æä¾›ä¿æŠ¤æœºåˆ¶é¢ç»„ä»¶ï¼Œå®ƒå’Œeurekaä¸€æ ·ä¹Ÿæ˜¯Netflixå…¬å¸å¼€å‘çš„&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592150422551.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h2 id=\&#34;é›ªå´©é—®é¢˜\&#34;&gt;é›ªå´©é—®é¢˜&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å¾®æœåŠ¡ä¸­ï¼ŒæœåŠ¡ä¹‹é—´è°ƒç”¨å…³ç³»æ˜¯é”™ç»¼å¤æ‚çš„ï¼Œä¸€ä¸ªè¯·æ±‚ï¼Œå¯èƒ½éœ€è¦è°ƒç”¨å¤šä¸ªå¾®æœåŠ¡ç»å£æ‰èƒ½å®ç°ï¼Œä¼šå½¢æˆéå¸¸å¤æ‚çš„è°ƒç”¨é“¾è·¯&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;2\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592150428504.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å¦‚å›¾ï¼šä¸€æ¬¡ä¸šåŠ¡è¯·æ±‚ï¼Œéœ€è¦è°ƒç”¨Aã€Pã€Hã€Iå››ä¸ªæœåŠ¡ï¼Œè¿™å››ä¸ªæœåŠ¡åˆæœ‰å¯èƒ½è°ƒç”¨äº†å…¶ä»–çš„æœåŠ¡ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;å¦‚æœæ­¤æ—¶ï¼ŒæŸä¸ªæœåŠ¡å‡ºç°äº†å¼‚å¸¸ï¼š&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;3\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592150432891.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä¾‹å¦‚ï¼šå¾®æœåŠ¡Iå‡ºç°äº†å¼‚å¸¸ï¼Œè¯·æ±‚å°±ä¼šé˜»å¡ï¼Œç”¨çƒè¯·æ±‚å°±ä¼šå¾—ä¸åˆ°å“åº”ï¼Œåˆ™tomcatçš„è¿™ä¸ªçº¿ç¨‹å°±ä¸ä¼šé‡Šæ”¾ï¼Œäºæ˜¯è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·è¯·æ±‚åˆ°æ¥ï¼Œè¶Šæ¥è¶Šå¤šé¢çº¿ç¨‹ä¼šé˜»å¡&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;4\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592150437036.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æœåŠ¡å™¨æ”¯æŒçš„çº¿ç¨‹å’Œå¹¶å‘æ•°æ˜¯æœ‰é™çš„ï¼Œè¯·æ±‚ä¸€ç›´é˜»å¡ï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨çš„èµ„æºè€—å°½ï¼Œä»è€Œå¯¼è‡´æ‰€æœ‰é¢å…¶ä»–æœåŠ¡éƒ½ä¸å¯ç”¨ï¼Œå½¢æˆé›ªå´©æ•ˆåº”ã€‚&lt;/p&gt;\n&lt;p&gt;è¿™å°±å¥½æ¯”ï¼šæ‘é‡Œéƒ½ç”¨ä¸€ä¸ªå˜å‹å™¨ï¼Œæœ‰ä¸€å®¶ç”¨çƒ­å¾—å¿«çƒ§æ°´å¯¼è‡´ç”µè·¯çŸ­è·¯æœ€ç»ˆçƒ§äº†ç”µè·¯ï¼Œç»“æœå´å¯¼è‡´æ‘é‡Œæ‰€æœ‰å®¶åº­éƒ½æ— æ³•ç”¨ç”µï¼ˆè§£å†³æ–¹æ¡ˆï¼šæ¯å®¶æ¯æˆ·éƒ½è£…ä¸€ä¸ªä¿é™©ä¸ï¼Œä¸€å®¶çƒ§æ¯ï¼Œä¸æƒ³èµ¢å…¶ä»–å®¶åº­ç”¨ç”µï¼‰&lt;/p&gt;\n&lt;p&gt;è¿™ä¹Ÿå¥½æ¯”ï¼šä¸€ä¸ªæ±½è½¦ç”Ÿäº§çº¿ï¼Œç”Ÿæˆä¸åŒçš„æ±½è½¦ï¼Œéœ€è¦çš„æ˜¯ä¸åŒçš„é›¶ä»¶ï¼Œè‹¥æœæŸä¸ªé›¶ä»¶å› ä¸ºç§ç§åŸå› æ— æ³•ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±ä¼šæ—©æˆæ•´å°è½¦æ— æ³•è£…é…ï¼Œé™·å…¥äº†ç­‰å¾…é›¶ä»¶çš„çŠ¶æ€ï¼ŒçŸ¥é“é›¶ä»¶åˆ°ä½ï¼Œæ‰èƒ½ç»§ç»­ç»„è£…ä»¶ï¼Œæ­¤æ—¶å¦‚æœæœ‰å¾ˆå¤šçš„è½¦å‹éƒ½éœ€è¦è¿™ä¸ªé›¶ä»¶ï¼Œé‚£ä¹ˆæ•´ä¸ªå·¥å‚å°±å°†é™·å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¯¼è‡´æ‰€æœ‰çš„ç”Ÿæˆéƒ½ç˜«ç—ªï¼Œä¸€ä¸ªé›¶ä»¶çš„å‰¥èŒ§èŒƒå›´ä¸æ–­çš„æ‰©å¤§.è¿™å°±æ˜¯é›ªå´©&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;Hystrixè§£å†³çš„é›ªå´©é—®é¢˜çš„æ‰‹æ®µä¸»è¦æ˜¯æœåŠ¡é™çº§ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;çº¿ç¨‹éš”ç¦»&lt;/li&gt;\n&lt;li&gt;æœåŠ¡ç†”æ–­&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;çº¿ç¨‹éš”ç¦»æœåŠ¡é™çº§\&#34;&gt;çº¿ç¨‹éš”ç¦»&amp;amp;æœåŠ¡é™çº§&lt;/h2&gt;\n&lt;h3 id=\&#34;åŸç†\&#34;&gt;åŸç†&lt;/h3&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;5\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592150445282.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;è§£è¯»è¯¥å›¾ï¼š&lt;/p&gt;\n&lt;p&gt;Hystrixä¸ºæ¯ä¸ªä¾èµ–æœåŠ¡è°ƒç”¨åˆ†é…ä¸€ä¸ªå°çš„çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± å·²æ»¡è°ƒç”¨å°±ä¼šè¢«ç«‹å³æ‹’ç»ï¼Œé»˜è®¤ä¸é‡‡ç”¨æ’é˜Ÿï¼ŒåŠ é€Ÿå¤±è´¥åˆ¤å®šæ—¶é—´ã€‚&lt;/p&gt;\n&lt;p&gt;ç”¨æˆ·çš„è¯·æ±‚å°†ä¸å†ç›´æ¥è®¿é—®æœåŠ¡ï¼Œè€Œæ˜¯é€šè¿‡çº¿ç¨‹æ± ä¸­çš„ç©ºé—²çº¿ç¨‹æ¥è®¿é—®æœåŠ¡ï¼Œå¦‚æœçº¿ç¨‹æ± å·²ç»æ»¡äº†ï¼Œæˆ–è€…æ˜¯è¯·æ±‚è¶…æ—¶ï¼Œåˆ™ä¼šè¿›è¡Œé™çº§å¤„ç†&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ï¼ˆæœåŠ¡é™çº§ï¼šæœ‰é™ä¿è¯æ ¸å¿ƒæœåŠ¡ï¼Œè€Œéæ ¸å¿ƒæœåŠ¡ä¸å¯ç”¨æˆ–å¼±å¯ç”¨ï¼‰&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;ç”¨æˆ·çš„è¯·æ±‚æ•…éšœçš„æ—¶å€™ï¼Œä¸ä¼šè¢«é˜»å¡ï¼Œæ›´ä¸ä¼šæ— ä¼‘æ­¢çš„ç­‰å¾…æˆ–è€…æ˜¯çœ‹åˆ°ç³»ç»Ÿå´©æºƒï¼Œè‡³å°‘å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ‰§è¡Œçš„ç»“æœï¼ˆä¸€ä¸ªå‹å¥½çš„ç•Œé¢ï¼‰&lt;/p&gt;\n&lt;p&gt;æœåŠ¡é™çº§è™½ç„¶ä¼šå¯¼è‡´è¯·æ±‚å¤±è´¥ï¼Œä½†æ˜¯ä¸ä¼šå¯¼è‡´é˜»å¡ï¼Œè€Œä¸”æœ€å¤šä¼šå½±å“è¿™ä¸ªä¾èµ–æœåŠ¡å¯¹åº”çš„çº¿ç¨‹æ± ä¸­çš„èµ„æºï¼Œå¯¹å…¶å®ƒæœåŠ¡å®Œå…¨æ²¡æœ‰å½±å“ã€‚&lt;/p&gt;\n&lt;p&gt;hysrixæœåŠ¡é™çº§çš„æƒ…å†µ&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;çº¿ç¨‹æ± å·²æ»¡&lt;/li&gt;\n&lt;li&gt;è¯·æ±‚è¶…æ—¶&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h3 id=\&#34;æ¡ˆä¾‹\&#34;&gt;æ¡ˆä¾‹&lt;/h3&gt;\n&lt;h4 id=\&#34;åœ¨user-webå·¥ç¨‹ä¸­ä¾èµ–hystrix\&#34;&gt;åœ¨user-webå·¥ç¨‹ä¸­ä¾èµ–hystrix&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-cloud-starter-netflix-hystrix&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;å¼€å¯ç†”æ–­\&#34;&gt;å¼€å¯ç†”æ–­&lt;/h4&gt;\n&lt;p&gt;åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ &lt;code&gt;@EnableCircuitBreaker&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@SpringBootApplication\n@EnableDiscoveryClient  //å¼€å¯å‘ç°æœåŠ¡\n@EnableCircuitBreaker\npublic class UserWebApplication {\n    ...\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œç±»ä¸Šé¢çš„æ³¨è§£è¶Šæ¥è¶Šå¤šäº†ï¼Œåœ¨å¾®æœåŠ¡ä¸­ï¼Œç»å¸¸å¼•å…¥ä¸Šé¢çš„ä¸‰ä¸ªæ³¨è§£ï¼Œå­¦ä¹ ä¸€ä¸ªç»„åˆæ³¨è§£&lt;code&gt;@SpringCloudApplication&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;å®ƒçš„æºç å¦‚ä¸‹ï¼š&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@SpringBootApplication\n@EnableDiscoveryClient\n@EnableCircuitBreaker\npublic @interface SpringCloudApplication {\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥æ³¨è§£&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@SpringCloudApplication\npublic class UserWebApplication {\n    ....\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;ç¼–å†™é™çº§é€»è¾‘\&#34;&gt;ç¼–å†™é™çº§é€»è¾‘&lt;/h4&gt;\n&lt;p&gt;å½“ç›®æ ‡æœåŠ¡çš„è°ƒç”¨å‡ºç°æ•…éšœï¼Œæˆ‘ä»¬å¸Œæœ›å¿«é€Ÿå¤±è´¥ï¼Œç»™ç”¨æˆ·ä¸€ä¸ªå‹å¥½çš„æç¤ºï¼Œå› æ­¤éœ€è¦æå‰ç¼–å†™å¥½å¤±è´¥çš„æ—¶å€™çš„é™çº§é€»è¾‘ï¼Œä½¿ç”¨HystrixCommandæ¥å®Œæˆ&lt;/p&gt;\n&lt;p&gt;å¯¹User-webä¸­çš„controllerè¿›è¡Œæ”¹é€ &lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RestController\n@RequestMapping(&amp;quot;/consumer&amp;quot;)\npublic class ConsumerController {\n    @Autowired\n    private RestTemplate restTemplate;\n\n    @Autowired\n    private DiscoveryClient discoveryClient;\n\n    @RequestMapping(&amp;quot;/{id}&amp;quot;)\n    @HystrixCommand(fallbackMethod = &amp;quot;queryByIdFallback&amp;quot;)\n    public User getByyid(@PathVariable(&amp;quot;id&amp;quot;) Long id){\n        //ä½¿ç”¨è´Ÿè½½å‡è¡¡ï¼ˆRibbonï¼‰\n        String url = &amp;quot;http://user-service/user/&amp;quot; + id;\n        return restTemplate.getForObject(url,User.class);\n    }\n    //ç†”æ–­çš„æ–¹æ³•ï¼šæ–¹æ³•åå’Œæ­£å¸¸çš„æ–¹æ³•åä¸€è‡´ï¼Œå‚æ•°ä¸€è‡´\n    public User queryByIdFallback(Long id){\n        User user = new User();\n        user.setId(id);\n        user.setNote(&amp;quot;å¯¹ä¸èµ·ç½‘ç»œå¤ªç”¨æ‹¥æŒ¤äº†ï¼&amp;quot;);\n        return user;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;å¯ä»¥åœæ‰user-serviceæœåŠ¡ï¼Œåœ¨è¿›è¡Œuse-webçš„è®¿é—®æµ‹è¯•&lt;/p&gt;\n&lt;p&gt;è¯´æ˜ï¼š@HystrixCommand(fallbackMethod = &amp;quot;queryByIdFallback&amp;quot;)ï¼›ç”¨æ¥å£°æ˜ä¸€ä¸ªé™çº§é€»è¾‘çš„æ–¹æ³•&lt;/p&gt;\n&lt;h4 id=\&#34;é»˜è®¤çš„fallback\&#34;&gt;é»˜è®¤çš„fallback&lt;/h4&gt;\n&lt;p&gt;åˆšæ‰æ˜¯å§fallbackå†™åœ¨äº†æŸä¸ªä¸šåŠ¡çš„æ–¹æ³•ä¸Šï¼Œå¦‚æœè¿™æ ·çš„æ–¹æ³•å¤šäº†ï¼Œå°±ä¼šå¯¼è‡´æ¯ä¸ªæ–¹æ³•éƒ½å†™ä¸€ä¸ªfallbackï¼Œå®é™…ä¸Šå¯èƒ½æ„ä¹‰ä¸å¤§ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™é»˜è®¤çš„fallback&lt;/p&gt;\n&lt;p&gt;å¯¹controlleræ”¹é€ &lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RestController\n@RequestMapping(&amp;quot;/consumer&amp;quot;)\n@DefaultProperties(defaultFallback = &amp;quot;defaultFallback&amp;quot;)\npublic class ConsumerController {\n    @Autowired\n    private RestTemplate restTemplate;\n\n    @Autowired\n    private DiscoveryClient discoveryClient;\n\n    @RequestMapping(&amp;quot;/{id}&amp;quot;)\n    //@HystrixCommand(fallbackMethod = &amp;quot;queryByIdFallback&amp;quot;)\n    @HystrixCommand\n    public User getByyid(@PathVariable(&amp;quot;id&amp;quot;) Long id){\n        //ä½¿ç”¨è´Ÿè½½å‡è¡¡ï¼ˆRibbonï¼‰\n        String url = &amp;quot;http://user-service/user/&amp;quot; + id;\n        return restTemplate.getForObject(url,User.class);\n    }\n    //ç†”æ–­çš„æ–¹æ³•ï¼šæ–¹æ³•åå’Œæ­£å¸¸çš„æ–¹æ³•åä¸€è‡´ï¼Œå‚æ•°ä¸€è‡´\n    public User queryByIdFallback(Long id){\n        User user = new User();\n        user.setId(id);\n        user.setNote(&amp;quot;å¯¹ä¸èµ·ç½‘ç»œå¤ªç”¨æ‹¥æŒ¤äº†ï¼&amp;quot;);\n        return user;\n    }\n\n    //é»˜è®¤æœåŠ¡ç†”æ–­\n    public User defaultFallback(){\n        User user = new User();\n        user.setNote(&amp;quot;é»˜è®¤æç¤ºï¼šå¯¹ä¸èµ·,ç½‘ç»œå¤ªç”¨æ‹¥æŒ¤äº†ï¼&amp;quot;);\n        return user;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;è¶…æ—¶è®¾ç½®\&#34;&gt;è¶…æ—¶è®¾ç½®&lt;/h4&gt;\n&lt;p&gt;åœ¨æ¡ˆä¾‹ä¸­ï¼Œè¯·æ±‚åœ¨è¶…è¿‡1ç§’åéƒ½ä¼šè¿”å›é”™è¯¯ä¿¡æ¯ï¼Œè¿™æ˜¯å› ä¸ºHystirxçš„é»˜è®¤è¶…æ—¶æ—¶é—´æ˜¯1ç§’&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-yml\&#34;&gt;hystrix:\n  command:\n    default:\n      execution:\n        isolation:\n          thread:\n            timeoutInMilliseconds: 2000\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;è¿™ä¸ªé…ç½®ä¼šä½œç”¨äºå…¨å±€æ‰€æœ‰çš„æ–¹æ³•&lt;/p&gt;\n&lt;p&gt;ä¸ºäº†æ¼”ç¤ºè¿™ä¸ªæ•ˆæœï¼Œæˆ‘å…ˆå°†ä¸Šé¢çš„2000æ¢å¤åˆ°é»˜è®¤å€¼æ˜¯1000ï¼Œç„¶åä¿®æ”¹äº†user-serviceä¸­çš„serviceæ–¹æ³•ï¼Œç»™2ç§’çš„è®¿é—®å»¶è¿Ÿ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Service\npublic class UserServiceImpl implements UserService {\n    @Autowired\n    private UserRepository userRepository;\n    @Override\n    public User getUserById(Long id) {\n        try {\n            Thread.sleep(2000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        return userRepository.findUserById(id);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;æ¥ç€æˆ‘ä»¬å†è®¿é—®user-webï¼Œå‘ç°å³ä½¿user-serviceæœåŠ¡æ˜¯èƒ½æ­£å¸¸æä¾›æœåŠ¡ï¼Œä½†æ˜¯ä»–ä»¬çš„é€šè®¯æ—¶é—´è¶…è¿‡äº†1ç§’è¿˜æ˜¯ä¼šå‡ºç°é—®é¢˜ã€‚æ¥ä¸‹æ¥ï¼Œå°†ä¸Šé¢çš„é…ç½®æ”¹ä¸º3000æ¯«ç§’ï¼Œæ¥ä¸‹æ¥å°±èƒ½æ­£å¸¸è®¿é—®äº†&lt;/p&gt;\n&lt;h2 id=\&#34;æœåŠ¡ç†”æ–­\&#34;&gt;æœåŠ¡ç†”æ–­&lt;/h2&gt;\n&lt;h3 id=\&#34;åŸç†-2\&#34;&gt;åŸç†&lt;/h3&gt;\n&lt;p&gt;åœ¨æœåŠ¡ç†”æ–­ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ç†”æ–­å™¨ï¼Œä¹Ÿå«æ–­è·¯å™¨ï¼Œè‹±æ–‡å«ï¼šCircuit Breaker&lt;/p&gt;\n&lt;p&gt;ç†”æ–­å™¨è·Ÿå®¶ç”¨çš„ä¿é™©ä¸åŸç†ç±»ä¼¼ï¼šå½“å¦‚æœç”µè·¯å‘ç”Ÿäº†çŸ­è·¯çš„æ—¶å€™èƒ½å¤Ÿç«‹å³ç†”æ–­ç”µè·¯ï¼Œé¿å…ç¾éš¾çš„å‘ç”Ÿã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„åº”ç”¨ä¸­åº”ç”¨æœåŠ¡ç†”æ–­åï¼ŒæœåŠ¡è°ƒç”¨æ–¹å¯ä»¥è‡ªå·±è¿›è¡Œåˆ¤æ–­å“ªäº›æœåŠ¡ååº”æ…¢æˆ–è€…æ˜¯å­˜åœ¨å¤§é‡çš„è¶…æ—¶ï¼Œå¯ä»¥é’ˆå¯¹è¿™äº›æœåŠ¡è¿›è¡Œä¸»åŠ¨ç†”æ–­ï¼Œé˜²æ­¢æ•´ä¸ªç³»ç»Ÿè¢«æ‹–å®&lt;/p&gt;\n&lt;p&gt;Hystrixçš„æœåŠ¡ç†”æ–­æœºåˆ¶ï¼Œå¯ä»¥å®ç°å¼¹æ€§å®¹é”™ï¼Œå½“æœåŠ¡è¯·æ±‚æƒ…å†µå¥½è½¬ä¹‹åï¼Œå¯ä»¥è‡ªåŠ¨é‡è¿ã€‚é€šè¿‡çŸ­è·¯çš„æ–¹å¼ï¼Œå°†åç»­è¯·æ±‚ç›´æ¥æ‹’ç»ï¼Œä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤æ—¶é—´æ˜¯5ç§’ï¼‰ä¹‹åå…è®¸éƒ¨åˆ†è¯·æ±‚é€šè¿‡ï¼Œå¦‚æœè°ƒç”¨æˆåŠŸåˆ™å›åˆ°æ–­è·¯å™¨å…³é—­çŠ¶æ€ï¼Œå¦åˆ™å°†ç»§ç»­æ‰“å¼€ï¼Œæ‹’ç»è¯·æ±‚çš„æœåŠ¡ã€‚&lt;/p&gt;\n&lt;p&gt;Hystirxçš„ç†”æ–­çŠ¶æ€æ¨¡å‹ï¼š&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;6\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1592150460918.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&#34;,&#34;fileName&#34;:&#34;rong-duan-qi-hystrix&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34; ç†”æ–­å™¨Hystrix&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;hystrix&#34;,&#34;slug&#34;:&#34;nH8Xd-9Pr&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/nH8Xd-9Pr/&#34;},{&#34;name&#34;:&#34;Spring-Cloud&#34;,&#34;slug&#34;:&#34;omgSh_ZiA&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/omgSh_ZiA/&#34;}],&#34;date&#34;:&#34;2020-06-14 23:59:28&#34;,&#34;dateFormat&#34;:&#34;2020-06-14&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/rong-duan-qi-hystrix/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;7 min read&#34;,&#34;time&#34;:411000,&#34;words&#34;:1806,&#34;minutes&#34;:7},&#34;description&#34;:&#34;ç†”æ–­å™¨Hystrix\nç®€ä»‹\n\nhystrixåœ¨è‹±æ–‡é‡Œçš„æ„æ€æ˜¯è±ªçŒªï¼Œå®ƒçš„logoå°±æ˜¯ä¸€å¤´è±ªçŒªï¼Œåˆºè®©æˆ‘æƒ³åˆ°çš„æ˜¯è‡ªæˆ‘ä¿æŠ¤ï¼Œhystrixå®ƒå°±æ˜¯ä¸€æ¬¾æä¾›ä¿æŠ¤æœºåˆ¶é¢ç»„ä»¶ï¼Œå®ƒå’Œeurekaä¸€æ ·ä¹Ÿæ˜¯Netflixå…¬å¸å¼€å‘çš„\n\n\né›ªå´©é—®é¢˜\n\nå¾®æœåŠ¡ä¸­ï¼ŒæœåŠ¡...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%86%94%E6%96%AD%E5%99%A8hystrix\&#34;&gt;ç†”æ–­å™¨Hystrix&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%AE%80%E4%BB%8B\&#34;&gt;ç®€ä»‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%9B%AA%E5%B4%A9%E9%97%AE%E9%A2%98\&#34;&gt;é›ªå´©é—®é¢˜&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%BA%BF%E7%A8%8B%E9%9A%94%E7%A6%BB%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7\&#34;&gt;çº¿ç¨‹éš”ç¦»&amp;amp;æœåŠ¡é™çº§&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8E%9F%E7%90%86\&#34;&gt;åŸç†&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%A1%88%E4%BE%8B\&#34;&gt;æ¡ˆä¾‹&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%9C%A8user-web%E5%B7%A5%E7%A8%8B%E4%B8%AD%E4%BE%9D%E8%B5%96hystrix\&#34;&gt;åœ¨user-webå·¥ç¨‹ä¸­ä¾èµ–hystrix&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%BC%80%E5%90%AF%E7%86%94%E6%96%AD\&#34;&gt;å¼€å¯ç†”æ–­&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%BC%96%E5%86%99%E9%99%8D%E7%BA%A7%E9%80%BB%E8%BE%91\&#34;&gt;ç¼–å†™é™çº§é€»è¾‘&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%BB%98%E8%AE%A4%E7%9A%84fallback\&#34;&gt;é»˜è®¤çš„fallback&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%B6%85%E6%97%B6%E8%AE%BE%E7%BD%AE\&#34;&gt;è¶…æ—¶è®¾ç½®&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD\&#34;&gt;æœåŠ¡ç†”æ–­&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8E%9F%E7%90%86-2\&#34;&gt;åŸç†&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h1 id=\&#34;ribbon\&#34;&gt;Ribbon&lt;/h1&gt;\n&lt;h2 id=\&#34;ä»€ä¹ˆæ˜¯ribbon\&#34;&gt;ä»€ä¹ˆæ˜¯Ribbon&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Ribbonæ˜¯Netflixå‘å¸ƒçš„ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼Œå®ƒæœ‰åŠ©äºæ§åˆ¶Httpå’ŒTCPå®¢æˆ·ç«¯çš„è¡Œä¸ºã€‚ä¸ºRibboné…ç½®æœåŠ¡æä¾›è€…åˆ—è¡¨åï¼ŒRibbonå°±å¯ä»¥åŸºäºæŸç§è´Ÿè½½å‡è¡¡çš„ç®—æ³•ï¼Œè‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªæœåŠ¡ç»™æ¶ˆè´¹è€…ã€‚Ribboné»˜è®¤è´Ÿè½½å‡è¡¡ç®—æ³•æ˜¯è½®è¯¢ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰éšæœºç­‰ï¼Œå½“ç„¶å®é™…å¼€å‘ä¸­ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡çš„ç®—æ³•&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;æœåŠ¡ä¹‹é—´çš„é€šè®¯é—®é¢˜\&#34;&gt;æœåŠ¡ä¹‹é—´çš„é€šè®¯é—®é¢˜&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æ°¸è¿œæ˜¯ä»eurekaä¸­æ‹‰å–åˆ°äº†æœåŠ¡æä¾›è€…çš„åˆ—è¡¨ï¼Œä½†æ˜¯æ°¸è¿œåªç”¨ç¬¬ä¸€ä¸ªæœåŠ¡ï¼Œå…¶ä»–çš„æœåŠ¡å°±éƒ½é—²ç½®ç€äº†&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RequestMapping(&amp;quot;/{id}&amp;quot;)\npublic User getByyid(@PathVariable(&amp;quot;id&amp;quot;) Long id){\n    //åœ°å€ä»eurekaä¸­è·å–\n    List&amp;lt;ServiceInstance&amp;gt; instancesList = discoveryClient.getInstances(&amp;quot;user-service&amp;quot;);\n    //æœ‰å¯èƒ½æœ‰å¤šä¸ªæœåŠ¡ï¼Œæˆ‘åªéœ€è¦æ‹¿ä¸€ä¸ª\n    ServiceInstance serviceInstance = instancesList.get(0);\n    //ç»„è£…\n    String url = &amp;quot;http://&amp;quot;+ serviceInstance.getHost()+&amp;quot;:&amp;quot;+serviceInstance.getPort()+&amp;quot;/user/&amp;quot; + id;\n    //é‡‡ç”¨httpçš„æ–¹å¼ç³»ç»Ÿä¹‹é—´é€šè®¯\n    return restTemplate.getForObject(url,User.class);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡ä¸€ç§ç®—æ³•ï¼Œåˆç†çš„é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªæœåŠ¡ã€‚å¯ä»¥é€šè¿‡ç¼–å†™è´Ÿè½½å‡è¡¡çš„ç®—æ³•ï¼Œåœ¨å¤šä¸ªå®ä¾‹åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªæœåŠ¡&lt;/p&gt;\n&lt;p&gt;ä¸è¿‡Eurkeaä¸­å·²ç»é›†æˆäº†è´Ÿè½½å‡è¡¡ç»„ä»¶ï¼šRibbonï¼ˆç®€å•çš„ä¿®æ”¹ä»£ç å³å¯ä½¿ç”¨ï¼‰&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;å®æˆ˜\&#34;&gt;å®æˆ˜&lt;/h2&gt;\n&lt;h3 id=\&#34;1-å…ˆå¯åŠ¨2ä¸ªuser-serviceå®ä¾‹\&#34;&gt;1ã€å…ˆå¯åŠ¨2ä¸ªuser-serviceå®ä¾‹&lt;/h3&gt;\n&lt;h3 id=\&#34;2-åœ¨user-webå·¥ç¨‹ä¸­å¼€å¯è´Ÿè½½å‡è¡¡\&#34;&gt;2ã€åœ¨user-webå·¥ç¨‹ä¸­å¼€å¯è´Ÿè½½å‡è¡¡&lt;/h3&gt;\n&lt;p&gt;åœ¨eureka-clientçš„åŒ…ä¸­å·²ç»é›†æˆäº†Ribbonï¼Œæ‰€ä»¥ä¸éœ€è¦å¯¼å…¥æ–°çš„ä¾èµ–&lt;/p&gt;\n&lt;p&gt;ç›´æ¥ä¿®æ”¹å¯åŠ¨ç±»ï¼Œæ·»åŠ å¼€å¯çš„æ³¨è§£ï¼ˆåœ¨RestTemplateä¸Šé¢æ·»åŠ @LoadBalancedï¼‰&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@SpringBootApplication\n@EnableDiscoveryClient  //å¼€å¯å‘ç°æœåŠ¡\npublic class UserWebApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(UserWebApplication.class, args);\n    }\n    \n    @Bean\n    @LoadBalanced\n    public RestTemplate restTemplate(){\n        return new RestTemplate();\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;3-ä¿®æ”¹controllerä¸­è·å–æœåŠ¡çš„æ–¹æ³•\&#34;&gt;3ã€ä¿®æ”¹controllerä¸­è·å–æœåŠ¡çš„æ–¹æ³•&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RequestMapping(&amp;quot;/{id}&amp;quot;)\npublic User getByyid(@PathVariable(&amp;quot;id&amp;quot;) Long id){\n\n    //ä½¿ç”¨è´Ÿè½½å‡è¡¡ï¼ˆRibbonï¼‰\n    String url = &amp;quot;http://user-service/user/&amp;quot; + id;\n    return restTemplate.getForObject(url,User.class);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;æ¥ä¸‹æ¥æµ‹è¯•å°±å¯ä»¥é€šäº†&lt;/p&gt;\n&lt;p&gt;å…³æ‰ä¸€ä¸ªuser-serviceåæµ‹è¯•æ˜¯å¦å¯ä»¥æ­£å¸¸è·å–åˆ°æœåŠ¡&lt;/p&gt;\n&lt;p&gt;å†å¯åŠ¨å…³æ‰çš„é‚£ä¸ªuser-serviceåå…³æ‰ç¬¬äºŒä¸ªuser-serviceæœåŠ¡å†æµ‹è¯•ã€‚&lt;/p&gt;\n&#34;,&#34;fileName&#34;:&#34;ribbon-fu-zai-jun-heng-qi&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34; Ribbonè´Ÿè½½å‡è¡¡å™¨&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;Ribbon&#34;,&#34;slug&#34;:&#34;7HXRiZgDt&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/7HXRiZgDt/&#34;},{&#34;name&#34;:&#34;Spring-Cloud&#34;,&#34;slug&#34;:&#34;omgSh_ZiA&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/omgSh_ZiA/&#34;}],&#34;date&#34;:&#34;2020-06-14 23:58:32&#34;,&#34;dateFormat&#34;:&#34;2020-06-14&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/ribbon-fu-zai-jun-heng-qi/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;3 min read&#34;,&#34;time&#34;:128000,&#34;words&#34;:526,&#34;minutes&#34;:3},&#34;description&#34;:&#34;Ribbon\nä»€ä¹ˆæ˜¯Ribbon\n\nRibbonæ˜¯Netflixå‘å¸ƒçš„ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼Œå®ƒæœ‰åŠ©äºæ§åˆ¶Httpå’ŒTCPå®¢æˆ·ç«¯çš„è¡Œä¸ºã€‚ä¸ºRibboné…ç½®æœåŠ¡æä¾›è€…åˆ—è¡¨åï¼ŒRibbonå°±å¯ä»¥åŸºäºæŸç§è´Ÿè½½å‡è¡¡çš„ç®—æ³•ï¼Œè‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªæœåŠ¡ç»™...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;&lt;a href=\&#34;#ribbon\&#34;&gt;Ribbon&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BB%80%E4%B9%88%E6%98%AFribbon\&#34;&gt;ä»€ä¹ˆæ˜¯Ribbon&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9C%8D%E5%8A%A1%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E8%AE%AF%E9%97%AE%E9%A2%98\&#34;&gt;æœåŠ¡ä¹‹é—´çš„é€šè®¯é—®é¢˜&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AE%9E%E6%88%98\&#34;&gt;å®æˆ˜&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E5%85%88%E5%90%AF%E5%8A%A82%E4%B8%AAuser-service%E5%AE%9E%E4%BE%8B\&#34;&gt;1ã€å…ˆå¯åŠ¨2ä¸ªuser-serviceå®ä¾‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E5%9C%A8user-web%E5%B7%A5%E7%A8%8B%E4%B8%AD%E5%BC%80%E5%90%AF%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1\&#34;&gt;2ã€åœ¨user-webå·¥ç¨‹ä¸­å¼€å¯è´Ÿè½½å‡è¡¡&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E4%BF%AE%E6%94%B9controller%E4%B8%AD%E8%8E%B7%E5%8F%96%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%96%B9%E6%B3%95\&#34;&gt;3ã€ä¿®æ”¹controllerä¸­è·å–æœåŠ¡çš„æ–¹æ³•&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;ä»€ä¹ˆæ˜¯eureka\&#34;&gt;ä»€ä¹ˆæ˜¯Eureka&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ç™¾åº¦ç™¾ç§‘ï¼š&lt;a href=\&#34;https://baike.baidu.com/item/Eureka/22402835?fr=aladdin\&#34;&gt;ä»€ä¹ˆæ˜¯Eureka&lt;/a&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;é—®é¢˜åˆ†æ\&#34;&gt;é—®é¢˜åˆ†æ&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åˆšæ‰çš„æ¡ˆä¾‹ï¼Œuser-serviceå¯¹å¤–æä¾›æœåŠ¡ï¼Œéœ€è¦å¯¹å¤–æš´æ¼è‡ªå·±çš„åœ°å€ã€‚user-webéœ€è¦è®°å½•æœåŠ¡æä¾›è€…çš„åœ°å€ã€‚å°†æ¥åœ°å€å‡ºç°å˜æ›´ï¼Œè¿˜éœ€è¦åŠæ—¶çš„å»æ›´æ–°ã€‚è¿™åœ¨æœåŠ¡è¾ƒå°‘çš„æ—¶å€™ä¸ä¼šè§‰å¾—æœ‰ä»€ä¹ˆï¼Œä½†æ˜¯åœ¨å¤§å‹çš„äº’è”ç½‘é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªé¡¹ç›®å¯èƒ½å·®åˆ†å¤„å‡ åä¸ªå¾®æœåŠ¡ï¼Œæ­¤æ—¶å¦‚æœè¿˜æ˜¯äººä¸ºçš„ç®¡ç†ï¼Œä¸ä»…å¼€å‘å›°éš¾ï¼Œå¥–åŠ±å•Šæµ‹è¯•ã€å‘å¸ƒä¸Šçº¿éƒ½ä¼šæœ‰å¤§éº»çƒ¦&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;&lt;code&gt;ä¸DevOpsæ€æƒ³è¿èƒŒï¼šå°±æ˜¯ç³»ç»Ÿå¯ä»¥é€šè¿‡ä¸€ç»„è¿‡ç¨‹ã€æ–¹æ³•æˆ–è€…æ˜¯ç³»ç»Ÿï¼Œæé«˜åº”ç”¨å‘å¸ƒå’Œè¿ç»´çš„æ•ˆç‡ï¼Œé™ä½ç®¡ç†æˆæœ¬&lt;/code&gt;&lt;/p&gt;\n&lt;h3 id=\&#34;eurekaåšä»€ä¹ˆ\&#34;&gt;Eurekaåšä»€ä¹ˆ&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å¥½æ¯”æ˜¯æˆ¿äº§ä¸­ä»‹ï¼Œè´Ÿè´£ç®¡ç†ã€è®°å½•æœåŠ¡æä¾›è€…çš„ä¿¡æ¯ã€‚æœåŠ¡è°ƒç”¨è€…å°±æ— éœ€è‡ªå·±å»æ‰¾æœåŠ¡ï¼Œè€Œæ˜¯æŠŠè‡ªå·±çš„éœ€æ±‚å‘Šè¯‰Eurekaï¼Œç„¶åEurekaæŠŠç¬¦åˆä½ è¦æ±‚çš„æœåŠ¡å‘Šè¯‰ä½ &lt;/p&gt;\n&lt;p&gt;åŒæ—¶ï¼ŒæœåŠ¡çš„æä¾›æ–¹ä¸Eurekaä¹‹é—´é€šè¿‡â€œå¿ƒè·³â€æœºåˆ¶è¿›è¡Œç›‘æ§ï¼Œå½“æŸä¸ªæœåŠ¡æä¾›æ–¹å‡ºç°é—®é¢˜ï¼ŒEurekaè‡ªç„¶ä¼šæŠŠå®ƒä»æœåŠ¡åˆ—è¡¨ä¸­å‰”é™¤&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;è¿™å°±å®ç°äº†æœåŠ¡çš„è‡ªåŠ¨æ³¨å†Œã€å‘ç°å’ŒçŠ¶æ€ç›‘æ§&lt;/code&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;eurekaæ³¨å†Œä¸­å¿ƒè¯´æ˜\&#34;&gt;Eurekaæ³¨å†Œä¸­å¿ƒè¯´æ˜&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Eurekaçš„ä¸»è¦åŠŸèƒ½æ˜¯è¿›è¡ŒæœåŠ¡ç®¡ç†ï¼Œå®šæœŸæ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼Œè¿”å›æœåŠ¡åœ°å€åˆ—è¡¨ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591806137091.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h2 id=\&#34;å…¥é—¨æ¡ˆä¾‹\&#34;&gt;å…¥é—¨æ¡ˆä¾‹&lt;/h2&gt;\n&lt;p&gt;1ã€åˆ›å»ºspringbooté¡¹ç›®å¹¶æ·»åŠ ä¾èµ–&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;2\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591806146598.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;2ã€åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ æ³¨è§£&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@SpringBootApplication\n@EnableEurekaServer     //å£°æ˜å½“å‰åº”ç”¨æ˜¯eurekaæœåŠ¡\npublic class EurekaServiceApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(EurekaServiceApplication.class, args);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€é…ç½®eureka&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-yml\&#34;&gt;#ç«¯å£å·\nserver:\n  port: 10086\nspring:\n  application:\n    name: eureka-server   #åº”ç”¨åç§°ï¼Œä¼šåœ¨eurekaä¸­ä½œä¸ºæœåŠ¡çš„idæ ‡è¯†\n\n#é…ç½®eurkea\neureka:\n  client:\n    service-url:\n      defaultZone: http://127.0.0.1:10086/eureka\n    register-with-eureka: false       #ä¸æ³¨å†Œè‡ªå·±ï¼Œé»˜è®¤å€¼æ˜¯trueï¼ˆå¦‚æœæ­å»ºeurekaé›†ç¾¤ï¼Œéœ€è¦ç›¸äº’ä¹‹é—´æ³¨å†Œï¼‰\n    fetch-registry: false   #ä¸æ‹‰å–è‡ªå·±çš„æœåŠ¡åˆ—è¡¨\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;4ã€å¯åŠ¨æœåŠ¡&lt;/p&gt;\n&lt;p&gt;è®¿é—®ï¼šhttp://localhost:10086/&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;3\&#34;&gt;&lt;img src=\&#34;Eureka%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83.assets/15.png\&#34; alt=\&#34;15\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h2 id=\&#34;æœåŠ¡æ³¨å†Œ\&#34;&gt;æœåŠ¡æ³¨å†Œ&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æ³¨å†ŒæœåŠ¡ï¼Œå°±æ˜¯åœ¨æœåŠ¡ä¸Šæ·»åŠ Eurekaçš„å®¢æˆ·ç«¯ä¾èµ–ï¼Œå®¢æˆ·ç«¯ä»£ç ä¼šè‡ªåŠ¨æŠŠæœåŠ¡æ³¨å†Œåˆ°EurekaServiceä¸­&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;4\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591806162495.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;æ·»åŠ ä¾èµ–&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- æ·»åŠ mapperçš„å¯åŠ¨å™¨ --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;tk.mybatis&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;mapper-spring-boot-starter&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;2.0.3&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&amp;lt;!-- lombok --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.projectlombok&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;lombok&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;1ã€ä¿®æ”¹å¯åŠ¨ç±»&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@SpringBootApplication\n@MapperScan(basePackages = &amp;quot;com.kgc.mapper&amp;quot;)  //æ‰«æmapperåŒ…ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯tb.mybatis\n@EnableEurekaClient     //å¼€å¯Eurekaå®¢æˆ·ç«¯å‘ç°åŠŸèƒ½\npublic class UserServiceApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(UserServiceApplication.class, args);\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-yml\&#34;&gt;#ç«¯å£å·\nserver:\n  port: 9091\n#æ•°æ®æº\nspring:\n  datasource:\n    driver-class-name: com.mysql.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/springcloud?useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;serverTimezone=Asia/Shanghai\n    username: root\n    password: root\n  application:\n    name: user-service   #åº”ç”¨å\n#æ·»åŠ Eurekaæ³¨å†Œçš„é…ç½®\neureka:\n  client:\n    service-url:\n      defaultZone: http://127.0.0.1:10086/eureka\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€æµ‹è¯•&lt;/p&gt;\n&lt;p&gt;å¯åŠ¨user-serviceå·¥ç¨‹&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;5\&#34;&gt;&lt;img src=\&#34;Eureka%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83.assets/17.png\&#34; alt=\&#34;17\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h2 id=\&#34;æœåŠ¡å‘ç°\&#34;&gt;æœåŠ¡å‘ç°&lt;/h2&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;6\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591806178141.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;1ã€ä¿®æ”¹å¯åŠ¨ç±»&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@SpringBootApplication\n@EnableDiscoveryClient     //å¼€å¯Eureakå®¢æˆ·ç«¯\npublic class UserWebApplication {\n    @Bean\n    public RestTemplate restTemplate(){\n        return new RestTemplate();\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(UserWebApplication.class, args);\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-yml\&#34;&gt;server:\n  port: 8080\nspring:\n  application:\n    name: user-web     #åº”ç”¨åç§°\neureka:\n  client:\n    service-url:\n      defaultZone: http://127.0.0.1:10086/eureka    #eurekaSereråœ°å€\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€ä¿®æ”¹å¤„ç†å™¨&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;package com.cn.controller;\n\nimport com.cn.pojo.User;\nimport com.netflix.appinfo.InstanceInfo;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.cloud.client.ServiceInstance;\nimport org.springframework.cloud.client.discovery.DiscoveryClient;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.client.RestTemplate;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(&amp;quot;/consumer&amp;quot;)\npublic class ConsumerController {\n    @Autowired\n    private RestTemplate restTemplate;\n    //DiscoveryClientçš„ç”¨springCloudåŒ…ä¸­çš„\n    @Autowired(required = false)\n    private DiscoveryClient discoveryClient;\n\n    @RequestMapping(&amp;quot;/{id}&amp;quot;)\n    public User getByid(@PathVariable(&amp;quot;id&amp;quot;) Long id){\n        /*\n        //é€šè¿‡httpçš„æ–¹å¼å®ç°ç³»ç»Ÿä¹‹é—´çš„é€šè®¯\n        String url = &amp;quot;http://localhost:9091/user/&amp;quot; + id;//è¿™ä¸ªæ˜¯user-serviceæä¾›çš„rest apié£æ ¼çš„æ¥å£\n        User user = restTemplate.getForObject(url, User.class);\n        return user;\n         */\n        //ä»eurekaServeræ³¨å†Œä¸­å¿ƒå»è·å–user-serviceçš„å®ä¾‹åˆ—è¡¨\n        List&amp;lt;ServiceInstance&amp;gt; instancesList = discoveryClient.getInstances(&amp;quot;user-service&amp;quot;);\n        //å› ä¸ºæˆ‘å°±ä¸€ä¸ªæœåŠ¡ï¼Œæ‰€ä»¥æˆ‘å°±æ‹¿é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå°±æˆ\n        ServiceInstance serviceInstance = instancesList.get(0);\n        //æœåŠ¡çš„resutApiæ¥å£\n        String url = &amp;quot;http://&amp;quot; + serviceInstance.getHost() + &amp;quot;:&amp;quot; + serviceInstance.getPort() + &amp;quot;/user/&amp;quot; + id;\n        return restTemplate.getForObject(url,User.class);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;4ã€æµ‹è¯•&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;7\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591806191931.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h2 id=\&#34;eureakæ€»ç»“\&#34;&gt;Eureakæ€»ç»“&lt;/h2&gt;\n&lt;p&gt;ä¸‰ä¸ªè§’è‰²&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;æœåŠ¡æ³¨å†Œä¸­å¿ƒ\n&lt;ul&gt;\n&lt;li&gt;Eurekaçš„æœåŠ¡ç«¯åº”ç”¨ï¼Œæä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°åŠŸèƒ½ï¼Œå°±æ˜¯æˆ‘ä»¬å»ºç«‹çš„eureka-server&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;æœåŠ¡æä¾›è€…\n&lt;ul&gt;\n&lt;li&gt;æä¾›æœåŠ¡çš„åº”ç”¨ï¼Œå¯ä»¥æ˜¯springBootåº”ç”¨ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ä»»æ„æŠ€æœ¯å®ç°ï¼Œåªè¦å¯¹å¤–æä¾›çš„æ˜¯Resté£æ ¼æœåŠ¡å°±å¯ã€‚å°±æ˜¯æˆ‘ä»¬å»ºç«‹çš„user-service&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;æœåŠ¡æ¶ˆè´¹è€…\n&lt;ul&gt;\n&lt;li&gt;æ¶ˆè´¹è€…åº”ç”¨å°±æ˜¯ä»æ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡åˆ—è¡¨ï¼Œä»è€Œå¾—çŸ¥æ¯ä¸ªæœåŠ¡æ”¾çš„ä¿¡æ¯ï¼ŒçŸ¥é“å»å“ªé‡Œè°ƒç”¨æœåŠ¡ï¼Œå°±æ˜¯æˆ‘ä»¬å»ºç«‹çš„user-web&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;é«˜å¯ç”¨çš„eureka-server\&#34;&gt;é«˜å¯ç”¨çš„Eureka Server&lt;/h2&gt;\n&lt;p&gt;æˆ‘ä»¬åªæœ‰ä¸€ä¸ªEureakï¼Œäº‹å®ä¸Šå¯ä»¥æ­å»ºä¸€ä¸ªé›†ç¾¤ï¼Œå½¢æˆä¸€ä¸ªé«˜å¯ç”¨çš„Eurekaæ³¨å†Œä¸­å¿ƒ&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æœåŠ¡åŒæ­¥&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;å¤šä¸ªEurekaServerä¹‹é—´ä¼šç›¸äº’æ³¨å†Œä¸ºæœåŠ¡ï¼Œå½“æœåŠ¡æä¾›è€…æ³¨å†Œåˆ°EurekaServerç»“ç¾¤ä¸­çš„æŸä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œè¯¥èŠ‚ç‚¹ä¼šæŠŠæœåŠ¡çš„ä¿¡æ¯åŒæ­¥åˆ°é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œä»è€Œå®ç°æ•°æ®çš„åŒæ­¥ï¼Œä¸€æ—¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‚æ‰äº†ï¼Œé‚£ä¹ˆå…¶ä»–çš„èŠ‚ç‚¹ä¾ç„¶èƒ½æä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°çš„åŠŸèƒ½&lt;/p&gt;\n&lt;h3 id=\&#34;1-ä¿®æ”¹eurekaserveré…ç½®\&#34;&gt;1ã€ä¿®æ”¹EurekaServeré…ç½®&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-yml\&#34;&gt;#ç«¯å£å·\nserver:\n  port: ${port:10086}\nspring:\n  application:\n    name: eureka-server   #åº”ç”¨åç§°ï¼Œä¼šåœ¨eurekaä¸­ä½œä¸ºæœåŠ¡çš„idæ ‡è¯†\n\n#é…ç½®eurkea\neureka:\n  client:\n    service-url:\n      defaultZone: ${defualtZone:http://127.0.0.1:10086/eureka}\n    #register-with-eureka: false       #ä¸æ³¨å†Œè‡ªå·±ï¼Œé»˜è®¤å€¼æ˜¯trueï¼ˆå¦‚æœæ­å»ºeurekaé›†ç¾¤ï¼Œéœ€è¦ç›¸äº’ä¹‹é—´æ³¨å†Œï¼‰\n    #fetch-registry: false   #ä¸æ‹‰å–è‡ªå·±çš„æœåŠ¡åˆ—è¡¨\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€ä¿®æ”¹å¯åŠ¨é…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;8\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591806205847.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;3ã€å¤åˆ¶ä¸€ä»½å¹¶ä¿®æ”¹VM options&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;9\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591806216118.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;4ã€å¯åŠ¨eurekaé›†ç¾¤&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;10\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591806227522.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h2 id=\&#34;æœåŠ¡æ³¨å†Œeurekaé›†ç¾¤\&#34;&gt;æœåŠ¡æ³¨å†ŒEurekaé›†ç¾¤&lt;/h2&gt;\n&lt;p&gt;å› ä¸ºEurekaä¸æ­¢ä¸€ä¸ªï¼Œä¿®æ”¹user-serviceå…³äºæ³¨å†Œä¸­å¿ƒçš„é…ç½®&lt;/p&gt;\n&lt;p&gt;æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šæ£€æµ‹é…ç½®å±æ€§ä¸­&lt;code&gt;eureka.client.register-with-eureka=true&lt;/code&gt;å‚æ•°æ˜¯å¦æ­£ç¡®ï¼Œäº‹å®ä¸Šé»˜è®¤æ˜¯trueï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡æœ‰é…ç½®ï¼Œå¦‚æœå€¼ç¡®å®æ˜¯trueï¼Œåˆ™ä¼šå‘EurekaServerå‘èµ·ä¸€ä¸ªRestè¯·æ±‚ï¼Œå¹¶ä¸”æºå¸¦è‡ªå·±çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ŒEurekaServerä¼šæŠŠè¿™äº›ä¿¡æ¯ä¿å­˜åˆ°ä¸€ä¸ªåŒå±‚çš„Mapç»“æ„ä¸­&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;ç¬¬ä¸€å±‚Mapçš„keyå°±æ˜¯æœåŠ¡çš„idï¼Œä¸€èˆ¬å°±æ˜¯é…ç½®&lt;code&gt;spring.applicaton.name&lt;/code&gt;å±æ€§&lt;/li&gt;\n&lt;li&gt;ç¬¬äºŒå±‚Mapçš„keyå°±æ˜¯æœåŠ¡çš„å®ä¾‹idï¼Œä¸€èˆ¬host + serviceId + portï¼Œä¾‹å¦‚ï¼šlocalhost:user-service:9091&lt;/li&gt;\n&lt;li&gt;å€¼åˆ™æ˜¯æœåŠ¡çš„å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥åŒæ—¶å¯åŠ¨å¤šä¸ªä¸åŒçš„å®ä¾‹ï¼Œå½¢æˆé›†ç¾¤&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;é»˜è®¤æ³¨å†Œçš„æ—¶å€™æ˜¯ä¸»æœºåæˆ–è€…æ˜¯localhostï¼Œå¦‚æœæƒ³ç”¨ipè¿›è¡Œæ³¨å†Œï¼Œå¯ä»¥åœ¨&lt;code&gt;user-server&lt;/code&gt; ä¸­æ·»åŠ é…ç½®&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-yml\&#34;&gt;#ç«¯å£å·\nserver:\n  port: 9091\n#æ•°æ®æº\nspring:\n  datasource:\n    driver-class-name: com.mysql.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/springcloud?useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;serverTimezone=Asia/Shanghai\n    username: root\n    password: root\n  application:\n    name: user-service   #åº”ç”¨å\n#æ·»åŠ Eurekaæ³¨å†Œçš„é…ç½®\neureka:\n  client:\n    service-url:  #EurekaServeråœ°å€ï¼Œå¤šä¸ªåœ°å€ä¹‹é—´ç”¨é€—å·åˆ†éš”\n      defaultZone: http://127.0.0.1:10086/eureka,http://127.0.0.1:10087/eureka\n  instance:\n    ip-address: 127.0.0.1    #ipåœ°å€\n    prefer-ip-address: true  #æ›´å€¾å‘äºä½¿ç”¨ipï¼Œè€Œä¸æ˜¯hostå    \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ä¿®æ”¹å®Œæˆåé‡å¯&lt;code&gt;user-server&lt;/code&gt;å·¥ç¨‹å’Œ&lt;code&gt;user-web&lt;/code&gt;å·¥ç¨‹&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼Œå…ˆå…³æ‰10086ï¼Œç„¶ååœ¨æµ‹è¯•æ˜¯å¦èƒ½æ­£å¸¸é€šè®¯&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;å¤±æ•ˆçš„å‰”é™¤å’Œè‡ªæˆ‘ä¿æŠ¤\&#34;&gt;å¤±æ•ˆçš„å‰”é™¤å’Œè‡ªæˆ‘ä¿æŠ¤&lt;/h2&gt;\n&lt;p&gt;æœåŠ¡ç»­çº¦&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åœ¨æ³¨å†ŒæœåŠ¡å®Œæˆä»¥åï¼ŒæœåŠ¡æä¾›è€…ä¼šæŒç»­ä¸€ä¸ªå¿ƒè·³ï¼ˆå®šæ—¶å‘EurekaServerå‘èµ·Restè¯·æ±‚ï¼‰ï¼Œå‘Šè¯‰EurekaServerï¼šâ€œæˆ‘è¿˜æ´»ç€â€ï¼Œè¿™ä¸ªæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºæœåŠ¡çš„ç»­çº¦(renew)ï¼›&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;å‘user-serverå·¥ç¨‹é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-yml\&#34;&gt;#æ·»åŠ Eurekaæ³¨å†Œçš„é…ç½®\neureka:\n  client:\n    service-url:  #EurekaServeråœ°å€ï¼Œå¤šä¸ªåœ°å€ä¹‹é—´ç”¨é€—å·åˆ†éš”\n      defaultZone: http://127.0.0.1:10086/eureka,http://127.0.0.1:10087/eureka\n  instance:\n    ip-address: 127.0.0.1    #ipåœ°å€\n    prefer-ip-address: true  #æ›´å€¾å‘äºä½¿ç”¨ipï¼Œè€Œä¸æ˜¯hostå\n    lease-expiration-duration-in-seconds: 5 #æœåŠ¡ç»­çº¦çš„æ—¶é—´é—´éš”ï¼Œé»˜è®¤æ˜¯30ç§’ï¼Œç°åœ¨æˆ‘è¿™é‡Œè®¾ç½®ä¸º5ç§’\n    lease-renewal-interval-in-seconds: 5  #æœåŠ¡å¤±æ•ˆæ—¶é—´ï¼Œé»˜è®¤æ˜¯90ç§’ï¼Œæˆ‘è¿™é‡Œè®¾ç½®ä¸º5ç§’\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯ä¸ª30ç§’æœåŠ¡ä¼šå‘æ³¨å†Œä¸­å¿ƒå‘é€ä¸€æ¬¡å¿ƒè·³ï¼Œè¯æ˜è‡ªå·±è¿˜æ´»ç€ï¼Œå¦‚æœè¶…è¿‡90ç§’è¿˜æ²¡æœ‰å‘é€å¿ƒè·³ï¼ŒEurekaServerå°±ä¼šè®¤ä¸ºè¯¥æœåŠ¡å·²ç»å®•æœºï¼Œä¼šå®šæ—¶ä»æœåŠ¡åˆ—è¡¨ä¸­ç§»é™¤ï¼Œè¿™ä¸¤ä¸ªå€¼åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸è¦ä¿®æ”¹ï¼ˆæˆ‘è¿™é‡Œä¿®æ”¹æ˜¯ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼‰&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;æœåŠ¡ä¸‹çº¿&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å½“æœåŠ¡è¿›è¡Œæ­£å¸¸å…³é—­æ“ä½œçš„æ—¶å€™ï¼Œå®ƒä¼šè§¦å‘ä¸€ä¸ªæœåŠ¡ä¸‹çº¿çš„RESTè¯·æ±‚ç»™EurekaSeverï¼Œå‘Šè¯‰æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼šâ€œæˆ‘è¦ä¸‹çº¿äº†â€ã€‚æœåŠ¡ä¸­å¿ƒæ¥æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œä¼šè®²è¯¥æœåŠ¡ç½®ä¸ºä¸‹çº¿çŠ¶æ€&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;å¤±æ•ˆå‰”é™¤&lt;/p&gt;\n&lt;p&gt;è‡ªæˆ‘ä¿æŠ¤&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æˆ‘ä»¬å…³åœä¸€ä¸ªæœåŠ¡ï¼Œå¾ˆå¯èƒ½ä¼šåœ¨eurekaé¢æ¿å‡ºç°ä¸€æ¡è­¦å‘Šï¼š&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;11\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591806244663.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;è¿™ä¸ªå°±æ˜¯eurekaçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‚å½“æœåŠ¡æœªæŒ‰æ—¶è¿›è¡Œå¿ƒè·³ç»­çº¦ï¼ŒEurekaä¼šç»Ÿè®¡æœåŠ¡å®ä¾‹æœ€è¿‘15åˆ†é’Ÿå¿ƒè·³ç»­çº¦çš„æ¯”ä¾‹æ˜¯å¦ä½äº85%ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå› ä¸ºç½‘ç»œå»¶è¿Ÿç­‰åŸå› ï¼Œå¿ƒè·³å¤±è´¥å®ä¾‹çš„æ¯”ä¾‹å¾ˆæœ‰å¯èƒ½ä¼šè¶…æ ‡ï¼Œä½†æ˜¯æ­¤æ—¶å°±æŠŠæœåŠ¡å‰”é™¤åˆ—è¡¨å¹¶ä¸å¦¥å½“ï¼Œå› ä¸ºæœåŠ¡å¹¶æ²¡æœ‰å®•æœºã€‚Eruekaåœ¨è¿™æ®µæ—¶é—´å†…ä¸ä¼šå‰”é™¤ä»»ä½•æœåŠ¡å®ä¾‹ï¼Œç›´åˆ°ç½‘ç»œæ¢å¤æ­£å¸¸ã€‚ç”Ÿäº§ç¯å¢ƒä¸‹è¿™å¾ˆæœ‰æ•ˆ,å› æ­¤æœåŠ¡è°ƒç”¨è€…å¿…é¡»åšå¥½æœåŠ¡çš„å¤±è´¥å®¹é”™&lt;/p&gt;\n&lt;p&gt;å¯ä»¥å…³é—­è‡ªæˆ‘ä¿æŠ¤ï¼ˆç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œåƒä¸‡åˆ«å¹²è¿™äº‹ï¼ï¼‰&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-yml\&#34;&gt;#é…ç½®eurkea\neureka:\n  client:\n    service-url:\n      defaultZone: ${defualtZone:http://127.0.0.1:10086/eureka}\n    #register-with-eureka: false       #ä¸æ³¨å†Œè‡ªå·±ï¼Œé»˜è®¤å€¼æ˜¯trueï¼ˆå¦‚æœæ­å»ºeurekaé›†ç¾¤ï¼Œéœ€è¦ç›¸äº’ä¹‹é—´æ³¨å†Œï¼‰\n    #fetch-registry: false   #ä¸æ‹‰å–è‡ªå·±çš„æœåŠ¡åˆ—è¡¨\n  server:\n    enable-self-preservation: false  #å…³é—­è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼(ç¼ºçœä¸ºæ‰“å¼€)\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;eureka&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;Eureka&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;Eureka&#34;,&#34;slug&#34;:&#34;-ROTKfBE-&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/-ROTKfBE-/&#34;},{&#34;name&#34;:&#34;Spring-Cloud&#34;,&#34;slug&#34;:&#34;omgSh_ZiA&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/omgSh_ZiA/&#34;}],&#34;date&#34;:&#34;2020-06-11 00:21:09&#34;,&#34;dateFormat&#34;:&#34;2020-06-11&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/eureka/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;11 min read&#34;,&#34;time&#34;:615000,&#34;words&#34;:2485,&#34;minutes&#34;:11},&#34;description&#34;:&#34;ä»€ä¹ˆæ˜¯Eureka\n\nç™¾åº¦ç™¾ç§‘ï¼šä»€ä¹ˆæ˜¯Eureka\n\né—®é¢˜åˆ†æ\n\nåˆšæ‰çš„æ¡ˆä¾‹ï¼Œuser-serviceå¯¹å¤–æä¾›æœåŠ¡ï¼Œéœ€è¦å¯¹å¤–æš´æ¼è‡ªå·±çš„åœ°å€ã€‚user-webéœ€è¦è®°å½•æœåŠ¡æä¾›è€…çš„åœ°å€ã€‚å°†æ¥åœ°å€å‡ºç°å˜æ›´ï¼Œè¿˜éœ€è¦åŠæ—¶çš„å»æ›´æ–°ã€‚è¿™åœ¨æœåŠ¡è¾ƒå°‘çš„æ—¶å€™ä¸...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BB%80%E4%B9%88%E6%98%AFeureka\&#34;&gt;ä»€ä¹ˆæ˜¯Eureka&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90\&#34;&gt;é—®é¢˜åˆ†æ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#eureka%E5%81%9A%E4%BB%80%E4%B9%88\&#34;&gt;Eurekaåšä»€ä¹ˆ&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#eureka%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E8%AF%B4%E6%98%8E\&#34;&gt;Eurekaæ³¨å†Œä¸­å¿ƒè¯´æ˜&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B\&#34;&gt;å…¥é—¨æ¡ˆä¾‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C\&#34;&gt;æœåŠ¡æ³¨å†Œ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0\&#34;&gt;æœåŠ¡å‘ç°&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#eureak%E6%80%BB%E7%BB%93\&#34;&gt;Eureakæ€»ç»“&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%AB%98%E5%8F%AF%E7%94%A8%E7%9A%84eureka-server\&#34;&gt;é«˜å¯ç”¨çš„Eureka Server&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E4%BF%AE%E6%94%B9eurekaserver%E9%85%8D%E7%BD%AE\&#34;&gt;1ã€ä¿®æ”¹EurekaServeré…ç½®&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8Ceureka%E9%9B%86%E7%BE%A4\&#34;&gt;æœåŠ¡æ³¨å†ŒEurekaé›†ç¾¤&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%A4%B1%E6%95%88%E7%9A%84%E5%89%94%E9%99%A4%E5%92%8C%E8%87%AA%E6%88%91%E4%BF%9D%E6%8A%A4\&#34;&gt;å¤±æ•ˆçš„å‰”é™¤å’Œè‡ªæˆ‘ä¿æŠ¤&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;ç³»ç»Ÿæ¶æ„çš„æ¼”å˜\&#34;&gt;ç³»ç»Ÿæ¶æ„çš„æ¼”å˜&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;éšç€äº’è”ç½‘çš„å‘å±•ï¼Œç½‘ç«™çš„åº”ç”¨è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼Œéœ€æ±‚çš„æ¿€å¢ï¼Œå¸¦æ¥çš„æ˜¯æŠ€æœ¯ä¸Šçš„å‹åŠ›ã€‚ç³»ç»Ÿæ¶æ„ä¹Ÿå› æ­¤åœ¨ä¸æ–­çš„æ¼”å˜ã€å‡çº§ã€è¿­ä»£ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591797493895.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h3 id=\&#34;é›†ä¸­å¼æ¶æ„\&#34;&gt;é›†ä¸­å¼æ¶æ„&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å½“ç½‘ç«™æµé‡å¾ˆå°çš„æ—¶å€™ï¼Œåªéœ€è¦ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰çš„åŠŸèƒ½éƒ½éƒ¨ç½²åˆ°ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;2\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591797514846.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;ä¼˜ç‚¹ï¼šç³»ç»Ÿå¼€å‘é€Ÿåº¦å¿«ï¼Œç»´æŠ¤æˆæœ¬ä½ï¼Œé€‚åˆå¼€å‘å¹¶å‘è¦æ±‚è¾ƒä½çš„ç³»ç»Ÿ&lt;/p&gt;\n&lt;p&gt;ç¼ºç‚¹ï¼šå•ç‚¹å®¹é”™ç‡ä½ï¼Œå¹¶å‘èƒ½åŠ›å·®&lt;/p&gt;\n&lt;h3 id=\&#34;å‚ç›´åº”ç”¨æ¶æ„\&#34;&gt;å‚ç›´åº”ç”¨æ¶æ„&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ä¸€åº”ç”¨æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæ­¤æ—¶ä¸ºäº†åº”å¯¹æ›´é«˜çš„å¹¶å‘å’Œä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬æ ¹æ®ä¸šåŠ¡åŠŸèƒ½å¯¹ç³»ç»Ÿè¿›è¡Œæ‹†åˆ†ï¼š&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;3\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591797530176.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;ä¼˜ç‚¹ï¼š&lt;/p&gt;\n&lt;p&gt;ç³»ç»Ÿæ‹†åˆ†å®ç°äº†æµé‡åˆ†æ‹…ï¼Œè§£å†³äº†å¹¶å‘é—®é¢˜&lt;/p&gt;\n&lt;p&gt;å¯ä»¥é’ˆå¯¹ä¸åŒçš„æ¨¡å—è¿›è¡Œä¼˜åŒ–&lt;/p&gt;\n&lt;p&gt;æ–¹ä¾¿æ°´å¹³æ‰©å±•ï¼Œè´Ÿè½½å‡è¡¡ï¼Œå®¹é”™ç‡é«˜&lt;/p&gt;\n&lt;p&gt;ç¼ºç‚¹ï¼šç³»ç»Ÿä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå¼€å‘ä¸­ä¼šæœ‰å¾ˆå¤šé‡å¤ä»£ç ï¼Œå½±å“å¼€å‘æ•ˆç‡&lt;/p&gt;\n&lt;h3 id=\&#34;åˆ†å¸ƒå¼æœåŠ¡\&#34;&gt;åˆ†å¸ƒå¼æœåŠ¡&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œæ˜¯å‰æ®µåº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å½±å“å¤šå˜çš„å¸‚åœºéœ€æ±‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;4\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591797545349.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;ä¼˜ç‚¹ï¼šå°†åŸºç¡€æœåŠ¡è¿›è¡Œäº†æŠ½å–ï¼Œç³»ç»Ÿä¹‹é—´äº’ç›¸é€šç”¨ï¼Œæé«˜äº†ä»£ç çš„é‡ç”¨æ€§å’Œå¼€å‘æ•ˆç‡&lt;/p&gt;\n&lt;p&gt;ç¼ºç‚¹ï¼šç³»ç»Ÿä¹‹é—´è€¦åˆè¾ƒé«˜ï¼Œè°ƒç”¨å…³ç³»å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤&lt;/p&gt;\n&lt;h3 id=\&#34;é¢å‘æœåŠ¡æ¶æ„\&#34;&gt;é¢å‘æœåŠ¡æ¶æ„&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;SOA(Service Oriented Architecure)é¢å‘æœåŠ¡çš„æ¶æ„ï¼šå®ƒæ˜¯ä¸€ç§è®¾è®¡æ–¹æ³•ï¼Œå…¶ä¸­åŒ…å«äº†å¤šä¸ªæœåŠ¡ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´é€šè¿‡äº’ç›¸ä¾èµ–æœ€ç»ˆæä¾›ä¸€ç³»åˆ—çš„åŠŸèƒ½ã€‚ä¸€ä¸ªæœåŠ¡é€šå¸¸ä»¥ç‹¬ç«‹çš„å½¢å¼å­˜åœ¨ä¸æ“ä½œç³»ç»Ÿè¿›è¡Œä¸­ï¼Œå„ä¸ªæœåŠ¡ä¹‹é—´é€šè¿‡ç½‘ç»œè°ƒç”¨ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;5\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591797558773.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ESB(ä¼ä¸šæœåŠ¡æ€»çº¿)ï¼šç®€å•çš„è¯´ESBå°±æ˜¯ä¸€æ ¹ç®¡é“ï¼Œç”¨æ¥è¿æ¥å„ä¸ªæœåŠ¡èŠ‚ç‚¹ï¼Œä¸ºäº†ç»§æ‰¿ä¸åŒç³»ç»Ÿï¼Œä¸åŒåè®®çš„æœåŠ¡ï¼ŒESBåšäº†æ¶ˆæ¯çš„è½¬æ¢è§£é‡Šå’Œè·¯ç”±å·¥ä½œï¼Œè®©ä¸åŒçš„æœåŠ¡äº’è”äº’é€š&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;SOAç¼ºç‚¹&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æ¯ä¸ªä¾›åº”å•†çš„ESBäº§å“æœ‰åå·®ï¼Œè‡ªèº«å®ç°è¾ƒä¸ºå¤æ‚ï¼›åº”ç”¨æœåŠ¡ç²’åº¦è¾ƒå¤§ï¼ŒESBç»§æ‰¿æ•´åˆæ‰€æœ‰çš„æœåŠ¡å’Œåè®®ï¼Œæ•°æ®è½¬æ¢ä½¿å¾—è¿ç»´ã€æµ‹è¯•å’Œéƒ¨ç½²æ¯”è¾ƒå›°éš¾ï¼Œæ‰€æœ‰çš„æœåŠ¡éƒ½é€šè¿‡ä¸€ä¸ªé€šè·¯é€šè®¯ï¼Œç›´æ¥é™ä½äº†é€šä¿¡é€Ÿåº¦&lt;/p&gt;\n&lt;p&gt;(dubboè¦æ¯”è¿™ä¸ªä¼˜åŒ–ï¼Œç³»ç»Ÿä¹‹é—´é€šè®¯é‡‡ç”¨RPCè¿™ç§æ–¹å¼ï¼Œè¿™ç§æ–¹å¼æ˜¯ç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜)&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;å¾®æœåŠ¡æ¶æ„\&#34;&gt;å¾®æœåŠ¡æ¶æ„&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å¾®æœåŠ¡æ¶æ„æ˜¯ä½¿ç”¨&lt;code&gt;ä¸€å¥—å°æœåŠ¡å¼€å‘å•ä¸ªåº”ç”¨çš„æ–¹å¼æˆ–é€”å¾„&lt;/code&gt;ï¼Œæ¯ä¸ªæœåŠ¡åŸºäºå•ä¸€ä¸šåŠ¡èƒ½åŠ›æ„å»ºï¼ˆèŒèƒ½å•ä¸€ï¼‰ï¼Œè¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼Œå¹¶ä½¿ç”¨è½»é‡çº§æœºåˆ¶é€šä¿¡ï¼Œé€šå¸¸æ˜¯Http APIï¼Œå¹¶èƒ½å¤Ÿé€šè¿‡è‡ªåŠ¨åŒ–éƒ¨ç½²æœºåˆ¶æ¥ç‹¬ç«‹éƒ¨ç½²ï¼Œè¿™äº›æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ï¼Œä»¥åŠä¸åŒçš„æ•°æ®å­˜å‚¨æŠ€æœ¯ï¼Œå¹¶ä¿æŒæœ€ä½çš„é›†ä¸­å¼ç®¡ç†&lt;/p&gt;\n&lt;p&gt;(dubboï¼šä½¿ç”¨RPCåè®®é€šè®¯ï¼Œé‡‡ç”¨çš„å°±æ˜¯äºŒè¿›åˆ¶é€šè®¯ï¼Œå¦‚æœè¦ä½¿ç”¨dubboå®ç°ç³»ç»Ÿä¹‹é—´çš„é€šè®¯ï¼Œå¿…é¡»ä¿è¯é¡¹ç›®æ˜¯javaè¯­è¨€å¼€å‘çš„ã€‚dubboæ˜¯ä¸èƒ½å®ç°è·¨è¯­è¨€å¹³å°é€šè®¯&lt;/p&gt;\n&lt;p&gt;dubboxï¼šåæ¥æ˜¯å½“å½“ç½‘å¯¹å®ƒè¿›è¡Œå‡çº§ï¼Œè®©dubboåœ¨æ”¯æŒRPCçš„åŒæ—¶ï¼Œä¹Ÿæ”¯æŒHttp APIï¼ˆRestAPIï¼‰é€šè®¯ )&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;6\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1591797585782.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;API Gateway: ç½‘å…³æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæ˜¯ç³»ç»Ÿçš„å”¯ä¸€å…¥å£ï¼Œä¸ºæ¯ä¸ªå®¢æˆ·ç«¯æä¾›äº†ä¸€ä¸ªå®šåˆ¶çš„APIã€‚APIç½‘å…³æ ¸å¿ƒæ˜¯ï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯å’Œæ¶ˆè´¹ç«¯éƒ½é€šè¿‡ç»Ÿä¸€çš„ç½‘å…³ä»‹å…¥å¾®æœåŠ¡ï¼Œåœ¨ç½‘ç®¡å±‚å¤„ç†æ‰€æœ‰çš„éä¸šåŠ¡åŠŸèƒ½ã€‚å¦‚å®ƒè¿˜å¯ä»¥å…·æœ‰å…¶ä»–èŒè´£ï¼šèº«ä»½éªŒè¯ã€ç›‘æ§ã€è´Ÿè½½å‡è¡¡ã€ç¼“å­˜ã€è¯·æ±‚åˆ†ç‰‡ä¸ç®¡ç†ã€‚é€šå¸¸ç½‘å…³æä¾›RESTFUL/httpçš„æ–¹å¼è®¿é—®æœåŠ¡ï¼Œè€ŒæœåŠ¡ç«¯é€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒè¿›è¡ŒæœåŠ¡æ³¨å†Œå’Œç®¡ç†&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h4 id=\&#34;å¾®æœåŠ¡ç‰¹ç‚¹\&#34;&gt;å¾®æœåŠ¡ç‰¹ç‚¹&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;å•ä¸€èŒè´£ï¼šå¾®æœåŠ¡ä¸­æ¯ä¸ªæœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›,åšåˆ°å•ä¸€èŒè´£&lt;/li&gt;\n&lt;li&gt;å¾®ï¼šå¾®æœåŠ¡çš„æœåŠ¡æ‹†åˆ†ç²’åº¦å¾ˆå°ï¼Œä¾‹å¦‚ä¸€ä¸ªç”¨æˆ·ç®¡ç†å°±å¯ä»¥ä½œä¸ºä¸€ä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è™½ç„¶å°ï¼Œä½†æ˜¯â€œäº”è„ä¿±å…¨â€&lt;/li&gt;\n&lt;li&gt;é¢å‘æœåŠ¡ï¼šæ¯ä¸ªæœåŠ¡éƒ½è¦å¯¹å¤–æš´æ¼Resté£æ ¼æœåŠ¡æ¥å£APIã€‚å¹¶ä¸å…³å¿ƒæœåŠ¡çš„æŠ€æœ¯å®ç°ï¼Œåšåˆ°ä¸å¹³å°å’Œè¯­è¨€æ— å…³ï¼Œä¹Ÿä¸é™å®šç”¨ä»€ä¹ˆæŠ€æœ¯å®ç°ï¼Œåªè¦æä¾›Restçš„æ¥å£å³å¯&lt;/li&gt;\n&lt;li&gt;è‡ªæ²»ï¼šæœåŠ¡ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°\n&lt;ul&gt;\n&lt;li&gt;å›¢é˜Ÿç‹¬ç«‹ï¼šæ¯ä¸ªæœåŠ¡éƒ½å¯ä»¥ä¸€ä¸ªç‹¬ç«‹çš„å›¢é˜Ÿå¼€å‘ï¼Œäººæ•°ä¸èƒ½è¿‡å¤š&lt;/li&gt;\n&lt;li&gt;æŠ€æœ¯ç‹¬ç«‹ï¼šé¢å‘çš„æ˜¯æœåŠ¡ï¼Œæä¾›Restæ¥å£ï¼Œä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ²¡æœ‰äººå¹²æ¶‰&lt;/li&gt;\n&lt;li&gt;å‰åç«¯åˆ†ç¦»ï¼šé‡‡ç”¨å‰åç«¯åˆ†ç¦»å¼€å‘ï¼Œæä¾›ç»Ÿä¸€Restæ¥å£ï¼Œåç«¯ä¸ç”¨å†ä¸ºPCã€ç§»åŠ¨ç«¯å¼€å‘ä¸åŒçš„æ¥å£&lt;/li&gt;\n&lt;li&gt;éƒ¨ç½²ç‹¬ç«‹ï¼šæœåŠ¡ä¹‹é—´è™½ç„¶æœ‰è°ƒç”¨ï¼Œä½†æ˜¯è¦åšåˆ°æœåŠ¡å™¨é‡å¯ä¸å½±å“å…¶ä»–çš„æœåŠ¡å™¨ã€‚æœ‰åˆ©äºæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ã€‚æ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹çš„ç»„ä»¶ï¼Œå¯ä»¥å¤ç”¨ã€å¯ä»¥æ›¿æ¢ã€é™ä½äº†è€¦åˆåº¦ï¼Œæ˜“äºç»´æŠ¤&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;blockquote&gt;\n&lt;p&gt;äº’è”ç½‘ç²¾ç¥ï¼šå…ˆä¸Šçº¿ï¼Œåè¿­ä»£&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;å¾®æœåŠ¡æ¶æ„ä¸SOAéƒ½æ˜¯å¯¹ç³»ç»Ÿè¿›è¡Œäº†æ‹†åˆ†ï¼›å¾®æœåŠ¡æ¶æ„å¸ˆåŸºäºSOAæ€æƒ³ï¼Œå¯ä»¥æŠŠå¾®æœåŠ¡å½“ä½œå»é™¤äº†ESBæ€»çº¿çš„SOAã€‚ESBæ˜¯SOAæ¶æ„ä¸­çš„ä¸­å¿ƒæ€»çº¿&lt;/p&gt;\n&lt;h2 id=\&#34;æœåŠ¡è°ƒç”¨æ–¹å¼\&#34;&gt;æœåŠ¡è°ƒç”¨æ–¹å¼&lt;/h2&gt;\n&lt;h3 id=\&#34;å¸¸è§çš„è¿œç¨‹è°ƒç”¨æ–¹å¼\&#34;&gt;å¸¸è§çš„è¿œç¨‹è°ƒç”¨æ–¹å¼&lt;/h3&gt;\n&lt;h4 id=\&#34;1-rpc\&#34;&gt;1ã€RPC&lt;/h4&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Remote Produce Callã€‚åŸºäºSocketçš„é€šè®¯ï¼ˆæ˜¯ç”¨æœ€åº•å±‚çš„æ–¹å¼æ¥å®ç°é€šè®¯ï¼Œé‡‡ç”¨äºŒè¿›åˆ¶çš„å½¢å¼ï¼Œé€šè®¯çš„æ•ˆç‡æœ€é«˜çš„ï¼‰ã€‚å·¥ä½œåœ¨ä¼šè¯å±‚ã€‚è‡ªå®šä¹‰æ•°æ®æ ¼å¼ï¼Œé€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜ã€‚æ—©æœŸçš„webserviceï¼Œç°åœ¨çƒ­é—¨çš„dubboxï¼Œéƒ½æ˜¯RPCçš„å…¸å‹ä»£è¡¨ï¼ˆåªèƒ½æ˜¯javaè¯­è¨€ç¼–å†™çš„æœåŠ¡ä¹‹é—´é€šè®¯ï¼‰&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h4 id=\&#34;2-http\&#34;&gt;2ã€Http&lt;/h4&gt;\n&lt;blockquote&gt;\n&lt;p&gt;httpå…¶å®æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼ŒåŸºäºTCPï¼Œå·¥ä½œåœ¨åº”ç”¨å±‚ï¼Œè§„å®šäº†æ•°æ®ä¼ è¾“çš„æ ¼å¼ã€‚ç°åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸æœåŠ¡å™¨é€šè®¯åŸºæœ¬ä¸Šéƒ½æ˜¯é‡‡ç”¨çš„httpåè®®ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œè¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚ç¼ºç‚¹æ˜¯æ¶ˆæ¯å°è£…è‡ƒè‚¿ï¼Œä¼˜åŠ¿æ˜¯å¯¹æœåŠ¡çš„æä¾›å’Œè°ƒç”¨æ–¹æ²¡æœ‰ä»»ä½•æŠ€æœ¯é™å®šï¼ˆå¯ä»¥è·¨è¯­è¨€ï¼‰ï¼Œè‡ªç”±çµæ´»ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡çš„ç†å¿µ&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å¦‚æœä½ ä»¬çš„å…¬å¸å…¨éƒ¨é‡‡ç”¨çš„javaæŠ€æœ¯æ ˆï¼Œé‚£ä¹ˆä½¿ç”¨dubboä½œä¸ºå¾®æœåŠ¡æ¶æ„å¸ˆä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚&lt;/p&gt;\n&lt;p&gt;ç›¸åå¦‚æœå…¬å¸çš„æŠ€æœ¯æ ˆå¤šæ ·åŒ–ï¼Œè€Œä¸”ä½ æ›´åŠ é’çäºSpringå®¶æ—ï¼Œé‚£ä¹ˆSpringCloudæ­å»ºå¾®æœåŠ¡å°±æ˜¯ä¸äºŒé€‰æ‹©ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œä¼šæ‰€é€‰æ‹©SpringCloudå¥—ä»¶ï¼Œå› æ­¤ä¼šä½¿ç”¨httpæ–¹å¼æ¥å®ç°å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;httpå®¢æˆ·ç«¯å·¥å…·\&#34;&gt;Httpå®¢æˆ·ç«¯å·¥å…·&lt;/h3&gt;\n&lt;p&gt;æ—¢ç„¶å¾®æœåŠ¡é€‰æ‹©äº†httpï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è€ƒè™‘è‡ªå·±æ¥å®ç°å¯¹è¯·æ±‚å’Œå“åº”çš„å¤„ç†ï¼Œä¸è¿‡å¼€æºä¸–ç•Œå·²ç»æœ‰å¾ˆå¤šçš„httpå®¢æˆ·ç«¯å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åšè¿™äº›äº‹æƒ…ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;HttpClient&lt;/li&gt;\n&lt;li&gt;OkHttp&lt;/li&gt;\n&lt;li&gt;URLConnection&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;ä»–ä»¬ä¹‹é—´çš„APIå„ä¸ç›¸åŒï¼Œè€Œspringä¹Ÿæœ‰å¯¹httpçš„å®¢æˆ·ç«¯å·¥å…·è¿›è¡Œäº†å°è£…ï¼ˆè¿™ä¸‰ç§éƒ½æœ‰ï¼‰ï¼Œæä¾›äº†å·¥å…·ç±»ï¼šRestTemplate&lt;/p&gt;\n&lt;h3 id=\&#34;springçš„resttemplate\&#34;&gt;Springçš„RestTemplate&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä½¿ç”¨springæä¾›çš„ä¸€ä¸ªRestTemplateæ¥å®ç°httpçš„äº¤äº’&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;åˆ›å»ºspringbooté¡¹ç›®&lt;/p&gt;\n&lt;h4 id=\&#34;1-åˆ›å»ºä¸šåŠ¡é€»è¾‘å±‚user-service\&#34;&gt;1ã€åˆ›å»ºä¸šåŠ¡é€»è¾‘å±‚(user-service)&lt;/h4&gt;\n&lt;p&gt;ä¾èµ–&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- mapperå¯åŠ¨å™¨(å‡†å¤‡ä½¿ç”¨mybatisä½œä¸ºæŒä¹…å±‚) --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;tk.mybatis&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;mapper-spring-boot-starter&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;2.0.3&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&amp;lt;!-- mysqlé©±åŠ¨ --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;mysql&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;mysql-connector-java&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&amp;lt;!-- ä¸ºäº†å¼€å‘æ–¹ä¾¿ï¼Œæˆ‘è¿™é‡Œå¼•å…¥lombok --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.projectlombok&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;lombok&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;pojo&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Data\n@Table(name = &amp;quot;tb_user&amp;quot;)\npublic class User {\n    @Id\n    @KeySql(useGeneratedKeys = true)\n    private Long id;\n    private String userName;        /*ç”¨æˆ·å*/\n    private String password;        /*å¯†ç */\n    private String name;            /*å§“å*/\n    private Integer age;            /*å¹´é¾„*/\n    private Integer sex;            /*æ€§åˆ«ï¼Œ1ç”·æ€§ï¼Œ2å¥³æ€§*/\n    private Date birthday;          /*ç”Ÿæ—¥*/\n    private String note;            /*å¤‡æ³¨*/\n    private Date created;           /*åˆ›å»ºæ—¶é—´*/\n    private Date updated;           /*ä¿®æ”¹æ—¶é—´*/\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;mapperæ¥å£&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;import tk.mybatis.mapper.common.Mapper;\npublic interface UserMapper extends Mapper&amp;lt;User&amp;gt; {\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;åœ¨å¯åŠ¨ç±»ä¸­æ‰«æmapper&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@SpringBootApplication\n@MapperScan(basePackages = &amp;quot;com.cn.mapper&amp;quot;)\npublic class UserServiceApplication {\n   \n    public static void main(String[] args) {\n        SpringApplication.run(UserServiceApplication.class, args);\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;service&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public interface UserService {\n    /**\n     * æ ¹æ®ä¸»é”®æŸ¥è¯¢å¯¹è±¡\n     * @param id     ä¸»é”®\n     * @return       å¯¹è±¡\n     */\n    User getUserById(Long id);\n}\n-------------\n@Service\npublic class UserServiceImpl implements UserService {\n    @Autowired(required = false)\n    private UserMapper userMapper;\n\n    @Override\n    public User getUserById(Long id) {\n        return userMapper.selectByPrimaryKey(id);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ç¼–å†™æ§åˆ¶å±‚æä¾›Rstfulæ¥å£&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RestController\n@RequestMapping(&amp;quot;/user&amp;quot;)\npublic class UserContorller {\n    @Autowired\n    private UserService userService;\n\n    @RequestMapping(&amp;quot;/{id}&amp;quot;)\n    public User getById(@PathVariable(&amp;quot;id&amp;quot;) Long id){\n        return userService.getUserById(id);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€åˆ›å»ºè¡¨ç°å±‚ï¼ˆuser-webï¼‰&lt;/p&gt;\n&lt;p&gt;pojoï¼šåŒä¸Š&lt;/p&gt;\n&lt;p&gt;å¯åŠ¨ç±»é…ç½®RestTemplate&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@SpringBootApplication\npublic class UserWebApplication {\n    @Bean\n    public RestTemplate restTemplate(){\n        return new RestTemplate();\n    }\n    public static void main(String[] args) {\n        SpringApplication.run(UserWebApplication.class, args);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;import com.cn.pojo.User;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.client.RestTemplate;\n\n@RestController\n@RequestMapping(&amp;quot;/consumer&amp;quot;)\npublic class ConsumerController {\n    @Autowired\n    private RestTemplate restTemplate;\n    @RequestMapping(&amp;quot;/{id}&amp;quot;)\n    public User getByid(@PathVariable(&amp;quot;id&amp;quot;) Long id){\n        //é€šè¿‡httpçš„æ–¹å¼å®ç°ç³»ç»Ÿä¹‹é—´çš„é€šè®¯\n        String url = &amp;quot;http://localhost:9091/user/&amp;quot; + id;//è¿™ä¸ªæ˜¯user-serviceæä¾›çš„rest apié£æ ¼çš„æ¥å£\n        User user = restTemplate.getForObject(url, User.class);\n        return user;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä¸Šé¢çš„æ“ä½œæˆ‘ä»¬æ˜¯ä½¿ç”¨user-serviceå¯¹å¤–æä¾›äº†æ ¹æ®ä¸»é”®æŸ¥è¯¢ç”¨æˆ·çš„æ¥å£ï¼Œç„¶ååœ¨user-webé€šè¿‡RestTemplateè°ƒç”¨serviceçš„æ¥å£&lt;/p&gt;\n&lt;p&gt;è¿™æ ·å†™ä¼šå­˜åœ¨ç¡¬ç¼–ç çš„é—®é¢˜ï¼Œä¸æ–¹ä¾¿åæœŸç»´æŠ¤ï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦è®°ä½urlçš„åœ°å€ï¼Œå¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œæ”¶ä¸åˆ°é€šçŸ¥ï¼Œåœ°å€å°†ä¼šå¤±æ•ˆ&lt;/p&gt;\n&lt;p&gt;webå±‚å¹¶ä¸çŸ¥é“serviceå±‚çš„çŠ¶æ€ï¼Œä¾‹å¦‚æœåŠ¡å™¨å®•æœº&lt;/p&gt;\n&lt;p&gt;serviceå±‚ä¹Ÿåªæœ‰ä¸€å°ï¼Œä¸å…·å¤‡é«˜å¯ç”¨&lt;/p&gt;\n&lt;p&gt;å³ä¾¿æ˜¯serviceæ­å»ºæˆäº†é›†ç¾¤ï¼Œwebè¿˜éœ€è¦å»å®ç°è´Ÿè½½å‡è¡¡&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;å…¶å®ä¸Šé¢è¯´çš„é—®é¢˜ï¼Œæ¦‚æ‹¬ä¸€ä¸‹å°±æ˜¯åˆ†å¸ƒå¼æœåŠ¡å¿…ç„¶è¦é¢ä¸´çš„é—®é¢˜ï¼š&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;æœåŠ¡ç®¡ç†\n&lt;ul&gt;\n&lt;li&gt;å¦‚ä½•è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°&lt;/li&gt;\n&lt;li&gt;å¦‚ä½•å®ç°çŠ¶æ€ç›‘æ§&lt;/li&gt;\n&lt;li&gt;å¦‚ä½•å®ç°åŠ¨æ€è·¯ç”±&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;æœåŠ¡å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡&lt;/li&gt;\n&lt;li&gt;æœåŠ¡å¦‚ä½•è§£å†³å®¹ç¾é—®é¢˜&lt;/li&gt;\n&lt;li&gt;æœåŠ¡å¦‚ä½•å®ç°ç»Ÿä¸€é…ç½®&lt;/li&gt;\n&lt;/ul&gt;\n&#34;,&#34;fileName&#34;:&#34;chu-shi-springcloud&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;åˆè¯†SpringCloud&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;Spring-Cloud&#34;,&#34;slug&#34;:&#34;omgSh_ZiA&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/omgSh_ZiA/&#34;}],&#34;date&#34;:&#34;2020-06-10 21:57:42&#34;,&#34;dateFormat&#34;:&#34;2020-06-10&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/chu-shi-springcloud/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;10 min read&#34;,&#34;time&#34;:589000,&#34;words&#34;:2571,&#34;minutes&#34;:10},&#34;description&#34;:&#34;ç³»ç»Ÿæ¶æ„çš„æ¼”å˜\n\néšç€äº’è”ç½‘çš„å‘å±•ï¼Œç½‘ç«™çš„åº”ç”¨è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼Œéœ€æ±‚çš„æ¿€å¢ï¼Œå¸¦æ¥çš„æ˜¯æŠ€æœ¯ä¸Šçš„å‹åŠ›ã€‚ç³»ç»Ÿæ¶æ„ä¹Ÿå› æ­¤åœ¨ä¸æ–­çš„æ¼”å˜ã€å‡çº§ã€è¿­ä»£ã€‚\n\n\né›†ä¸­å¼æ¶æ„\n\nå½“ç½‘ç«™æµé‡å¾ˆå°çš„æ—¶å€™ï¼Œåªéœ€è¦ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰çš„åŠŸèƒ½éƒ½éƒ¨ç½²åˆ°ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E7%9A%84%E6%BC%94%E5%8F%98\&#34;&gt;ç³»ç»Ÿæ¶æ„çš„æ¼”å˜&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%9B%86%E4%B8%AD%E5%BC%8F%E6%9E%B6%E6%9E%84\&#34;&gt;é›†ä¸­å¼æ¶æ„&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%9E%82%E7%9B%B4%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84\&#34;&gt;å‚ç›´åº”ç”¨æ¶æ„&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%88%86%E5%B8%83%E5%BC%8F%E6%9C%8D%E5%8A%A1\&#34;&gt;åˆ†å¸ƒå¼æœåŠ¡&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%9D%A2%E5%90%91%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84\&#34;&gt;é¢å‘æœåŠ¡æ¶æ„&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84\&#34;&gt;å¾®æœåŠ¡æ¶æ„&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%89%B9%E7%82%B9\&#34;&gt;å¾®æœåŠ¡ç‰¹ç‚¹&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%E6%96%B9%E5%BC%8F\&#34;&gt;æœåŠ¡è°ƒç”¨æ–¹å¼&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%B8%B8%E8%A7%81%E7%9A%84%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8%E6%96%B9%E5%BC%8F\&#34;&gt;å¸¸è§çš„è¿œç¨‹è°ƒç”¨æ–¹å¼&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-rpc\&#34;&gt;1ã€RPC&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-http\&#34;&gt;2ã€Http&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#http%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%B7%A5%E5%85%B7\&#34;&gt;Httpå®¢æˆ·ç«¯å·¥å…·&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#spring%E7%9A%84resttemplate\&#34;&gt;Springçš„RestTemplate&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E5%88%9B%E5%BB%BA%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%B1%82user-service\&#34;&gt;1ã€åˆ›å»ºä¸šåŠ¡é€»è¾‘å±‚(user-service)&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;ä»€ä¹ˆæ˜¯jap\&#34;&gt;ä»€ä¹ˆæ˜¯JAP&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;JPAæ˜¯Java Persistence APIçš„ç®€ç§°ï¼Œä¸­æ–‡åJavaæŒä¹…å±‚APIï¼Œæ˜¯JDK 5.0æ³¨è§£æˆ–XMLæè¿°å¯¹è±¡ï¼å…³ç³»è¡¨çš„æ˜ å°„å…³ç³»ï¼Œå¹¶å°†è¿è¡ŒæœŸçš„å®ä½“å¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­&lt;br&gt;\nSunå¼•å…¥æ–°çš„JPA ORMè§„èŒƒå‡ºäºä¸¤ä¸ªåŸå› ï¼šå…¶ä¸€ï¼Œç®€åŒ–ç°æœ‰Java EEå’ŒJava SEåº”ç”¨å¼€å‘å·¥ä½œï¼›å…¶äºŒï¼ŒSunå¸Œæœ›æ•´åˆORMæŠ€æœ¯ï¼Œå®ç°å¤©ä¸‹å½’ä¸€ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;mybatiså’Œhibernateçš„åŒºåˆ«\&#34;&gt;mybatiså’Œhibernateçš„åŒºåˆ«&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;mybatiså’Œhibernateä¸€æ ·æ˜¯ä¸ªormæ•°æ®åº“æ¡†æ¶&lt;br&gt;\n1). hibernateæ˜¯å…¨è‡ªåŠ¨ï¼Œè€Œmybatisæ˜¯åŠè‡ªåŠ¨ã€‚&lt;br&gt;\nmybatiså¼€å‘æ˜¯éœ€è¦å»å†™sqlè¯­å¥ï¼Œè€Œä½¿ç”¨hibernateä¸éœ€è¦å†™ä»»ä½•çš„sqlè¯­å¥å°±èƒ½å®ç°å„ç§æ“ä½œ&lt;br&gt;\n2).hibernateæ•°æ®åº“ç§»æ¤æ€§è¿œå¤§äºmybatisã€‚&lt;br&gt;\nå¦‚æœä½¿ç”¨mybatisï¼Œä¸€æ—¦æ•°æ®åº“å‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦é‡å†™ç¼–ç ï¼ˆæ¯”å¦‚mysqlæ•°æ®åº“çš„sqlè¯­å¥å’Œoracleä»¥åŠsqlServeræ•°æ®åº“ä»–ä»¬ç”¨çš„sqlè¯­å¥ä¼šæœ‰ä¸€äº›å·®åˆ«ï¼‰ã€‚ä½†æ˜¯ä½¿ç”¨hibernateä¸€æ—¦æ•°æ®åº“å‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬ä¸éœ€è¦é‡å†™ç¼–ç ï¼Œåªéœ€è¦æ”¹å°‘è®¸çš„é…ç½®å°±èƒ½å®ç°&lt;br&gt;\n3).hibernateæ‹¥æœ‰å®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿï¼Œmybatisåˆ™æ¬ ç¼ºä¸€äº›ã€‚&lt;br&gt;\n4).mybatisç›¸æ¯”hibernateéœ€è¦å…³å¿ƒå¾ˆå¤šç»†èŠ‚&lt;br&gt;\nhibernateé…ç½®è¦æ¯”mybatiså¤æ‚çš„å¤šï¼Œå­¦ä¹ æˆæœ¬ä¹Ÿæ¯”mybatisé«˜ã€‚ä½†ä¹Ÿæ­£å› ä¸º mybatisä½¿ç”¨ç®€å•ï¼Œæ‰å¯¼è‡´å®ƒè¦æ¯”hibernateå…³å¿ƒå¾ˆå¤šæŠ€æœ¯ç»†èŠ‚ã€‚mybatisç”±äºä¸ç”¨è€ƒè™‘å¾ˆå¤šç»†èŠ‚ï¼Œå¼€å‘æ¨¡å¼ä¸Šä¸ä¼ ç»ŸjdbcåŒºåˆ«å¾ˆå°ï¼Œå›  æ­¤å¾ˆå®¹æ˜“ä¸Šæ‰‹å¹¶å¼€å‘é¡¹ç›®ï¼Œä½†å¿½ç•¥ç»†èŠ‚ä¼šå¯¼è‡´é¡¹ç›®å‰æœŸbugè¾ƒå¤šï¼Œå› è€Œå¼€å‘å‡ºç›¸å¯¹ç¨³å®šçš„è½¯ä»¶å¾ˆæ…¢ï¼Œè€Œå¼€å‘å‡ºè½¯ä»¶å´å¾ˆå¿«ã€‚hibernateåˆ™æ­£å¥½ä¸ä¹‹ç›¸åã€‚ ä½†æ˜¯å¦‚æœä½¿ç”¨hibernateå¾ˆç†Ÿç»ƒçš„è¯ï¼Œå®é™…ä¸Šå¼€å‘æ•ˆç‡ä¸æ¯«ä¸å·®äºç”šè‡³è¶…è¶Šmybatisã€‚&lt;/p&gt;\n&lt;p&gt;5).sqlç›´æ¥ä¼˜åŒ–ä¸Šï¼Œmybatisè¦æ¯”hibernateæ–¹ä¾¿å¾ˆå¤š&lt;br&gt;\nè¿™ä¹Ÿæ˜¯hibernateæ²¡è½çš„åŸå› ä¹‹ä¸€ã€‚å› ä¸ºsqlè¯­å¥è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ•ˆç‡ä¸Šä¸å¥½æ§åˆ¶&lt;/p&gt;\n&lt;p&gt;ä¸ºä»€ä¹ˆç°åœ¨mybatisè¦æ¯”hiernateæµè¡Œï¼Ÿ&lt;br&gt;\nå¾ˆé‡è¦çš„åŸå› ï¼šhibernateçš„å­¦ä¹ éš¾åº¦æ˜¯ç›®å‰å¤§å®¶æ¥è§¦çš„æ¡†æ¶ä¸­æœ€å¤§çš„ï¼Œå­¦ä¹ æˆæœ¬è¿œè¿œé«˜äºmybatisï¼Œæ‰€ä»¥mybatisæ›´æµè¡Œ&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;å…¥é—¨\&#34;&gt;å…¥é—¨&lt;/h2&gt;\n&lt;p&gt;1ã€å¼•å…¥ä¾èµ–.....&lt;/p&gt;\n&lt;p&gt;2ã€é…ç½®æ•°æ®æº&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;spring.datasource.url=jdbc:mysql://localhost:3306/springboot?serverTimezone=UTC&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf8&amp;amp;useSSL=true\nspring.datasource.username=root\nspring.datasource.password=root\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€ç¼–å†™å®ä½“ç±»&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åœ¨mybatisçš„å¼€å‘ä¸­ï¼Œå®ä½“ç±»æ‰€åœ¨åŒ…åéƒ½ç”¨çš„æ˜¯pojoï¼Œä½†æ˜¯åœ¨spring-data-jpaä¸­ï¼Œå› ä¸ºspringä¸­å®ä½“ç±»çš„åŒ…åä¸€èˆ¬éƒ½æ˜¯å«åšdomainï¼Œæ‰€ä»¥æˆ‘ä»¬å¼€å‘çš„æ—¶å€™å®ä½“ç±»çš„åŒ…åä¹Ÿå«domain&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;import javax.persistence.*;\n/**\n\t@Entity ï¼šè¯¥æ³¨è§£è¡¨ç¤ºè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼Œï¼ˆå‡†å¤‡ç”¨æ¥å»ºç«‹æ•°æ®åº“è¡¨çš„æ˜ å°„å…³ç³»ï¼‰\n\t@Table ï¼šç”¨æ¥å»ºç«‹å®ä½“ç±»å’Œæ•°æ®åº“è¡¨çš„çœŸå®æ˜ å°„å…³ç³»ï¼Œå±æ€§nameä¸ºè¡¨åï¼Œè¡¨åå’Œç±»åä¸€è‡´å¯ä»¥çœç•¥\n\t\n\t\t@id ï¼šè¡¨ç¤ºä¸»é”®\n\t\t@GeneratedValue(strategy = GenerationType.IDENTITY) ï¼šè¯¥å­—æ®µæ˜¯è‡ªå¢çš„\n\t\t@Column ï¼šå»ºç«‹æ•°æ®åº“åˆ—åçš„æ˜ å°„\n*/\n@Entity\n@Table(name = &amp;quot;grade&amp;quot;)\npublic class Grade {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &amp;quot;id&amp;quot;,nullable = false)\n    private Integer id;\n\n    @Column(name = &amp;quot;name&amp;quot;,nullable = false,length = 50)\n    private String name;\n\t\n    ....\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;4ã€ç¼–å†™æ¥å£&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åœ¨spring-data-jpaä¸­ï¼Œæ¥å£æ‰€åœ¨çš„åŒ…åï¼Œå®˜æ–¹ç”¨çš„æ˜¯repositoryï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¿™ä¹ˆç”¨ï¼Œå®ƒç­‰åŒäºæˆ‘ä»¬ä¹‹å‰çš„daoæˆ–è€…æ˜¯mapper&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * ç¼–å†™spring-data-jpaæ¥å£è¦ç‚¹ï¼š\n *      1.ç»§æ‰¿JpaRepository&amp;lt;å‚æ•°ä¸€è¦æ“ä½œçš„ç±»,å‚æ•°äºŒæ”¹ç±»çš„ä¸»é”®ç±»å‹&amp;gt;\n *      2.åœ¨æ¥å£ä¸Šæ·»åŠ æ³¨è§£@Repositoryï¼Œå¦‚æœè¯¥æ¥å£åœ¨å¯åŠ¨ç±»çš„åŒä¸€ä¸ªåŒ…æˆ–è€…æ˜¯åœ¨å¯åŠ¨ç±»çš„å­åŒ…ä¸­ï¼Œé‚£ä¹ˆè¯¥ç±»å°†äº¤ç»™springç®¡ç†\n *   spring-data-jpaæ¥å£ç¼–å†™çš„è§„åˆ™ï¼ˆå› ä¸ºå¢åˆ æ”¹æ˜¯å°±ç”¨å°è£…å¥½çš„å°±å¯ä»¥ï¼Œè¯¥æ¥å£ä¸»è¦æ˜¯ç”¨äºæŸ¥è¯¢ï¼‰\n *   ç²¾ç¡®æŸ¥è¯¢çš„è§„åˆ™ï¼šfind + è¡¨å + By + domainä¸­çš„å±æ€§å\n *   æ¨¡ç³ŠæŸ¥è¯¢çš„è§„åˆ™ï¼šfind + è¡¨å + By + domainä¸­çš„å±æ€§å + Like\t\n */\n@Repository\npublic interface GradeAreaRepository extends JpaRepository&amp;lt;Grade,Integer&amp;gt; {\n\t/**\n     * æ ¹æ®å¹´çº§åç§°æŸ¥è¯¢å¹´çº§\n     * @param name\n     * @return\n     */\n    Grade findGradeByName(String name);\n\n    /**\n     * æ ¹æ®å¹´çº§åç§°åšæ¨¡ç³ŠæŸ¥è¯¢\n     * @param name\n     * @return\n     */\n    List&amp;lt;Grade&amp;gt; findGradeByNameLike(String name);\n\n    /**\n     * æ ¹æ®ä¸»é”®æŸ¥è¯¢\n     */\n    Grade findGradeById(Integer id);\n    \n    /**\n     * æ ¹æ®idå’Œå¹´çº§åç§°åšè”åˆæŸ¥è¯¢\n     */\n    Grade findGradeByIdAndNameLike(Integer id,String name);\n    \n    /**\n     * å•ç‹¬çš„åˆ†é¡µæ“ä½œ\n     * å¦‚æœå¸Œæœ›åšåˆ†é¡µæ“ä½œï¼Œè¿”å›çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯spring-data-jpaè·Ÿæˆ‘ä»¬å°è£…å¥½çš„Pageï¼Œå‚æ•°æ”¾Pageableæ¥å£\n     */\n    Page&amp;lt;Grade&amp;gt; findAll(Pageable page);\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;5ã€æµ‹è¯•&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- spring-data-jpaæµ‹è¯•éœ€è¦æ·»åŠ çš„ä¾èµ–,å¦‚æœç›´æ¥åœ¨tomcatä¸­è¿è¡Œä¸éœ€è¦è¯¥åŒ… --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;net.minidev&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;asm&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;1.0.2&amp;lt;/version&amp;gt;\n    &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//æµ‹è¯•å¢åŠ \n@Test\npublic void testSave(){\n    Grade grade = new Grade();\n    grade.setName(&amp;quot;äº”å¹´çº§&amp;quot;);\n    Grade g = gradeRepository.save(grade);\n    //å¢åŠ åå¾ˆå®¹æ˜“æ‹¿åˆ°ä¸»é”®\n    System.out.println(g);\n}\n\n//æµ‹è¯•ä¿®æ”¹(å¦‚æœä¸ç»™ä¸»é”®æ˜¯å¢åŠ ï¼Œç»™ä¸»é”®å°±æ˜¯ä¿®æ”¹)\n@Test\npublic void testUpdate(){\n    Grade grade = new Grade();\n    grade.setId(4);\n    grade.setName(&amp;quot;åŸå­å¼¹è®¾ç½®ä¸åˆ¶é€ &amp;quot;);\n    Grade g = gradeRepository.save(grade);\n    System.out.println(g);\n}\n//æµ‹è¯•åˆ é™¤--æ ¹æ®ä¸»é”®åˆ é™¤\n@Test\npublic void testDeleteById(){\n    //æ‰§è¡Œåˆ é™¤\n    gradeRepository.deleteById(5);\n}\n//æµ‹è¯•åˆ é™¤--æ ¹æ®å¯¹è±¡åˆ é™¤\n@Test\npublic void testDeleteByObject(){\n    //æ‰§è¡Œåˆ é™¤\n    Grade grade = new Grade();\n    grade.setId(4);\n    gradeRepository.delete(grade);\n}\n//æµ‹è¯•åˆ é™¤--åˆ é™¤å…¨éƒ¨\n@Test\npublic void testDeleteAll(){\n    gradeRepository.deleteAll();\n}\n\n@Test\npublic void testSave100(){\n    for (int i = 1; i &amp;lt;= 100; i++) {\n        Grade grade = new Grade();\n        grade.setName(i+ &amp;quot;å¹´çº§&amp;quot;);\n        gradeRepository.save(grade);\n    }\n\n}\n\n//æµ‹è¯•æŸ¥è¯¢--æŸ¥è¯¢å…¨éƒ¨\n@Test\npublic void testGetAll(){\n    List&amp;lt;Grade&amp;gt; list = gradeRepository.findAll();\n    for (Grade grade : list) {\n        System.out.println(grade);\n    }\n}\n//æµ‹è¯•æŸ¥è¯¢--æ ¹æ®idæŸ¥è¯¢\n@Test\npublic void testGetById(){\n    //æ ¹æ®ä¸»é”®æŸ¥è¯¢\n    Grade grade = gradeRepository.findById(1).get();\n    System.out.println(grade);\n}\n\n//æµ‹è¯•æŸ¥è¯¢--æ ¹æ®idæŸ¥è¯¢(åœ¨tomcatå®¹å™¨ä¸­ä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨æµ‹è¯•çš„æ—¶å€™ä¼šå‡ºç°æ‡’åŠ è½½å¯¼è‡´sessionå…³é—­çš„é—®é¢˜)\n@Test\npublic void testGetById2(){\n    //æ ¹æ®ä¸»é”®æŸ¥è¯¢\n    //ä½¿ç”¨getOneæ–¹æ³•éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ    spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true\n    Grade grade = gradeRepository.getOne(1);\n    System.out.println(grade);\n}\n\n\n//æµ‹è¯•æŸ¥è¯¢--éä¸»é”®çš„ç²¾ç¡®æŸ¥è¯¢--æ ¹æ®å¹´çº§åç§°åšç²¾ç¡®æŸ¥è¯¢\n@Test\npublic void testGetGradeByName(){\n    Grade grade = gradeRepository.findGradeByName(&amp;quot;1å¹´çº§&amp;quot;);\n    System.out.println(grade);\n}\n\n//æµ‹è¯•æŸ¥è¯¢--æ¨¡ç³ŠæŸ¥è¯¢--æ ¹æ®å¹´çº§åç§°åšæ¨¡ç³ŠæŸ¥è¯¢\n@Test\npublic void testGetGradeByNameLike(){\n    String name = &amp;quot;ç«&amp;quot;;\n    List&amp;lt;Grade&amp;gt; list = gradeRepository.findGradeByNameLike(&amp;quot;%&amp;quot; + name + &amp;quot;%&amp;quot;);\n    for (Grade grade : list) {\n        System.out.println(grade);\n    }\n}\n\n@Test\npublic void testGetById3(){\n    Grade grade = gradeRepository.findGradeById(2);\n    System.out.println(grade);\n}\n\n//æµ‹è¯•æŸ¥è¯¢--å¤šæ¡ä»¶è”åˆæŸ¥è¯¢\n@Test\npublic void testGetGradeByIdAndNameLike(){\n    Grade grade = gradeRepository.findGradeByIdAndNameLike(1, &amp;quot;%1å¹´çº§%&amp;quot;);\n    System.out.println(grade);\n}\n\n//æµ‹è¯•æŸ¥è¯¢--åˆ†é¡µæŸ¥è¯¢\n@Test\npublic void testFindAllPages(){\n    //æ„é€ Pageableä½¿ç”¨PageRequest.of(å‚æ•°ä¸€å½“å‰è¦å±•ç¤ºçš„é¡µç ï¼Œå‚æ•°äºŒæ¯é¡µæ˜¾ç¤ºçš„ä¿¡æ¯æ¡æ•°)\n    //æ³¨æ„ï¼šåœ¨mybatisçš„pagehelperä¸­ï¼Œå½“å‰æºç æ˜¯ä»1å¼€å§‹çš„ï¼Œä½†æ˜¯åœ¨spring-data-jpaä¸­åˆ†é¡µé¡µç æ˜¯ä»0å¼€å§‹\n    \n    //PageRequestä¸­çš„å…¶ä»–å‚æ•°\n    //Pageable pageable = PageRequest.of(0,10, Sort.by(Sort.Direction.DESC,&amp;quot;id&amp;quot;));\n\t//Pageable pageable = PageRequest.of(0,10,Sort.Direction.DESC,&amp;quot;id&amp;quot;);\n    Pageable pageable = PageRequest.of(1,10);\n    Page&amp;lt;Grade&amp;gt; all = gradeRepository.findAll(pageable);\n    System.out.println(&amp;quot;æ€»æ¡æ•°&amp;quot;+all.getTotalElements());\n    System.out.println(&amp;quot;æ€»é¡µæ•°&amp;quot; + all.getTotalPages());\n    System.out.println(&amp;quot;æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ&amp;quot;+all.hasNext());\n    System.out.println(&amp;quot;æ˜¯å¦æœ‰ä¸Šä¸€é¡µ&amp;quot;+all.hasPrevious());\n    System.out.println(&amp;quot;æ˜¯å¦æœ‰å†…å®¹&amp;quot;+all.hasContent());\n    System.out.println(&amp;quot;æ˜¯å¦é¦–é¡µ&amp;quot;+all.isFirst());\n    System.out.println(&amp;quot;æ˜¯å¦æœ€åä¸€é¡µ&amp;quot;+all.isLast());\n    System.out.println(&amp;quot;å…ƒç´ æ•°é‡&amp;quot;+all.getNumberOfElements());\n    //è·å–åˆ°ä¸€é¡µæ•°æ®\n    List&amp;lt;Grade&amp;gt; list = all.getContent();\n    for (Grade grade : list) {\n        System.out.println(grade);\n    }\n        \n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;spring-data-jpa&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;Spring-Data-Jpa&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;jpa&#34;,&#34;slug&#34;:&#34;y_7xhV2bq&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/y_7xhV2bq/&#34;}],&#34;date&#34;:&#34;2020-06-10 21:07:53&#34;,&#34;dateFormat&#34;:&#34;2020-06-10&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/spring-data-jpa/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;8 min read&#34;,&#34;time&#34;:471000,&#34;words&#34;:1832,&#34;minutes&#34;:8},&#34;description&#34;:&#34;ä»€ä¹ˆæ˜¯JAP\n\nJPAæ˜¯Java Persistence APIçš„ç®€ç§°ï¼Œä¸­æ–‡åJavaæŒä¹…å±‚APIï¼Œæ˜¯JDK 5.0æ³¨è§£æˆ–XMLæè¿°å¯¹è±¡ï¼å…³ç³»è¡¨çš„æ˜ å°„å…³ç³»ï¼Œå¹¶å°†è¿è¡ŒæœŸçš„å®ä½“å¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­\nSunå¼•å…¥æ–°çš„JPA ORMè§„èŒƒå‡ºäºä¸¤ä¸ªåŸå› ï¼š...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BB%80%E4%B9%88%E6%98%AFjap\&#34;&gt;ä»€ä¹ˆæ˜¯JAP&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#mybatis%E5%92%8Chibernate%E7%9A%84%E5%8C%BA%E5%88%AB\&#34;&gt;mybatiså’Œhibernateçš„åŒºåˆ«&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%85%A5%E9%97%A8\&#34;&gt;å…¥é—¨&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;mongo\&#34;&gt;Mongo&lt;/h2&gt;\n&lt;h3 id=\&#34;ä»€ä¹ˆæ˜¯mongodb\&#34;&gt;ä»€ä¹ˆæ˜¯MongoDB&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;MongoDBæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚ç”±C++è¯­è¨€ç¼–å†™ã€‚æ—¨åœ¨ä¸ºWEBåº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚&lt;br&gt;\nMongoDBæ˜¯ä¸€ä¸ªä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚å®ƒæ”¯æŒçš„æ•°æ®ç»“æ„éå¸¸æ¾æ•£ï¼Œæ˜¯ç±»ä¼¼jsonçš„bsonæ ¼å¼ï¼Œå› æ­¤å¯ä»¥å­˜å‚¨æ¯”è¾ƒå¤æ‚çš„æ•°æ®ç±»å‹ã€‚Mongoæœ€å¤§çš„ç‰¹ç‚¹æ˜¯å®ƒæ”¯æŒçš„æŸ¥è¯¢è¯­è¨€éå¸¸å¼ºå¤§ï¼Œå…¶è¯­æ³•æœ‰ç‚¹ç±»ä¼¼äºé¢å‘å¯¹è±¡çš„æŸ¥è¯¢è¯­è¨€ï¼Œå‡ ä¹å¯ä»¥å®ç°ç±»ä¼¼å…³ç³»æ•°æ®åº“å•è¡¨æŸ¥è¯¢çš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œè€Œä¸”è¿˜æ”¯æŒå¯¹æ•°æ®å»ºç«‹ç´¢å¼•ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;mongodbç‰¹ç‚¹\&#34;&gt;MongoDBç‰¹ç‚¹&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å®ƒçš„ç‰¹ç‚¹æ˜¯é«˜æ€§èƒ½ã€æ˜“éƒ¨ç½²ã€æ˜“ä½¿ç”¨ï¼Œå­˜å‚¨æ•°æ®éå¸¸æ–¹ä¾¿ã€‚ä¸»è¦åŠŸèƒ½ç‰¹æ€§æœ‰ï¼š&lt;/p&gt;\n&lt;p&gt;*é¢å‘é›†åˆå­˜å‚¨çš„ï¼Œæ˜“äºå­˜å‚¨å¯¹è±¡ç±»å‹çš„æ•°æ®&lt;/p&gt;\n&lt;p&gt;*æ¨¡å¼è‡ªç”±ã€‚&lt;/p&gt;\n&lt;p&gt;*æ”¯æŒåŠ¨æ€[æŸ¥è¯¢]&lt;/p&gt;\n&lt;p&gt;*æ”¯æŒå®Œå…¨ç´¢å¼•ï¼ŒåŒ…å«å†…éƒ¨å¯¹è±¡ã€‚&lt;/p&gt;\n&lt;p&gt;*æ”¯æŒæŸ¥è¯¢ã€‚&lt;/p&gt;\n&lt;p&gt;*æ”¯æŒå¤åˆ¶å’Œæ•…éšœæ¢å¤ã€‚&lt;/p&gt;\n&lt;p&gt;*ä½¿ç”¨é«˜æ•ˆçš„äºŒè¿›åˆ¶æ•°æ®å­˜å‚¨ï¼ŒåŒ…æ‹¬å¤§å‹å¯¹è±¡ï¼ˆå¦‚è§†é¢‘ç­‰ï¼‰ã€‚&lt;/p&gt;\n&lt;p&gt;*è‡ªåŠ¨å¤„ç†ç¢ç‰‡ï¼Œä»¥æ”¯æŒäº‘è®¡ç®—å±‚æ¬¡çš„æ‰©å±•æ€§ã€‚&lt;/p&gt;\n&lt;p&gt;*æ”¯æŒ Golangï¼ŒRUBYï¼ŒPYTHONï¼ŒJAVAï¼ŒC++ï¼ŒPHPï¼ŒC#ç­‰å¤šç§è¯­è¨€ã€‚&lt;/p&gt;\n&lt;p&gt;*æ–‡ä»¶å­˜å‚¨æ ¼å¼ä¸ºBSONï¼ˆä¸€ç§JSONçš„æ‰©å±•ï¼‰ã€‚&lt;/p&gt;\n&lt;p&gt;*å¯é€šè¿‡ç½‘ç»œè®¿é—®ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;mongodbä½“ç³»ç»“æ„\&#34;&gt;MongoDBä½“ç³»ç»“æ„&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;mongoçš„é€»è¾‘ç»“æœæ˜¯ä¸€ç§å±‚æ¬¡ç»“æ„&lt;/p&gt;\n&lt;p&gt;ä¸»è¦ç”±å¦‚ä¸‹å‡ ä¸ªä¸œè¥¿ç»„æˆï¼š&lt;/p&gt;\n&lt;p&gt;æ–‡æ¡£(document)ã€é›†åˆ(collection)ã€æ•°æ®åº“(database)è¿™ä¸‰éƒ¨åˆ†ç»„æˆï¼Œé€»è¾‘ç»“æ„æ˜¯é¢å‘ç”¨æˆ·çš„ã€‚&lt;/p&gt;\n&lt;p&gt;ç”¨æˆ·å°±å¯ä»¥é€šè¿‡MongoDBå¼€å‘åº”ç”¨ç¨‹åºä½¿ç”¨çš„å°±æ˜¯é€»è¾‘ç»“æ„&lt;/p&gt;\n&lt;p&gt;(1)MongoDBçš„documentï¼Œç›¸å½“äºæ˜¯MySQLï¼ˆå…³ç³»å‹æ•°æ®åº“ï¼‰ä¸­çš„ä¸€è¡Œè®°å½•&lt;/p&gt;\n&lt;p&gt;(2)å¤šä¸ªæ–‡æ¡£ç»„æˆä¸€ä¸ªé›†åˆï¼Œåœ¨MySQLä¸­å¤šæ¡è®°å½•ç»„æˆçš„æ˜¯è¡¨&lt;/p&gt;\n&lt;p&gt;(3)å¤šä¸ªé›†åˆï¼Œé€»è¾‘ä¸Šç»„ç»‡åœ¨ä¸€èµ·ï¼Œå°±æ˜¯ä¸€ä¸ªæ•°æ®åº“&lt;/p&gt;\n&lt;p&gt;(4)ä¸€ä¸ªMongoDBå®ä¾‹æ”¯æŒå¤šä¸ªæ•°æ®åº“&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th style=\&#34;text-align:center\&#34;&gt;MongoDB&lt;/th&gt;\n&lt;th style=\&#34;text-align:center\&#34;&gt;Mysql&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&#34;text-align:center\&#34;&gt;æ•°æ®åº“(database)&lt;/td&gt;\n&lt;td style=\&#34;text-align:center\&#34;&gt;æ•°æ®åº“(database)&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&#34;text-align:center\&#34;&gt;é›†åˆ(collection)&lt;/td&gt;\n&lt;td style=\&#34;text-align:center\&#34;&gt;è¡¨(table)&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&#34;text-align:center\&#34;&gt;æ–‡æ¡£(document)&lt;/td&gt;\n&lt;td style=\&#34;text-align:center\&#34;&gt;è¡Œ(row)&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;h2 id=\&#34;å®‰è£…mongo\&#34;&gt;å®‰è£…Mongo&lt;/h2&gt;\n&lt;h3 id=\&#34;1-æ‹‰å–é•œåƒ\&#34;&gt;1ã€æ‹‰å–é•œåƒ&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker pull mongo:latest\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;2-åˆ›å»ºå®¹å™¨\&#34;&gt;2ã€åˆ›å»ºå®¹å™¨&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker run -di --name=mymongo -p 27017:27017 mongo --auth\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;27017 ï¼šmongoé»˜è®¤çš„ç«¯å£&lt;/p&gt;\n&lt;p&gt;--authï¼šå¯ç”¨éªŒè¯ï¼Œé»˜è®¤å…³é—­&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;3-åˆ›å»ºç”¨æˆ·\&#34;&gt;3ã€åˆ›å»ºç”¨æˆ·&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# è¿›å…¥å®¹å™¨\ndocker exec -it mymongo /bin/bash\n# è¿›å…¥Mongo\nmongo\n# é€‰æ‹©æ•°æ®åº“\nuse admin\n# åˆ›å»ºç”¨æˆ·\ndb.createUser({user:&amp;quot;root&amp;quot;,pwd:&amp;quot;root&amp;quot;,roles:[{role:&amp;quot;root&amp;quot;,db:&amp;quot;admin&amp;quot;}]})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1590650660588.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h2 id=\&#34;crud\&#34;&gt;CRUD&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å¦‚æœæ¶‰åŠåˆ°è®¤è¯é—®é¢˜ï¼Œå¿…é¡»åœ¨æ“ä½œä¹‹å‰ç™»é™†&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;db.auth(&amp;quot;è´¦å·&amp;quot;,&amp;quot;å¯†ç &amp;quot;)&lt;/code&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;æ·»åŠ \&#34;&gt;æ·»åŠ &lt;/h3&gt;\n&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.save(json)&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-sql\&#34;&gt;db.student.save({name:&amp;quot;å¼ ä¸‰&amp;quot;,sex:&amp;quot;ç”·&amp;quot;,address:&amp;quot;æ¹–åŒ—&amp;quot;})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;æŸ¥è¯¢\&#34;&gt;æŸ¥è¯¢&lt;/h3&gt;\n&lt;h4 id=\&#34;æŸ¥è¯¢å…¨éƒ¨\&#34;&gt;æŸ¥è¯¢å…¨éƒ¨&lt;/h4&gt;\n&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.find()&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-sql\&#34;&gt;db.student.find()\n# ç»“æœ\n# { &amp;quot;_id&amp;quot; : ObjectId(&amp;quot;5ece87413b6767c1aa235b37&amp;quot;), &amp;quot;name&amp;quot; : &amp;quot;å¼ ä¸‰&amp;quot;, &amp;quot;sex&amp;quot; : &amp;quot;å¥³&amp;quot;, &amp;quot;address&amp;quot; : &amp;quot;æ¹–åŒ—&amp;quot; }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;è¿™é‡Œå¤§å®¶ä¼šå‘ç°æ¯æ¡æ–‡æ¡£éƒ½æœ‰ä¸€ä¸ªå« &amp;quot;_id&amp;quot;å­—æ®µï¼Œè¿™ä¸ªç›¸å½“äºmysqlæ•°æ®åº“ä¸­è¡¨çš„ä¸»é”®ï¼Œå½“ä½ åœ¨æ’å…¥è®°å½•çš„æ—¶å€™ï¼Œæ²¡æœ‰æŒ‡å®šè¯¥å­—æ®µï¼Œmongoä¼šè‡ªåŠ¨åˆ›å»ºï¼Œç±»å‹æ˜¯ObjectIdç±»å‹&lt;/p&gt;\n&lt;p&gt;å¦‚æœæˆ‘ä»¬åœ¨æ’å…¥æ–‡æ¡£è®°å½•çš„æ—¶å€™æŒ‡å®šäº†è¯¥å­—æ®µï¼Œå…¶ç±»å‹å¯ä»¥æ˜¯ObjectIdï¼Œä¹Ÿå¯ä»¥æ˜¯mongoæ”¯æŒçš„ä»»æ„æ•°æ®ç±»å‹&lt;/p&gt;\n&lt;p&gt;å¦‚ï¼š&lt;code&gt;db.student.save({_id:1,name:&amp;quot;å¼ ä¸‰&amp;quot;,sex:15,address:&amp;quot;æ¹–åŒ—&amp;quot;})&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;å¦‚æœ_id çš„å€¼æ˜¯ä¸€æ ·çš„ä¼šè¦†ç›–åŸæœ‰çš„æ•°æ®&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h4 id=\&#34;æ¡ä»¶æŸ¥è¯¢\&#34;&gt;æ¡ä»¶æŸ¥è¯¢&lt;/h4&gt;\n&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.find({key:&amp;quot;value&amp;quot;})&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-sql\&#34;&gt;db.student.find({name:&amp;quot;æå››&amp;quot;})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;æŸ¥è¯¢å•ä¸ª\&#34;&gt;æŸ¥è¯¢å•ä¸ª&lt;/h4&gt;\n&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.findOne({key:value})&lt;/code&gt;&lt;/p&gt;\n&lt;h3 id=\&#34;ä¿®æ”¹\&#34;&gt;ä¿®æ”¹&lt;/h3&gt;\n&lt;h4 id=\&#34;å®Œå…¨ä¿®æ”¹\&#34;&gt;å®Œå…¨ä¿®æ”¹&lt;/h4&gt;\n&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.update(æ¡ä»¶json,ä¿®æ”¹åçš„json)&lt;/code&gt;&lt;/p&gt;\n&lt;h4 id=\&#34;éƒ¨åˆ†ä¿®æ”¹\&#34;&gt;éƒ¨åˆ†ä¿®æ”¹&lt;/h4&gt;\n&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.update(æ¡ä»¶json,{$set:{key:value,key:value}})&lt;/code&gt;&lt;/p&gt;\n&lt;h3 id=\&#34;åˆ é™¤\&#34;&gt;åˆ é™¤&lt;/h3&gt;\n&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.remove(jsonæ¡ä»¶)&lt;/code&gt;&lt;/p&gt;\n&lt;h2 id=\&#34;é«˜çº§æŸ¥è¯¢\&#34;&gt;é«˜çº§æŸ¥è¯¢&lt;/h2&gt;\n&lt;h3 id=\&#34;æ¨¡ç³ŠæŸ¥è¯¢\&#34;&gt;æ¨¡ç³ŠæŸ¥è¯¢&lt;/h3&gt;\n&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.find({key:/value/})&lt;/code&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æŸ¥è¯¢keyä¸­å¸¦æœ‰valueçš„æ–‡æ¡£&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;æŸ¥è¯¢null\&#34;&gt;æŸ¥è¯¢NULL&lt;/h3&gt;\n&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.find({key:null})&lt;/code&gt;&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æŸ¥è¯¢æ²¡æœ‰keyçš„æ–‡æ¡£&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;æ¯”è¾ƒæŸ¥è¯¢\&#34;&gt;æ¯”è¾ƒæŸ¥è¯¢&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-sql\&#34;&gt;# å¤§äº\ndb.collection.find({key:{$gt:value}})\n# å°äº\ndb.collection.find({key:{$lt:value}})\n# å¤§äºæˆ–ç­‰äº\ndb.collection.find({key:{$gte:value}})\n# å°äºç­‰äº\ndb.collection.find({key:{$lte:value}})\n# ä¸ç­‰äº\ndb.collection.find({key:{$ne:value}})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;åˆ¤æ–­åŸŸå­—æ®µæ˜¯å¦å­˜åœ¨\&#34;&gt;åˆ¤æ–­åŸŸ/å­—æ®µæ˜¯å¦å­˜åœ¨&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-sql\&#34;&gt;# è¯­æ³•\ndb.collection.find({key:{$exists:true}})\n# ä¾‹å­ï¼šæŸ¥è¯¢å¸¦æœ‰addressçš„æ–‡æ¡£\ndb.student.find({address:{$exists:true}})\n# ä¾‹å­ï¼šæŸ¥è¯¢æ²¡æœ‰addressçš„æ–‡æ¡£\ndb.student.find({address:{$exists:false}})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;åŒ…å«\&#34;&gt;åŒ…å«&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ç±»ä¼¼äºmysqlçš„in&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.find({key:{$in:[v1,v2,v3,.....]}})&lt;/code&gt;&lt;/p&gt;\n&lt;h3 id=\&#34;ç»Ÿè®¡æ•°é‡\&#34;&gt;ç»Ÿè®¡æ•°é‡&lt;/h3&gt;\n&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;db.collection.count()&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;æ·»åŠ æ¡ä»¶è¯­æ³•ï¼š&lt;code&gt;db.collection.count(jsonæ¡ä»¶)&lt;/code&gt;&lt;/p&gt;\n&lt;h3 id=\&#34;é€»è¾‘è¿ç®—ç¬¦\&#34;&gt;é€»è¾‘è¿ç®—ç¬¦&lt;/h3&gt;\n&lt;h4 id=\&#34;å¹¶ä¸”\&#34;&gt;å¹¶ä¸”&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-sql\&#34;&gt;# è¯­æ³•\ndb.collection.find($and:[{k1:v1},{k2:{è¡¨è¾¾å¼:v2}}])\n# ä¾‹å­ï¼šæŸ¥è¯¢å¹´é¾„å¤§äº10å¹¶ä¸”å°äº20\ndb.student.find($and:[{age:{$gt:10}},{age:{$lt:20}}])\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;æˆ–è€…\&#34;&gt;æˆ–è€…&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-sql\&#34;&gt;# è¯­æ³•\ndb.collection.find($or:[{k1:v1},{v2:{è¡¨è¾¾å¼:v2}}])\n# ä¾‹å­ï¼šæŸ¥è¯¢å¹´é¾„å¤§äº18æˆ–è€…æ€§åˆ«ä¸ºå¥³\ndb.student.find($or:[{age:{$gt:18}},{sex:&amp;quot;å¥³&amp;quot;}])\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;é\&#34;&gt;é&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-sql\&#34;&gt;db.collection.find({key:{$ne:value}})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;javaæ“ä½œmongo\&#34;&gt;JAVAæ“ä½œMongo&lt;/h2&gt;\n&lt;h3 id=\&#34;1-æ·»åŠ ä¾èµ–\&#34;&gt;1ã€æ·»åŠ ä¾èµ–&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- mongodbå®¢æˆ·ç«¯ --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.mongodb&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;mongo-java-driver&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;3.9.1&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;2-è¿æ¥æµ‹è¯•\&#34;&gt;2ã€è¿æ¥æµ‹è¯•&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Test\npublic void testConnection(){\n    //åˆ›å»ºè®¤è¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šç”¨æˆ·åã€å‚æ•°2ï¼šæ•°æ®åº“ã€å‚æ•°3ï¼šå¯†ç \n    MongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;,&amp;quot;admin&amp;quot;,&amp;quot;root&amp;quot;.toCharArray());\n    //åˆ›å»ºmongoå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šæœåŠ¡å™¨åœ°å€ï¼Œå‚æ•°2ï¼šmongodbçš„ç«¯å£å·\n    ServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;,27017);\n    MongoClient client = new MongoClient(serverAddress, Arrays.asList(credential));\n    //è·å–åˆ°é›†åˆï¼ˆæ•°æ®åº“ï¼‰\n    MongoDatabase database = client.getDatabase(&amp;quot;admin&amp;quot;);\n    //è·å–collection\n    MongoCollection&amp;lt;Document&amp;gt; student = database.getCollection(&amp;quot;student&amp;quot;);\n    //è·å–åˆ°documenté›†åˆï¼ˆä¸€è¡Œè®°å½•ï¼‰\n    FindIterable&amp;lt;Document&amp;gt; documents = student.find();\n    for (Document document : documents) {\n        System.out.println(document.getString(&amp;quot;name&amp;quot;));\n        System.out.println(document.getDouble(&amp;quot;age&amp;quot;));\n        System.out.println(document.getString(&amp;quot;sex&amp;quot;));\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;3-æ¡ä»¶æŸ¥è¯¢-åŒ¹é…\&#34;&gt;3ã€æ¡ä»¶æŸ¥è¯¢-åŒ¹é…&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Test\npublic void testFindBasi(){\n    //åˆ›å»ºè®¤è¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šç”¨æˆ·åã€å‚æ•°2ï¼šæ•°æ®åº“ã€å‚æ•°3ï¼šå¯†ç \n    MongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;,&amp;quot;admin&amp;quot;,&amp;quot;root&amp;quot;.toCharArray());\n    //åˆ›å»ºmongoå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šæœåŠ¡å™¨åœ°å€ï¼Œå‚æ•°2ï¼šmongodbçš„ç«¯å£å·\n    ServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;,27017);\n    MongoClient client = new MongoClient(serverAddress, Arrays.asList(credential));\n    //è·å–åˆ°é›†åˆï¼ˆæ•°æ®åº“ï¼‰\n    MongoDatabase database = client.getDatabase(&amp;quot;admin&amp;quot;);\n    //è·å–collection\n    MongoCollection&amp;lt;Document&amp;gt; student = database.getCollection(&amp;quot;student&amp;quot;);\n\n    /*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/\n\n    Map&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;&amp;gt;();\n    map.put(&amp;quot;name&amp;quot;,&amp;quot;å¼ ä¸‰&amp;quot;);\n    BasicDBObject basicDBObject = new BasicDBObject(map);\n\n    /*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/\n\n    //è·å–åˆ°documenté›†åˆï¼ˆä¸€è¡Œè®°å½•ï¼‰\n    FindIterable&amp;lt;Document&amp;gt; documents = student.find(basicDBObject);\n    for (Document document : documents) {\n        System.out.println(document.getString(&amp;quot;name&amp;quot;));\n        System.out.println(document.getDouble(&amp;quot;age&amp;quot;));\n        System.out.println(document.getString(&amp;quot;sex&amp;quot;));\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4-æ¡ä»¶æŸ¥è¯¢-æ¨¡ç³Š\&#34;&gt;4ã€æ¡ä»¶æŸ¥è¯¢-æ¨¡ç³Š&lt;/h3&gt;\n&lt;h4 id=\&#34;å®Œå…¨åŒ¹é…\&#34;&gt;å®Œå…¨åŒ¹é…&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/\nPattern pattern = Pattern.compile(&amp;quot;^å¼ ä¸‰$&amp;quot;);\n\nMap&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;&amp;gt;();\nmap.put(&amp;quot;name&amp;quot;,pattern);\nBasicDBObject basicDBObject = new BasicDBObject(map);\n/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;å³åŒ¹é…\&#34;&gt;å³åŒ¹é…&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Pattern pattern = Pattern.compile(&amp;quot;^å¼ .*$&amp;quot;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;å·¦åŒ¹é…\&#34;&gt;å·¦åŒ¹é…&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Pattern pattern = Pattern.compile(&amp;quot;^.*å¼ $&amp;quot;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;æ¨¡ç³ŠåŒ¹é…\&#34;&gt;æ¨¡ç³ŠåŒ¹é…&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Pattern pattern = Pattern.compile(&amp;quot;^.*å¼ .*$&amp;quot;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;5-æ•°å­—æ¯”è¾ƒ\&#34;&gt;5ã€æ•°å­—æ¯”è¾ƒ&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//æŸ¥è¯¢å¹´é¾„å¤§äº10\n/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/\nBasicDBObject basicDBObject = new BasicDBObject(&amp;quot;age&amp;quot;,new BasicDBObject(&amp;quot;$gt&amp;quot;,10));\n/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;6-æ¡ä»¶è¿æ¥-å¹¶ä¸”\&#34;&gt;6ã€æ¡ä»¶è¿æ¥-å¹¶ä¸”&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//æŸ¥è¯¢æ€§åˆ«ä¸ºç”·å¹¶ä¸”å¹´é¾„å¤§äº10å²\n/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/\nBasicDBObject basicDBObject1 = new BasicDBObject(&amp;quot;sex&amp;quot;,&amp;quot;ç”·&amp;quot;);\nBasicDBObject basicDBObject2 = new BasicDBObject(&amp;quot;age&amp;quot;,new BasicDBObject(&amp;quot;$gt&amp;quot;,10));\nBasicDBObject basicDBObject = new BasicDBObject(&amp;quot;$and&amp;quot;,Arrays.asList(basicDBObject1,basicDBObject2));\n/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;7-æ¡ä»¶è¿æ¥-æˆ–è€…\&#34;&gt;7ã€æ¡ä»¶è¿æ¥-æˆ–è€…&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//æŸ¥è¯¢æ€§åˆ«ä¸ºç”·æˆ–è€…å¹´é¾„å¤§äº20\n/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/\nBasicDBObject basicDBObject1 = new BasicDBObject(&amp;quot;sex&amp;quot;,&amp;quot;ç”·&amp;quot;);\nBasicDBObject basicDBObject2 = new BasicDBObject(&amp;quot;age&amp;quot;,new BasicDBObject(&amp;quot;$gt&amp;quot;,20));\nBasicDBObject basicDBObject = new BasicDBObject(&amp;quot;$or&amp;quot;,Arrays.asList(basicDBObject1,basicDBObject2));\n/*------------------------------------åˆ›å»ºæŸ¥è¯¢æ¡ä»¶----------------------------------------------*/\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;8-æ·»åŠ \&#34;&gt;8ã€æ·»åŠ &lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//åˆ›å»ºè®¤è¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šç”¨æˆ·åã€å‚æ•°2ï¼šæ•°æ®åº“ã€å‚æ•°3ï¼šå¯†ç \nMongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;,&amp;quot;admin&amp;quot;,&amp;quot;root&amp;quot;.toCharArray());\n//åˆ›å»ºmongoå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šæœåŠ¡å™¨åœ°å€ï¼Œå‚æ•°2ï¼šmongodbçš„ç«¯å£å·\nServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;,27017);\nMongoClient client = new MongoClient(serverAddress, Arrays.asList(credential));\n//è·å–åˆ°é›†åˆï¼ˆæ•°æ®åº“ï¼‰\nMongoDatabase database = client.getDatabase(&amp;quot;admin&amp;quot;);\n//è·å–collection\nMongoCollection&amp;lt;Document&amp;gt; student = database.getCollection(&amp;quot;student&amp;quot;);\n\nMap&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;&amp;gt;();\nmap.put(&amp;quot;name&amp;quot;,&amp;quot;ç‹äº”&amp;quot;);\nmap.put(&amp;quot;sex&amp;quot;,&amp;quot;ç”·&amp;quot;);\nmap.put(&amp;quot;age&amp;quot;,15);\nmap.put(&amp;quot;address&amp;quot;,&amp;quot;æ¹–å—&amp;quot;);\n\nDocument document = new Document(map);\nstudent.insertOne(document);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;9-ä¿®æ”¹\&#34;&gt;9ã€ä¿®æ”¹&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//æŠŠ_idä¸º1çš„æ–‡æ¡£ä¸­ageä¿®æ”¹ä¸º55\npublic void update(){\n    //åˆ›å»ºè®¤è¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šç”¨æˆ·åã€å‚æ•°2ï¼šæ•°æ®åº“ã€å‚æ•°3ï¼šå¯†ç \n    MongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;,&amp;quot;admin&amp;quot;,&amp;quot;root&amp;quot;.toCharArray());\n    //åˆ›å»ºmongoå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šæœåŠ¡å™¨åœ°å€ï¼Œå‚æ•°2ï¼šmongodbçš„ç«¯å£å·\n    ServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;,27017);\n    MongoClient client = new MongoClient(serverAddress, Arrays.asList(credential));\n    //è·å–åˆ°é›†åˆï¼ˆæ•°æ®åº“ï¼‰\n    MongoDatabase database = client.getDatabase(&amp;quot;admin&amp;quot;);\n    //è·å–collection\n    MongoCollection&amp;lt;Document&amp;gt; student = database.getCollection(&amp;quot;student&amp;quot;);\n\t//ä¿®æ”¹çš„æ¡ä»¶\n    BasicDBObject filter = new BasicDBObject(&amp;quot;_id&amp;quot;,1);\n    //ä¿®æ”¹åçš„åŸŸå’Œå€¼\n    BasicDBObject update = new BasicDBObject(&amp;quot;$set&amp;quot;,new BasicDBObject(&amp;quot;age&amp;quot;,55));\n\n    student.updateOne(filter,update);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;10-åˆ é™¤æ–‡æ¡£\&#34;&gt;10ã€åˆ é™¤æ–‡æ¡£&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public void delete(){\n    //åˆ›å»ºè®¤è¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šç”¨æˆ·åã€å‚æ•°2ï¼šæ•°æ®åº“ã€å‚æ•°3ï¼šå¯†ç \n    MongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;,&amp;quot;admin&amp;quot;,&amp;quot;root&amp;quot;.toCharArray());\n    //åˆ›å»ºmongoå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå‚æ•°1ï¼šæœåŠ¡å™¨åœ°å€ï¼Œå‚æ•°2ï¼šmongodbçš„ç«¯å£å·\n    ServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;,27017);\n    MongoClient client = new MongoClient(serverAddress, Arrays.asList(credential));\n    //è·å–åˆ°é›†åˆï¼ˆæ•°æ®åº“ï¼‰\n    MongoDatabase database = client.getDatabase(&amp;quot;admin&amp;quot;);\n    //è·å–collection\n    MongoCollection&amp;lt;Document&amp;gt; student = database.getCollection(&amp;quot;student&amp;quot;);\n\n    //åˆ é™¤æ¡ä»¶\n    BasicDBObject basicDBObject = new BasicDBObject(&amp;quot;_id&amp;quot;,1);\n    student.deleteOne(basicDBObject);//åˆ é™¤ä¸€ä¸ª\n    student.deleteMany(basicDBObject);//åˆ é™¤æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;mongodbå·¥å…·ç±»\&#34;&gt;MongoDBå·¥å…·ç±»&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;MongoClientè¢«è®¾è®¡æˆçº¿ç¨‹å®‰å…¨çš„ç±»ï¼ˆå•çº¿ç¨‹ï¼‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨è¯¥ç±»çš„æ—¶å€™ä¸ç”¨è€ƒè™‘å¹¶å‘çš„æƒ…å†µï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘å°†mongoClientåšæˆä¸€ä¸ªé™æ€å˜é‡ï¼Œä¸ºæ‰€æœ‰çš„çº¿ç¨‹å…±ç”¨ï¼Œä¸å¿…æ¯æ¬¡éƒ½é”€æ¯ï¼Œè¿™æ ·å°±å¯ä»¥æå¤§çš„æé«˜æ‰§è¡Œçš„æ•ˆç‡ï¼Œå®é™…ä¸Šmongodbæä¾›äº†å†…ç½®çš„è¿æ¥æ± æ¥å®ç°&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;package com.mongo.util;\n\nimport com.mongodb.*;\nimport com.mongodb.client.MongoDatabase;\n\nimport java.util.Arrays;\n\n/**\n * @program: mongodb\n * @author: æ½˜\n * @create: 2020-05-28 12:57\n **/\npublic class MongoManager {\n\n    private static MongoClient client = null;\n\n    private static void init(){\n        MongoCredential credential = MongoCredential.createCredential(&amp;quot;root&amp;quot;, &amp;quot;admin&amp;quot;, &amp;quot;root&amp;quot;.toCharArray());\n        ServerAddress serverAddress = new ServerAddress(&amp;quot;192.168.25.146&amp;quot;, 27017);\n        //é€‰é¡¹æ„é€ è€…\n        MongoClientOptions.Builder builder = new MongoClientOptions.Builder();\n        //è¯»å–æ•°æ®çš„è¶…æ—¶æ—¶é—´\n        builder.socketTimeout(5000);\n        //æ¯ä¸ªåœ°å€æœ€å¤§è¯·æ±‚æ•°\n        builder.connectionsPerHost(30);\n        //å†™å…¥çš„ç­–ç•¥,ä»…ä»…æŠ›å‡ºç½‘ç»œå¼‚å¸¸\n        builder.writeConcern(WriteConcern.NORMAL);\n        MongoClientOptions options = builder.build();\n        client = new MongoClient(serverAddress, Arrays.asList(credential), options);\n    }\n    public static MongoDatabase getDatabase(String db){\n\n        if(client == null){\n            init();\n        }\n\n        return client.getDatabase(db);\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;dao&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public class StudentDao {\n\tpublic void save(String name,String sex,double age,String address){\n\t\t// 2.è·å–æ•°æ®åº“(æ•°æ®åº“)\n\t\tMongoDatabase database = MongoManager.getDatabase(&amp;quot;admin&amp;quot;);\n\t\t// 3.è·å–åˆ°collection(è¡¨)\n\t\tMongoCollection&amp;lt;Document&amp;gt; collection = database.getCollection(&amp;quot;student&amp;quot;);\n\t\t//4.å‡†å¤‡è¦æ·»åŠ çš„æ•°æ®\n\t\tMap&amp;lt;String, Object&amp;gt; map = new HashMap&amp;lt;String, Object&amp;gt;();\n\t\tmap.put(&amp;quot;name&amp;quot;, name);\n\t\tmap.put(&amp;quot;sex&amp;quot;, sex);\n\t\tmap.put(&amp;quot;age&amp;quot;, age);\n\t\tmap.put(&amp;quot;address&amp;quot;, address);\n\t\tDocument document = new Document(map);\n\t\t//5.æ·»åŠ æ•°æ®\n\t\tcollection.insertOne(document);\n\t}\n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;mongodb&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;MongoDB&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;MongoDB&#34;,&#34;slug&#34;:&#34;iYO3GrMyx&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/iYO3GrMyx/&#34;}],&#34;date&#34;:&#34;2020-05-28 15:24:00&#34;,&#34;dateFormat&#34;:&#34;2020-05-28&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/mongodb/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;13 min read&#34;,&#34;time&#34;:743000,&#34;words&#34;:2695,&#34;minutes&#34;:13},&#34;description&#34;:&#34;Mongo\nä»€ä¹ˆæ˜¯MongoDB\n\nMongoDBæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚ç”±C++è¯­è¨€ç¼–å†™ã€‚æ—¨åœ¨ä¸ºWEBåº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚\nMongoDBæ˜¯ä¸€ä¸ªä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#mongo\&#34;&gt;Mongo&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BB%80%E4%B9%88%E6%98%AFmongodb\&#34;&gt;ä»€ä¹ˆæ˜¯MongoDB&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#mongodb%E7%89%B9%E7%82%B9\&#34;&gt;MongoDBç‰¹ç‚¹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#mongodb%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84\&#34;&gt;MongoDBä½“ç³»ç»“æ„&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AE%89%E8%A3%85mongo\&#34;&gt;å®‰è£…Mongo&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F\&#34;&gt;1ã€æ‹‰å–é•œåƒ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8\&#34;&gt;2ã€åˆ›å»ºå®¹å™¨&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7\&#34;&gt;3ã€åˆ›å»ºç”¨æˆ·&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#crud\&#34;&gt;CRUD&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B7%BB%E5%8A%A0\&#34;&gt;æ·»åŠ &lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9F%A5%E8%AF%A2\&#34;&gt;æŸ¥è¯¢&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9F%A5%E8%AF%A2%E5%85%A8%E9%83%A8\&#34;&gt;æŸ¥è¯¢å…¨éƒ¨&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2\&#34;&gt;æ¡ä»¶æŸ¥è¯¢&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9F%A5%E8%AF%A2%E5%8D%95%E4%B8%AA\&#34;&gt;æŸ¥è¯¢å•ä¸ª&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BF%AE%E6%94%B9\&#34;&gt;ä¿®æ”¹&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AE%8C%E5%85%A8%E4%BF%AE%E6%94%B9\&#34;&gt;å®Œå…¨ä¿®æ”¹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%83%A8%E5%88%86%E4%BF%AE%E6%94%B9\&#34;&gt;éƒ¨åˆ†ä¿®æ”¹&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%88%A0%E9%99%A4\&#34;&gt;åˆ é™¤&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2\&#34;&gt;é«˜çº§æŸ¥è¯¢&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2\&#34;&gt;æ¨¡ç³ŠæŸ¥è¯¢&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9F%A5%E8%AF%A2null\&#34;&gt;æŸ¥è¯¢NULL&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%AF%94%E8%BE%83%E6%9F%A5%E8%AF%A2\&#34;&gt;æ¯”è¾ƒæŸ¥è¯¢&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%88%A4%E6%96%AD%E5%9F%9F%E5%AD%97%E6%AE%B5%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8\&#34;&gt;åˆ¤æ–­åŸŸ/å­—æ®µæ˜¯å¦å­˜åœ¨&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8C%85%E5%90%AB\&#34;&gt;åŒ…å«&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%BB%9F%E8%AE%A1%E6%95%B0%E9%87%8F\&#34;&gt;ç»Ÿè®¡æ•°é‡&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6\&#34;&gt;é€»è¾‘è¿ç®—ç¬¦&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%B9%B6%E4%B8%94\&#34;&gt;å¹¶ä¸”&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%88%96%E8%80%85\&#34;&gt;æˆ–è€…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%9D%9E\&#34;&gt;é&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#java%E6%93%8D%E4%BD%9Cmongo\&#34;&gt;JAVAæ“ä½œMongo&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96\&#34;&gt;1ã€æ·»åŠ ä¾èµ–&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95\&#34;&gt;2ã€è¿æ¥æµ‹è¯•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2-%E5%8C%B9%E9%85%8D\&#34;&gt;3ã€æ¡ä»¶æŸ¥è¯¢-åŒ¹é…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2-%E6%A8%A1%E7%B3%8A\&#34;&gt;4ã€æ¡ä»¶æŸ¥è¯¢-æ¨¡ç³Š&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AE%8C%E5%85%A8%E5%8C%B9%E9%85%8D\&#34;&gt;å®Œå…¨åŒ¹é…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8F%B3%E5%8C%B9%E9%85%8D\&#34;&gt;å³åŒ¹é…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%B7%A6%E5%8C%B9%E9%85%8D\&#34;&gt;å·¦åŒ¹é…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D\&#34;&gt;æ¨¡ç³ŠåŒ¹é…&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-%E6%95%B0%E5%AD%97%E6%AF%94%E8%BE%83\&#34;&gt;5ã€æ•°å­—æ¯”è¾ƒ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-%E6%9D%A1%E4%BB%B6%E8%BF%9E%E6%8E%A5-%E5%B9%B6%E4%B8%94\&#34;&gt;6ã€æ¡ä»¶è¿æ¥-å¹¶ä¸”&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-%E6%9D%A1%E4%BB%B6%E8%BF%9E%E6%8E%A5-%E6%88%96%E8%80%85\&#34;&gt;7ã€æ¡ä»¶è¿æ¥-æˆ–è€…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#8-%E6%B7%BB%E5%8A%A0\&#34;&gt;8ã€æ·»åŠ &lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#9-%E4%BF%AE%E6%94%B9\&#34;&gt;9ã€ä¿®æ”¹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#10-%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3\&#34;&gt;10ã€åˆ é™¤æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#mongodb%E5%B7%A5%E5%85%B7%E7%B1%BB\&#34;&gt;MongoDBå·¥å…·ç±»&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h1 id=\&#34;docker\&#34;&gt;Docker&lt;/h1&gt;\n&lt;h2 id=\&#34;å®‰è£…docker\&#34;&gt;å®‰è£…Docker&lt;/h2&gt;\n&lt;h3 id=\&#34;1-ä½¿ç”¨yumå‘½ä»¤åœ¨çº¿å®‰è£…\&#34;&gt;1ã€ä½¿ç”¨yumå‘½ä»¤åœ¨çº¿å®‰è£…&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;yum install docker\n# é‡äº‹ä¸å†³å°±é€‰y\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;2-æŸ¥çœ‹dockerç‰ˆæœ¬\&#34;&gt;2ã€æŸ¥çœ‹dockerç‰ˆæœ¬&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker -v\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;3-å¯åŠ¨ä¸åœæ­¢\&#34;&gt;3ã€å¯åŠ¨ä¸åœæ­¢&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;systemctl å‘½ä»¤æ˜¯ç³»ç»ŸæœåŠ¡ç®¡ç†å™¨æŒ‡ä»¤ï¼Œå®ƒæ˜¯ service å’Œ chkconfig ä¸¤ä¸ªå‘½ä»¤ç»„åˆ&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# å¯åŠ¨ docker\nsystemctl start docker\n# åœæ­¢ docker\nsystemctl stop docker\n# é‡å¯ docker\nsystemctl restart docker\n# æŸ¥çœ‹ docker çŠ¶æ€\nsystemctl status docker\n# å¼€æœºè‡ªå¯\nsystemctl enable docker\n# æŸ¥çœ‹ docker æ¦‚è¦ä¿¡æ¯\ndocker info\n# æŸ¥çœ‹ docker å¸®åŠ©æ–‡æ¡£\ndocker --info\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;docker-é•œåƒæ“ä½œ\&#34;&gt;Docker é•œåƒæ“ä½œ&lt;/h2&gt;\n&lt;h3 id=\&#34;1-åˆ—å‡ºé•œåƒ\&#34;&gt;1ã€åˆ—å‡ºé•œåƒ&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker images\n# REPOSITORY   é•œåƒæ‰€åœ¨çš„ä»“åº“åç§° \n# TAG          é•œåƒæ ‡ç­¾ï¼ˆç‰ˆæœ¬å·ï¼‰\n# IMAGE ID     é•œåƒID\n# CREATE       é•œåƒåˆ›å»ºçš„æ—¶é—´ï¼ˆä»“åº“ä¸­åˆ›å»ºçš„æ—¶é—´ï¼‰\n# SIZE         é•œåƒå¤§å°\n&lt;/code&gt;&lt;/pre&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1590650520863.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h3 id=\&#34;2-æœç´¢é•œåƒ\&#34;&gt;2ã€æœç´¢é•œåƒ&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker search é•œåƒåç§°\n# INDEX \n# NAME         ä»“åº“åç§°\n# DESCRIPTION  é•œåƒæè¿°\n# STARS        ç”¨æˆ·è¯„ä»·ï¼Œååº”ä¸€ä¸ªé•œåƒçš„å—æ¬¢è¿ç¨‹åº¦\n# OFFICIAL     æ˜¯å¦æ˜¯å®˜æ–¹\n# AUTOMATED    è‡ªåŠ¨æ„å»ºï¼Œè¡¨ç¤ºè¯¥é•œåƒç”±Docker Hubè‡ªåŠ¨æ„å»ºæµç¨‹åˆ›å»ºçš„\n&lt;/code&gt;&lt;/pre&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;2\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1590650561249.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h3 id=\&#34;3-æ‹‰å–é•œåƒ\&#34;&gt;3ã€æ‹‰å–é•œåƒ&lt;/h3&gt;\n&lt;h4 id=\&#34;ä»docker-hubä¸Šæ‹‰å–\&#34;&gt;ä»Docker Hubä¸Šæ‹‰å–&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker pull centos:7\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;ustcçš„é•œåƒ\&#34;&gt;ustcçš„é•œåƒ&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;https://lug.ustc.edu.cn/wiki/mirrors/help/docker\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;é˜¿é‡Œäº‘é•œåƒ\&#34;&gt;é˜¿é‡Œäº‘é•œåƒ&lt;/h4&gt;\n&lt;p&gt;1ã€è¿›å…¥é˜¿é‡Œäº‘&lt;/p&gt;\n&lt;p&gt;https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors&lt;/p&gt;\n&lt;p&gt;2ã€å¾—åˆ°é•œåƒURLå¹¶ä¿®æ”¹daemon.json&lt;/p&gt;\n&lt;p&gt;3ã€é‡å¯daemon&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;systemctl daemon-reload\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;4ã€é‡å¯dockeræœåŠ¡&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;systemctl restart docker\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;ä¿®æ”¹daemonjson\&#34;&gt;ä¿®æ”¹daemon.json&lt;/h4&gt;\n&lt;p&gt;1ã€ç¼–è¾‘æ–‡ä»¶&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;vi /etc/docker/daemon.json\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€ä¿®æ”¹æ–‡ä»¶å†…å®¹&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;{\n&amp;quot;registry-mirrors&amp;quot;: [&amp;quot;https://docker.mirrors.ustc.edu.cn&amp;quot;]\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€é‡å¯&lt;/p&gt;\n&lt;h3 id=\&#34;4-åˆ é™¤é•œåƒ\&#34;&gt;4ã€åˆ é™¤é•œåƒ&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# åˆ é™¤æŒ‡å®šé•œåƒ\ndocker rmi $IMAGE_ID\n# åˆ é™¤æ‰€æœ‰é•œåƒ\ndocker rmi `docker images -q`\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;dockerå®¹å™¨æ“ä½œ\&#34;&gt;Dockerå®¹å™¨æ“ä½œ&lt;/h2&gt;\n&lt;h3 id=\&#34;1-æŸ¥çœ‹å®¹å™¨\&#34;&gt;1ã€æŸ¥çœ‹å®¹å™¨&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨\ndocker ps\n# æŸ¥çœ‹è¿è¡Œè¿‡çš„å®¹å™¨\ndocker ps -a\n# æŸ¥çœ‹æœ€åä¸€æ¬¡è¿è¡Œçš„å®¹å™¨\ndocker ps -i\n# æŸ¥çœ‹åœæ­¢çš„å®¹å™¨\ndocker ps -f status=exited\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;2-åˆ›å»ºä¸å¯åŠ¨å®¹å™¨\&#34;&gt;2ã€åˆ›å»ºä¸å¯åŠ¨å®¹å™¨&lt;/h3&gt;\n&lt;p&gt;åˆ›å»ºå®¹å™¨å¸¸ç”¨çš„å‚æ•°è¯´æ˜&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker run  åˆ›å»ºå®¹å™¨å‘½ä»¤\n-i          è¿è¡Œè¯¥å®¹å™¨\n-t          è¡¨ç¤ºå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥å…¶å‘½ä»¤è¡Œã€‚åŠ å…¥è¿™ä¸¤ä¸ªå‚æ•°åï¼Œå®¹å™¨åˆ›å»ºå°±èƒ½ç™»å½•è¿›å»ã€‚å³åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ã€‚\n--name      ä¸ºåˆ›å»ºçš„å®¹å™¨å‘½å\n-v          è¡¨ç¤ºç›®å½•æ˜ å°„å…³ç³»ï¼ˆå‰è€…æ˜¯å®¿ä¸»æœºç›®å½•ï¼Œåè€…æ˜¯æ˜ å°„åˆ°å®¿ä¸»æœºä¸Šçš„ç›®å½•ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªï¼våšå¤šä¸ªç›®å½•æˆ–æ–‡ä»¶æ˜ å°„ã€‚æ³¨æ„ï¼šæœ€å¥½åšç›®å½•æ˜ å°„ï¼Œåœ¨å®¿ä¸»æœºä¸Šåšä¿®æ”¹ï¼Œç„¶åå…±äº«åˆ°å®¹å™¨ä¸Šã€‚\n-d          åœ¨runåé¢åŠ ä¸Š-då‚æ•°åˆ™ä¼šåˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨åœ¨åå°è¿è¡Œï¼ˆè¿™æ ·åˆ›å»ºå®¹å™¨åä¸ä¼šè‡ªåŠ¨ç™»é™†å®¹å™¨ï¼Œå¦‚æœåªåŠ -i-tä¸¤ä¸ªå‚æ•°ï¼Œåˆ›å»ºåå°±ä¼šè‡ªåŠ¨è¿›å…¥å®¹å™¨ï¼‰\n-p          ç«¯å£æ˜ å°„ï¼Œå‰è€…æ˜¯å®¿ä¸»æœºç«¯å£ï¼Œåè€…æ˜¯å®¹å™¨å†…çš„æ˜ å°„ç«¯å£ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ª-påšå¤šä¸ªç«¯å£æ˜ å°„\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;äº¤äº’å¼å®¹å™¨\&#34;&gt;äº¤äº’å¼å®¹å™¨&lt;/h4&gt;\n&lt;p&gt;åˆ›å»ºä¸€ä¸ªäº¤äº’å¼å®¹å™¨å¹¶å‘½åä¸ºï¼šmycentos&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker run -it --name=mycentos centos:7 /bin/bash\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ä½¿ç”¨exitå‘½ä»¤ é€€å‡ºå½“å‰å®¹å™¨&lt;/p&gt;\n&lt;h4 id=\&#34;åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨\&#34;&gt;åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨&lt;/h4&gt;\n&lt;p&gt;åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨ï¼šå¦‚æœå¯¹äºä¸€ä¸ªéœ€è¦é•¿æœŸè¿è¡Œçš„å®¹å™¨æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨ã€‚å‘½ä»¤å¦‚ä¸‹ï¼ˆå®¹å™¨åç§°ä¸èƒ½é‡å¤ï¼‰&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker run -id --name=mycentos2  centos:7\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ç™»é™†å®ˆæŠ¤å¼å®¹å™¨&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker exec -it container_name(æˆ–è€…container_id) /bin/bash (exité€€å‡ºæ—¶å®¹å™¨ä¸ä¼šåœæ­¢)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;3\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1590650581316.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h3 id=\&#34;3-åœæ­¢ä¸å¯åŠ¨å®¹å™¨\&#34;&gt;3ã€åœæ­¢ä¸å¯åŠ¨å®¹å™¨&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# åœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨\ndocker stop $CONTAINER_NAME/ID\n# è¿è¡Œå·²åœæ­¢çš„å®¹å™¨\ndocker start $CONTAINER_NAME/ID\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4-æ–‡ä»¶æ‹·è´\&#34;&gt;4ã€æ–‡ä»¶æ‹·è´&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# å°†æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨å†…\ndocker cp å®¿ä¸»æœºå†…è¦æ‹·è´çš„æ–‡ä»¶æˆ–ç›®å½• å®¹å™¨åç§°:æ‹·è´åˆ°å®¹å™¨ç›®å½•\n# å°†å®¹å™¨å†…çš„æ–‡ä»¶æ‹·è´å‡ºæ¥\ndocker cp å®¹å™¨åç§°:å®¹å™¨è¦æ‹·è´å‡ºå¼€çš„æ–‡ä»¶æˆ–ç›®å½• æ‹·è´åˆ°å®¿ä¸»æœºé‚£ä¸ªç›®å½•\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;5-ç›®å½•æŒ‚è½½\&#34;&gt;5ã€ç›®å½•æŒ‚è½½&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™ï¼Œå°†å®¿ä¸»æœºçš„ç›®å½•ä¸å®¹å™¨å†…çš„ç›®å½•è¿›è¡Œæ˜ å°„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¿®æ”¹å®¿ä¸»æœºæŸä¸ªç›®å½•çš„æ–‡ä»¶ä»è€Œå»å½±å“å®¹å™¨ã€‚&lt;/p&gt;\n&lt;p&gt;åˆ›å»ºå®¹å™¨ æ·»åŠ -vå‚æ•° åè¾¹ä¸º  å®¿ä¸»æœºç›®å½•:å®¹å™¨ç›®å½•&lt;/p&gt;\n&lt;p&gt;å¦‚æœå…±äº«å¤šçº§ç›®å½•å¯èƒ½ä¼šå‡ºç°æƒé™ä¸è¶³çš„æƒ…å†µ&lt;/p&gt;\n&lt;p&gt;è¿™æ˜¯å› ä¸ºCentOS7ä¸­çš„å®‰å…¨æ¨¡å—selinuxæŠŠæƒé™ç¦æ‰äº†ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ å‚æ•° --privileged=true æ¥è§£å†³æŒ‚è½½çš„ç›®å½•æ²¡æœ‰æƒé™çš„é—®é¢˜&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker run -di -v /usr/test:/usr/test --name=mycentos centos:7\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;6-æŸ¥çœ‹å®¹å™¨ipåœ°å€\&#34;&gt;6ã€æŸ¥çœ‹å®¹å™¨IPåœ°å€&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®¹å™¨è¿è¡Œçš„å„ç§æ•°æ®\ndocker inspect container_name\n# ä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ç›´æ¥è¾“å‡ºIPåœ°å€\ndocker inspect --format=&#39;{{.NetworkSettings.IPAddress}}&#39; container_name\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;7-åˆ é™¤å®¹å™¨\&#34;&gt;7ã€åˆ é™¤å®¹å™¨&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# åˆ é™¤æŒ‡å®šå®¹å™¨\ndocker rm container_id/name\n# åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼ˆä»¥åœæ­¢è¿è¡Œçš„ï¼‰\ndocker rm `docker ps -a -q`\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;éƒ¨ç½²åº”ç”¨\&#34;&gt;éƒ¨ç½²åº”ç”¨&lt;/h2&gt;\n&lt;h3 id=\&#34;mysqléƒ¨ç½²\&#34;&gt;MySQLéƒ¨ç½²&lt;/h3&gt;\n&lt;p&gt;1ã€æ‹‰å–MySQLé•œåƒ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker pull mysql\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€åˆ›å»ºMySQLå®¹å™¨&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# -p å®¿ä¸»æœºæ˜ å°„ç«¯å£:å®¹å™¨è¿è¡Œç«¯å£\n# -e è¡¨ç¤ºæ·»åŠ ç¯å¢ƒå˜é‡ï¼ŒMYSQL_ROOT_PASSWORD ä¸ºrootç”¨æˆ·çš„ç™»é™†å¯†ç \ndocker run -di --name=jd_mysql -p 33306:3306 -e MYSQL_ROOT_PASSWORD=root mysql\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€è¿›å…¥MySQLå®¹å™¨&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker exec -it jd_mysql /bin/bash\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;4ã€ç™»é™†MySQL&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# -u ç”¨æˆ·åï¼Œ-uåé¢éœ€è¦æ‰“ç©ºæ ¼\n# -på¯†ç ï¼Œ-påé¢æ²¡æœ‰ç©ºæ ¼,åŠ äº†ç©ºæ ¼ä¼šå†è¾“å…¥ä¸€éå¯†ç \nmysql -u root -proot\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;5ã€é€€å‡ºMySQL&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# é€€å‡ºmysql\nquit\n# é€€å‡ºå®¹å™¨\nexit\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;tomcatéƒ¨ç½²\&#34;&gt;Tomcatéƒ¨ç½²&lt;/h3&gt;\n&lt;p&gt;1ã€æ‹‰å–Tomcaté•œåƒ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker pull tomcat:7-jre7\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€åˆ›å»ºtomcatå®¹å™¨&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åˆ›å»ºå®¹å™¨ç”¨äºéƒ¨ç½²å•ç‚¹ç™»å½•ç³»ç»Ÿï¼ˆCASï¼‰ -pè¡¨ç¤ºåœ°å€æ˜ å°„&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker run -di --name=jd_tomcat -p 9100:8080 -v /usr/local/webapps:/usr/local/tomcat/webapps --privileged=true tomcat:7-jre7\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€è®¿é—®ip:9100/cas&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ç™»é™†æµ‹è¯•ï¼Œå¦‚æœå‡ºç°Invalid credentialsé‡å¯.&lt;/p&gt;\n&lt;p&gt;docker restart jd_tomcat&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;nginxéƒ¨ç½²\&#34;&gt;nginxéƒ¨ç½²&lt;/h3&gt;\n&lt;p&gt;1ã€æ‹‰å–é•œåƒ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker pull nginx\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€åˆ›å»ºå®¹å™¨&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker run -di --name=mynginx -p 80:80 nginx /bin/bash\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€æµ‹è¯•&lt;/p&gt;\n&lt;p&gt;æ— æ³•è®¿é—®éœ€è¦æ‰‹åŠ¨å¯åŠ¨nginx&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker exec -it jd_nginx /bin/bash\n/etc/init.d/nginx start\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;4ã€ç¼–è¾‘é…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;# å°†nginxé…ç½®æ–‡ä»¶å¤åˆ¶å‡ºæ¥\ndocker cp jd_nginx:/etc/nginx/nginx.conf  nginx.conf\n# ä¿®æ”¹nginx.conf\n.......\n# å°†æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨\ndocker cp nginx.conf jd_nginx:/etc/nginx/nginx.conf\n#é‡å¯å®¹å™¨\ndocker restart jd_nginx\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;rediséƒ¨ç½²\&#34;&gt;Rediséƒ¨ç½²&lt;/h3&gt;\n&lt;p&gt;1ã€æ‹‰å–é•œåƒ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker pull redis\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€åˆ›å»ºå®¹å™¨&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker run -di --name=jd_redis -p 6379:6379 redis\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€æµ‹è¯•è¿æ¥&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;redis Desktop&lt;/code&gt;&lt;/p&gt;\n&lt;h2 id=\&#34;å¤‡ä»½ä¸è¿ç§»\&#34;&gt;å¤‡ä»½ä¸è¿ç§»&lt;/h2&gt;\n&lt;h3 id=\&#34;1-å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒ\&#34;&gt;1ã€å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒ&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker commit jd_nginx mynginx\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;jd_nginxï¼šå®¹å™¨åç§°&lt;/p&gt;\n&lt;p&gt;mynginxï¼šæ–°é•œåƒåç§°&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;2-é•œåƒå¤‡ä»½\&#34;&gt;2ã€é•œåƒå¤‡ä»½&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker save -o mynginx.tar mynginx\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;-o ï¼šè¾“å‡ºåˆ°çš„æ–‡ä»¶&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;3-é•œåƒæ¢å¤ä¸è¿ç§»\&#34;&gt;3ã€é•œåƒæ¢å¤ä¸è¿ç§»&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;docker load -i mynginx.tar\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;-i ï¼šè¾“å…¥çš„æ–‡ä»¶&lt;/p&gt;\n&lt;/blockquote&gt;\n&#34;,&#34;fileName&#34;:&#34;docker&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;Docker&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;Docker&#34;,&#34;slug&#34;:&#34;2aIYOzt0W&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/2aIYOzt0W/&#34;}],&#34;date&#34;:&#34;2020-05-28 15:21:32&#34;,&#34;dateFormat&#34;:&#34;2020-05-28&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/docker/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;7 min read&#34;,&#34;time&#34;:393000,&#34;words&#34;:1595,&#34;minutes&#34;:7},&#34;description&#34;:&#34;Docker\nå®‰è£…Docker\n1ã€ä½¿ç”¨yumå‘½ä»¤åœ¨çº¿å®‰è£…\nyum install docker\n# é‡äº‹ä¸å†³å°±é€‰y\n\n2ã€æŸ¥çœ‹dockerç‰ˆæœ¬\ndocker -v\n\n3ã€å¯åŠ¨ä¸åœæ­¢\n\nsystemctl å‘½ä»¤æ˜¯ç³»ç»ŸæœåŠ¡ç®¡ç†å™¨æŒ‡ä»¤ï¼Œå®ƒæ˜¯ s...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;&lt;a href=\&#34;#docker\&#34;&gt;Docker&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AE%89%E8%A3%85docker\&#34;&gt;å®‰è£…Docker&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E4%BD%BF%E7%94%A8yum%E5%91%BD%E4%BB%A4%E5%9C%A8%E7%BA%BF%E5%AE%89%E8%A3%85\&#34;&gt;1ã€ä½¿ç”¨yumå‘½ä»¤åœ¨çº¿å®‰è£…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E6%9F%A5%E7%9C%8Bdocker%E7%89%88%E6%9C%AC\&#34;&gt;2ã€æŸ¥çœ‹dockerç‰ˆæœ¬&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E5%90%AF%E5%8A%A8%E4%B8%8E%E5%81%9C%E6%AD%A2\&#34;&gt;3ã€å¯åŠ¨ä¸åœæ­¢&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#docker-%E9%95%9C%E5%83%8F%E6%93%8D%E4%BD%9C\&#34;&gt;Docker é•œåƒæ“ä½œ&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E5%88%97%E5%87%BA%E9%95%9C%E5%83%8F\&#34;&gt;1ã€åˆ—å‡ºé•œåƒ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F\&#34;&gt;2ã€æœç´¢é•œåƒ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F\&#34;&gt;3ã€æ‹‰å–é•œåƒ&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BB%8Edocker-hub%E4%B8%8A%E6%8B%89%E5%8F%96\&#34;&gt;ä»Docker Hubä¸Šæ‹‰å–&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#ustc%E7%9A%84%E9%95%9C%E5%83%8F\&#34;&gt;ustcçš„é•œåƒ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F\&#34;&gt;é˜¿é‡Œäº‘é•œåƒ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BF%AE%E6%94%B9daemonjson\&#34;&gt;ä¿®æ”¹daemon.json&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F\&#34;&gt;4ã€åˆ é™¤é•œåƒ&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#docker%E5%AE%B9%E5%99%A8%E6%93%8D%E4%BD%9C\&#34;&gt;Dockerå®¹å™¨æ“ä½œ&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8\&#34;&gt;1ã€æŸ¥çœ‹å®¹å™¨&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E5%88%9B%E5%BB%BA%E4%B8%8E%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8\&#34;&gt;2ã€åˆ›å»ºä¸å¯åŠ¨å®¹å™¨&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%AE%B9%E5%99%A8\&#34;&gt;äº¤äº’å¼å®¹å™¨&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%88%9B%E5%BB%BA%E5%AE%88%E6%8A%A4%E5%BC%8F%E5%AE%B9%E5%99%A8\&#34;&gt;åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E5%81%9C%E6%AD%A2%E4%B8%8E%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8\&#34;&gt;3ã€åœæ­¢ä¸å¯åŠ¨å®¹å™¨&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D\&#34;&gt;4ã€æ–‡ä»¶æ‹·è´&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-%E7%9B%AE%E5%BD%95%E6%8C%82%E8%BD%BD\&#34;&gt;5ã€ç›®å½•æŒ‚è½½&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8ip%E5%9C%B0%E5%9D%80\&#34;&gt;6ã€æŸ¥çœ‹å®¹å™¨IPåœ°å€&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8\&#34;&gt;7ã€åˆ é™¤å®¹å™¨&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8\&#34;&gt;éƒ¨ç½²åº”ç”¨&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#mysql%E9%83%A8%E7%BD%B2\&#34;&gt;MySQLéƒ¨ç½²&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#tomcat%E9%83%A8%E7%BD%B2\&#34;&gt;Tomcatéƒ¨ç½²&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#nginx%E9%83%A8%E7%BD%B2\&#34;&gt;nginxéƒ¨ç½²&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#redis%E9%83%A8%E7%BD%B2\&#34;&gt;Rediséƒ¨ç½²&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%81%E7%A7%BB\&#34;&gt;å¤‡ä»½ä¸è¿ç§»&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E5%B0%86%E5%AE%B9%E5%99%A8%E4%BF%9D%E5%AD%98%E4%B8%BA%E9%95%9C%E5%83%8F\&#34;&gt;1ã€å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E9%95%9C%E5%83%8F%E5%A4%87%E4%BB%BD\&#34;&gt;2ã€é•œåƒå¤‡ä»½&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E9%95%9C%E5%83%8F%E6%81%A2%E5%A4%8D%E4%B8%8E%E8%BF%81%E7%A7%BB\&#34;&gt;3ã€é•œåƒæ¢å¤ä¸è¿ç§»&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;æ­å»ºredis-cluster\&#34;&gt;æ­å»ºRedis-Cluster&lt;/h2&gt;\n&lt;h3 id=\&#34;æ­å»ºè¦æ±‚\&#34;&gt;æ­å»ºè¦æ±‚&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;éœ€è¦ 6 å° redis æœåŠ¡å™¨ã€‚æ­å»ºä¼ªé›†ç¾¤ã€‚&lt;/p&gt;\n&lt;p&gt;éœ€è¦ 6 ä¸ª redis å®ä¾‹ã€‚&lt;/p&gt;\n&lt;p&gt;éœ€è¦è¿è¡Œåœ¨ä¸åŒçš„ç«¯å£ 7001-7006&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;å‡†å¤‡å·¥ä½œ\&#34;&gt;å‡†å¤‡å·¥ä½œ&lt;/h3&gt;\n&lt;h4 id=\&#34;1-å®‰è£…gcc\&#34;&gt;1ã€å®‰è£…gcc&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;yum install gcc-c++\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;2-ä½¿ç”¨yumå‘½ä»¤å®‰è£…-ruby-æˆ‘ä»¬éœ€è¦ä½¿ç”¨rubyè„šæœ¬æ¥å®ç°é›†ç¾¤æ­å»º\&#34;&gt;2ã€ä½¿ç”¨yumå‘½ä»¤å®‰è£… ruby ï¼ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨rubyè„šæœ¬æ¥å®ç°é›†ç¾¤æ­å»ºï¼‰&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;yum install ruby\nyum install rubygems\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä»¥ä¸Šä¸¤æ­¥é‡åˆ°é€‰æ‹©y/Nç›´æ¥å¡«yå³å¯&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h4 id=\&#34;3-å°†redisæºç åŒ…ä¸Šä¼ åˆ°-linux-ç³»ç»Ÿ-è§£å‹redisæºç åŒ…\&#34;&gt;3ã€å°†redisæºç åŒ…ä¸Šä¼ åˆ° linux ç³»ç»Ÿ ï¼Œè§£å‹redisæºç åŒ…&lt;/h4&gt;\n&lt;blockquote&gt;\n&lt;p&gt;tar -zxvf redis-3.0.0.tar.gz&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h4 id=\&#34;4-ç¼–è¯‘redisæºç -è¿›å…¥redisæºç æ–‡ä»¶å¤¹\&#34;&gt;4ã€ç¼–è¯‘redisæºç  ï¼Œè¿›å…¥redisæºç æ–‡ä»¶å¤¹&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;cd redis-3.0.0\nmake\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;5-åˆ›å»ºç›®å½•usrlocalredis-clusterç›®å½•-å®‰è£…6ä¸ªrediså®ä¾‹åˆ†åˆ«å®‰è£…åœ¨ä»¥ä¸‹ç›®å½•\&#34;&gt;5ã€åˆ›å»ºç›®å½•/usr/local/redis-clusterç›®å½•ï¼Œ å®‰è£…6ä¸ªrediså®ä¾‹ï¼Œåˆ†åˆ«å®‰è£…åœ¨ä»¥ä¸‹ç›®å½•&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;mkdir /usr/local/redis-cluster\ncd redis-3.0.0\nmake install PREFIX=/usr/local/redis-cluster/redis-1\n......\nmake install PREFIX=/usr/local/redis-cluster/redis-6\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;6-å¤åˆ¶é…ç½®æ–‡ä»¶-å°†-redis-300redisconf-å¤åˆ¶åˆ°redisä¸‹çš„binç›®å½•ä¸‹\&#34;&gt;6ã€å¤åˆ¶é…ç½®æ–‡ä»¶ å°† /redis-3.0.0/redis.conf å¤åˆ¶åˆ°redisä¸‹çš„binç›®å½•ä¸‹&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;cp redis.conf /usr/local/redis-cluster/redis-1/bin\n......\ncp redis.conf /usr/local/redis-cluster/redis-6/bin\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;é…ç½®é›†ç¾¤\&#34;&gt;é…ç½®é›†ç¾¤&lt;/h3&gt;\n&lt;p&gt;1ã€ä¿®æ”¹æ¯ä¸ªredisèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶redis.conf&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä¿®æ”¹è¿è¡Œç«¯å£ä¸º7001 ï¼ˆ7002 7003 .....ï¼‰(45è¡Œ)&lt;/p&gt;\n&lt;p&gt;å°†cluster-enabled yes å‰çš„æ³¨é‡Šå»æ‰(632è¡Œ)&lt;/p&gt;\n&lt;p&gt;daemonize no æ”¹ä¸ºyes ï¼ˆ43è¡Œï¼‰&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;cd /usr/local/redis-cluster/\nvi redis-1/bin/redis.conf\n......\nvi redis-6/bin/redis.conf\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€å¯åŠ¨æ¯ä¸ªrediså®ä¾‹&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;cd redis-1/bin/\n./redis-server redis.conf\n.......\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€ä¸Šä¼ redis-3.0.0.gem ï¼Œå®‰è£… rubyç”¨äºæ­å»ºredisé›†ç¾¤çš„è„šæœ¬ã€‚&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;cd ~\ncp redis-3.0.0.gem /usr/local/redis-cluster/\ncd redis-3.0.0/src/\ncp redis-trib.rb /usr/local/redis-cluster/\ncd /usr/local/redis-cluster/\ngem install redis-3.0.0.gem\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;4ã€ä½¿ç”¨ ruby è„šæœ¬æ­å»ºé›†ç¾¤ã€‚&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;è¿›å…¥redisæºç ç›®å½•ä¸­çš„srcç›®å½• æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;./redis-trib.rb create --replicas 1 192.168.25.144:7001 192.168.25.144:7002 192.168.25.144:7003 192.168.25.144:7004 192.168.25.144:7005 192.168.25.144:7006\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;5ã€æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;ps -ef | grep redis\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;springdataredisè¿æ¥redisé›†ç¾¤\&#34;&gt;SpringDataRedisè¿æ¥Redisé›†ç¾¤&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt; \n&amp;lt;beans xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot; \n  xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot; xmlns:p=&amp;quot;http://www.springframework.org/schema/p&amp;quot; \n  xmlns:context=&amp;quot;http://www.springframework.org/schema/context&amp;quot; \n  xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans   \n            http://www.springframework.org/schema/beans/spring-beans.xsd   \n            http://www.springframework.org/schema/context   \n            http://www.springframework.org/schema/context/spring-context.xsd&amp;quot;&amp;gt;  \n\t&amp;lt;!-- åŠ è½½é…ç½®å±æ€§æ–‡ä»¶ --&amp;gt;  \n&amp;lt;context:property-placeholder ignore-unresolvable=&amp;quot;true&amp;quot; location=&amp;quot;classpath:properties/redis-cluster-config.properties&amp;quot; /&amp;gt;  \n&amp;lt;bean id=&amp;quot;redis-clusterConfiguration&amp;quot; class=&amp;quot;org.springframework.data.redis.connection.redis-clusterConfiguration&amp;quot;&amp;gt;  \n\t&amp;lt;property name=&amp;quot;maxRedirects&amp;quot; value=&amp;quot;${redis.maxRedirects}&amp;quot;&amp;gt;&amp;lt;/property&amp;gt;  \n\t&amp;lt;property name=&amp;quot;clusterNodes&amp;quot;&amp;gt;  \n\t&amp;lt;set&amp;gt;  \n\t\t&amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  \n\t\t\t&amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host1}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t\t\t&amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port1}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t\t&amp;lt;/bean&amp;gt;  \n\t\t&amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  \n\t\t\t&amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host2}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t\t\t&amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port2}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t\t&amp;lt;/bean&amp;gt;  \n\t\t&amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  \n\t\t\t&amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host3}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t\t\t&amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port3}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t\t&amp;lt;/bean&amp;gt;  \n\t     &amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  \n\t         &amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host4}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t         &amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port4}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t      &amp;lt;/bean&amp;gt;  \n\t      &amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  \n\t         &amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host5}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t         &amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port5}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t      &amp;lt;/bean&amp;gt;  \n\t\t &amp;lt;bean class=&amp;quot;org.springframework.data.redis.connection.redis-clusterNode&amp;quot;&amp;gt;  \n\t\t\t&amp;lt;constructor-arg name=&amp;quot;host&amp;quot; value=&amp;quot;${redis.host6}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t\t\t&amp;lt;constructor-arg name=&amp;quot;port&amp;quot; value=&amp;quot;${redis.port6}&amp;quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;  \n\t\t &amp;lt;/bean&amp;gt;  \n\t   &amp;lt;/set&amp;gt;  \n\t &amp;lt;/property&amp;gt;  \n&amp;lt;/bean&amp;gt;  \n&amp;lt;bean id=&amp;quot;jedisPoolConfig&amp;quot;   class=&amp;quot;redis.clients.jedis.JedisPoolConfig&amp;quot;&amp;gt;  \n\t   &amp;lt;property name=&amp;quot;maxIdle&amp;quot; value=&amp;quot;${redis.maxIdle}&amp;quot; /&amp;gt;   \n\t   &amp;lt;property name=&amp;quot;maxTotal&amp;quot; value=&amp;quot;${redis.maxTotal}&amp;quot; /&amp;gt;   \n&amp;lt;/bean&amp;gt;  \n&amp;lt;bean id=&amp;quot;jeidsConnectionFactory&amp;quot; class=&amp;quot;org.springframework.data.redis.connection.jedis.JedisConnectionFactory&amp;quot;  &amp;gt;  \n\t\t&amp;lt;constructor-arg ref=&amp;quot;redis-clusterConfiguration&amp;quot; /&amp;gt;  \n\t\t&amp;lt;constructor-arg ref=&amp;quot;jedisPoolConfig&amp;quot; /&amp;gt;  \n&amp;lt;/bean&amp;gt;    \n&amp;lt;bean id=&amp;quot;redisTemplate&amp;quot; class=&amp;quot;org.springframework.data.redis.core.RedisTemplate&amp;quot;&amp;gt;  \n\t\t&amp;lt;property name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;jeidsConnectionFactory&amp;quot; /&amp;gt;  \n&amp;lt;/bean&amp;gt;  \n&amp;lt;/beans&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;redis-cluster-config.properties&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;redis.host1=192.168.25.140\nredis.port1=7001\n\nredis.host2=192.168.25.140\nredis.port2=7002\n\nredis.host3=192.168.25.140\nredis.port3=7003\n\nredis.host4=192.168.25.140\nredis.port4=7004\n\nredis.host5=192.168.25.140\nredis.port5=7005\n\nredis.host6=192.168.25.140\nredis.port6=7006\n\nredis.maxRedirects=3\nredis.maxIdle=100\nredis.maxTotal=600\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸æµ‹è¯•\&#34;&gt;æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸æµ‹è¯•&lt;/h2&gt;\n&lt;p&gt;å…³é—­èŠ‚ç‚¹å‘½ä»¤&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;./redis-cli -p ç«¯å£ shutdown \n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æµ‹è¯•å…³é—­7001 å’Œ7004, çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚&lt;/p&gt;\n&lt;p&gt;æµ‹è¯•å…³é—­7001ã€7002ã€7003 ä¼šå‘ç”Ÿä»€ä¹ˆã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&#34;,&#34;fileName&#34;:&#34;redis-cluster&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;Redis-Cluster&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;Redis-Cluster&#34;,&#34;slug&#34;:&#34;OmikDdlZN&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/OmikDdlZN/&#34;},{&#34;name&#34;:&#34;Redis&#34;,&#34;slug&#34;:&#34;WWST57yMi&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/WWST57yMi/&#34;}],&#34;date&#34;:&#34;2020-05-26 01:19:43&#34;,&#34;dateFormat&#34;:&#34;2020-05-26&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/redis-cluster/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;7 min read&#34;,&#34;time&#34;:387000,&#34;words&#34;:1157,&#34;minutes&#34;:7},&#34;description&#34;:&#34;æ­å»ºRedis-Cluster\næ­å»ºè¦æ±‚\n\néœ€è¦ 6 å° redis æœåŠ¡å™¨ã€‚æ­å»ºä¼ªé›†ç¾¤ã€‚\néœ€è¦ 6 ä¸ª redis å®ä¾‹ã€‚\néœ€è¦è¿è¡Œåœ¨ä¸åŒçš„ç«¯å£ 7001-7006\n\nå‡†å¤‡å·¥ä½œ\n1ã€å®‰è£…gcc\nyum install gcc-c++\n\n2...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%90%AD%E5%BB%BAredis-cluster\&#34;&gt;æ­å»ºRedis-Cluster&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%90%AD%E5%BB%BA%E8%A6%81%E6%B1%82\&#34;&gt;æ­å»ºè¦æ±‚&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\&#34;&gt;å‡†å¤‡å·¥ä½œ&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E5%AE%89%E8%A3%85gcc\&#34;&gt;1ã€å®‰è£…gcc&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E4%BD%BF%E7%94%A8yum%E5%91%BD%E4%BB%A4%E5%AE%89%E8%A3%85-ruby-%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8ruby%E8%84%9A%E6%9C%AC%E6%9D%A5%E5%AE%9E%E7%8E%B0%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA\&#34;&gt;2ã€ä½¿ç”¨yumå‘½ä»¤å®‰è£… ruby ï¼ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨rubyè„šæœ¬æ¥å®ç°é›†ç¾¤æ­å»ºï¼‰&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E5%B0%86redis%E6%BA%90%E7%A0%81%E5%8C%85%E4%B8%8A%E4%BC%A0%E5%88%B0-linux-%E7%B3%BB%E7%BB%9F-%E8%A7%A3%E5%8E%8Bredis%E6%BA%90%E7%A0%81%E5%8C%85\&#34;&gt;3ã€å°†redisæºç åŒ…ä¸Šä¼ åˆ° linux ç³»ç»Ÿ ï¼Œè§£å‹redisæºç åŒ…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-%E7%BC%96%E8%AF%91redis%E6%BA%90%E7%A0%81-%E8%BF%9B%E5%85%A5redis%E6%BA%90%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9\&#34;&gt;4ã€ç¼–è¯‘redisæºç  ï¼Œè¿›å…¥redisæºç æ–‡ä»¶å¤¹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95usrlocalredis-cluster%E7%9B%AE%E5%BD%95-%E5%AE%89%E8%A3%856%E4%B8%AAredis%E5%AE%9E%E4%BE%8B%E5%88%86%E5%88%AB%E5%AE%89%E8%A3%85%E5%9C%A8%E4%BB%A5%E4%B8%8B%E7%9B%AE%E5%BD%95\&#34;&gt;5ã€åˆ›å»ºç›®å½•/usr/local/redis-clusterç›®å½•ï¼Œ å®‰è£…6ä¸ªrediså®ä¾‹ï¼Œåˆ†åˆ«å®‰è£…åœ¨ä»¥ä¸‹ç›®å½•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E5%B0%86-redis-300redisconf-%E5%A4%8D%E5%88%B6%E5%88%B0redis%E4%B8%8B%E7%9A%84bin%E7%9B%AE%E5%BD%95%E4%B8%8B\&#34;&gt;6ã€å¤åˆ¶é…ç½®æ–‡ä»¶ å°† /redis-3.0.0/redis.conf å¤åˆ¶åˆ°redisä¸‹çš„binç›®å½•ä¸‹&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%85%8D%E7%BD%AE%E9%9B%86%E7%BE%A4\&#34;&gt;é…ç½®é›†ç¾¤&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#springdataredis%E8%BF%9E%E6%8E%A5redis%E9%9B%86%E7%BE%A4\&#34;&gt;SpringDataRedisè¿æ¥Redisé›†ç¾¤&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%A8%A1%E6%8B%9F%E9%9B%86%E7%BE%A4%E5%BC%82%E5%B8%B8%E6%B5%8B%E8%AF%95\&#34;&gt;æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸æµ‹è¯•&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;p&gt;æŸ¥çœ‹tomcatè¿è¡Œæ—¥å¿—ï¼štail -f logs/catalina.out&lt;/p&gt;\n&lt;h2 id=\&#34;zookeeperå®‰è£…\&#34;&gt;ZooKeeperå®‰è£…&lt;/h2&gt;\n&lt;p&gt;å®˜ç½‘ä¸‹è½½ï¼šhttp://zookeeper.apache.org/releases.html&lt;/p&gt;\n&lt;p&gt;ç¬¬ä¸€æ¬¡å¯åŠ¨ä¼šå‡ºç°é”™è¯¯&lt;/p&gt;\n&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼šæŠŠconfç›®å½•ä¸‹çš„zoo_sample.cfgå¤åˆ¶ä¸€ä»½ï¼Œå¹¶æ”¹åä¸ºzoo.cfg&lt;/p&gt;\n&lt;p&gt;åœ¨zookeeperæ ¹ç›®å½•æ–°å»ºä¸€ä¸ªdataç›®å½•&lt;/p&gt;\n&lt;p&gt;ä¿®æ”¹zoo.cfgé‡Œé¢çš„dataDir=/tmp/zookeeper&lt;/p&gt;\n&lt;p&gt;ä¿®æ”¹ä¸ºï¼š../data&lt;/p&gt;\n&lt;h2 id=\&#34;æœåŠ¡æä¾›è€…\&#34;&gt;æœåŠ¡æä¾›è€…&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--ä½¿ç”¨dubboæš´æ¼æœåŠ¡--&amp;gt;\n&amp;lt;dubbo:protocol name=&amp;quot;dubbo&amp;quot; port=&amp;quot;20881&amp;quot;/&amp;gt;\n&amp;lt;!--å°†å·¥ç¨‹æ³¨å†Œåˆ°dubboä¸­--&amp;gt;\n&amp;lt;dubbo:application name=&amp;quot;jd-sellergoods-service&amp;quot;/&amp;gt;\n&amp;lt;!--æ³¨å†Œä¸­å¿ƒåœ°å€--&amp;gt;\n&amp;lt;dubbo:registry address=&amp;quot;zookeeper://192.168.25.128:2181&amp;quot;/&amp;gt;\n&amp;lt;!--å¼€å¯æ³¨è§£å¼€å‘--&amp;gt;\n&amp;lt;dubbo:annotation package=&amp;quot;com.jd.service.impl&amp;quot; /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;æœåŠ¡æ¶ˆè´¹è€…\&#34;&gt;æœåŠ¡æ¶ˆè´¹è€…&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- å¼•ç”¨dubbo æœåŠ¡ --&amp;gt;\n&amp;lt;dubbo:application name=&amp;quot;jd-sellergoods-web&amp;quot; /&amp;gt;\n&amp;lt;dubbo:registry address=&amp;quot;zookeeper://192.168.25.128:2181&amp;quot; timeout=&amp;quot;30000&amp;quot;/&amp;gt;\n&amp;lt;dubbo:annotation package=&amp;quot;com.jd.controller&amp;quot; /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;zookeeperé›†ç¾¤ç®€ä»‹\&#34;&gt;Zookeeperé›†ç¾¤ç®€ä»‹&lt;/h2&gt;\n&lt;h3 id=\&#34;ä¸ºä»€ä¹ˆæ­å»ºzookeeperé›†ç¾¤\&#34;&gt;ä¸ºä»€ä¹ˆæ­å»ºZookeeperé›†ç¾¤&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å¤§éƒ¨åˆ†åˆ†å¸ƒå¼åº”ç”¨éœ€è¦ä¸€ä¸ªä¸»æ§ã€åè°ƒå™¨æˆ–è€…æ§åˆ¶å™¨æ¥ç®¡ç†ç‰©ç†åˆ†å¸ƒçš„å­è¿›ç¨‹ã€‚ç›®å‰ï¼Œå¤§å¤šæ•°éƒ½è¦å¼€å‘ç§æœ‰çš„åè°ƒç¨‹åºï¼Œç¼ºä¹ä¸€ä¸ªé€šç”¨æœºåˆ¶ï¼Œåè°ƒç¨‹åºçš„åå¤ç¼–å†™æµªè´¹ï¼Œä¸”éš¾ä»¥å½¢æˆé€šç”¨ã€ä¼¸ç¼©æ€§å¥½çš„åè°ƒå™¨ï¼Œzookeeperæä¾›é€šç”¨çš„åˆ†å¸ƒå¼é”æœåŠ¡ï¼Œç”¨ä»¥åè°ƒåˆ†å¸ƒå¼åº”ç”¨ã€‚æ‰€ä»¥è¯´zookeeperæ˜¯åˆ†å¸ƒå¼åº”ç”¨çš„åä½œæœåŠ¡ã€‚&lt;/p&gt;\n&lt;p&gt;zookeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½è¦è®¿é—®ï¼Œå¦‚æœæœ‰å¤§é‡çš„å¹¶å‘ï¼Œè‚¯å®šä¼šæœ‰ç­‰å¾…ã€‚æ‰€ä»¥å¯ä»¥é€šè¿‡zookeeperé›†ç¾¤è§£å†³ã€‚&lt;/p&gt;\n&lt;p&gt;ä¸‹é¢æ˜¯zookeeperé›†ç¾¤éƒ¨ç½²ç»“æ„å›¾ï¼š&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1590380537479.jpg\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h3 id=\&#34;äº†è§£leaderé€‰ä¸¾\&#34;&gt;äº†è§£Leaderé€‰ä¸¾&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Zookeeperçš„å¯åŠ¨è¿‡ç¨‹ä¸­leaderé€‰ä¸¾æ˜¯éå¸¸é‡è¦è€Œä¸”æœ€å¤æ‚çš„ä¸€ä¸ªç¯èŠ‚ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯leaderé€‰ä¸¾å‘¢ï¼Ÿzookeeperä¸ºä»€ä¹ˆéœ€è¦leaderé€‰ä¸¾å‘¢ï¼Ÿzookeeperçš„leaderé€‰ä¸¾çš„è¿‡ç¨‹åˆæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿ&lt;/p&gt;\n&lt;p&gt;é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯leaderé€‰ä¸¾ã€‚å…¶å®è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œleaderé€‰ä¸¾å°±åƒæ€»ç»Ÿé€‰ä¸¾ä¸€æ ·ï¼Œæ¯äººä¸€ç¥¨ï¼Œè·å¾—å¤šæ•°ç¥¨çš„äººå°±å½“é€‰ä¸ºæ€»ç»Ÿäº†ã€‚åœ¨zookeeperé›†ç¾¤ä¸­ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šæŠ•ç¥¨ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹è·å¾—è¶…è¿‡åŠæ•°ä»¥ä¸Šçš„èŠ‚ç‚¹çš„æŠ•ç¥¨ï¼Œåˆ™è¯¥èŠ‚ç‚¹å°±æ˜¯leaderèŠ‚ç‚¹äº†ã€‚&lt;/p&gt;\n&lt;p&gt;ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜æ•´ä¸ªé€‰ä¸¾çš„è¿‡ç¨‹.&lt;br&gt;\nå‡è®¾æœ‰äº”å°æœåŠ¡å™¨ç»„æˆçš„zookeeperé›†ç¾¤,å®ƒä»¬çš„idä»1-5,åŒæ—¶å®ƒä»¬éƒ½æ˜¯æœ€æ–°å¯åŠ¨çš„,ä¹Ÿå°±æ˜¯æ²¡æœ‰å†å²æ•°æ®,åœ¨å­˜æ”¾æ•°æ®é‡è¿™ä¸€ç‚¹ä¸Š,éƒ½æ˜¯ä¸€æ ·çš„.å‡è®¾è¿™äº›æœåŠ¡å™¨ä¾åºå¯åŠ¨,æ¥çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ ã€‚&lt;br&gt;\n1) æœåŠ¡å™¨1å¯åŠ¨,æ­¤æ—¶åªæœ‰å®ƒä¸€å°æœåŠ¡å™¨å¯åŠ¨äº†,å®ƒå‘å‡ºå»çš„æŠ¥æ²¡æœ‰ä»»ä½•å“åº”,æ‰€ä»¥å®ƒçš„é€‰ä¸¾çŠ¶æ€ä¸€ç›´æ˜¯LOOKINGçŠ¶æ€&lt;br&gt;\n2) æœåŠ¡å™¨2å¯åŠ¨,å®ƒä¸æœ€å¼€å§‹å¯åŠ¨çš„æœåŠ¡å™¨1è¿›è¡Œé€šä¿¡,äº’ç›¸äº¤æ¢è‡ªå·±çš„é€‰ä¸¾ç»“æœ,ç”±äºä¸¤è€…éƒ½æ²¡æœ‰å†å²æ•°æ®,æ‰€ä»¥idå€¼è¾ƒå¤§çš„æœåŠ¡å™¨2èƒœå‡º,ä½†æ˜¯ç”±äºæ²¡æœ‰è¾¾åˆ°è¶…è¿‡åŠæ•°ä»¥ä¸Šçš„æœåŠ¡å™¨éƒ½åŒæ„é€‰ä¸¾å®ƒ(è¿™ä¸ªä¾‹å­ä¸­çš„åŠæ•°ä»¥ä¸Šæ˜¯3),æ‰€ä»¥æœåŠ¡å™¨1,2è¿˜æ˜¯ç»§ç»­ä¿æŒLOOKINGçŠ¶æ€.&lt;br&gt;\n3) æœåŠ¡å™¨3å¯åŠ¨,æ ¹æ®å‰é¢çš„ç†è®ºåˆ†æ,æœåŠ¡å™¨3æˆä¸ºæœåŠ¡å™¨1,2,3ä¸­çš„è€å¤§,è€Œä¸ä¸Šé¢ä¸åŒçš„æ˜¯,æ­¤æ—¶æœ‰ä¸‰å°æœåŠ¡å™¨é€‰ä¸¾äº†å®ƒ,æ‰€ä»¥å®ƒæˆä¸ºäº†è¿™æ¬¡é€‰ä¸¾çš„leader.&lt;br&gt;\n4) æœåŠ¡å™¨4å¯åŠ¨,æ ¹æ®å‰é¢çš„åˆ†æ,ç†è®ºä¸ŠæœåŠ¡å™¨4åº”è¯¥æ˜¯æœåŠ¡å™¨1,2,3,4ä¸­æœ€å¤§çš„,ä½†æ˜¯ç”±äºå‰é¢å·²ç»æœ‰åŠæ•°ä»¥ä¸Šçš„æœåŠ¡å™¨é€‰ä¸¾äº†æœåŠ¡å™¨3,æ‰€ä»¥å®ƒåªèƒ½æ¥æ”¶å½“å°å¼Ÿçš„å‘½äº†.&lt;br&gt;\n5) æœåŠ¡å™¨5å¯åŠ¨,åŒ4ä¸€æ ·,å½“å°å¼Ÿ&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;zookeeperé›†ç¾¤æ­å»º\&#34;&gt;ZooKeeperé›†ç¾¤æ­å»º&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;çœŸå®çš„é›†ç¾¤æ˜¯éœ€è¦éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šçš„ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬æµ‹è¯•æ—¶åŒæ—¶å¯åŠ¨åå‡ ä¸ªè™šæ‹Ÿæœºå†…å­˜ä¼šåƒä¸æ¶ˆï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¼šæ­å»º&lt;strong&gt;ä¼ªé›†ç¾¤&lt;/strong&gt;ï¼Œä¹Ÿå°±æ˜¯æŠŠæ‰€æœ‰çš„æœåŠ¡éƒ½æ­å»ºåœ¨ä¸€å°è™šæ‹Ÿæœºä¸Šï¼Œç”¨ç«¯å£è¿›è¡ŒåŒºåˆ†ã€‚&lt;/p&gt;\n&lt;p&gt;æˆ‘ä»¬è¿™é‡Œè¦æ±‚æ­å»ºä¸€ä¸ªä¸‰ä¸ªèŠ‚ç‚¹çš„Zookeeperé›†ç¾¤ï¼ˆä¼ªé›†ç¾¤ï¼‰ã€‚&lt;/p&gt;\n&lt;p&gt;æµ‹è¯•ç¯å¢ƒ&lt;/p&gt;\n&lt;p&gt;â€‹\tjdkï¼š1.7&lt;/p&gt;\n&lt;p&gt;â€‹\tzookeeperï¼š3.4.6&lt;/p&gt;\n&lt;p&gt;â€‹\tcentos ï¼š6.x&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;1-åˆ›å»ºä¸€ä¸ªç›®å½•\&#34;&gt;1ã€åˆ›å»ºä¸€ä¸ªç›®å½•&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt; mkdir /usr/local/zookeeper-cluster\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;2-ä¸Šä¼ zookeeperæ–‡ä»¶å¹¶è§£å‹\&#34;&gt;2ã€ä¸Šä¼ zookeeperæ–‡ä»¶å¹¶è§£å‹&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;tar -zxvf zookeeper-3.4.6.tar.gz\n# æ–°å»ºæ–‡ä»¶å¤¹\nmkdir zookeeper-3.4.6/data\n#ä¿®æ”¹coo.cfgå\ncd zookeeper-3.4.6/conf/\nmv zoo_sample.cfg zoo.cfg\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;3-å¤åˆ¶zookeeper\&#34;&gt;3ã€å¤åˆ¶zookeeper&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;cp -r  zookeeper-3.4.6 /usr/local/zookeeper-cluster/zookeeper-1\ncp -r  zookeeper-3.4.6 /usr/local/zookeeper-cluster/zookeeper-2\ncp -r  zookeeper-3.4.6 /usr/local/zookeeper-cluster/zookeeper-3\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4-é…ç½®æ¯ä¸€ä¸ªzookeeper\&#34;&gt;4ã€é…ç½®æ¯ä¸€ä¸ªZookeeper&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;é…ç½®æ¯ä¸€ä¸ªZookeeper çš„dataDirï¼ˆzoo.cfgï¼‰ clientPort åˆ†åˆ«ä¸º2181 2182 2183&lt;/p&gt;\n&lt;p&gt;vi /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;clientPort=2181&lt;/p&gt;\n&lt;p&gt;dataDir=/usr/local/zookeeper-cluster/zookeeper-1/data&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;vi /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;clientPort=2182&lt;/p&gt;\n&lt;p&gt;dataDir=/usr/local/zookeeper-cluster/zookeeper-2/data&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;vi /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;clientPort=2183&lt;/p&gt;\n&lt;p&gt;dataDir=/usr/local/zookeeper-cluster/zookeeper-3/data&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;5-é…ç½®é›†ç¾¤\&#34;&gt;5ã€é…ç½®é›†ç¾¤&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åœ¨æ¯ä¸ªzookeeperçš„ data ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª myid æ–‡ä»¶ï¼Œå†…å®¹åˆ†åˆ«æ˜¯1ã€2ã€3 ã€‚è¿™ä¸ªæ–‡ä»¶å°±æ˜¯è®°å½•æ¯ä¸ªæœåŠ¡å™¨çš„IDï¼ˆå†…å®¹ä¸ºè‡ªå®šä¹‰ï¼Œåé¢ä¼šç”¨åˆ°ï¼Œåªè¦ä¸é‡å¤å³å¯ï¼‰&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;cd /usr/local/zookeeper-cluster/\necho 1 &amp;gt;zookeeper-1/data/myid\necho 2 &amp;gt;zookeeper-2/data/myid\necho 3 &amp;gt;zookeeper-3/data/myid\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åœ¨æ¯ä¸€ä¸ªzookeeper çš„ zoo.cfgé…ç½®å®¢æˆ·ç«¯è®¿é—®ç«¯å£ï¼ˆclientPortï¼‰å’Œé›†ç¾¤æœåŠ¡å™¨IPåˆ—è¡¨ã€‚&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;è§£é‡Šï¼šserver.æœåŠ¡å™¨ID=æœåŠ¡å™¨IPåœ°å€:æœåŠ¡å™¨ä¹‹é—´é€šä¿¡ç«¯å£:æœåŠ¡å™¨ä¹‹é—´æŠ•ç¥¨é€‰ä¸¾ç«¯å£&lt;/p&gt;\n&lt;p&gt;æœåŠ¡å™¨IDä¸ºä¸Šé¢è‡ªå®šä¹‰çš„å†…å®¹&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;server.1=192.168.25.143:2881:3881\nserver.2=192.168.25.143:2882:3882\nserver.3=192.168.25.143:2883:3883\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;vi zookeeper-1/conf/zoo.cfg\nvi zookeeper-2/conf/zoo.cfg\nvi zookeeper-3/conf/zoo.cfg\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;6-å¯åŠ¨é›†ç¾¤\&#34;&gt;6ã€å¯åŠ¨é›†ç¾¤&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å¯åŠ¨é›†ç¾¤å°±æ˜¯åˆ†åˆ«å¯åŠ¨æ¯ä¸ªå®ä¾‹ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;./zookeeper-1/bin/zkServer.sh start\n./zookeeper-2/bin/zkServer.sh start\n./zookeeper-3/bin/zkServer.sh start\n# æŸ¥çœ‹å¯åŠ¨çŠ¶æ€\n./zookeeper-1/bin/zkServer.sh status\n./zookeeper-2/bin/zkServer.sh status\n./zookeeper-3/bin/zkServer.sh status\n# å¦‚æœå‡ºç°é”™è¯¯ï¼Œåˆ™éœ€è¦æŸ¥çœ‹æ—¥å¿—\nvi zookeeper.out\n&lt;/code&gt;&lt;/pre&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;2\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1590380587607.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Modeä¸ºfollowerè¡¨ç¤ºæ˜¯&lt;strong&gt;è·Ÿéšè€…&lt;/strong&gt;ï¼ˆä»ï¼‰&lt;/p&gt;\n&lt;p&gt;Mod ä¸ºleaderè¡¨ç¤ºæ˜¯&lt;strong&gt;é¢†å¯¼è€…&lt;/strong&gt;ï¼ˆä¸»ï¼‰&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;7-æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸\&#34;&gt;7ã€æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;é¦–å…ˆæˆ‘ä»¬å…ˆæµ‹è¯•å¦‚æœæ˜¯ä»æœåŠ¡å™¨æŒ‚æ‰ï¼Œä¼šæ€ä¹ˆæ ·&lt;/p&gt;\n&lt;p&gt;æŠŠ3å·æœåŠ¡å™¨åœæ‰ï¼Œè§‚å¯Ÿ1å·å’Œ2å·ï¼Œå‘ç°çŠ¶æ€å¹¶æ²¡æœ‰å˜åŒ–&lt;/p&gt;\n&lt;p&gt;ç”±æ­¤å¾—å‡ºç»“è®ºï¼Œ3ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œä»æœåŠ¡å™¨æŒ‚æ‰ï¼Œé›†ç¾¤æ­£å¸¸&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;3\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1590380605531.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æˆ‘ä»¬å†æŠŠ1å·æœåŠ¡å™¨ï¼ˆä»æœåŠ¡å™¨ï¼‰ä¹Ÿåœæ‰ï¼ŒæŸ¥çœ‹2å·ï¼ˆä¸»æœåŠ¡å™¨ï¼‰çš„çŠ¶æ€ï¼Œå‘ç°å·²ç»åœæ­¢è¿è¡Œäº†ã€‚&lt;/p&gt;\n&lt;p&gt;ç”±æ­¤å¾—å‡ºç»“è®ºï¼Œ3ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œ2ä¸ªä»æœåŠ¡å™¨éƒ½æŒ‚æ‰ï¼Œä¸»æœåŠ¡å™¨ä¹Ÿæ— æ³•è¿è¡Œã€‚å› ä¸ºå¯è¿è¡Œçš„æœºå™¨æ²¡æœ‰è¶…è¿‡é›†ç¾¤æ€»æ•°é‡çš„åŠæ•°ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;4\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1590380619018.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æˆ‘ä»¬å†æ¬¡æŠŠ1å·æœåŠ¡å™¨å¯åŠ¨èµ·æ¥ï¼Œå‘ç°2å·æœåŠ¡å™¨åˆå¼€å§‹æ­£å¸¸å·¥ä½œäº†ã€‚è€Œä¸”ä¾ç„¶æ˜¯é¢†å¯¼è€…ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;5\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1590380630247.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æˆ‘ä»¬æŠŠ3å·æœåŠ¡å™¨ä¹Ÿå¯åŠ¨èµ·æ¥ï¼ŒæŠŠ2å·æœåŠ¡å™¨åœæ‰ï¼ˆæ±—~~å¹²å˜›ï¼Ÿé¢†å¯¼æŒ‚äº†ï¼Ÿï¼‰åœæ‰åè§‚å¯Ÿ1å·å’Œ3å·çš„çŠ¶æ€ã€‚&lt;/p&gt;\n&lt;p&gt;å‘ç°æ–°çš„leaderäº§ç”Ÿäº†~&lt;/p&gt;\n&lt;p&gt;ç”±æ­¤æˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œå½“é›†ç¾¤ä¸­çš„ä¸»æœåŠ¡å™¨æŒ‚äº†ï¼Œé›†ç¾¤ä¸­çš„å…¶ä»–æœåŠ¡å™¨ä¼šè‡ªåŠ¨è¿›è¡Œé€‰ä¸¾çŠ¶æ€ï¼Œç„¶åäº§ç”Ÿæ–°å¾—leader&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;6\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1590380642196.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æˆ‘ä»¬å†æ¬¡æµ‹è¯•ï¼Œå½“æˆ‘ä»¬æŠŠ2å·æœåŠ¡å™¨é‡æ–°å¯åŠ¨èµ·æ¥ï¼ˆæ±—~~è¿™æ˜¯è¯ˆå°¸å•Š!ï¼‰å¯åŠ¨åï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ2å·æœåŠ¡å™¨ä¼šå†æ¬¡æˆä¸ºæ–°çš„é¢†å¯¼å—ï¼Ÿæˆ‘ä»¬çœ‹ç»“æœ&lt;/p&gt;\n&lt;p&gt;æˆ‘ä»¬ä¼šå‘ç°ï¼Œ2å·æœåŠ¡å™¨å¯åŠ¨åä¾ç„¶æ˜¯è·Ÿéšè€…ï¼ˆä»æœåŠ¡å™¨ï¼‰ï¼Œ3å·æœåŠ¡å™¨ä¾ç„¶æ˜¯é¢†å¯¼è€…ï¼ˆä¸»æœåŠ¡å™¨ï¼‰ï¼Œæ²¡æœ‰æ’¼åŠ¨3å·æœåŠ¡å™¨çš„é¢†å¯¼åœ°ä½ã€‚å“~é€€ä¼‘äº†å°±æ˜¯é€€ä¼‘äº†ï¼Œè¯´äº†ä¸ç®—äº†ï¼Œå“ˆå“ˆã€‚&lt;/p&gt;\n&lt;p&gt;ç”±æ­¤æˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œå½“é¢†å¯¼è€…äº§ç”Ÿåï¼Œå†æ¬¡æœ‰æ–°æœåŠ¡å™¨åŠ å…¥é›†ç¾¤ï¼Œä¸ä¼šå½±å“åˆ°ç°ä»»é¢†å¯¼è€…ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;7\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1590380653854.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h2 id=\&#34;dubboxè¿æ¥zookeeperé›†ç¾¤\&#34;&gt;Dubboxè¿æ¥zookeeperé›†ç¾¤&lt;/h2&gt;\n&lt;p&gt;ä¿®æ”¹æœåŠ¡æä¾›è€…å’ŒæœåŠ¡è°ƒç”¨è€…çš„spring é…ç½®æ–‡ä»¶,å¤šä¸ªèŠ‚ç‚¹ä½¿ç”¨â€œ,â€åˆ†å‰²&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- æŒ‡å®šæ³¨å†Œä¸­å¿ƒåœ°å€ --&amp;gt;\n&amp;lt;dubbo:registry protocol=&amp;quot;zookeeper&amp;quot; address=&amp;quot;192.168.25.129:2181,192.168.25.129:2182,192.168.25.129:2183&amp;quot; /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;zookeeper-cluster&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34; Zookeeper-Cluster&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;zookeeper&#34;,&#34;slug&#34;:&#34;vDJgew0mp&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/vDJgew0mp/&#34;},{&#34;name&#34;:&#34;zookeeper-cluster&#34;,&#34;slug&#34;:&#34;12Tyemx1Ht&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/12Tyemx1Ht/&#34;}],&#34;date&#34;:&#34;2020-05-25 12:21:16&#34;,&#34;dateFormat&#34;:&#34;2020-05-25&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/zookeeper-cluster/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;9 min read&#34;,&#34;time&#34;:500000,&#34;words&#34;:2069,&#34;minutes&#34;:9},&#34;description&#34;:&#34;æŸ¥çœ‹tomcatè¿è¡Œæ—¥å¿—ï¼štail -f logs/catalina.out\nZooKeeperå®‰è£…\nå®˜ç½‘ä¸‹è½½ï¼šhttp://zookeeper.apache.org/releases.html\nç¬¬ä¸€æ¬¡å¯åŠ¨ä¼šå‡ºç°é”™è¯¯\nè§£å†³æ–¹æ¡ˆï¼šæŠŠconfç›®...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#zookeeper%E5%AE%89%E8%A3%85\&#34;&gt;ZooKeeperå®‰è£…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85\&#34;&gt;æœåŠ¡æä¾›è€…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85\&#34;&gt;æœåŠ¡æ¶ˆè´¹è€…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#zookeeper%E9%9B%86%E7%BE%A4%E7%AE%80%E4%BB%8B\&#34;&gt;Zookeeperé›†ç¾¤ç®€ä»‹&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%90%AD%E5%BB%BAzookeeper%E9%9B%86%E7%BE%A4\&#34;&gt;ä¸ºä»€ä¹ˆæ­å»ºZookeeperé›†ç¾¤&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BA%86%E8%A7%A3leader%E9%80%89%E4%B8%BE\&#34;&gt;äº†è§£Leaderé€‰ä¸¾&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#zookeeper%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA\&#34;&gt;ZooKeeperé›†ç¾¤æ­å»º&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%9B%AE%E5%BD%95\&#34;&gt;1ã€åˆ›å»ºä¸€ä¸ªç›®å½•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E4%B8%8A%E4%BC%A0zookeeper%E6%96%87%E4%BB%B6%E5%B9%B6%E8%A7%A3%E5%8E%8B\&#34;&gt;2ã€ä¸Šä¼ zookeeperæ–‡ä»¶å¹¶è§£å‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E5%A4%8D%E5%88%B6zookeeper\&#34;&gt;3ã€å¤åˆ¶zookeeper&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-%E9%85%8D%E7%BD%AE%E6%AF%8F%E4%B8%80%E4%B8%AAzookeeper\&#34;&gt;4ã€é…ç½®æ¯ä¸€ä¸ªZookeeper&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-%E9%85%8D%E7%BD%AE%E9%9B%86%E7%BE%A4\&#34;&gt;5ã€é…ç½®é›†ç¾¤&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-%E5%90%AF%E5%8A%A8%E9%9B%86%E7%BE%A4\&#34;&gt;6ã€å¯åŠ¨é›†ç¾¤&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-%E6%A8%A1%E6%8B%9F%E9%9B%86%E7%BE%A4%E5%BC%82%E5%B8%B8\&#34;&gt;7ã€æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#dubbox%E8%BF%9E%E6%8E%A5zookeeper%E9%9B%86%E7%BE%A4\&#34;&gt;Dubboxè¿æ¥zookeeperé›†ç¾¤&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;ä»€ä¹ˆæ˜¯å•ç‚¹ç™»å½•\&#34;&gt;ä»€ä¹ˆæ˜¯å•ç‚¹ç™»å½•&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;a href=\&#34;http://baike.baidu.com/item/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95\&#34;&gt;å•ç‚¹ç™»å½•&lt;/a&gt;ï¼ˆSingle Sign Onï¼‰ï¼Œç®€ç§°ä¸º SSOï¼Œæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„ä¼ä¸šä¸šåŠ¡æ•´åˆçš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€ã€‚SSOçš„å®šä¹‰æ˜¯åœ¨å¤šä¸ªåº”ç”¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·åªéœ€è¦ç™»å½•ä¸€æ¬¡å°±å¯ä»¥è®¿é—®æ‰€æœ‰ç›¸äº’ä¿¡ä»»çš„åº”ç”¨ç³»ç»Ÿã€‚&lt;/p&gt;\n&lt;p&gt;æˆ‘ä»¬ç›®å‰çš„ç³»ç»Ÿå­˜åœ¨è¯¸å¤šå­ç³»ç»Ÿï¼Œè€Œè¿™äº›å­ç³»ç»Ÿæ˜¯åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸­ï¼Œé‚£ä¹ˆä½¿ç”¨ä¼ ç»Ÿæ–¹å¼çš„sessionæ˜¯æ— æ³•è§£å†³çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç›¸å…³çš„å•ç‚¹ç™»å½•æŠ€æœ¯æ¥è§£å†³ã€‚&lt;br&gt;\n&lt;img src=\&#34;https://haohanya.github.io/post-images/1589897963520.jpg\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;ä»€ä¹ˆæ˜¯cas\&#34;&gt;ä»€ä¹ˆæ˜¯CAS&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;CAS æ˜¯ Yale å¤§å­¦å‘èµ·çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ—¨åœ¨ä¸º Web åº”ç”¨ç³»ç»Ÿæä¾›ä¸€ç§å¯é çš„å•ç‚¹ç™»å½•æ–¹æ³•ï¼ŒCAS åœ¨ 2004 å¹´ 12 æœˆæ­£å¼æˆä¸º JA-SIG çš„ä¸€ä¸ªé¡¹ç›®ã€‚CAS å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š&lt;/p&gt;\n&lt;p&gt;ã€1ã€‘å¼€æºçš„ä¼ä¸šçº§å•ç‚¹ç™»å½•è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;\n&lt;p&gt;ã€2ã€‘CAS Server ä¸ºéœ€è¦ç‹¬ç«‹éƒ¨ç½²çš„ Web åº”ç”¨ã€‚&lt;/p&gt;\n&lt;p&gt;ã€3ã€‘CAS Client æ”¯æŒéå¸¸å¤šçš„å®¢æˆ·ç«¯(è¿™é‡ŒæŒ‡å•ç‚¹ç™»å½•ç³»ç»Ÿä¸­çš„å„ä¸ª Web åº”ç”¨)ï¼ŒåŒ…æ‹¬ Java, .Net, PHP, Perl, Apache, uPortal, Ruby ç­‰ã€‚&lt;/p&gt;\n&lt;p&gt;ä»ç»“æ„ä¸Šçœ‹ï¼ŒCAS åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š CAS Server å’Œ CAS Clientã€‚CAS Server éœ€è¦ç‹¬ç«‹éƒ¨ç½²ï¼Œä¸»è¦è´Ÿè´£å¯¹ç”¨æˆ·çš„è®¤è¯å·¥ä½œï¼›CAS Client è´Ÿè´£å¤„ç†å¯¹å®¢æˆ·ç«¯å—ä¿æŠ¤èµ„æºçš„è®¿é—®è¯·æ±‚ï¼Œéœ€è¦ç™»å½•æ—¶ï¼Œé‡å®šå‘åˆ° CAS Serverã€‚ä¸‹å›¾æ˜¯ CAS æœ€åŸºæœ¬çš„åè®®è¿‡ç¨‹ï¼š&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1589897985205.jpg\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;SSOå•ç‚¹ç™»å½•è®¿é—®æµç¨‹ä¸»è¦æœ‰ä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;\n&lt;p&gt;è®¿é—®æœåŠ¡ï¼šSSOå®¢æˆ·ç«¯å‘é€è¯·æ±‚è®¿é—®åº”ç”¨ç³»ç»Ÿæä¾›çš„æœåŠ¡èµ„æºã€‚&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;å®šå‘è®¤è¯ï¼šSSOå®¢æˆ·ç«¯ä¼šé‡å®šå‘ç”¨æˆ·è¯·æ±‚åˆ°SSOæœåŠ¡å™¨ã€‚&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;ç”¨æˆ·è®¤è¯ï¼šç”¨æˆ·èº«ä»½è®¤è¯ã€‚&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;å‘æ”¾ç¥¨æ®ï¼šSSOæœåŠ¡å™¨ä¼šäº§ç”Ÿä¸€ä¸ªéšæœºçš„Service Ticketã€‚&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;éªŒè¯ç¥¨æ®ï¼šSSOæœåŠ¡å™¨éªŒè¯ç¥¨æ®Service Ticketçš„åˆæ³•æ€§ï¼ŒéªŒè¯é€šè¿‡åï¼Œå…è®¸å®¢æˆ·ç«¯è®¿é—®æœåŠ¡ã€‚&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;ä¼ è¾“ç”¨æˆ·ä¿¡æ¯ï¼šSSOæœåŠ¡å™¨éªŒè¯ç¥¨æ®é€šè¿‡åï¼Œä¼ è¾“ç”¨æˆ·è®¤è¯ç»“æœä¿¡æ¯ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;casæœåŠ¡ç«¯éƒ¨ç½²\&#34;&gt;CASæœåŠ¡ç«¯éƒ¨ç½²&lt;/h2&gt;\n&lt;h3 id=\&#34;1-caså®‰è£…\&#34;&gt;1ã€caså®‰è£…&lt;/h3&gt;\n&lt;p&gt;åœ¨èµ„æº\\cas\\source\\cas-server-4.0.0-release\\cas-server-4.0.0\\modulesç›®å½•ä¸‹&lt;/p&gt;\n&lt;p&gt;cas-server-webapp-4.0.0.war å°†å…¶æ”¹åä¸ºcas.waræ”¾å…¥tomcatç›®å½•ä¸‹çš„webappsä¸‹ã€‚å¯åŠ¨tomcatè‡ªåŠ¨è§£å‹waråŒ…ã€‚æµè§ˆå™¨è¾“å…¥http://localhost:8080/cas/login ï¼Œå¯çœ‹åˆ°ç™»å½•é¡µé¢&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;2\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1589897998952.jpg\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;è¿™é‡Œæœ‰ä¸ªå›ºå®šçš„ç”¨æˆ·åå’Œå¯†ç   casuser/Mellon&lt;/p&gt;\n&lt;p&gt;ç™»å½•æˆåŠŸåä¼šè·³åˆ°ç™»å½•æˆåŠŸçš„æç¤ºé¡µé¢&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;3\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1589898004970.jpg\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h3 id=\&#34;2-ä¿®æ”¹ç«¯å£\&#34;&gt;2ã€ä¿®æ”¹ç«¯å£&lt;/h3&gt;\n&lt;ol&gt;\n&lt;li&gt;\n&lt;p&gt;ä¿®æ”¹tomcatç«¯å£&lt;/p&gt;\n&lt;p&gt;æ‰“å¼€tomcat ç›®å½• conf\\server.xml æ‰¾åˆ°ä¸‹é¢çš„é…ç½®&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;Connector port=&amp;quot;8080&amp;quot; protocol=&amp;quot;HTTP/1.1&amp;quot;\n               connectionTimeout=&amp;quot;20000&amp;quot;\n               redirectPort=&amp;quot;8443&amp;quot; /&amp;gt;\n&amp;lt;!--ä¿®æ”¹portä¸º9100--&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;ä¿®æ”¹CASé…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;p&gt;WEB-INF/cas.properties&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;server.name=http://localhost:9100\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h3 id=\&#34;3-å»é™¤httpsè®¤è¯\&#34;&gt;3ã€å»é™¤httpsè®¤è¯&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;CASé»˜è®¤ä½¿ç”¨çš„æ˜¯HTTPSåè®®ï¼Œå¦‚æœä½¿ç”¨HTTPSåè®®éœ€è¦SSLå®‰å…¨è¯ä¹¦ï¼ˆéœ€å‘ç‰¹å®šçš„æœºæ„ç”³è¯·å’Œè´­ä¹°ï¼‰ ã€‚å¦‚æœå¯¹å®‰å…¨è¦æ±‚ä¸é«˜æˆ–æ˜¯åœ¨å¼€å‘æµ‹è¯•é˜¶æ®µï¼Œå¯ä½¿ç”¨HTTPåè®®ã€‚æˆ‘ä»¬è¿™é‡Œè®²è§£é€šè¿‡ä¿®æ”¹é…ç½®ï¼Œè®©CASä½¿ç”¨HTTPåè®®ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;ol&gt;\n&lt;li&gt;\n&lt;p&gt;ä¿®æ”¹casçš„WEB-INF/deployerConfigContext.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;bean class=&amp;quot;org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler&amp;quot;\np:httpClient-ref=&amp;quot;httpClient&amp;quot;/&amp;gt;\n&amp;lt;!-- \n\tè¿™é‡Œéœ€è¦å¢åŠ å‚æ•°p:requireSecure=&amp;quot;false&amp;quot;\n\trequireSecureå±æ€§æ„æ€ä¸ºæ˜¯å¦éœ€è¦å®‰å…¨éªŒè¯\n\tå³HTTPSï¼Œfalseä¸ºä¸é‡‡ç”¨\n --&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;ä¿®æ”¹casçš„/WEB-INF/&lt;a href=\&#34;http://lib.csdn.net/base/javaee\&#34;&gt;&lt;strong&gt;spring&lt;/strong&gt;&lt;/a&gt;-configuration/ticketGrantingTicketCookieGenerator.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;bean id=&amp;quot;ticketGrantingTicketCookieGenerator&amp;quot; class=&amp;quot;org.jasig.cas.web.support.CookieRetrievingCookieGenerator&amp;quot;\n      p:cookieSecure=&amp;quot;true&amp;quot;\n      p:cookieMaxAge=&amp;quot;-1&amp;quot;\n      p:cookieName=&amp;quot;CASTGC&amp;quot;\n      p:cookiePath=&amp;quot;/cas&amp;quot; /&amp;gt;\n&amp;lt;!--\n\tå‚æ•°p:cookieSecure=&amp;quot;true&amp;quot;ï¼ŒåŒç†ä¸ºHTTPSéªŒè¯ç›¸å…³ï¼ŒTRUEä¸ºé‡‡ç”¨HTTPSéªŒè¯ï¼ŒFALSEä¸ºä¸é‡‡ç”¨httpséªŒè¯ã€‚\n    å‚æ•°p:cookieMaxAge=&amp;quot;-1&amp;quot;ï¼Œæ˜¯COOKIEçš„æœ€å¤§ç”Ÿå‘½å‘¨æœŸï¼Œ-1ä¸ºæ— ç”Ÿå‘½å‘¨æœŸï¼Œå³åªåœ¨å½“å‰æ‰“å¼€çš„çª—å£æœ‰æ•ˆï¼Œå…³é—­æˆ–é‡æ–°æ‰“å¼€å…¶å®ƒçª—å£ï¼Œä»ä¼šè¦æ±‚éªŒè¯ã€‚å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ä¸ºå¤§äº0çš„æ•°å­—ï¼Œæ¯”å¦‚3600ç­‰ï¼Œæ„æ€æ˜¯åœ¨3600ç§’å†…ï¼Œæ‰“å¼€ä»»æ„çª—å£ï¼Œéƒ½ä¸éœ€è¦éªŒè¯ã€‚\n    æˆ‘ä»¬è¿™é‡Œå°†cookieSecureæ”¹ä¸ºfalse ,  cookieMaxAge æ”¹ä¸º3600\n--&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;ä¿®æ”¹casçš„WEB-INF/spring-configuration/warnCookieGenerator.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;bean id=&amp;quot;warnCookieGenerator&amp;quot; class=&amp;quot;org.jasig.cas.web.support.CookieRetrievingCookieGenerator&amp;quot;\n    p:cookieSecure=&amp;quot;true&amp;quot;\n    p:cookieMaxAge=&amp;quot;-1&amp;quot;\n    p:cookieName=&amp;quot;CASPRIVACY&amp;quot;\n    p:cookiePath=&amp;quot;/cas&amp;quot; /&amp;gt;\n&amp;lt;!-- å°†cookieSecureæ”¹ä¸ºfalse ,  cookieMaxAge æ”¹ä¸º3600 --&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2 id=\&#34;caså®¢æˆ·ç«¯å…¥é—¨å°demo\&#34;&gt;CASå®¢æˆ·ç«¯å…¥é—¨å°Demo&lt;/h2&gt;\n&lt;h3 id=\&#34;å®¢æˆ·ç«¯å·¥ç¨‹1æ­å»º\&#34;&gt;å®¢æˆ·ç«¯å·¥ç¨‹1æ­å»º&lt;/h3&gt;\n&lt;h4 id=\&#34;1-æ­å»ºå·¥ç¨‹å¼•å…¥ä¾èµ–\&#34;&gt;1ã€æ­å»ºå·¥ç¨‹å¼•å…¥ä¾èµ–&lt;/h4&gt;\n&lt;p&gt;åˆ›å»ºMavenå·¥ç¨‹ ï¼ˆwarï¼‰casclient_demo1 å¼•å…¥caså®¢æˆ·ç«¯ä¾èµ–å¹¶åˆ¶å®štomcatè¿è¡Œç«¯å£ä¸º9001&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;dependencies&amp;gt;\n    &amp;lt;!-- cas --&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;org.jasig.cas.client&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;cas-client-core&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;3.3.3&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;javax.servlet&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;servlet-api&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;2.5&amp;lt;/version&amp;gt;\n        &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n&amp;lt;/dependencies&amp;gt;\n\n&amp;lt;build&amp;gt;\n    &amp;lt;plugins&amp;gt;\n        &amp;lt;!-- é…ç½®Tomcatæ’ä»¶ --&amp;gt;\n        &amp;lt;plugin&amp;gt;\n            &amp;lt;groupId&amp;gt;org.apache.tomcat.maven&amp;lt;/groupId&amp;gt;\n            &amp;lt;artifactId&amp;gt;tomcat7-maven-plugin&amp;lt;/artifactId&amp;gt;\n            &amp;lt;configuration&amp;gt;\n                &amp;lt;port&amp;gt;9001&amp;lt;/port&amp;gt;\n                &amp;lt;path&amp;gt;/&amp;lt;/path&amp;gt;\n                &amp;lt;uriEncoding&amp;gt;utf-8&amp;lt;/uriEncoding&amp;gt;\n            &amp;lt;/configuration&amp;gt;\n        &amp;lt;/plugin&amp;gt;\n    &amp;lt;/plugins&amp;gt;\n&amp;lt;/build&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;2-ä¿®æ”¹webxml\&#34;&gt;2ã€ä¿®æ”¹web.xml&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;\n&amp;lt;web-app xmlns=&amp;quot;http://xmlns.jcp.org/xml/ns/javaee&amp;quot;\n         xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;\n         xsi:schemaLocation=&amp;quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&amp;quot;\n         version=&amp;quot;4.0&amp;quot;&amp;gt;\n\n    &amp;lt;!-- ç”¨äºå•ç‚¹é€€å‡ºï¼Œè¯¥è¿‡æ»¤å™¨ç”¨äºå®ç°å•ç‚¹ç™»å‡ºåŠŸèƒ½ï¼Œå¯é€‰é…ç½® --&amp;gt;\n    &amp;lt;listener&amp;gt;\n        &amp;lt;listener-class&amp;gt;org.jasig.cas.client.session.SingleSignOutHttpSessionListener&amp;lt;/listener-class&amp;gt;\n    &amp;lt;/listener&amp;gt;\n\n    &amp;lt;!-- è¯¥è¿‡æ»¤å™¨ç”¨äºå®ç°å•ç‚¹ç™»å‡ºåŠŸèƒ½ï¼Œå¯é€‰é…ç½®ã€‚ --&amp;gt;\n    &amp;lt;filter&amp;gt;\n        &amp;lt;filter-name&amp;gt;CAS Single Sign Out Filter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;filter-class&amp;gt;org.jasig.cas.client.session.SingleSignOutFilter&amp;lt;/filter-class&amp;gt;\n    &amp;lt;/filter&amp;gt;\n    &amp;lt;filter-mapping&amp;gt;\n        &amp;lt;filter-name&amp;gt;CAS Single Sign Out Filter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;\n    &amp;lt;/filter-mapping&amp;gt;\n\n    &amp;lt;!-- è¯¥è¿‡æ»¤å™¨è´Ÿè´£ç”¨æˆ·çš„è®¤è¯å·¥ä½œï¼Œå¿…é¡»å¯ç”¨å®ƒ --&amp;gt;\n    &amp;lt;filter&amp;gt;\n        &amp;lt;filter-name&amp;gt;CASFilter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;filter-class&amp;gt;org.jasig.cas.client.authentication.AuthenticationFilter&amp;lt;/filter-class&amp;gt;\n        &amp;lt;init-param&amp;gt;\n            &amp;lt;param-name&amp;gt;casServerLoginUrl&amp;lt;/param-name&amp;gt;\n            &amp;lt;param-value&amp;gt;http://localhost:9100/cas/login&amp;lt;/param-value&amp;gt;\n            &amp;lt;!--è¿™é‡Œçš„serveræ˜¯æœåŠ¡ç«¯çš„IP --&amp;gt;\n        &amp;lt;/init-param&amp;gt;\n        &amp;lt;init-param&amp;gt;\n            &amp;lt;param-name&amp;gt;serverName&amp;lt;/param-name&amp;gt;\n            &amp;lt;param-value&amp;gt;http://localhost:9001&amp;lt;/param-value&amp;gt;\n        &amp;lt;/init-param&amp;gt;\n    &amp;lt;/filter&amp;gt;\n    &amp;lt;filter-mapping&amp;gt;\n        &amp;lt;filter-name&amp;gt;CASFilter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;\n    &amp;lt;/filter-mapping&amp;gt;\n\n    &amp;lt;!-- è¯¥è¿‡æ»¤å™¨è´Ÿè´£å¯¹Ticketçš„æ ¡éªŒå·¥ä½œï¼Œå¿…é¡»å¯ç”¨å®ƒ --&amp;gt;\n    &amp;lt;filter&amp;gt;\n        &amp;lt;filter-name&amp;gt;CAS Validation Filter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;filter-class&amp;gt;org.jasig.cas.client.validation.Cas20ProxyReceivingTicketValidationFilter&amp;lt;/filter-class&amp;gt;\n        &amp;lt;init-param&amp;gt;\n            &amp;lt;param-name&amp;gt;casServerUrlPrefix&amp;lt;/param-name&amp;gt;\n            &amp;lt;param-value&amp;gt;http://localhost:9100/cas&amp;lt;/param-value&amp;gt;\n        &amp;lt;/init-param&amp;gt;\n        &amp;lt;init-param&amp;gt;\n            &amp;lt;param-name&amp;gt;serverName&amp;lt;/param-name&amp;gt;\n            &amp;lt;param-value&amp;gt;http://localhost:9001&amp;lt;/param-value&amp;gt;\n        &amp;lt;/init-param&amp;gt;\n    &amp;lt;/filter&amp;gt;\n    &amp;lt;filter-mapping&amp;gt;\n        &amp;lt;filter-name&amp;gt;CAS Validation Filter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;\n    &amp;lt;/filter-mapping&amp;gt;\n\n    &amp;lt;!-- è¯¥è¿‡æ»¤å™¨è´Ÿè´£å®ç°HttpServletRequestè¯·æ±‚çš„åŒ…è£¹ï¼Œ æ¯”å¦‚å…è®¸å¼€å‘è€…é€šè¿‡HttpServletRequestçš„getRemoteUser()æ–¹æ³•è·å¾—SSOç™»å½•ç”¨æˆ·çš„ç™»å½•åï¼Œå¯é€‰é…ç½®ã€‚ --&amp;gt;\n    &amp;lt;filter&amp;gt;\n        &amp;lt;filter-name&amp;gt;CAS HttpServletRequest Wrapper Filter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;filter-class&amp;gt;\n            org.jasig.cas.client.util.HttpServletRequestWrapperFilter&amp;lt;/filter-class&amp;gt;\n    &amp;lt;/filter&amp;gt;\n    &amp;lt;filter-mapping&amp;gt;\n        &amp;lt;filter-name&amp;gt;CAS HttpServletRequest Wrapper Filter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;\n    &amp;lt;/filter-mapping&amp;gt;\n\n    &amp;lt;!-- è¯¥è¿‡æ»¤å™¨ä½¿å¾—å¼€å‘è€…å¯ä»¥é€šè¿‡org.jasig.cas.client.util.AssertionHolderæ¥è·å–ç”¨æˆ·çš„ç™»å½•åã€‚ æ¯”å¦‚AssertionHolder.getAssertion().getPrincipal().getName()ã€‚ --&amp;gt;\n    &amp;lt;filter&amp;gt;\n        &amp;lt;filter-name&amp;gt;CAS Assertion Thread Local Filter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;filter-class&amp;gt;org.jasig.cas.client.util.AssertionThreadLocalFilter&amp;lt;/filter-class&amp;gt;\n    &amp;lt;/filter&amp;gt;\n    &amp;lt;filter-mapping&amp;gt;\n        &amp;lt;filter-name&amp;gt;CAS Assertion Thread Local Filter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;\n    &amp;lt;/filter-mapping&amp;gt;\n\n&amp;lt;/web-app&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;3-ç¼–å†™indexjsp\&#34;&gt;3ã€ç¼–å†™index.jsp&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-jsp\&#34;&gt;&amp;lt;%@ page language=&amp;quot;java&amp;quot; contentType=&amp;quot;text/html; charset=utf-8&amp;quot; pageEncoding=&amp;quot;utf-8&amp;quot;%&amp;gt;\n&amp;lt;!DOCTYPE html PUBLIC &amp;quot;-//W3C//DTD HTML 4.01 Transitional//EN&amp;quot; &amp;quot;http://www.w3.org/TR/html4/loose.dtd&amp;quot;&amp;gt;\n&amp;lt;html&amp;gt;\n&amp;lt;head&amp;gt;\n    &amp;lt;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html; charset=utf-8&amp;quot;&amp;gt;\n    &amp;lt;title&amp;gt;Hello&amp;lt;/title&amp;gt;\n&amp;lt;/head&amp;gt;\n&amp;lt;body&amp;gt;\næ¬¢è¿ç™»é™†ä¸€ï¼š\n&amp;lt;%--ä¸ºè·å–è¿œç¨‹ç™»å½•å--%&amp;gt;\n&amp;lt;%=request.getRemoteUser()%&amp;gt;\n&amp;lt;/body&amp;gt;\n&amp;lt;/html&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;å®¢æˆ·ç«¯å·¥ç¨‹2æ­å»º\&#34;&gt;å®¢æˆ·ç«¯å·¥ç¨‹2æ­å»º&lt;/h3&gt;\n&lt;h4 id=\&#34;1-æ­å»ºå·¥ç¨‹\&#34;&gt;1ã€æ­å»ºå·¥ç¨‹&lt;/h4&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åˆ›å»ºMavenå·¥ç¨‹ ï¼ˆwarï¼‰casclient_demo2 å¼•å…¥caså®¢æˆ·ç«¯ä¾èµ–å¹¶åˆ¶å®štomcatè¿è¡Œç«¯å£ä¸º9002&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h4 id=\&#34;2-ä¿®æ”¹webxml-2\&#34;&gt;2ã€ä¿®æ”¹web.xml&lt;/h4&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åˆ›å»ºweb.xmlï¼Œå‚ç…§casclient_demo1 ,å°†serverNameçš„å€¼æ”¹ä¸ºhttp://localhost:9002ï¼Œä¸€å…±ä¸¤å¤„&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h4 id=\&#34;3-ç¼–å†™indexjsp-2\&#34;&gt;3ã€ç¼–å†™index.jsp&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-jsp\&#34;&gt;åˆ›å»ºindex.jsp  ,å†…å®¹æ˜¾ç¤ºâ€œæ¬¢è¿ç™»é™†äºŒï¼šâ€\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;å•ç‚¹é€€å‡ºç™»å½•\&#34;&gt;å•ç‚¹é€€å‡ºç™»å½•&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;åœ°å€æ è¾“å…¥ &lt;a href=\&#34;http://localhost:9000/cas/logout\&#34;&gt;http://localhost:9100/cas/logout&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;å³å¯çœ‹åˆ°é€€å‡ºåçš„æç¤ºé¡µé¢&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h4 id=\&#34;æŒ‡å®šé€€å‡ºåè·³è½¬åœ°å€\&#34;&gt;æŒ‡å®šé€€å‡ºåè·³è½¬åœ°å€&lt;/h4&gt;\n&lt;p&gt;1ã€ä¿®æ”¹casç³»ç»Ÿçš„é…ç½®æ–‡ä»¶cas-servlet.xmlï¼ˆ217è¡Œï¼‰&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt; &amp;lt;bean id=&amp;quot;logoutAction&amp;quot; class=&amp;quot;org.jasig.cas.web.flow.LogoutAction&amp;quot;\n        p:servicesManager-ref=&amp;quot;servicesManager&amp;quot;\n        p:followServiceRedirects=&amp;quot;${cas.logout.followServiceRedirects:false}&amp;quot;/&amp;gt;\n&amp;lt;!-- æŠŠp:followServiceRedirectsçš„falseä¿®æ”¹ä¸ºtrue --&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€å¡«å…¥è·³è½¬åœ°å€&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;!-- serviceå‚æ•°ä¸ºé€€å‡ºåè·³è½¬çš„åœ°å€ --&amp;gt;\n&amp;lt;a href=&amp;quot;http://localhost:9100/cas/logout?service=http://www.baidu.com&amp;quot;&amp;gt;é€€å‡ºç™»å½•&amp;lt;/a&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;casæœåŠ¡ç«¯æ•°æ®æºè®¾ç½®\&#34;&gt;CASæœåŠ¡ç«¯æ•°æ®æºè®¾ç½®&lt;/h2&gt;\n&lt;h3 id=\&#34;1-é…ç½®æ•°æ®æº\&#34;&gt;1ã€é…ç½®æ•°æ®æº&lt;/h3&gt;\n&lt;p&gt;ä¿®æ”¹casæœåŠ¡ç«¯ä¸­web-infä¸‹deployerConfigContext.xml ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- é…ç½®æ•°æ®æºc3p0è¿æ¥æ±  --&amp;gt;\n&amp;lt;bean id=&amp;quot;dataSource&amp;quot; class=&amp;quot;com.mchange.v2.c3p0.ComboPooledDataSource&amp;quot;  \n\t\t\t  p:driverClass=&amp;quot;com.mysql.jdbc.Driver&amp;quot;  \n\t\t\t  p:jdbcUrl=&amp;quot;jdbc:mysql://127.0.0.1:3306/jd?characterEncoding=utf8&amp;quot;  \n\t\t\t  p:user=&amp;quot;root&amp;quot;  \n\t\t\t  p:password=&amp;quot;root&amp;quot; /&amp;gt; \n&amp;lt;!-- å¯†ç åŠ å¯†çš„æ–¹å¼ä¸º md5,åœ¨ç™»é™†æ—¶å…ˆåŠ å¯†å¯†ç ç„¶åå†å»æ•°æ®åº“æ¯”å¯¹ --&amp;gt;\n&amp;lt;bean id=&amp;quot;passwordEncoder&amp;quot; class=&amp;quot;org.jasig.cas.authentication.handler.DefaultPasswordEncoder&amp;quot;  \n\t\tc:encodingAlgorithm=&amp;quot;MD5&amp;quot;  \n\t\tp:characterEncoding=&amp;quot;UTF-8&amp;quot; /&amp;gt; \n&amp;lt;!-- æ•°æ®æ ¡éªŒ --&amp;gt;\n&amp;lt;bean id=&amp;quot;dbAuthHandler&amp;quot;  \n\t\t  class=&amp;quot;org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler&amp;quot;  \n\t\t  p:dataSource-ref=&amp;quot;dataSource&amp;quot;  \n\t\t  p:sql=&amp;quot;select password from tb_user where username = ?&amp;quot;  \n\t\t  p:passwordEncoder-ref=&amp;quot;passwordEncoder&amp;quot;/&amp;gt;  \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ç„¶ååœ¨é…ç½®æ–‡ä»¶å¼€å§‹éƒ¨åˆ†æ‰¾åˆ°å¦‚ä¸‹é…ç½®&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;bean id=&amp;quot;authenticationManager&amp;quot; class=&amp;quot;org.jasig.cas.authentication.PolicyBasedAuthenticationManager&amp;quot;&amp;gt;\n    &amp;lt;constructor-arg&amp;gt;\n        &amp;lt;map&amp;gt;               \n            &amp;lt;entry key-ref=&amp;quot;proxyAuthenticationHandler&amp;quot; value-ref=&amp;quot;proxyPrincipalResolver&amp;quot; /&amp;gt;\n            &amp;lt;entry key-ref=&amp;quot;primaryAuthenticationHandler&amp;quot; value-ref=&amp;quot;primaryPrincipalResolver&amp;quot; /&amp;gt;\n        &amp;lt;/map&amp;gt;\n    &amp;lt;/constructor-arg&amp;gt;      \n    &amp;lt;property name=&amp;quot;authenticationPolicy&amp;quot;&amp;gt;\n        &amp;lt;bean class=&amp;quot;org.jasig.cas.authentication.AnyAuthenticationPolicy&amp;quot; /&amp;gt;\n    &amp;lt;/property&amp;gt;\n&amp;lt;/bean&amp;gt;\n&amp;lt;!--\n\tå…¶ä¸­&amp;lt;entry key-ref=&amp;quot;primaryAuthenticationHandler&amp;quot; value-ref=&amp;quot;primaryPrincipalResolver&amp;quot; /&amp;gt;\n\tä¸€å¥æ˜¯ä½¿ç”¨å›ºå®šçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæˆ‘ä»¬åœ¨ä¸‹é¢å¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªbean ,å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ•°æ®åº“è®¤è¯ç”¨æˆ·åå’Œå¯†ç ï¼Œéœ€è¦å°†è¿™å¥æ³¨é‡Šæ‰ã€‚\n\tæ·»åŠ ä¸‹é¢è¿™ä¸€å¥é…ç½®(54è¡Œ)\n\t&amp;lt;entry key-ref=&amp;quot;dbAuthHandler&amp;quot; value-ref=&amp;quot;primaryPrincipalResolver&amp;quot;/&amp;gt;\n--&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;2-æ·»åŠ jaråŒ…\&#34;&gt;2ã€æ·»åŠ jaråŒ…&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å°†ä»¥ä¸‹ä¸‰ä¸ªjaråŒ…æ”¾å…¥webapps\\cas\\WEB-INF\\libä¸‹&lt;/p&gt;\n&lt;p&gt;c3p0-0.9.1.2.jar&lt;/p&gt;\n&lt;p&gt;cas-server-support-jdbc-4.0.0.jar&lt;/p&gt;\n&lt;p&gt;mysql-connector-java-5.1.32.jar&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;3-æµ‹è¯•\&#34;&gt;3ã€æµ‹è¯•&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ç”¨æ•°æ®åº“ä¸­çš„ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œæµ‹è¯•&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;ä¿®æ”¹é»˜è®¤ç™»é™†é¡µé¢\&#34;&gt;ä¿®æ”¹é»˜è®¤ç™»é™†é¡µé¢&lt;/h2&gt;\n&lt;h3 id=\&#34;1-ä¸Šä¼ æ–‡ä»¶\&#34;&gt;1ã€ä¸Šä¼ æ–‡ä»¶&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä¸Šä¼ è‡ªå·±çš„ç™»é™†é¡µé¢åˆ°WEB-INF\\view\\jsp\\default\\ui\\casLoginView.jsp&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;2-ç¼–è¾‘casloginviewjsp-å†…å®¹\&#34;&gt;2ã€&lt;strong&gt;ç¼–è¾‘casLoginView.jsp&lt;/strong&gt; å†…å®¹&lt;/h3&gt;\n&lt;h4 id=\&#34;1-æ·»åŠ æŒ‡ä»¤\&#34;&gt;1ã€æ·»åŠ æŒ‡ä»¤&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-jsp\&#34;&gt;&amp;lt;%@ page pageEncoding=&amp;quot;UTF-8&amp;quot; %&amp;gt;\n&amp;lt;%@ page contentType=&amp;quot;text/html; charset=UTF-8&amp;quot; %&amp;gt;\n&amp;lt;%@ taglib prefix=&amp;quot;c&amp;quot; uri=&amp;quot;http://java.sun.com/jsp/jstl/core&amp;quot; %&amp;gt;\n&amp;lt;%@ taglib prefix=&amp;quot;spring&amp;quot; uri=&amp;quot;http://www.springframework.org/tags&amp;quot; %&amp;gt;\n&amp;lt;%@ taglib prefix=&amp;quot;form&amp;quot; uri=&amp;quot;http://www.springframework.org/tags/form&amp;quot; %&amp;gt;\n&amp;lt;%@ taglib prefix=&amp;quot;fn&amp;quot; uri=&amp;quot;http://java.sun.com/jsp/jstl/functions&amp;quot; %&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;2-ä¿®æ”¹formæ ‡ç­¾\&#34;&gt;2ã€ä¿®æ”¹formæ ‡ç­¾&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-jsp\&#34;&gt;&amp;lt;form:form method=&amp;quot;post&amp;quot; id=&amp;quot;fm1&amp;quot; commandName=&amp;quot;${commandName}&amp;quot; htmlEscape=&amp;quot;true&amp;quot; class=&amp;quot;sui-form&amp;quot;&amp;gt;\n......\n&amp;lt;/form:form&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;3-ä¿®æ”¹ç”¨æˆ·åæ¡†\&#34;&gt;3ã€ä¿®æ”¹ç”¨æˆ·åæ¡†&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-jsp\&#34;&gt;&amp;lt;form:input id=&amp;quot;username&amp;quot; tabindex=&amp;quot;1&amp;quot; \n\taccesskey=&amp;quot;${userNameAccessKey}&amp;quot; path=&amp;quot;username&amp;quot; autocomplete=&amp;quot;off&amp;quot; htmlEscape=&amp;quot;true&amp;quot; \n\tplaceholder=&amp;quot;é‚®ç®±/ç”¨æˆ·å/æ‰‹æœºå·&amp;quot; class=&amp;quot;span2 input-xfat&amp;quot; /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;4-ä¿®æ”¹å¯†ç æ¡†\&#34;&gt;4ã€ä¿®æ”¹å¯†ç æ¡†&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-jsp\&#34;&gt;&amp;lt;form:password  id=&amp;quot;password&amp;quot; tabindex=&amp;quot;2&amp;quot; path=&amp;quot;password&amp;quot; \n      accesskey=&amp;quot;${passwordAccessKey}&amp;quot; htmlEscape=&amp;quot;true&amp;quot; autocomplete=&amp;quot;off&amp;quot; \n\t  placeholder=&amp;quot;è¯·è¾“å…¥å¯†ç &amp;quot; class=&amp;quot;span2 input-xfat&amp;quot;   /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;5-ä¿®æ”¹ç™»é™†æŒ‰é’®\&#34;&gt;5ã€ä¿®æ”¹ç™»é™†æŒ‰é’®&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-jsp\&#34;&gt;&amp;lt;input type=&amp;quot;hidden&amp;quot; name=&amp;quot;lt&amp;quot; value=&amp;quot;${loginTicket}&amp;quot; /&amp;gt;\n&amp;lt;input type=&amp;quot;hidden&amp;quot; name=&amp;quot;execution&amp;quot; value=&amp;quot;${flowExecutionKey}&amp;quot; /&amp;gt;\n&amp;lt;input type=&amp;quot;hidden&amp;quot; name=&amp;quot;_eventId&amp;quot; value=&amp;quot;submit&amp;quot; /&amp;gt;\n&amp;lt;input class=&amp;quot;sui-btn btn-block btn-xlarge btn-danger&amp;quot; accesskey=&amp;quot;l&amp;quot; value=&amp;quot;ç™»é™†&amp;quot; type=&amp;quot;submit&amp;quot; /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;3-é”™è¯¯æç¤º\&#34;&gt;3ã€é”™è¯¯æç¤º&lt;/h3&gt;\n&lt;p&gt;åœ¨è¡¨å•å†…åŠ å…¥é”™è¯¯æç¤ºæ¡†&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-jsp\&#34;&gt;&amp;lt;form:errors path=&amp;quot;*&amp;quot; id=&amp;quot;msg&amp;quot; cssClass=&amp;quot;errors&amp;quot; element=&amp;quot;div&amp;quot; htmlEscape=&amp;quot;false&amp;quot; /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;è®¾ç½®ç™»é™†å¤±è´¥ä¸­æ–‡æç¤º&lt;/p&gt;\n&lt;p&gt;ä¿®æ”¹cas-servlet.xmlä¸­çš„enï¼ˆ61è¡Œï¼‰&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;bean id=&amp;quot;localeResolver&amp;quot; class=&amp;quot;org.springframework.web.servlet.i18n.CookieLocaleResolver&amp;quot; p:defaultLocale=&amp;quot;zh_CN&amp;quot; /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;å°†æ­¤ä¿¡æ¯æ‹·è´åˆ°WEB-INF\\classes\\messages_zh_CN.propertiesä¸‹ï¼Œå¹¶æ”¹ä¸ºä¸­æ–‡æç¤ºï¼ˆè½¬ç ï¼‰&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;authenticationFailure.AccountNotFoundException=\\u7528\\u6237\\u4E0D\\u5B58\\u5728.\nauthenticationFailure.FailedLoginException=\\u5BC6\\u7801\\u9519\\u8BEF.\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ç¬¬ä¸€ä¸ªæ˜¯ç”¨æˆ·åä¸å­˜åœ¨æ—¶çš„é”™è¯¯æç¤º&lt;/p&gt;\n&lt;p&gt;ç¬¬äºŒä¸ªæ˜¯å¯†ç é”™è¯¯çš„æç¤º&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;caså®¢æˆ·ç«¯ä¸springsecurityé›†æˆ\&#34;&gt;CASå®¢æˆ·ç«¯ä¸SpringSecurityé›†æˆ&lt;/h2&gt;\n&lt;h3 id=\&#34;1-åˆ›å»ºå·¥ç¨‹\&#34;&gt;1ã€åˆ›å»ºå·¥ç¨‹&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å»ºç«‹Mavené¡¹ç›®casclient_demo3 ï¼Œå¼•å…¥springä¾èµ–å’Œspring secrity ç›¸å…³ä¾èµ– ï¼Œtomcatç«¯å£è®¾ç½®ä¸º9003&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;2-å¼•å…¥ä¾èµ–\&#34;&gt;2ã€å¼•å…¥ä¾èµ–&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;dependencies&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;org.springframework&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;spring-webmvc&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;4.2.4.RELEASE&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;com.fasterxml.jackson.core&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;jackson-databind&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;2.4.2&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;javax.servlet&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;servlet-api&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;2.5&amp;lt;/version&amp;gt;\n        &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;!-- èº«ä»½éªŒè¯ --&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;spring-security-web&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;4.1.0.RELEASE&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;spring-security-config&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;4.1.0.RELEASE&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;com.github.penggle&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;kaptcha&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;2.3.2&amp;lt;/version&amp;gt;\n        &amp;lt;exclusions&amp;gt;\n            &amp;lt;exclusion&amp;gt;\n                &amp;lt;groupId&amp;gt;javax.servlet&amp;lt;/groupId&amp;gt;\n                &amp;lt;artifactId&amp;gt;javax.servlet-api&amp;lt;/artifactId&amp;gt;\n            &amp;lt;/exclusion&amp;gt;\n        &amp;lt;/exclusions&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;spring-security-cas&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;4.1.0.RELEASE&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;org.jasig.cas.client&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;cas-client-core&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;3.3.3&amp;lt;/version&amp;gt;\n        &amp;lt;!-- æ’é™¤log4jåŒ…å†²çª --&amp;gt;\n        &amp;lt;exclusions&amp;gt;\n            &amp;lt;exclusion&amp;gt;\n                &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;\n                &amp;lt;artifactId&amp;gt;log4j-over-slf4j&amp;lt;/artifactId&amp;gt;\n            &amp;lt;/exclusion&amp;gt;\n        &amp;lt;/exclusions&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n&amp;lt;/dependencies&amp;gt;\n\n&amp;lt;build&amp;gt;\n    &amp;lt;plugins&amp;gt;\n        &amp;lt;!-- é…ç½®Tomcatæ’ä»¶ --&amp;gt;\n        &amp;lt;plugin&amp;gt;\n            &amp;lt;groupId&amp;gt;org.apache.tomcat.maven&amp;lt;/groupId&amp;gt;\n            &amp;lt;artifactId&amp;gt;tomcat7-maven-plugin&amp;lt;/artifactId&amp;gt;\n            &amp;lt;configuration&amp;gt;\n                &amp;lt;port&amp;gt;9003&amp;lt;/port&amp;gt;\n                &amp;lt;path&amp;gt;/&amp;lt;/path&amp;gt;\n                &amp;lt;uriEncoding&amp;gt;utf-8&amp;lt;/uriEncoding&amp;gt;\n            &amp;lt;/configuration&amp;gt;\n        &amp;lt;/plugin&amp;gt;\n    &amp;lt;/plugins&amp;gt;\n    &amp;lt;resources&amp;gt;\n        &amp;lt;resource&amp;gt;\n            &amp;lt;directory&amp;gt;src/main/java&amp;lt;/directory&amp;gt;\n            &amp;lt;includes&amp;gt;\n                &amp;lt;include&amp;gt;**/*.*&amp;lt;/include&amp;gt;\n            &amp;lt;/includes&amp;gt;\n        &amp;lt;/resource&amp;gt;\n        &amp;lt;resource&amp;gt;\n            &amp;lt;directory&amp;gt;src/main/resources&amp;lt;/directory&amp;gt;\n            &amp;lt;includes&amp;gt;\n                &amp;lt;include&amp;gt;**/*.*&amp;lt;/include&amp;gt;\n            &amp;lt;/includes&amp;gt;\n        &amp;lt;/resource&amp;gt;\n    &amp;lt;/resources&amp;gt;\n&amp;lt;/build&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;3-åˆ›å»ºspring-mvcxml\&#34;&gt;3ã€åˆ›å»ºspring-mvc.xml&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;\n&amp;lt;beans xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;\n       xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;\n       xmlns:context=&amp;quot;http://www.springframework.org/schema/context&amp;quot;\n       xmlns:mvc=&amp;quot;http://www.springframework.org/schema/mvc&amp;quot;\n       xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&amp;quot;&amp;gt;\n\n    &amp;lt;!-- æ‰«æç”¨@Controlleræ³¨è§£çš„ç±»ï¼Œå¹¶ä¸”åŠ è½½åˆ°springä¸­è¿›è¡Œç®¡ç† --&amp;gt;\n    &amp;lt;context:component-scan base-package=&amp;quot;com.cn.controller&amp;quot;/&amp;gt;\n    &amp;lt;!-- é…ç½®æ³¨è§£é©±åŠ¨ --&amp;gt;\n    &amp;lt;mvc:annotation-driven&amp;gt;\n        &amp;lt;!-- æ·»åŠ è½¬æ¢å™¨ï¼Œæ·»åŠ å¯¹äºå¯¹è±¡çš„æ”¯æŒ --&amp;gt;\n        &amp;lt;mvc:message-converters&amp;gt;\n            &amp;lt;ref bean=&amp;quot;stringHttpMessageConverter&amp;quot;/&amp;gt;\n            &amp;lt;ref bean=&amp;quot;mappingJackson2HttpMessageConverter&amp;quot;/&amp;gt;\n        &amp;lt;/mvc:message-converters&amp;gt;\n    &amp;lt;/mvc:annotation-driven&amp;gt;\n\n    &amp;lt;bean id=&amp;quot;stringHttpMessageConverter&amp;quot; class=&amp;quot;org.springframework.http.converter.StringHttpMessageConverter&amp;quot;/&amp;gt;\n    &amp;lt;!--è§£å†³IEæµè§ˆå™¨jsonæ–‡ä»¶ä¸‹è½½å’Œjsonæ•°æ®ä¸­åˆä¹±ç çš„é—®é¢˜--&amp;gt;\n    &amp;lt;bean id=&amp;quot;mappingJackson2HttpMessageConverter&amp;quot;\n          class=&amp;quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&amp;quot;&amp;gt;\n        &amp;lt;property name=&amp;quot;supportedMediaTypes&amp;quot;&amp;gt;\n            &amp;lt;list&amp;gt;\n                &amp;lt;value&amp;gt;text/html;charset=UTF-8&amp;lt;/value&amp;gt;\n            &amp;lt;/list&amp;gt;\n        &amp;lt;/property&amp;gt;\n    &amp;lt;/bean&amp;gt;\n    &amp;lt;mvc:default-servlet-handler/&amp;gt;\n    &amp;lt;!-- jackson --&amp;gt;\n    &amp;lt;mvc:annotation-driven&amp;gt;\n        &amp;lt;mvc:message-converters&amp;gt;\n            &amp;lt;bean class=&amp;quot;org.springframework.http.converter.StringHttpMessageConverter&amp;quot;/&amp;gt;\n            &amp;lt;bean class=&amp;quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&amp;quot;/&amp;gt;\n        &amp;lt;/mvc:message-converters&amp;gt;\n    &amp;lt;/mvc:annotation-driven&amp;gt;\n\n&amp;lt;/beans&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4-åˆ›å»ºspring-securityxml\&#34;&gt;4ã€åˆ›å»ºspring-security.xml&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;\n&amp;lt;beans:beans xmlns=&amp;quot;http://www.springframework.org/schema/security&amp;quot;\n             xmlns:beans=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;\n             xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;\n             xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n\t\t\t\t\t\thttp://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd&amp;quot;&amp;gt;\n\n    &amp;lt;!--   entry-point-ref  å…¥å£ç‚¹å¼•ç”¨ --&amp;gt;\n    &amp;lt;http use-expressions=&amp;quot;false&amp;quot; entry-point-ref=&amp;quot;casProcessingFilterEntryPoint&amp;quot;&amp;gt;\n        &amp;lt;intercept-url pattern=&amp;quot;/**&amp;quot; access=&amp;quot;ROLE_USER&amp;quot;/&amp;gt;\n        &amp;lt;csrf disabled=&amp;quot;true&amp;quot;/&amp;gt;\n        &amp;lt;!-- custom-filterä¸ºè¿‡æ»¤å™¨ï¼Œ position è¡¨ç¤ºå°†è¿‡æ»¤å™¨æ”¾åœ¨æŒ‡å®šçš„ä½ç½®ä¸Š(å‚ç…§ä½ç½®è¡¨)ï¼Œbeforeè¡¨ç¤ºæ”¾åœ¨æŒ‡å®šä½ç½®ä¹‹å‰  ï¼Œafterè¡¨ç¤ºæ”¾åœ¨æŒ‡å®šçš„ä½ç½®ä¹‹å  --&amp;gt;\n        &amp;lt;custom-filter ref=&amp;quot;casAuthenticationFilter&amp;quot; position=&amp;quot;CAS_FILTER&amp;quot;/&amp;gt;\n        &amp;lt;custom-filter ref=&amp;quot;requestSingleLogoutFilter&amp;quot; before=&amp;quot;LOGOUT_FILTER&amp;quot;/&amp;gt;\n        &amp;lt;custom-filter ref=&amp;quot;singleLogoutFilter&amp;quot; before=&amp;quot;CAS_FILTER&amp;quot;/&amp;gt;\n    &amp;lt;/http&amp;gt;\n\n    &amp;lt;!-- CASå…¥å£ç‚¹ å¼€å§‹ --&amp;gt;\n    &amp;lt;beans:bean id=&amp;quot;casProcessingFilterEntryPoint&amp;quot;\n                class=&amp;quot;org.springframework.security.cas.web.CasAuthenticationEntryPoint&amp;quot;&amp;gt;\n        &amp;lt;!-- å•ç‚¹ç™»å½•æœåŠ¡å™¨ç™»å½•URL --&amp;gt;\n        &amp;lt;beans:property name=&amp;quot;loginUrl&amp;quot; value=&amp;quot;http://localhost:9100/cas/login&amp;quot;/&amp;gt;\n        &amp;lt;beans:property name=&amp;quot;serviceProperties&amp;quot; ref=&amp;quot;serviceProperties&amp;quot;/&amp;gt;\n    &amp;lt;/beans:bean&amp;gt;\n    &amp;lt;beans:bean id=&amp;quot;serviceProperties&amp;quot; class=&amp;quot;org.springframework.security.cas.ServiceProperties&amp;quot;&amp;gt;\n        &amp;lt;!--service é…ç½®è‡ªèº«å·¥ç¨‹çš„æ ¹åœ°å€+/login/cas   --&amp;gt;\n        &amp;lt;beans:property name=&amp;quot;service&amp;quot; value=&amp;quot;http://localhost:9003/login/cas&amp;quot;/&amp;gt;\n    &amp;lt;/beans:bean&amp;gt;\n    &amp;lt;!-- CASå…¥å£ç‚¹ ç»“æŸ --&amp;gt;\n\n    &amp;lt;!-- è®¤è¯è¿‡æ»¤å™¨ å¼€å§‹ --&amp;gt;\n    &amp;lt;beans:bean id=&amp;quot;casAuthenticationFilter&amp;quot; class=&amp;quot;org.springframework.security.cas.web.CasAuthenticationFilter&amp;quot;&amp;gt;\n        &amp;lt;beans:property name=&amp;quot;authenticationManager&amp;quot; ref=&amp;quot;authenticationManager&amp;quot;/&amp;gt;\n    &amp;lt;/beans:bean&amp;gt;\n    &amp;lt;!-- è®¤è¯ç®¡ç†å™¨ --&amp;gt;\n    &amp;lt;authentication-manager alias=&amp;quot;authenticationManager&amp;quot;&amp;gt;\n        &amp;lt;authentication-provider ref=&amp;quot;casAuthenticationProvider&amp;quot;&amp;gt;\n        &amp;lt;/authentication-provider&amp;gt;\n    &amp;lt;/authentication-manager&amp;gt;\n    &amp;lt;!-- è®¤è¯æä¾›è€… --&amp;gt;\n    &amp;lt;beans:bean id=&amp;quot;casAuthenticationProvider&amp;quot;\n                class=&amp;quot;org.springframework.security.cas.authentication.CasAuthenticationProvider&amp;quot;&amp;gt;\n        &amp;lt;beans:property name=&amp;quot;authenticationUserDetailsService&amp;quot;&amp;gt;\n            &amp;lt;beans:bean class=&amp;quot;org.springframework.security.core.userdetails.UserDetailsByNameServiceWrapper&amp;quot;&amp;gt;\n                &amp;lt;beans:constructor-arg ref=&amp;quot;userDetailsService&amp;quot;/&amp;gt;\n            &amp;lt;/beans:bean&amp;gt;\n        &amp;lt;/beans:property&amp;gt;\n        &amp;lt;beans:property name=&amp;quot;serviceProperties&amp;quot; ref=&amp;quot;serviceProperties&amp;quot;/&amp;gt;\n        &amp;lt;!-- ticketValidator ä¸ºç¥¨æ®éªŒè¯å™¨ --&amp;gt;\n        &amp;lt;beans:property name=&amp;quot;ticketValidator&amp;quot;&amp;gt;\n            &amp;lt;beans:bean class=&amp;quot;org.jasig.cas.client.validation.Cas20ServiceTicketValidator&amp;quot;&amp;gt;\n                &amp;lt;beans:constructor-arg index=&amp;quot;0&amp;quot; value=&amp;quot;http://localhost:9100/cas&amp;quot;/&amp;gt;\n            &amp;lt;/beans:bean&amp;gt;\n        &amp;lt;/beans:property&amp;gt;\n        &amp;lt;beans:property name=&amp;quot;key&amp;quot; value=&amp;quot;an_id_for_this_auth_provider_only&amp;quot;/&amp;gt;\n    &amp;lt;/beans:bean&amp;gt;\n    &amp;lt;!-- è®¤è¯ç±» --&amp;gt;\n    &amp;lt;beans:bean id=&amp;quot;userDetailsService&amp;quot; class=&amp;quot;com.cn.service.impl.UserDetailServiceImpl&amp;quot;/&amp;gt;\n\n    &amp;lt;!-- è®¤è¯è¿‡æ»¤å™¨ ç»“æŸ --&amp;gt;\n    &amp;lt;!-- å•ç‚¹ç™»å‡º  å¼€å§‹  --&amp;gt;\n    &amp;lt;beans:bean id=&amp;quot;singleLogoutFilter&amp;quot; class=&amp;quot;org.jasig.cas.client.session.SingleSignOutFilter&amp;quot;/&amp;gt;\n    &amp;lt;beans:bean id=&amp;quot;requestSingleLogoutFilter&amp;quot;\n                class=&amp;quot;org.springframework.security.web.authentication.logout.LogoutFilter&amp;quot;&amp;gt;\n        &amp;lt;beans:constructor-arg value=&amp;quot;http://localhost:9100/cas/logout?service=http://www.baidu.com&amp;quot;/&amp;gt;\n        &amp;lt;beans:constructor-arg&amp;gt;\n            &amp;lt;beans:bean class=&amp;quot;org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler&amp;quot;/&amp;gt;\n        &amp;lt;/beans:constructor-arg&amp;gt;\n        &amp;lt;beans:property name=&amp;quot;filterProcessesUrl&amp;quot; value=&amp;quot;/logout/cas&amp;quot;/&amp;gt;\n    &amp;lt;/beans:bean&amp;gt;\n    &amp;lt;!-- å•ç‚¹ç™»å‡º  ç»“æŸ --&amp;gt;\n\n&amp;lt;/beans:beans&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;5-åˆ›å»ºè®¤è¯ç±»\&#34;&gt;5ã€åˆ›å»ºè®¤è¯ç±»&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public class UserDetailServiceImpl implements UserDetailsService {\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        //æ„å»ºè§’è‰²é›†åˆ\n        List&amp;lt;GrantedAuthority&amp;gt; authorities=new ArrayList();\n        authorities.add(new SimpleGrantedAuthority(&amp;quot;ROLE_USER&amp;quot;));\n        return new User(username, &amp;quot;&amp;quot;  , authorities);\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;6-ä¿®æ”¹webxml-æ·»åŠ è¿‡æ»¤å™¨ç­‰é…ç½®\&#34;&gt;6ã€ä¿®æ”¹web.xml ,æ·»åŠ è¿‡æ»¤å™¨ç­‰é…ç½®&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;\n&amp;lt;web-app xmlns=&amp;quot;http://xmlns.jcp.org/xml/ns/javaee&amp;quot;\n         xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;\n         xsi:schemaLocation=&amp;quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&amp;quot;\n         version=&amp;quot;4.0&amp;quot;&amp;gt;\n    &amp;lt;context-param&amp;gt;\n        &amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;\n        &amp;lt;param-value&amp;gt;classpath:spring-security.xml&amp;lt;/param-value&amp;gt;\n    &amp;lt;/context-param&amp;gt;\n    &amp;lt;listener&amp;gt;\n        &amp;lt;listener-class&amp;gt;\n            org.springframework.web.context.ContextLoaderListener\n        &amp;lt;/listener-class&amp;gt;\n    &amp;lt;/listener&amp;gt;\n    &amp;lt;filter&amp;gt;\n        &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;\n        &amp;lt;filter-class&amp;gt;org.springframework.web.filter.DelegatingFilterProxy&amp;lt;/filter-class&amp;gt;\n    &amp;lt;/filter&amp;gt;\n    &amp;lt;filter-mapping&amp;gt;\n        &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;\n        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;\n    &amp;lt;/filter-mapping&amp;gt;\n&amp;lt;!--------------------------------------------------------------------------------&amp;gt;\n    &amp;lt;!-- è§£å†³postä¹±ç  --&amp;gt;\n    &amp;lt;filter&amp;gt;\n        &amp;lt;filter-name&amp;gt;CharacterEncodingFilter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;filter-class&amp;gt;org.springframework.web.filter.CharacterEncodingFilter&amp;lt;/filter-class&amp;gt;\n        &amp;lt;init-param&amp;gt;\n            &amp;lt;param-name&amp;gt;encoding&amp;lt;/param-name&amp;gt;\n            &amp;lt;param-value&amp;gt;utf-8&amp;lt;/param-value&amp;gt;\n        &amp;lt;/init-param&amp;gt;\n        &amp;lt;init-param&amp;gt;\n            &amp;lt;param-name&amp;gt;forceEncoding&amp;lt;/param-name&amp;gt;\n            &amp;lt;param-value&amp;gt;true&amp;lt;/param-value&amp;gt;\n        &amp;lt;/init-param&amp;gt;\n    &amp;lt;/filter&amp;gt;\n    &amp;lt;filter-mapping&amp;gt;\n        &amp;lt;filter-name&amp;gt;CharacterEncodingFilter&amp;lt;/filter-name&amp;gt;\n        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;\n    &amp;lt;/filter-mapping&amp;gt;\n\n    &amp;lt;servlet&amp;gt;\n        &amp;lt;servlet-name&amp;gt;springmvc&amp;lt;/servlet-name&amp;gt;\n        &amp;lt;servlet-class&amp;gt;org.springframework.web.servlet.DispatcherServlet&amp;lt;/servlet-class&amp;gt;\n        &amp;lt;!-- æŒ‡å®šåŠ è½½çš„é…ç½®æ–‡ä»¶ ï¼Œé€šè¿‡å‚æ•°contextConfigLocationåŠ è½½--&amp;gt;\n        &amp;lt;init-param&amp;gt;\n            &amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;\n            &amp;lt;param-value&amp;gt;classpath:spring-mvc.xml&amp;lt;/param-value&amp;gt;\n        &amp;lt;/init-param&amp;gt;\n        &amp;lt;load-on-startup&amp;gt;1&amp;lt;/load-on-startup&amp;gt;\n    &amp;lt;/servlet&amp;gt;\n\n    &amp;lt;servlet-mapping&amp;gt;\n        &amp;lt;servlet-name&amp;gt;springmvc&amp;lt;/servlet-name&amp;gt;\n        &amp;lt;url-pattern&amp;gt;/&amp;lt;/url-pattern&amp;gt;\n    &amp;lt;/servlet-mapping&amp;gt;\n&amp;lt;/web-app&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;7-åˆ›å»ºusercontroller\&#34;&gt;7ã€åˆ›å»ºUserController&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RestController\npublic class UserController {\n\n    @RequestMapping(&amp;quot;/findLoginUser&amp;quot;)\n    public void  findLoginUser(){\n        String name = SecurityContextHolder.getContext().getAuthentication().getName();\n        System.out.println(name);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;8-é€€å‡ºç™»é™†\&#34;&gt;8ã€é€€å‡ºç™»é™†&lt;/h3&gt;\n&lt;p&gt;ä¿®æ”¹spring-security.xml&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;http://localhost:9100/cas/logout?service=http://www.baidu.com&lt;/p&gt;\n&lt;p&gt;service ç­‰äºç™»å‡ºåè·³è½¬çš„åœ°å€&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- å•ç‚¹ç™»å‡º  å¼€å§‹  --&amp;gt;\n&amp;lt;beans:bean id=&amp;quot;singleLogoutFilter&amp;quot; class=&amp;quot;org.jasig.cas.client.session.SingleSignOutFilter&amp;quot;/&amp;gt;\n&amp;lt;beans:bean id=&amp;quot;requestSingleLogoutFilter&amp;quot;\n            class=&amp;quot;org.springframework.security.web.authentication.logout.LogoutFilter&amp;quot;&amp;gt;\n    &amp;lt;beans:constructor-arg value=&amp;quot;http://localhost:9100/cas/logout?service=http://www.baidu.com&amp;quot;/&amp;gt;\n    &amp;lt;beans:constructor-arg&amp;gt;\n        &amp;lt;beans:bean class=&amp;quot;org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler&amp;quot;/&amp;gt;\n    &amp;lt;/beans:constructor-arg&amp;gt;\n    &amp;lt;beans:property name=&amp;quot;filterProcessesUrl&amp;quot; value=&amp;quot;/logout/cas&amp;quot;/&amp;gt;\n&amp;lt;/beans:bean&amp;gt;\n&amp;lt;!-- å•ç‚¹ç™»å‡º  ç»“æŸ --&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;åœ¨é¡µé¢ä¸Šæ·»åŠ &lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;a href=&amp;quot;/logout/cas&amp;quot;&amp;gt;é€€å‡ºç™»å½•&amp;lt;/a&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;dan-dian-deng-lu-cas&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;å•ç‚¹ç™»é™†-CAS&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;CAS&#34;,&#34;slug&#34;:&#34;5wQcTelqx&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/5wQcTelqx/&#34;},{&#34;name&#34;:&#34;å•ç‚¹ç™»é™†&#34;,&#34;slug&#34;:&#34;_AfHtpsMsE&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/_AfHtpsMsE/&#34;}],&#34;date&#34;:&#34;2020-05-19 22:18:12&#34;,&#34;dateFormat&#34;:&#34;2020-05-19&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/dan-dian-deng-lu-cas/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;29 min read&#34;,&#34;time&#34;:1715000,&#34;words&#34;:5384,&#34;minutes&#34;:29},&#34;description&#34;:&#34;ä»€ä¹ˆæ˜¯å•ç‚¹ç™»å½•\n\nå•ç‚¹ç™»å½•ï¼ˆSingle Sign Onï¼‰ï¼Œç®€ç§°ä¸º SSOï¼Œæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„ä¼ä¸šä¸šåŠ¡æ•´åˆçš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€ã€‚SSOçš„å®šä¹‰æ˜¯åœ¨å¤šä¸ªåº”ç”¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·åªéœ€è¦ç™»å½•ä¸€æ¬¡å°±å¯ä»¥è®¿é—®æ‰€æœ‰ç›¸äº’ä¿¡ä»»çš„åº”ç”¨ç³»ç»Ÿã€‚\næˆ‘ä»¬ç›®å‰çš„ç³»ç»Ÿå­˜åœ¨è¯¸å¤šå­ç³»ç»Ÿï¼Œè€Œè¿™...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95\&#34;&gt;ä»€ä¹ˆæ˜¯å•ç‚¹ç™»å½•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BB%80%E4%B9%88%E6%98%AFcas\&#34;&gt;ä»€ä¹ˆæ˜¯CAS&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#cas%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%83%A8%E7%BD%B2\&#34;&gt;CASæœåŠ¡ç«¯éƒ¨ç½²&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-cas%E5%AE%89%E8%A3%85\&#34;&gt;1ã€caså®‰è£…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E4%BF%AE%E6%94%B9%E7%AB%AF%E5%8F%A3\&#34;&gt;2ã€ä¿®æ”¹ç«¯å£&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E5%8E%BB%E9%99%A4https%E8%AE%A4%E8%AF%81\&#34;&gt;3ã€å»é™¤httpsè®¤è¯&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#cas%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%85%A5%E9%97%A8%E5%B0%8Fdemo\&#34;&gt;CASå®¢æˆ·ç«¯å…¥é—¨å°Demo&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%B7%A5%E7%A8%8B1%E6%90%AD%E5%BB%BA\&#34;&gt;å®¢æˆ·ç«¯å·¥ç¨‹1æ­å»º&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E6%90%AD%E5%BB%BA%E5%B7%A5%E7%A8%8B%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96\&#34;&gt;1ã€æ­å»ºå·¥ç¨‹å¼•å…¥ä¾èµ–&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E4%BF%AE%E6%94%B9webxml\&#34;&gt;2ã€ä¿®æ”¹web.xml&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E7%BC%96%E5%86%99indexjsp\&#34;&gt;3ã€ç¼–å†™index.jsp&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%B7%A5%E7%A8%8B2%E6%90%AD%E5%BB%BA\&#34;&gt;å®¢æˆ·ç«¯å·¥ç¨‹2æ­å»º&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E6%90%AD%E5%BB%BA%E5%B7%A5%E7%A8%8B\&#34;&gt;1ã€æ­å»ºå·¥ç¨‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E4%BF%AE%E6%94%B9webxml-2\&#34;&gt;2ã€ä¿®æ”¹web.xml&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E7%BC%96%E5%86%99indexjsp-2\&#34;&gt;3ã€ç¼–å†™index.jsp&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8D%95%E7%82%B9%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95\&#34;&gt;å•ç‚¹é€€å‡ºç™»å½•&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%8C%87%E5%AE%9A%E9%80%80%E5%87%BA%E5%90%8E%E8%B7%B3%E8%BD%AC%E5%9C%B0%E5%9D%80\&#34;&gt;æŒ‡å®šé€€å‡ºåè·³è½¬åœ°å€&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#cas%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%95%B0%E6%8D%AE%E6%BA%90%E8%AE%BE%E7%BD%AE\&#34;&gt;CASæœåŠ¡ç«¯æ•°æ®æºè®¾ç½®&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90\&#34;&gt;1ã€é…ç½®æ•°æ®æº&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E6%B7%BB%E5%8A%A0jar%E5%8C%85\&#34;&gt;2ã€æ·»åŠ jaråŒ…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E6%B5%8B%E8%AF%95\&#34;&gt;3ã€æµ‹è¯•&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E7%99%BB%E9%99%86%E9%A1%B5%E9%9D%A2\&#34;&gt;ä¿®æ”¹é»˜è®¤ç™»é™†é¡µé¢&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6\&#34;&gt;1ã€ä¸Šä¼ æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E7%BC%96%E8%BE%91casloginviewjsp-%E5%86%85%E5%AE%B9\&#34;&gt;2ã€&lt;strong&gt;ç¼–è¾‘casLoginView.jsp&lt;/strong&gt; å†…å®¹&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E6%B7%BB%E5%8A%A0%E6%8C%87%E4%BB%A4\&#34;&gt;1ã€æ·»åŠ æŒ‡ä»¤&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E4%BF%AE%E6%94%B9form%E6%A0%87%E7%AD%BE\&#34;&gt;2ã€ä¿®æ”¹formæ ‡ç­¾&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%90%8D%E6%A1%86\&#34;&gt;3ã€ä¿®æ”¹ç”¨æˆ·åæ¡†&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81%E6%A1%86\&#34;&gt;4ã€ä¿®æ”¹å¯†ç æ¡†&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-%E4%BF%AE%E6%94%B9%E7%99%BB%E9%99%86%E6%8C%89%E9%92%AE\&#34;&gt;5ã€ä¿®æ”¹ç™»é™†æŒ‰é’®&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA\&#34;&gt;3ã€é”™è¯¯æç¤º&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#cas%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8Espringsecurity%E9%9B%86%E6%88%90\&#34;&gt;CASå®¢æˆ·ç«¯ä¸SpringSecurityé›†æˆ&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B\&#34;&gt;1ã€åˆ›å»ºå·¥ç¨‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96\&#34;&gt;2ã€å¼•å…¥ä¾èµ–&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E5%88%9B%E5%BB%BAspring-mvcxml\&#34;&gt;3ã€åˆ›å»ºspring-mvc.xml&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-%E5%88%9B%E5%BB%BAspring-securityxml\&#34;&gt;4ã€åˆ›å»ºspring-security.xml&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-%E5%88%9B%E5%BB%BA%E8%AE%A4%E8%AF%81%E7%B1%BB\&#34;&gt;5ã€åˆ›å»ºè®¤è¯ç±»&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-%E4%BF%AE%E6%94%B9webxml-%E6%B7%BB%E5%8A%A0%E8%BF%87%E6%BB%A4%E5%99%A8%E7%AD%89%E9%85%8D%E7%BD%AE\&#34;&gt;6ã€ä¿®æ”¹web.xml ,æ·»åŠ è¿‡æ»¤å™¨ç­‰é…ç½®&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-%E5%88%9B%E5%BB%BAusercontroller\&#34;&gt;7ã€åˆ›å»ºUserController&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#8-%E9%80%80%E5%87%BA%E7%99%BB%E9%99%86\&#34;&gt;8ã€é€€å‡ºç™»é™†&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;rediså®‰è£…\&#34;&gt;rediså®‰è£…&lt;/h2&gt;\n&lt;p&gt;å®‰è£…gcc&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;yum install gcc-c++\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;è§£å‹æºç &lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;tar -zxvf redis-3.0.0.tar.gz\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;è¿›å…¥è§£å‹åçš„ç›®å½•è¿›è¡Œç¼–è¯‘&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;cd /usr/local/redis-3.0.0\nmake PREFIX=/usr/local/redis install\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;æ‹·è´é…ç½®æ–‡ä»¶åˆ°å®‰è£…ç›®å½•ä¸‹&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;cd /usr/local/redis\nmkdir conf\ncp /usr/local/redis-3.0.0/redis.conf  /usr/local/redis/bin\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;è¿è¡Œ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;bin/redis-server\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;åç«¯æ¨¡å¼è¿è¡Œ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;ä¿®æ”¹redis.confæ–‡ä»¶ : daemonize yes\n./bin/redis-server redis.conf\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;springdataredisç®€ä»‹\&#34;&gt;SpringDataRedisç®€ä»‹&lt;/h2&gt;\n&lt;h3 id=\&#34;redis\&#34;&gt;Redis&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;redis&lt;/strong&gt;æ˜¯ä¸€æ¬¾å¼€æºçš„Key-Value&lt;strong&gt;æ•°æ®åº“&lt;/strong&gt;ï¼Œè¿è¡Œåœ¨å†…å­˜ä¸­ï¼Œç”±ANSI Cç¼–å†™ã€‚ä¼ä¸šå¼€å‘é€šå¸¸é‡‡ç”¨Redisæ¥å®ç°ç¼“å­˜ã€‚åŒç±»çš„äº§å“è¿˜æœ‰memcache ã€MongoDBç­‰ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;jedis\&#34;&gt;Jedis&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Jedisæ˜¯Rediså®˜æ–¹æ¨å‡ºçš„ä¸€æ¬¾é¢å‘&lt;strong&gt;Java&lt;/strong&gt;çš„å®¢æˆ·ç«¯ï¼Œæä¾›äº†å¾ˆå¤šæ¥å£ä¾›Javaè¯­è¨€è°ƒç”¨ã€‚å¯ä»¥åœ¨Rediså®˜ç½‘ä¸‹è½½ï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›å¼€æºçˆ±å¥½è€…æä¾›çš„å®¢æˆ·ç«¯ï¼Œå¦‚Jredisã€SRPç­‰ç­‰ï¼Œæ¨èä½¿ç”¨Jedisã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;spring-data-redis\&#34;&gt;Spring Data Redis&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Spring-data-redisæ˜¯springå¤§å®¶æ—çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†åœ¨srpingåº”ç”¨ä¸­é€šè¿‡ç®€å•çš„é…ç½®è®¿é—®redisæœåŠ¡ï¼Œå¯¹reidsåº•å±‚å¼€å‘åŒ…(Jedis,  JRedis, and RJC)è¿›è¡Œäº†é«˜åº¦å°è£…ï¼ŒRedisTemplateæä¾›äº†rediså„ç§æ“ä½œã€å¼‚å¸¸å¤„ç†åŠåºåˆ—åŒ–ï¼Œæ”¯æŒå‘å¸ƒè®¢é˜…ï¼Œå¹¶å¯¹spring 3.1 cacheè¿›è¡Œäº†å®ç°ã€‚&lt;/p&gt;\n&lt;p&gt;spring-data-redisé’ˆå¯¹jedisæä¾›äº†å¦‚ä¸‹åŠŸèƒ½ï¼š&lt;br&gt;\n1ã€è¿æ¥æ± è‡ªåŠ¨ç®¡ç†ï¼Œæä¾›äº†ä¸€ä¸ªé«˜åº¦å°è£…çš„â€œRedisTemplateâ€ç±»&lt;/p&gt;\n&lt;p&gt;â€‹\t2ã€é’ˆå¯¹jediså®¢æˆ·ç«¯ä¸­å¤§é‡apiè¿›è¡Œäº†å½’ç±»å°è£…,å°†åŒä¸€ç±»å‹æ“ä½œå°è£…ä¸ºoperationæ¥å£&lt;/p&gt;\n&lt;p&gt;â€‹     ValueOperationsï¼šç®€å•K-Væ“ä½œ&lt;/p&gt;\n&lt;p&gt;â€‹     SetOperationsï¼šsetç±»å‹æ•°æ®æ“ä½œ&lt;/p&gt;\n&lt;p&gt;â€‹     ZSetOperationsï¼šzsetç±»å‹æ•°æ®æ“ä½œ&lt;/p&gt;\n&lt;p&gt;â€‹     HashOperationsï¼šé’ˆå¯¹mapç±»å‹çš„æ•°æ®æ“ä½œ&lt;/p&gt;\n&lt;p&gt;â€‹     ListOperationsï¼šé’ˆå¯¹listç±»å‹çš„æ•°æ®æ“ä½œ&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;spring-data-rediså…¥é—¨å°demo\&#34;&gt;Spring Data Rediså…¥é—¨å°Demo&lt;/h2&gt;\n&lt;p&gt;1ã€å¼•å…¥ä¾èµ–&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- ç¼“å­˜ --&amp;gt;\n&amp;lt;dependency&amp;gt; \n    &amp;lt;groupId&amp;gt;redis.clients&amp;lt;/groupId&amp;gt; \n    &amp;lt;artifactId&amp;gt;jedis&amp;lt;/artifactId&amp;gt; \n    &amp;lt;version&amp;gt;2.8.1&amp;lt;/version&amp;gt; \n&amp;lt;/dependency&amp;gt; \n&amp;lt;dependency&amp;gt; \n    &amp;lt;groupId&amp;gt;org.springframework.data&amp;lt;/groupId&amp;gt; \n    &amp;lt;artifactId&amp;gt;spring-data-redis&amp;lt;/artifactId&amp;gt; \n    &amp;lt;version&amp;gt;1.7.2.RELEASE&amp;lt;/version&amp;gt; \n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€åˆ›å»ºredis-config.properties&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;redis.host=127.0.0.1 \nredis.port=6379 \nredis.pass= \nredis.database=0 \nredis.maxIdle=300 \nredis.maxWait=3000 \nredis.testOnBorrow=true \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€ç¼–å†™redisé…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;p&gt;applicationContext-redis.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;context:property-placeholder location=&amp;quot;classpath*:properties/*.properties&amp;quot; /&amp;gt;   \n&amp;lt;!-- redis ç›¸å…³é…ç½® --&amp;gt; \n&amp;lt;bean id=&amp;quot;poolConfig&amp;quot; class=&amp;quot;redis.clients.jedis.JedisPoolConfig&amp;quot;&amp;gt;  \n &amp;lt;property name=&amp;quot;maxIdle&amp;quot; value=&amp;quot;${redis.maxIdle}&amp;quot; /&amp;gt;   \n &amp;lt;property name=&amp;quot;maxWaitMillis&amp;quot; value=&amp;quot;${redis.maxWait}&amp;quot; /&amp;gt;  \n &amp;lt;property name=&amp;quot;testOnBorrow&amp;quot; value=&amp;quot;${redis.testOnBorrow}&amp;quot; /&amp;gt;  \n&amp;lt;/bean&amp;gt;  \n&amp;lt;bean id=&amp;quot;JedisConnectionFactory&amp;quot; class=&amp;quot;org.springframework.data.redis.connection.jedis.JedisConnectionFactory&amp;quot; \n   p:host-name=&amp;quot;${redis.host}&amp;quot; p:port=&amp;quot;${redis.port}&amp;quot; p:password=&amp;quot;${redis.pass}&amp;quot; p:pool-config-ref=&amp;quot;poolConfig&amp;quot;/&amp;gt;  \n\n&amp;lt;bean id=&amp;quot;redisTemplate&amp;quot; class=&amp;quot;org.springframework.data.redis.core.RedisTemplate&amp;quot;&amp;gt;  \n &amp;lt;property name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;JedisConnectionFactory&amp;quot; /&amp;gt;  \n&amp;lt;/bean&amp;gt;  \n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;maxIdle ï¼šæœ€å¤§ç©ºé—²æ•°&lt;/p&gt;\n&lt;p&gt;maxWaitMillis:è¿æ¥æ—¶çš„æœ€å¤§ç­‰å¾…æ¯«ç§’æ•°&lt;/p&gt;\n&lt;p&gt;testOnBorrowï¼šåœ¨æå–ä¸€ä¸ªjediså®ä¾‹æ—¶ï¼Œæ˜¯å¦æå‰è¿›è¡ŒéªŒè¯æ“ä½œï¼›å¦‚æœä¸ºtrueï¼Œåˆ™å¾—åˆ°çš„jediså®ä¾‹å‡æ˜¯å¯ç”¨çš„ï¼›&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;4ã€å€¼ç±»å‹æ“ä½œ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations=&amp;quot;classpath:spring/applicationContext-redis.xml&amp;quot;)\npublic class TestValue {\n\t@Autowired\n\tprivate RedisTemplate redisTemplate;\t\n\t@Test\n\tpublic void setValue(){\n\t\tredisTemplate.boundValueOps(&amp;quot;name&amp;quot;).set(&amp;quot;zhangsan&amp;quot;);\t\t\n\t}\t\n\t@Test\n\tpublic void getValue(){\n\t\tString str = (String) redisTemplate.boundValueOps(&amp;quot;name&amp;quot;).get();\n\t\tSystem.out.println(str);\n\t}\t\n\t@Test\n\tpublic void deleteValue(){\n\t\tredisTemplate.delete(&amp;quot;name&amp;quot;);;\n\t}\t\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;5ã€Setç±»å‹æ“ä½œ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations=&amp;quot;classpath:spring/applicationContext-redis.xml&amp;quot;)\npublic class TestSet {\n\t@Autowired\n\tprivate RedisTemplate redisTemplate;\n\t/**\n\t * å­˜å…¥å€¼\n\t */\n\t@Test\n\tpublic void setValue(){\n\t\tredisTemplate.boundSetOps(&amp;quot;nameset&amp;quot;).add(&amp;quot;ç½—å¿—ç¥¥&amp;quot;);\t\t\n\t\tredisTemplate.boundSetOps(&amp;quot;nameset&amp;quot;).add(&amp;quot;å‘¨æ‰¬é’&amp;quot;);\t\n\t\tredisTemplate.boundSetOps(&amp;quot;nameset&amp;quot;).add(&amp;quot;è´è¶å§&amp;quot;);\n\t}\n\t/**\n\t * æå–å€¼\n\t */\n\t@Test\n\tpublic void getValue(){\n\t\tSet members = redisTemplate.boundSetOps(&amp;quot;nameset&amp;quot;).members();\n\t\tSystem.out.println(members);\n\t}\n    /**\n\t * åˆ é™¤é›†åˆä¸­çš„æŸä¸€ä¸ªå€¼\n\t */\n\t@Test\n\tpublic void deleteValue(){\n\t\tredisTemplate.boundSetOps(&amp;quot;nameset&amp;quot;).remove(&amp;quot;è´è¶å§&amp;quot;);\n\t}\n\t\n\t/**\n\t * åˆ é™¤æ•´ä¸ªé›†åˆ\n\t */\n\t@Test\n\tpublic void deleteAllValue(){\n\t\tredisTemplate.delete(&amp;quot;nameset&amp;quot;);\n\t}\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;6ã€Listç±»å‹æ“ä½œ&lt;/p&gt;\n&lt;p&gt;6.1ã€å³å‹æ ˆ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * å³å‹æ ˆï¼šåæ·»åŠ çš„å¯¹è±¡æ’åœ¨åè¾¹\n */\n@Test\npublic void testSetValue1(){\t\t\n    redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).rightPush(&amp;quot;åˆ˜å¤‡&amp;quot;);\n    redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).rightPush(&amp;quot;å…³ç¾½&amp;quot;);\n    redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).rightPush(&amp;quot;å¼ é£&amp;quot;);\t\t\n}\n/**\n * æ˜¾ç¤ºå³å‹æ ˆé›†åˆ\n */\n@Test\npublic void testGetValue1(){\n    List list = redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).range(0, 10);\n    System.out.println(list);\n}\n//è¿è¡Œç»“æœï¼š[åˆ˜å¤‡, å…³ç¾½, å¼ é£]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;6.2ã€å·¦å‹æ ˆ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * å·¦å‹æ ˆï¼šåæ·»åŠ çš„å¯¹è±¡æ’åœ¨å‰è¾¹\n */\n@Test\npublic void testSetValue2(){\t\t\n    redisTemplate.boundListOps(&amp;quot;namelist2&amp;quot;).leftPush(&amp;quot;åˆ˜å¤‡&amp;quot;);\n    redisTemplate.boundListOps(&amp;quot;namelist2&amp;quot;).leftPush(&amp;quot;å…³ç¾½&amp;quot;);\n    redisTemplate.boundListOps(&amp;quot;namelist2&amp;quot;).leftPush(&amp;quot;å¼ é£&amp;quot;);\t\t\n}\n/**\n * æ˜¾ç¤ºå·¦å‹æ ˆé›†åˆ\n */\n@Test\npublic void testGetValue2(){\n    List list = redisTemplate.boundListOps(&amp;quot;namelist2&amp;quot;).range(0, 10);\n    System.out.println(list);\n}\n//è¿è¡Œç»“æœï¼š[å¼ é£, å…³ç¾½, åˆ˜å¤‡]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;6.3ã€æ ¹æ®ç´¢å¼•æŸ¥è¯¢å…ƒç´ &lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * æŸ¥è¯¢é›†åˆæŸä¸ªå…ƒç´ \n */\n@Test\npublic void testSearchByIndex(){\n    String s = (String) redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).index(1);\n    System.out.println(s);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;6.4ã€ç§»é™¤æŸä¸ªå…ƒç´ çš„å€¼&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * ç§»é™¤é›†åˆæŸä¸ªå…ƒç´ \n */\n@Test\npublic void testRemoveByIndex(){\n    redisTemplate.boundListOps(&amp;quot;namelist1&amp;quot;).remove(1, &amp;quot;å…³ç¾½&amp;quot;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;7ã€Hashç±»å‹æ“ä½œ&lt;/p&gt;\n&lt;p&gt;7.1ã€å­˜å…¥å€¼&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Test\npublic void testSetValue(){\n    redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).put(&amp;quot;a&amp;quot;, &amp;quot;å”åƒ§&amp;quot;);\n    redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).put(&amp;quot;b&amp;quot;, &amp;quot;æ‚Ÿç©º&amp;quot;);\n    redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).put(&amp;quot;c&amp;quot;, &amp;quot;å…«æˆ’&amp;quot;);\n    redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).put(&amp;quot;d&amp;quot;, &amp;quot;æ²™åƒ§&amp;quot;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;7.2ã€æå–æ‰€æœ‰çš„KEY&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Test\npublic void testGetKeys(){\n    Set s = redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).keys();\t\t\n    System.out.println(s);\t\t\n}\n//è¿è¡Œç»“æœï¼š[a, b, c, d]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;7.3ã€æå–æ‰€æœ‰çš„å€¼&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Test\npublic void testGetValues(){\n    List values = redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).values();\n    System.out.println(values);\t\t\n}\n//è¿è¡Œç»“æœï¼š[å”åƒ§, æ‚Ÿç©º, å…«æˆ’, æ²™åƒ§]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;7.4ã€æ ¹æ®KEYæå–å€¼&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Test\npublic void testGetValueByKey(){\n    Object object = redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).get(&amp;quot;b&amp;quot;);\n    System.out.println(object);\n}\n//è¿è¡Œç»“æœï¼šæ‚Ÿç©º\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;7.5ã€æ ¹æ®KEYç§»é™¤å€¼&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Test\npublic void testRemoveValueByKey(){\n    redisTemplate.boundHashOps(&amp;quot;namehash&amp;quot;).delete(&amp;quot;c&amp;quot;);\n}\n//è¿è¡Œç»“æœï¼š[å”åƒ§, æ‚Ÿç©º, æ²™åƒ§]\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;redis&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;Redis&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;Redis&#34;,&#34;slug&#34;:&#34;WWST57yMi&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/WWST57yMi/&#34;}],&#34;date&#34;:&#34;2020-05-17 12:02:05&#34;,&#34;dateFormat&#34;:&#34;2020-05-17&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/redis/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;7 min read&#34;,&#34;time&#34;:406000,&#34;words&#34;:1360,&#34;minutes&#34;:7},&#34;description&#34;:&#34;rediså®‰è£…\nå®‰è£…gcc\nyum install gcc-c++\n\nè§£å‹æºç \ntar -zxvf redis-3.0.0.tar.gz\n\nè¿›å…¥è§£å‹åçš„ç›®å½•è¿›è¡Œç¼–è¯‘\ncd /usr/local/redis-3.0.0\nmake PREFIX...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#redis%E5%AE%89%E8%A3%85\&#34;&gt;rediså®‰è£…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#springdataredis%E7%AE%80%E4%BB%8B\&#34;&gt;SpringDataRedisç®€ä»‹&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#redis\&#34;&gt;Redis&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#jedis\&#34;&gt;Jedis&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#spring-data-redis\&#34;&gt;Spring Data Redis&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#spring-data-redis%E5%85%A5%E9%97%A8%E5%B0%8Fdemo\&#34;&gt;Spring Data Rediså…¥é—¨å°Demo&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;ä»€ä¹ˆæ˜¯jms\&#34;&gt;ä»€ä¹ˆæ˜¯jms&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;JMSï¼ˆjava Messaging Serviceï¼‰æ˜¯Javaå¹³å°ä¸Šæœ‰å…³é¢å‘æ¶ˆæ¯ä¸­é—´ä»¶çš„æŠ€æœ¯è§„èŒƒï¼Œå®ƒä¾¿äºæ¶ˆæ¯ç³»ç»Ÿä¸­çš„Javaåº”ç”¨ç¨‹åºè¿›è¡Œæ¶ˆæ¯äº¤æ¢,å¹¶ä¸”é€šè¿‡æä¾›æ ‡å‡†çš„äº§ç”Ÿã€å‘é€ã€æ¥æ”¶æ¶ˆæ¯çš„æ¥å£ç®€åŒ–ä¼ä¸šåº”ç”¨çš„å¼€å‘ã€‚&lt;/p&gt;\n&lt;p&gt;â€‹    JMSæœ¬èº«åªå®šä¹‰äº†ä¸€ç³»åˆ—çš„æ¥å£è§„èŒƒï¼Œæ˜¯ä¸€ç§ä¸å‚å•†æ— å…³çš„ APIï¼Œç”¨æ¥è®¿é—®æ¶ˆæ¯æ”¶å‘ç³»ç»Ÿã€‚å®ƒç±»ä¼¼äº JDBC(java Database Connectivity)ï¼šè¿™é‡Œï¼ŒJDBC æ˜¯å¯ä»¥ç”¨æ¥è®¿é—®è®¸å¤šä¸åŒå…³ç³»æ•°æ®åº“çš„ APIï¼Œè€Œ JMS åˆ™æä¾›åŒæ ·ä¸å‚å•†æ— å…³çš„è®¿é—®æ–¹æ³•ï¼Œä»¥è®¿é—®æ¶ˆæ¯æ”¶å‘æœåŠ¡ã€‚è®¸å¤šå‚å•†ç›®å‰éƒ½æ”¯æŒ JMSï¼ŒåŒ…æ‹¬ IBM çš„ MQSeriesã€BEAçš„ Weblogic JMS serviceå’Œ Progress çš„ SonicMQï¼Œè¿™åªæ˜¯å‡ ä¸ªä¾‹å­ã€‚ JMS ä½¿æ‚¨èƒ½å¤Ÿé€šè¿‡æ¶ˆæ¯æ”¶å‘æœåŠ¡ï¼ˆæœ‰æ—¶ç§°ä¸ºæ¶ˆæ¯ä¸­ä»‹ç¨‹åºæˆ–è·¯ç”±å™¨ï¼‰ä»ä¸€ä¸ª JMS å®¢æˆ·æœºå‘å¦ä¸€ä¸ª JML å®¢æˆ·æœºå‘é€æ¶ˆæ¯ã€‚æ¶ˆæ¯æ˜¯ JMS ä¸­çš„ä¸€ç§ç±»å‹å¯¹è±¡ï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šæŠ¥å¤´å’Œæ¶ˆæ¯ä¸»ä½“ã€‚æŠ¥å¤´ç”±è·¯ç”±ä¿¡æ¯ä»¥åŠæœ‰å…³è¯¥æ¶ˆæ¯çš„å…ƒæ•°æ®ç»„æˆã€‚æ¶ˆæ¯ä¸»ä½“åˆ™æºå¸¦ç€åº”ç”¨ç¨‹åºçš„æ•°æ®æˆ–æœ‰æ•ˆè´Ÿè½½ã€‚&lt;/p&gt;\n&lt;p&gt;JMS å®šä¹‰äº†äº”ç§ä¸åŒçš„æ¶ˆæ¯æ­£æ–‡æ ¼å¼ï¼Œä»¥åŠè°ƒç”¨çš„æ¶ˆæ¯ç±»å‹ï¼Œå…è®¸ä½ å‘é€å¹¶æ¥æ”¶ä»¥ä¸€&lt;/p&gt;\n&lt;p&gt;äº›ä¸åŒå½¢å¼çš„æ•°æ®ï¼Œæä¾›ç°æœ‰æ¶ˆæ¯æ ¼å¼çš„ä¸€äº›çº§åˆ«çš„å…¼å®¹æ€§ã€‚&lt;/p&gt;\n&lt;p&gt;TextMessage--ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼ˆåº”ç”¨æœ€å¹¿æ³›çš„ä¸€ç§ï¼‰&lt;/p&gt;\n&lt;p&gt;MapMessage--ä¸€å¥—åç§°-å€¼å¯¹&lt;/p&gt;\n&lt;p&gt;ObjectMessage--ä¸€ä¸ªåºåˆ—åŒ–çš„ Java å¯¹è±¡&lt;/p&gt;\n&lt;p&gt;BytesMessage--ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®æµ&lt;/p&gt;\n&lt;p&gt;StreamMessage -- Java åŸå§‹å€¼çš„æ•°æ®æµ&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;jmsæ¶ˆæ¯ä¼ é€’ç±»å‹\&#34;&gt;JMSæ¶ˆæ¯ä¼ é€’ç±»å‹&lt;/h2&gt;\n&lt;p&gt;å¯¹äºæ¶ˆæ¯çš„ä¼ é€’æœ‰ä¸¤ç§ç±»å‹ï¼š&lt;br&gt;\nä¸€ç§æ˜¯ç‚¹å¯¹ç‚¹çš„ï¼Œå³ä¸€ä¸ªç”Ÿäº§è€…å’Œä¸€ä¸ªæ¶ˆè´¹è€…ä¸€ä¸€å¯¹åº”ï¼›&lt;br&gt;\n&lt;img src=\&#34;https://haohanya.github.io/post-images/1589686388156.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;br&gt;\nå¦ä¸€ç§æ˜¯å‘å¸ƒ/ è®¢é˜…æ¨¡å¼ï¼Œå³ä¸€ä¸ªç”Ÿäº§è€…äº§ç”Ÿæ¶ˆæ¯å¹¶è¿›è¡Œå‘é€åï¼Œå¯ä»¥ç”±å¤šä¸ªæ¶ˆè´¹è€…è¿›&lt;br&gt;\nè¡Œæ¥æ”¶ã€‚&lt;br&gt;\n&lt;img src=\&#34;https://haohanya.github.io/post-images/1589686418709.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/p&gt;\n&lt;h2 id=\&#34;å®‰è£…\&#34;&gt;å®‰è£…&lt;/h2&gt;\n&lt;p&gt;1ã€ä¸Šä¼ activeMQåˆ°æœåŠ¡å™¨&lt;/p&gt;\n&lt;p&gt;2ã€è§£å‹ &lt;code&gt;tar -zxvf apache-activemq-5.12.0-bin.tar.gz&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;3ã€ç§»åŠ¨æ–‡ä»¶ &lt;code&gt;mv apache-activemq-5.12.0 /usr/local/java/activemq-5.12.0&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;4ã€è¿›å…¥bin &lt;code&gt;cd /usr/local/java/activemq-5.12.0/bin&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;5ã€å¯åŠ¨activeMQ &lt;code&gt;./activemq start&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;6ã€è®¿é—®ï¼š&lt;code&gt;ip:8161&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;è´¦å·ï¼šadmin&lt;/p&gt;\n&lt;p&gt;å¯†ç ï¼šadmin&lt;/p&gt;\n&lt;h2 id=\&#34;jmsæµ‹è¯•\&#34;&gt;JMSæµ‹è¯•&lt;/h2&gt;\n&lt;h3 id=\&#34;ç‚¹å¯¹ç‚¹æ¨¡å¼\&#34;&gt;ç‚¹å¯¹ç‚¹æ¨¡å¼&lt;/h3&gt;\n&lt;p&gt;1ã€å¼•å…¥ä¾èµ–&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt; &amp;lt;dependencies&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;org.apache.activemq&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;activemq-client&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;5.13.4&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n&amp;lt;/dependencies&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€åˆ›å»ºæ¶ˆæ¯ç”Ÿäº§è€…QueueProducer&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public static void main(String[] args) throws JMSException {\n    //1ã€åˆ›å»ºå·¥å‚\n    ConnectionFactory connectionFactory  = new ActiveMQConnectionFactory(&amp;quot;tcp://192.168.25.135:61616&amp;quot;);\n    //2ã€è·å–è¿æ¥\n    Connection connection = connectionFactory.createConnection();\n    //3ã€å¯åŠ¨è¿æ¥\n    connection.start();\n    /** 4ã€è·å–session  \n    \tå‚æ•°1ï¼šæ˜¯å¦å¯ç”¨äº‹åŠ¡ \n    \tå‚æ•°2ï¼šæ¶ˆæ¯ç¡®è®¤æ¨¡å¼\n            AUTO_ACKNOWLEDGE = 1    è‡ªåŠ¨ç¡®è®¤\n            CLIENT_ACKNOWLEDGE = 2    å®¢æˆ·ç«¯æ‰‹åŠ¨ç¡®è®¤   \n            DUPS_OK_ACKNOWLEDGE = 3    è‡ªåŠ¨æ‰¹é‡ç¡®è®¤\n            SESSION_TRANSACTED = 0    äº‹åŠ¡æäº¤å¹¶ç¡®è®¤\n\t*/\n    Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n    //5ã€åˆ›å»ºé˜Ÿåˆ—å¯¹è±¡\n    Queue queue = session.createQueue(&amp;quot;test-queue&amp;quot;);\n    //6ã€åˆ›å»ºæ¶ˆæ¯ç”Ÿäº§ç€\n    MessageProducer messageProducer = session.createProducer(queue);\n    //7ã€åˆ›å»ºæ¶ˆæ¯\n    TextMessage textMessage = session.createTextMessage(&amp;quot;æµ‹è¯•æ–‡æœ¬å†…å®¹&amp;quot;);\n    //8ã€å‘é€æ¶ˆæ¯\n    messageProducer.send(textMessage);\n    //9ã€å…³é—­èµ„æº\n    messageProducer.close();\n    session.close();\n    connection.close();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€åˆ›å»ºæ¶ˆæ¯æ¶ˆè´¹è€…QueueConsumer&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public static void main(String[] args) throws JMSException, IOException {\n    //1ã€åˆ›å»ºè¿æ¥å·¥å‚\n    ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(&amp;quot;tcp://192.168.25.135:61616&amp;quot;);\n    //2ã€è·å–è¿æ¥\n    Connection connection = connectionFactory.createConnection();\n    //3ã€å¯åŠ¨è¿æ¥\n    connection.start();\n    //4ã€è·å–session\n    Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n    //5ã€åˆ›å»ºé˜Ÿåˆ—å¯¹è±¡\n    Queue queue = session.createQueue(&amp;quot;test-queue&amp;quot;);\n    //6ã€åˆ›å»ºæ¶ˆæ¯æ¶ˆè´¹\n    MessageConsumer consumer = session.createConsumer(queue);\n    //7ã€ç›‘å¬æ¶ˆæ¯\n    consumer.setMessageListener(new MessageListener() {\n        @Override\n        public void onMessage(Message message) {\n            TextMessage textMessage = (TextMessage) message;\n            try {\n                System.out.println(&amp;quot;æ¥æ”¶æ¶ˆæ¯ä¸ºï¼š&amp;quot;+textMessage.getText());\n            } catch (JMSException e) {\n                e.printStackTrace();\n            }\n        }\n    });\n    //8ã€ç­‰å¾…é”®ç›˜è¾“å…¥\n    System.in.read();\n    //9ã€å…³é—­èµ„æº\n    consumer.close();\n    session.close();\n    connection.close();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;å‘å¸ƒè®¢é˜…æ¨¡å¼\&#34;&gt;å‘å¸ƒ/è®¢é˜…æ¨¡å¼&lt;/h3&gt;\n&lt;p&gt;1ã€æ¶ˆæ¯ç”Ÿäº§è€…TopicProducer&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public static void main(String[] args) throws JMSException, IOException {\n    //1ã€åˆ›å»ºè¿æ¥å·¥å‚\n    ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(&amp;quot;tcp://192.168.25.135:61616&amp;quot;);\n    //2ã€è·å–è¿æ¥\n    Connection connection = connectionFactory.createConnection();\n    //3ã€å¯åŠ¨è¿æ¥\n    connection.start();\n    //4ã€è·å–session\n    Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n    //5ã€åˆ›å»ºä¸»é¢˜å¯¹è±¡\n    Topic topic = session.createTopic(&amp;quot;test-topic&amp;quot;);\n    //6ã€åˆ›å»ºæ¶ˆæ¯æ¶ˆè´¹è€…\n    MessageConsumer consumer = session.createConsumer(topic);\n    //7ã€ç›‘å¬æ¶ˆæ¯\n    consumer.setMessageListener(new MessageListener() {\n        @Override\n        public void onMessage(Message message) {\n            TextMessage textMessage = (TextMessage) message;\n            try {\n                System.out.println(&amp;quot;æ¥æ”¶æ¶ˆæ¯ï¼š&amp;quot;+textMessage.getText());\n            } catch (JMSException e) {\n                e.printStackTrace();\n            }\n        }\n    });\n    //8ã€ç­‰å¾…é”®ç›˜è¾“å…¥\n    System.in.read();\n    //9ã€å…³é—­èµ„æº\n    consumer.close();\n    session.close();\n    connection.close();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€æ¶ˆæ¯æ¶ˆè´¹è€…TopicProducer&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public static void main(String[] args) throws JMSException {\n    //1ã€åˆ›å»ºè¿æ¥å·¥å‚\n    ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(&amp;quot;tcp://192.168.25.135:61616&amp;quot;);\n    //2ã€è·å–è¿æ¥\n    Connection connection = connectionFactory.createConnection();\n    //3ã€å¯åŠ¨è¿æ¥\n    connection.start();\n    //4ã€è·å–session\n    Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n    //5ã€åˆ›å»ºä¸»é¢˜å¯¹è±¡\n    Topic topic = session.createTopic(&amp;quot;test-topic&amp;quot;);\n    //6ã€åˆ›å»ºæ¶ˆæ¯ç”Ÿäº§è€…\n    MessageProducer producer = session.createProducer(topic);\n    //7ã€åˆ›å»ºæ¶ˆæ¯\n    TextMessage topicTest = session.createTextMessage(&amp;quot;topicTest&amp;quot;);\n    //8ã€å‘é€æ¶ˆæ¯\n    producer.send(topicTest);\n    //9ã€å…³é—­èµ„æº\n    producer.close();\n    session.close();\n    connection.close();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;springæ•´åˆjms\&#34;&gt;springæ•´åˆjms&lt;/h2&gt;\n&lt;h3 id=\&#34;ç‚¹å¯¹ç‚¹æ¨¡å¼-2\&#34;&gt;ç‚¹å¯¹ç‚¹æ¨¡å¼&lt;/h3&gt;\n&lt;p&gt;1ã€å¼•å…¥ä¾èµ–&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--spring-jms--&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-jms&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;4.2.4.RELEASE&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&amp;lt;!-- activemq --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.apache.activemq&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;activemq-all&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;5.11.2&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&amp;lt;!-- å•å…ƒæµ‹è¯• --&amp;gt;\n&amp;lt;!-- springJunit --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-test&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;4.2.4.RELEASE&amp;lt;/version&amp;gt;\n    &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;junit&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;4.12&amp;lt;/version&amp;gt;\n    &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€åˆ›å»ºç”Ÿäº§è€…é…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;p&gt;applicationContext-jms-producer-queue.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;\n&amp;lt;beans xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;\n       xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;\n       xmlns:context=&amp;quot;http://www.springframework.org/schema/context&amp;quot;\n       xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&amp;quot;&amp;gt;\n    &amp;lt;!--æ¶ˆæ¯ç”Ÿäº§è€…:ç‚¹å¯¹ç‚¹--&amp;gt;\n\n    &amp;lt;context:component-scan base-package=&amp;quot;com.springjms&amp;quot;/&amp;gt;\n\n    &amp;lt;!--jmsæœåŠ¡å‚å•†æä¾›çš„è¿æ¥å·¥å‚--&amp;gt;\n    &amp;lt;bean id=&amp;quot;targetConnectionFactory&amp;quot; class=&amp;quot;org.apache.activemq.ActiveMQConnectionFactory&amp;quot;&amp;gt;\n        &amp;lt;property name=&amp;quot;brokerURL&amp;quot; value=&amp;quot;tcp://192.168.25.137:61616&amp;quot;/&amp;gt;\n    &amp;lt;/bean&amp;gt;\n    &amp;lt;!--springç”¨äºç®¡ç†çœŸæ­£çš„ConnectionFactory--&amp;gt;\n    &amp;lt;bean id=&amp;quot;connectionFactory&amp;quot; class=&amp;quot;org.springframework.jms.connection.SingleConnectionFactory&amp;quot;&amp;gt;\n        &amp;lt;property name=&amp;quot;targetConnectionFactory&amp;quot; ref=&amp;quot;targetConnectionFactory&amp;quot;/&amp;gt;\n    &amp;lt;/bean&amp;gt;\n    &amp;lt;!--springæä¾›çš„å·¥å…·ç±»--&amp;gt;\n    &amp;lt;bean id=&amp;quot;jmsTemplate&amp;quot; class=&amp;quot;org.springframework.jms.core.JmsTemplate&amp;quot;&amp;gt;\n        &amp;lt;constructor-arg name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;connectionFactory&amp;quot;/&amp;gt;\n    &amp;lt;/bean&amp;gt;\n\n    &amp;lt;!--queue--&amp;gt;\n    &amp;lt;bean id=&amp;quot;queueTextDestination&amp;quot; class=&amp;quot;org.apache.activemq.command.ActiveMQQueue&amp;quot;&amp;gt;\n        &amp;lt;constructor-arg name=&amp;quot;name&amp;quot; value=&amp;quot;queue_text&amp;quot;/&amp;gt;\n    &amp;lt;/bean&amp;gt;\n&amp;lt;/beans&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€å‘é€æ¶ˆæ¯&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Component\npublic class QueueProducer {\n\n    @Resource\n    private JmsTemplate jmsTemplate;\n\n    @Resource\n    private Destination queueTextDestination;\n\n    /**\n     * å‘é€æ–‡æœ¬æ¶ˆæ¯\n     * @param text  å‘é€çš„æ–‡æœ¬å†…å®¹\n     */\n    public void sendTextMessage(final String text){\n        jmsTemplate.send(queueTextDestination, new MessageCreator() {\n            @Override\n            public Message createMessage(Session session) throws JMSException {\n                return session.createTextMessage(text);\n            }\n        });\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;4ã€æµ‹è¯•å‘é€æ¶ˆæ¯&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = &amp;quot;classpath:applicationContext-jms-producer-queue.xml&amp;quot;)\npublic class MyTest {\n\n    @Resource\n    private QueueProducer queueProducer;\n\n    @Test\n    public void test(){\n        queueProducer.sendTextMessage(&amp;quot;Hello! queue&amp;quot;);\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;5ã€åˆ›å»ºæ¶ˆè´¹è€…é…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;p&gt;applicationContext-jms-consumer-queue.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;\n&amp;lt;beans xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;\n       xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;\n       xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&amp;quot;&amp;gt;\n    &amp;lt;!--æœåŠ¡æ¶ˆè´¹è€…:ç‚¹å¯¹ç‚¹--&amp;gt;\n\n    &amp;lt;!--jsmæœåŠ¡å‚å•†æä¾›çš„è¿æ¥å·¥å‚--&amp;gt;\n    &amp;lt;bean id=&amp;quot;targetConnectionFactory&amp;quot; class=&amp;quot;org.apache.activemq.ActiveMQConnectionFactory&amp;quot;&amp;gt;\n        &amp;lt;property name=&amp;quot;brokerURL&amp;quot; value=&amp;quot;tcp://192.168.25.137:61616&amp;quot;/&amp;gt;\n    &amp;lt;/bean&amp;gt;\n    &amp;lt;!--springç”¨äºç®¡ç†çœŸæ­£çš„ConnectionFactory--&amp;gt;\n    &amp;lt;bean id=&amp;quot;connectionFactory&amp;quot; class=&amp;quot;org.springframework.jms.connection.SingleConnectionFactory&amp;quot;&amp;gt;\n        &amp;lt;property name=&amp;quot;targetConnectionFactory&amp;quot; ref=&amp;quot;targetConnectionFactory&amp;quot;/&amp;gt;\n    &amp;lt;/bean&amp;gt;\n    &amp;lt;!--springæä¾›çš„å·¥å…·ç±»--&amp;gt;\n    &amp;lt;bean id=&amp;quot;jmsTemplate&amp;quot; class=&amp;quot;org.springframework.jms.core.JmsTemplate&amp;quot;&amp;gt;\n        &amp;lt;constructor-arg name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;connectionFactory&amp;quot;/&amp;gt;\n    &amp;lt;/bean&amp;gt;\n\n    &amp;lt;!--queue--&amp;gt;\n    &amp;lt;bean id=&amp;quot;queueTextDestination&amp;quot; class=&amp;quot;org.apache.activemq.command.ActiveMQQueue&amp;quot;&amp;gt;\n        &amp;lt;constructor-arg name=&amp;quot;name&amp;quot; value=&amp;quot;queue_text&amp;quot;/&amp;gt;\n    &amp;lt;/bean&amp;gt;\n    &amp;lt;!--ç›‘å¬ç±»,ç”¨æ¥ç›‘å¬mqä¸­æ˜¯å¦æœ‰æ¶ˆæ¯--&amp;gt;\n    &amp;lt;bean id=&amp;quot;myMessageListener&amp;quot; class=&amp;quot;com.springjms.MyMessageListener&amp;quot;/&amp;gt;\n    &amp;lt;!--æ¶ˆæ¯çš„ç›‘å¬å™¨--&amp;gt;\n    &amp;lt;bean class=&amp;quot;org.springframework.jms.listener.DefaultMessageListenerContainer&amp;quot;&amp;gt;\n        &amp;lt;property name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;connectionFactory&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;destination&amp;quot; ref=&amp;quot;queueTextDestination&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;messageListener&amp;quot; ref=&amp;quot;myMessageListener&amp;quot;/&amp;gt;\n    &amp;lt;/bean&amp;gt;\n&amp;lt;/beans&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;6ã€ç¼–å†™ç›‘å¬ç±»&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public class MyMessageListener implements MessageListener {\n    @Override\n    public void onMessage(Message message) {\n        TextMessage textMessage = (TextMessage) message;\n        try {\n            System.out.println(&amp;quot;æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š&amp;quot;+textMessage.getText());\n        } catch (JMSException e) {\n            e.printStackTrace();\n        }\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;7ã€æµ‹è¯•&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations=&amp;quot;classpath:applicationContext-jms-consumer-queue.xml&amp;quot;)\npublic class MyTest1 {\n    @Test\n    public void testQueue(){\n        try {\n            System.in.read();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;å‘å¸ƒè®¢é˜…æ¨¡å¼-2\&#34;&gt;å‘å¸ƒ/è®¢é˜…æ¨¡å¼&lt;/h2&gt;\n&lt;p&gt;1ã€åˆ›å»ºç”Ÿäº§è€…ï¼Œåœ¨applicationContext-jms-producer-queue.xmlæ–°å¢å†…å®¹&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--è¿™ä¸ªæ˜¯è®¢é˜…æ¨¡å¼  æ–‡æœ¬ä¿¡æ¯--&amp;gt;  \n&amp;lt;bean id=&amp;quot;topicTextDestination&amp;quot; class=&amp;quot;org.apache.activemq.command.ActiveMQTopic&amp;quot;&amp;gt;  \n    &amp;lt;constructor-arg value=&amp;quot;topic_text&amp;quot;/&amp;gt;  \n&amp;lt;/bean&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€å‘é€æ¶ˆæ¯&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Component\npublic class TopicProducer {\n\n    @Resource\n    private JmsTemplate jmsTemplate;\n    @Resource\n    private Destination topicTextDestination;\n\n    /**\n     * å‘é€æ¶ˆæ¯\n     * @param text\n     */\n    public void sendMessage(final String text){\n        jmsTemplate.send(topicTextDestination, new MessageCreator() {\n            @Override\n            public Message createMessage(Session session) throws JMSException {\n                return session.createTextMessage(text);\n            }\n        });\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€æµ‹è¯•&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = &amp;quot;classpath:applicationContext-jms-producer-topic.xml&amp;quot;)\npublic class MyTest2 {\n\n    @Resource\n    private TopicProducer topicProducer;\n\n    @Test\n    public void test(){\n        topicProducer.sendMessage(&amp;quot;Hello! topic&amp;quot;);\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;4ã€åˆ›å»ºæ¶ˆè´¹è€…ï¼Œåœ¨applicationContext-jms-consumer-queue.xmlæ–°å¢å†…å®¹&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--topic--&amp;gt;\n&amp;lt;bean id=&amp;quot;topicTextDestination&amp;quot; class=&amp;quot;org.apache.activemq.command.ActiveMQTopic&amp;quot;&amp;gt;\n    &amp;lt;constructor-arg name=&amp;quot;name&amp;quot; value=&amp;quot;topic_text&amp;quot;/&amp;gt;\n&amp;lt;/bean&amp;gt;\n&amp;lt;!--ç›‘å¬ç±»,ç”¨æ¥ç›‘å¬mqä¸­æ˜¯å¦æœ‰æ¶ˆæ¯--&amp;gt;\n&amp;lt;bean id=&amp;quot;topicMessageListener&amp;quot; class=&amp;quot;com.springjms.TopicMessageListener&amp;quot;/&amp;gt;\n&amp;lt;!--æ¶ˆæ¯çš„ç›‘å¬å™¨--&amp;gt;\n&amp;lt;bean class=&amp;quot;org.springframework.jms.listener.DefaultMessageListenerContainer&amp;quot;&amp;gt;\n    &amp;lt;property name=&amp;quot;connectionFactory&amp;quot; ref=&amp;quot;connectionFactory&amp;quot;/&amp;gt;\n    &amp;lt;property name=&amp;quot;destination&amp;quot; ref=&amp;quot;topicTextDestination&amp;quot;/&amp;gt;\n    &amp;lt;property name=&amp;quot;messageListener&amp;quot; ref=&amp;quot;topicMessageListener&amp;quot;/&amp;gt;\n&amp;lt;/bean&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;5ã€ç¼–å†™ç›‘å¬ç±»&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public class TopicMessageListener implements MessageListener {\n    @Override\n    public void onMessage(Message message) {\n        TextMessage textMessage = (TextMessage) message;\n        try {\n            System.out.println(&amp;quot;æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š&amp;quot;+textMessage.getText());\n        } catch (JMSException e) {\n            e.printStackTrace();\n        }\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;6ã€ç¼–å†™æµ‹è¯•ç±»&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations=&amp;quot;classpath:applicationContext-jms-consumer-topic.xml&amp;quot;)\npublic class MyTest3 {\n    @Test\n    public void testQueue(){\n        try {\n            System.in.read();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;activemq&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;ActiveMQ&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;ActiveMQ&#34;,&#34;slug&#34;:&#34;TJ1wkA5NP&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/TJ1wkA5NP/&#34;}],&#34;date&#34;:&#34;2020-05-17 11:28:44&#34;,&#34;dateFormat&#34;:&#34;2020-05-17&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/activemq/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;13 min read&#34;,&#34;time&#34;:765000,&#34;words&#34;:2496,&#34;minutes&#34;:13},&#34;description&#34;:&#34;ä»€ä¹ˆæ˜¯jms\n\nJMSï¼ˆjava Messaging Serviceï¼‰æ˜¯Javaå¹³å°ä¸Šæœ‰å…³é¢å‘æ¶ˆæ¯ä¸­é—´ä»¶çš„æŠ€æœ¯è§„èŒƒï¼Œå®ƒä¾¿äºæ¶ˆæ¯ç³»ç»Ÿä¸­çš„Javaåº”ç”¨ç¨‹åºè¿›è¡Œæ¶ˆæ¯äº¤æ¢,å¹¶ä¸”é€šè¿‡æä¾›æ ‡å‡†çš„äº§ç”Ÿã€å‘é€ã€æ¥æ”¶æ¶ˆæ¯çš„æ¥å£ç®€åŒ–ä¼ä¸šåº”ç”¨çš„å¼€å‘ã€‚\nâ€‹    ...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BB%80%E4%B9%88%E6%98%AFjms\&#34;&gt;ä»€ä¹ˆæ˜¯jms&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#jms%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E7%B1%BB%E5%9E%8B\&#34;&gt;JMSæ¶ˆæ¯ä¼ é€’ç±»å‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AE%89%E8%A3%85\&#34;&gt;å®‰è£…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#jms%E6%B5%8B%E8%AF%95\&#34;&gt;JMSæµ‹è¯•&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%82%B9%E5%AF%B9%E7%82%B9%E6%A8%A1%E5%BC%8F\&#34;&gt;ç‚¹å¯¹ç‚¹æ¨¡å¼&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F\&#34;&gt;å‘å¸ƒ/è®¢é˜…æ¨¡å¼&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#spring%E6%95%B4%E5%90%88jms\&#34;&gt;springæ•´åˆjms&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%82%B9%E5%AF%B9%E7%82%B9%E6%A8%A1%E5%BC%8F-2\&#34;&gt;ç‚¹å¯¹ç‚¹æ¨¡å¼&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F-2\&#34;&gt;å‘å¸ƒ/è®¢é˜…æ¨¡å¼&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;ä»€ä¹ˆæ˜¯solr\&#34;&gt;ä»€ä¹ˆæ˜¯Solr&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;å¤§å¤šæ•°æœç´¢å¼•æ“åº”ç”¨éƒ½å¿…é¡»å…·æœ‰æŸç§æœç´¢åŠŸèƒ½ï¼Œé—®é¢˜æ˜¯æœç´¢åŠŸèƒ½å¾€å¾€æ˜¯å·¨å¤§çš„èµ„æºæ¶ˆè€—å¹¶ä¸”å®ƒä»¬ç”±äºæ²‰é‡çš„æ•°æ®åº“åŠ è½½è€Œæ‹–å®ä½ çš„åº”ç”¨çš„æ€§èƒ½ã€‚&lt;/p&gt;\n&lt;p&gt;è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè½¬ç§»è´Ÿè½½åˆ°ä¸€ä¸ªå¤–éƒ¨çš„æœç´¢æœåŠ¡å™¨æ˜¯ä¸€ä¸ªä¸é”™çš„ä¸»æ„ï¼ŒApache Solræ˜¯ä¸€ä¸ªæµè¡Œçš„å¼€æºæœç´¢æœåŠ¡å™¨ï¼Œå®ƒé€šè¿‡ä½¿ç”¨ç±»ä¼¼RESTçš„HTTP APIï¼Œè¿™å°±ç¡®ä¿ä½ èƒ½ä»å‡ ä¹ä»»ä½•ç¼–ç¨‹è¯­è¨€æ¥ä½¿ç”¨solrã€‚&lt;/p&gt;\n&lt;p&gt;Solræ˜¯ä¸€ä¸ªå¼€æºæœç´¢å¹³å°ï¼Œç”¨äºæ„å»ºæœç´¢åº”ç”¨ç¨‹åºã€‚ å®ƒå»ºç«‹åœ¨Lucene(å…¨æ–‡æœç´¢å¼•æ“)ä¹‹ä¸Šã€‚ Solræ˜¯ä¼ä¸šçº§çš„ï¼Œå¿«é€Ÿçš„å’Œé«˜åº¦å¯æ‰©å±•çš„ã€‚ ä½¿ç”¨Solræ„å»ºçš„åº”ç”¨ç¨‹åºéå¸¸å¤æ‚ï¼Œå¯æä¾›é«˜æ€§èƒ½ã€‚&lt;/p&gt;\n&lt;p&gt;ä¸ºäº†åœ¨CNETç½‘ç»œçš„å…¬å¸ç½‘ç«™ä¸Šæ·»åŠ æœç´¢åŠŸèƒ½ï¼ŒYonik Seelyäº2004å¹´åˆ›å»ºäº†Solrã€‚å¹¶åœ¨2006å¹´1æœˆï¼Œå®ƒæˆä¸ºApacheè½¯ä»¶åŸºé‡‘ä¼šä¸‹çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ã€‚å¹¶äº2016å¹´å‘å¸ƒæœ€æ–°ç‰ˆæœ¬Solr 6.0ï¼Œæ”¯æŒå¹¶è¡ŒSQLæŸ¥è¯¢çš„æ‰§è¡Œã€‚&lt;/p&gt;\n&lt;p&gt;Solrå¯ä»¥å’ŒHadoopä¸€èµ·ä½¿ç”¨ã€‚ç”±äºHadoopå¤„ç†å¤§é‡æ•°æ®ï¼ŒSolrå¸®åŠ©æˆ‘ä»¬ä»è¿™ä¹ˆå¤§çš„æºä¸­æ‰¾åˆ°æ‰€éœ€çš„ä¿¡æ¯ã€‚ä¸ä»…é™äºæœç´¢ï¼ŒSolrä¹Ÿå¯ä»¥ç”¨äºå­˜å‚¨ç›®çš„ã€‚åƒå…¶ä»–NoSQLæ•°æ®åº“ä¸€æ ·ï¼Œå®ƒæ˜¯ä¸€ç§éå…³ç³»æ•°æ®å­˜å‚¨å’Œå¤„ç†æŠ€æœ¯ã€‚&lt;/p&gt;\n&lt;p&gt;æ€»ä¹‹ï¼ŒSolræ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„ï¼Œå¯éƒ¨ç½²ï¼Œæœç´¢/å­˜å‚¨å¼•æ“ï¼Œä¼˜åŒ–æœç´¢å¤§é‡ä»¥æ–‡æœ¬ä¸ºä¸­å¿ƒçš„æ•°æ®ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;solrå®‰è£…\&#34;&gt;solrå®‰è£…&lt;/h2&gt;\n&lt;h3 id=\&#34;1-ä¸Šä¼ æ–‡ä»¶\&#34;&gt;1 ä¸Šä¼ æ–‡ä»¶&lt;/h3&gt;\n&lt;p&gt;apache-tomcat-7.0.82.tar.gz&lt;/p&gt;\n&lt;p&gt;solr-4.10.3.tgz.tgz&lt;/p&gt;\n&lt;p&gt;IK Analyzer 2012FF_hf1&lt;/p&gt;\n&lt;h3 id=\&#34;2-åˆ›å»ºç›®å½•\&#34;&gt;2 åˆ›å»ºç›®å½•&lt;/h3&gt;\n&lt;p&gt;mkdir /usr/soft/solr&lt;/p&gt;\n&lt;h3 id=\&#34;3-è§£å‹tomcatå¹¶ç§»åŠ¨åˆ°solrç›®å½•\&#34;&gt;3 è§£å‹tomcatå¹¶ç§»åŠ¨åˆ°solrç›®å½•&lt;/h3&gt;\n&lt;p&gt;tar -zxvf apache-tomcat-7.0.82.tar.gz&lt;/p&gt;\n&lt;p&gt;mv apache-tomcat-7.0.82 /usr/soft/solr/tomcat7&lt;/p&gt;\n&lt;p&gt;tar -zxvf solr-4.10.3.tgz.tgz&lt;/p&gt;\n&lt;p&gt;åœ¨solr-4.10.3/distç›®å½•ä¸‹æœ‰ä¸€ä¸ªwaråŒ… éœ€è¦æŠŠwaråŒ…ç§»åŠ¨åˆ°tomcaté‡Œè¿è¡Œ&lt;/p&gt;\n&lt;p&gt;cp ~/solr-4.10.3/dist/solr-4.10.3.war /usr/soft/solr/tomcat7/webapps/solr.war&lt;/p&gt;\n&lt;h3 id=\&#34;4-å¯åŠ¨tomcat\&#34;&gt;4 å¯åŠ¨tomcat&lt;/h3&gt;\n&lt;p&gt;cd /usr/soft/solr/tomcat7&lt;/p&gt;\n&lt;p&gt;./bin/startup.sh&lt;/p&gt;\n&lt;p&gt;æŸ¥çœ‹tomcatæ—¥å¿—(å¯é€‰)&lt;/p&gt;\n&lt;p&gt;tail -f logs/catalina.out&lt;/p&gt;\n&lt;h3 id=\&#34;5-å¼•å…¥ä¾èµ–jaråŒ…\&#34;&gt;5 å¼•å…¥ä¾èµ–jaråŒ…&lt;/h3&gt;\n&lt;p&gt;cd ~/solr-4.10.3/example/lib/ext&lt;/p&gt;\n&lt;p&gt;cp * /usr/soft/solr/tomcat7/webapps/solr/WEB-INF/lib&lt;/p&gt;\n&lt;h3 id=\&#34;6-å¤åˆ¶é…ç½®æ–‡ä»¶\&#34;&gt;6 å¤åˆ¶é…ç½®æ–‡ä»¶&lt;/h3&gt;\n&lt;p&gt;cd ~/solr-4.10.3/example&lt;/p&gt;\n&lt;p&gt;cp -r solr /usr/soft/solr/solrhome&lt;/p&gt;\n&lt;h3 id=\&#34;7-solrå’Œsolrhomeå»ºç«‹è”ç³»\&#34;&gt;7 solrå’Œsolrhomeå»ºç«‹è”ç³»&lt;/h3&gt;\n&lt;p&gt;cd /usr/soft/solr/tomcat7/webapps/solr/WEB-INF&lt;/p&gt;\n&lt;p&gt;vi web.xml&lt;/p&gt;\n&lt;p&gt;/usr/soft/solr/solrhome&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;env-entry&amp;gt;\n\t&amp;lt;env-entry-name&amp;gt;solr/home&amp;lt;/env-entry-name&amp;gt;\n    &amp;lt;!-- è¿™é‡Œè®¾ç½®ä¸ºè‡ªå·±çš„solrhomeè·¯å¾„ --&amp;gt;\n    &amp;lt;env-entry-value&amp;gt;/usr/soft/solr/solrhome&amp;lt;/env-entry-value&amp;gt;\n    &amp;lt;env-entry-type&amp;gt;java.lang.String&amp;lt;/env-entry-type&amp;gt;\n&amp;lt;/env-entry&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;:wq&lt;/p&gt;\n&lt;h3 id=\&#34;8-é‡å¯-tomcat\&#34;&gt;8 é‡å¯ tomcat&lt;/h3&gt;\n&lt;p&gt;cd /usr/soft/solr/tomcat7/bin&lt;/p&gt;\n&lt;p&gt;./shutdown.sh&lt;/p&gt;\n&lt;p&gt;./startup.sh&lt;/p&gt;\n&lt;h3 id=\&#34;9-è®¿é—®solr\&#34;&gt;9 è®¿é—®solr&lt;/h3&gt;\n&lt;p&gt;http://192.168.25.132:8080/solr/&lt;/p&gt;\n&lt;h2 id=\&#34;é…ç½®ikåˆ†è¯å™¨\&#34;&gt;é…ç½®IKåˆ†è¯å™¨&lt;/h2&gt;\n&lt;h3 id=\&#34;ik-analyzerç®€ä»‹\&#34;&gt;IK Analyzerç®€ä»‹&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;IK Analyzer æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼ŒåŸºäº java è¯­è¨€å¼€å‘çš„è½»é‡çº§çš„ä¸­æ–‡åˆ†è¯å·¥å…·åŒ…ã€‚ä» 2006å¹´ 12 æœˆæ¨å‡º 1.0 ç‰ˆå¼€å§‹ï¼Œ IKAnalyzer å·²ç»æ¨å‡ºäº† 4 ä¸ªå¤§ç‰ˆæœ¬ã€‚æœ€åˆï¼Œå®ƒæ˜¯ä»¥å¼€æºé¡¹ç›®Luence ä¸ºåº”ç”¨ä¸»ä½“çš„ï¼Œç»“åˆè¯å…¸åˆ†è¯å’Œæ–‡æ³•åˆ†æç®—æ³•çš„ä¸­æ–‡åˆ†è¯ç»„ä»¶ã€‚ä» 3.0 ç‰ˆæœ¬å¼€å§‹ï¼ŒIK å‘å±•ä¸ºé¢å‘ Java çš„å…¬ç”¨åˆ†è¯ç»„ä»¶ï¼Œç‹¬ç«‹äº Lucene é¡¹ç›®ï¼ŒåŒæ—¶æä¾›äº†å¯¹ Lucene çš„é»˜è®¤ä¼˜åŒ–å®ç°ã€‚åœ¨ 2012 ç‰ˆæœ¬ä¸­ï¼ŒIK å®ç°äº†ç®€å•çš„åˆ†è¯æ­§ä¹‰æ’é™¤ç®—æ³•ï¼Œæ ‡å¿—ç€ IK åˆ†è¯å™¨ä»å•çº¯çš„è¯å…¸åˆ†è¯å‘æ¨¡æ‹Ÿè¯­ä¹‰åˆ†è¯è¡åŒ–ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;1-å°†ikåˆ†è¯å™¨jaråŒ…ç§»åŠ¨åˆ°solrä¸­\&#34;&gt;1 å°†ikåˆ†è¯å™¨jaråŒ…ç§»åŠ¨åˆ°solrä¸­&lt;/h3&gt;\n&lt;p&gt;cp ~/IK\\ Analyzer\\ 2012FF_hf1/IKAnalyzer2012FF_u1.jar /usr/soft/solr/tomcat7/webapps/solr/WEB-INF/lib&lt;/p&gt;\n&lt;h3 id=\&#34;2-åœ¨solré¡¹ç›®çš„web-inf-ç›®å½•åˆ›å»ºä¸€ä¸ªclassesç›®å½•\&#34;&gt;2 åœ¨solré¡¹ç›®çš„WEB-INF ç›®å½•åˆ›å»ºä¸€ä¸ªclassesç›®å½•&lt;/h3&gt;\n&lt;p&gt;mkdir /usr/soft/solr/tomcat7/webapps/solr/WEB-INF/classes&lt;/p&gt;\n&lt;h3 id=\&#34;3-ç§»åŠ¨é…ç½®æ–‡ä»¶åˆ°classesç›®å½•\&#34;&gt;3 ç§»åŠ¨é…ç½®æ–‡ä»¶åˆ°classesç›®å½•&lt;/h3&gt;\n&lt;p&gt;cp IKAnalyzer.cfg.xml ext_stopword.dic mydict.dic /usr/soft/solr/tomcat7/webapps/solr/WEB-INF/classes&lt;/p&gt;\n&lt;h3 id=\&#34;4-å¯ç”¨-ç¼–è¾‘é…ç½®æ–‡ä»¶\&#34;&gt;4 å¯ç”¨---ç¼–è¾‘é…ç½®æ–‡ä»¶&lt;/h3&gt;\n&lt;p&gt;ä½¿ç”¨nppç¼–è¾‘æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶&lt;/p&gt;\n&lt;p&gt;1 å®‰è£…npp (ç•¥)&lt;/p&gt;\n&lt;p&gt;2  å®‰è£…NppFTP(ç•¥)&lt;/p&gt;\n&lt;p&gt;3 è¿æ¥æœåŠ¡å™¨ (è™)&lt;/p&gt;\n&lt;p&gt;4 ç¼–è¾‘xmlæ–‡ä»¶ : /usr/soft/solr/solrhome/collection1/conf/schema.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- é…ç½®IKåˆ†è¯å™¨ --&amp;gt;\n&amp;lt;fieldType name=&amp;quot;text_ik&amp;quot; class=&amp;quot;solr.TextField&amp;quot;&amp;gt;\n    &amp;lt;analyzer class=&amp;quot;org.wltea.analyzer.lucene.IKAnalyzer&amp;quot;&amp;gt;&amp;lt;/analyzer&amp;gt;\n&amp;lt;/fieldType&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;5 é‡å¯tomcat&lt;/p&gt;\n&lt;p&gt;cd /usr/soft/solr/tomcat7/bin&lt;/p&gt;\n&lt;p&gt;./shutdown.sh&lt;/p&gt;\n&lt;p&gt;./startup.sh&lt;/p&gt;\n&lt;p&gt;6 è®¿é—®url&lt;/p&gt;\n&lt;p&gt;http://192.168.25.132:8080/solr/&lt;/p&gt;\n&lt;h2 id=\&#34;åŸŸ\&#34;&gt;åŸŸ&lt;/h2&gt;\n&lt;p&gt;åŸŸ : ç›¸å½“äºæ•°æ®åº“è¡¨çš„å­—æ®µ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--\n\tname : æŒ‡å®šåŸŸçš„åç§°\n\ttype : æŒ‡å®šåŸŸçš„ç±»å‹\n\tindexed : æ˜¯å¦ç´¢å¼•\n\tstored : æ˜¯å¦å­˜å‚¨\n\trequired : æ˜¯å¦å¿…é¡»\n\tmultiValued : æ˜¯å¦å¤šå€¼\n--&amp;gt;\n&amp;lt;field name=&amp;quot;id&amp;quot; type=&amp;quot;string&amp;quot; indexed=&amp;quot;true&amp;quot; stored=&amp;quot;true&amp;quot; required=&amp;quot;true&amp;quot; multiValued=&amp;quot;false&amp;quot; /&amp;gt; \n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;spring-data-solr-demo\&#34;&gt;Spring Data Solr Demo&lt;/h2&gt;\n&lt;p&gt;1ã€å¼•å…¥ä¾èµ–&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework.data&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-data-solr&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;1.5.5.RELEASE&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt; \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2ã€applicationContext-solr.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;\n&amp;lt;beans xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;\n\txmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot; xmlns:p=&amp;quot;http://www.springframework.org/schema/p&amp;quot;\n\txmlns:context=&amp;quot;http://www.springframework.org/schema/context&amp;quot;\n\txmlns:solr=&amp;quot;http://www.springframework.org/schema/data/solr&amp;quot;\n\txsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/data/solr \n  \t\thttp://www.springframework.org/schema/data/solr/spring-solr-1.0.xsd\n\t\thttp://www.springframework.org/schema/beans \n\t\thttp://www.springframework.org/schema/beans/spring-beans.xsd\n\t\thttp://www.springframework.org/schema/context \n\t\thttp://www.springframework.org/schema/context/spring-context.xsd&amp;quot;&amp;gt;\n\t&amp;lt;!-- solræœåŠ¡å™¨åœ°å€ --&amp;gt;\n\t&amp;lt;solr:solr-server id=&amp;quot;solrServer&amp;quot; url=&amp;quot;http://127.0.0.1:8080/solr&amp;quot; /&amp;gt;\n\t&amp;lt;!-- solræ¨¡æ¿ï¼Œä½¿ç”¨solræ¨¡æ¿å¯å¯¹ç´¢å¼•åº“è¿›è¡ŒCRUDçš„æ“ä½œ --&amp;gt;\n\t&amp;lt;bean id=&amp;quot;solrTemplate&amp;quot; class=&amp;quot;org.springframework.data.solr.core.SolrTemplate&amp;quot;&amp;gt;\n\t\t&amp;lt;constructor-arg ref=&amp;quot;solrServer&amp;quot; /&amp;gt;\n\t&amp;lt;/bean&amp;gt;\n&amp;lt;/beans&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3ã€@Field æ³¨è§£&lt;/p&gt;\n&lt;p&gt;ä½œç”¨ï¼šå¦‚æœåœ¨pojoä¸Šæ·»åŠ äº†è¿™ä¸ªæ³¨è§£ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§ä¼šè¢«å¼•ç”¨åˆ°solrï¼Œvalueä¸ºæŒ‡å®šsolrä¸­fieldå®šä¹‰çš„nameï¼Œå¦‚æœä¸€æ ·å¯ä»¥çœç•¥&lt;/p&gt;\n&lt;p&gt;@Dynamicæ³¨è§£ï¼Œåœ¨å±æ€§ä¸Šå®šä¹‰å°±è¡¨ç¤ºæ˜¯ä¸€ä¸ªåŠ¨æ€åŸŸ&lt;/p&gt;\n&lt;p&gt;4ã€æ·»åŠ &lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Autowired\nprivate SolrTemplate solrTemplate;\n\nsolrTemplate.saveBean(item);\n//æ·»åŠ å¤šæ¡æ•°æ®å¯ä»¥ä½¿ç”¨saveBeans\nsolrTemplate.commit();//æäº¤äº‹åŠ¡\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;5ã€æŒ‰ä¸»é”®æŸ¥è¯¢&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//å‚æ•°1 ï¼šè¦æŸ¥è¯¢çš„ä¸»é”®ID\n//å‚æ•°2 ï¼šè¿”å›çš„æ•°æ®ç±»å‹\nsolrTemplate.getById(1,TbItem.class)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;6ã€æŒ‰ä¸»é”®åˆ é™¤&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;solrTemplate.deleteById(&amp;quot;1&amp;quot;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;7ã€åˆ†é¡µæŸ¥è¯¢&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//æ¡ä»¶\nQuery query = newSimpleQuery(&amp;quot;*:*&amp;quot;);\n//æŸ¥è¯¢æ¡ä»¶\nCriteria criteria = new Criteria();\n//and ï¼šæŸ¥è¯¢çš„åŸŸ\n//contains ï¼šæŸ¥è¯¢çš„å…³é”®å­—\ncriteria.and(&amp;quot;item_title&amp;quot;).contains(&amp;quot;æ‰‹æœº&amp;quot;);\n//å°†æŸ¥è¯¢æ¡ä»¶æ·»åŠ åˆ°queyrä¸­\nquery.addCriteria(criteria);\nquery.setOffset(0);//å¼€å§‹ç´¢å¼•ï¼Œé»˜è®¤ä¸º0ï¼Œç¿»é¡µè§„åˆ™ (pageNow - 1) * pageSize\nquery.setRows(20);//æ¯é¡µè®°å½•æ¡æ•°\n//ScoredPage ï¼šsolrçš„åˆ†é¡µæŸ¥è¯¢\n//å‚æ•°1ï¼šæŸ¥è¯¢æ¡ä»¶\n//å‚æ•°2ï¼šè¿”å›ç±»å‹\nScoredPage&amp;lt;TbItem&amp;gt; page = solrTemplate.queryForPage(query,TbItem.class)\nSystem.out.pringln(&amp;quot;æ€»è®°å½•æ•°:&amp;quot;+page.getTotalElements());\nList&amp;lt;TbItem&amp;gt; list = page.getContent();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;8ã€é«˜äº®æŸ¥è¯¢&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Resource\nprivate SolrTemplate solrTemplate;\n\n@Override\npublic Map&amp;lt;String, Object&amp;gt; search(Map&amp;lt;String, Object&amp;gt; searchMap) {\n\n    Map&amp;lt;String,Object&amp;gt; map = new HashMap&amp;lt;String, Object&amp;gt;();\n\n    //è®¾ç½®æœç´¢é«˜äº®\n    HighlightQuery query = new SimpleHighlightQuery();\n\n    //è®¾ç½®é«˜äº®çš„åŸŸ\n    HighlightOptions highlightOptions = new HighlightOptions().addField(&amp;quot;item_title&amp;quot;);\n\n    //è®¾ç½®é«˜äº®å‰ç¼€\n    highlightOptions.setSimplePrefix(&amp;quot;&amp;lt;em style=&#39;color:red&#39;&amp;gt;&amp;quot;);\n    //è®¾ç½®é«˜äº®åç¼€\n    highlightOptions.setSimplePostfix(&amp;quot;&amp;lt;/em&amp;gt;&amp;quot;);\n\n    //è®¾ç½®é«˜äº®é€‰é¡¹\n    query.setHighlightOptions(highlightOptions);\n\n    //æŒ‰ç…§å…³é”®å­—æŸ¥è¯¢\n    Criteria criteria = new Criteria(&amp;quot;item_keywords&amp;quot;).is(searchMap.get(&amp;quot;keywords&amp;quot;));\n\n    //æ·»åŠ æ¡ä»¶\n    query.addCriteria(criteria);\n\n    //åˆ°solrä¸­æŸ¥è¯¢\n    HighlightPage&amp;lt;TbItem&amp;gt; page = solrTemplate.queryForHighlightPage(query,TbItem.class);\n\n    //å¾ªç¯é«˜äº®å…¥å£é›†åˆ\n    for (HighlightEntry&amp;lt;TbItem&amp;gt; entry : page.getHighlighted()) {\n        //è·å–åŸå®ä½“ç±»\n        TbItem tbItem = entry.getEntity();\n\n        //åˆ¤æ–­æ˜¯å¦æœ‰é«˜äº®å†…å®¹\n        if(entry.getHighlights().size() &amp;gt; 0 &amp;amp;&amp;amp; entry.getHighlights().get(0).getSnipplets().size() &amp;gt; 0 ){\n            //è®¾ç½®é«˜äº®çš„ç»“æœ\n            tbItem.setTitle(entry.getHighlights().get(0).getSnipplets().get(0));\n        }\n    }\n    map.put(&amp;quot;rows&amp;quot;,page.getContent());\n\n    return map;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;solr-an-zhuang-shi-yong&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;solrå®‰è£…ä½¿ç”¨&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;solr&#34;,&#34;slug&#34;:&#34;D-nvo_2ol&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/D-nvo_2ol/&#34;}],&#34;date&#34;:&#34;2020-05-12 18:47:23&#34;,&#34;dateFormat&#34;:&#34;2020-05-12&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/solr-an-zhuang-shi-yong/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;9 min read&#34;,&#34;time&#34;:521000,&#34;words&#34;:1850,&#34;minutes&#34;:9},&#34;description&#34;:&#34;ä»€ä¹ˆæ˜¯Solr\n\nå¤§å¤šæ•°æœç´¢å¼•æ“åº”ç”¨éƒ½å¿…é¡»å…·æœ‰æŸç§æœç´¢åŠŸèƒ½ï¼Œé—®é¢˜æ˜¯æœç´¢åŠŸèƒ½å¾€å¾€æ˜¯å·¨å¤§çš„èµ„æºæ¶ˆè€—å¹¶ä¸”å®ƒä»¬ç”±äºæ²‰é‡çš„æ•°æ®åº“åŠ è½½è€Œæ‹–å®ä½ çš„åº”ç”¨çš„æ€§èƒ½ã€‚\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè½¬ç§»è´Ÿè½½åˆ°ä¸€ä¸ªå¤–éƒ¨çš„æœç´¢æœåŠ¡å™¨æ˜¯ä¸€ä¸ªä¸é”™çš„ä¸»æ„ï¼ŒApache Solræ˜¯ä¸€ä¸ªæµè¡Œçš„...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BB%80%E4%B9%88%E6%98%AFsolr\&#34;&gt;ä»€ä¹ˆæ˜¯Solr&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#solr%E5%AE%89%E8%A3%85\&#34;&gt;solrå®‰è£…&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6\&#34;&gt;1 ä¸Šä¼ æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95\&#34;&gt;2 åˆ›å»ºç›®å½•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E8%A7%A3%E5%8E%8Btomcat%E5%B9%B6%E7%A7%BB%E5%8A%A8%E5%88%B0solr%E7%9B%AE%E5%BD%95\&#34;&gt;3 è§£å‹tomcatå¹¶ç§»åŠ¨åˆ°solrç›®å½•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-%E5%90%AF%E5%8A%A8tomcat\&#34;&gt;4 å¯åŠ¨tomcat&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96jar%E5%8C%85\&#34;&gt;5 å¼•å…¥ä¾èµ–jaråŒ…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\&#34;&gt;6 å¤åˆ¶é…ç½®æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-solr%E5%92%8Csolrhome%E5%BB%BA%E7%AB%8B%E8%81%94%E7%B3%BB\&#34;&gt;7 solrå’Œsolrhomeå»ºç«‹è”ç³»&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#8-%E9%87%8D%E5%90%AF-tomcat\&#34;&gt;8 é‡å¯ tomcat&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#9-%E8%AE%BF%E9%97%AEsolr\&#34;&gt;9 è®¿é—®solr&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%85%8D%E7%BD%AEik%E5%88%86%E8%AF%8D%E5%99%A8\&#34;&gt;é…ç½®IKåˆ†è¯å™¨&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#ik-analyzer%E7%AE%80%E4%BB%8B\&#34;&gt;IK Analyzerç®€ä»‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E5%B0%86ik%E5%88%86%E8%AF%8D%E5%99%A8jar%E5%8C%85%E7%A7%BB%E5%8A%A8%E5%88%B0solr%E4%B8%AD\&#34;&gt;1 å°†ikåˆ†è¯å™¨jaråŒ…ç§»åŠ¨åˆ°solrä¸­&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E5%9C%A8solr%E9%A1%B9%E7%9B%AE%E7%9A%84web-inf-%E7%9B%AE%E5%BD%95%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAclasses%E7%9B%AE%E5%BD%95\&#34;&gt;2 åœ¨solré¡¹ç›®çš„WEB-INF ç›®å½•åˆ›å»ºä¸€ä¸ªclassesç›®å½•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E7%A7%BB%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%88%B0classes%E7%9B%AE%E5%BD%95\&#34;&gt;3 ç§»åŠ¨é…ç½®æ–‡ä»¶åˆ°classesç›®å½•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-%E5%90%AF%E7%94%A8-%E7%BC%96%E8%BE%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\&#34;&gt;4 å¯ç”¨---ç¼–è¾‘é…ç½®æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%9F%9F\&#34;&gt;åŸŸ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#spring-data-solr-demo\&#34;&gt;Spring Data Solr Demo&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;spring-securityç®€ä»‹\&#34;&gt;Spring Securityç®€ä»‹&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Spring Securityæ˜¯ä¸€ä¸ªèƒ½å¤Ÿä¸ºåŸºäºSpringçš„ä¼ä¸šåº”ç”¨ç³»ç»Ÿæä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®æ§åˆ¶è§£å†³æ–¹æ¡ˆçš„å®‰å…¨æ¡†æ¶ã€‚å®ƒæä¾›äº†ä¸€ç»„å¯ä»¥åœ¨Springåº”ç”¨ä¸Šä¸‹æ–‡ä¸­é…ç½®çš„Beanï¼Œå……åˆ†åˆ©ç”¨äº†Spring IoCï¼ŒDIï¼ˆæ§åˆ¶åè½¬Inversion of Control ,DI:Dependency Injection ä¾èµ–æ³¨å…¥ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰åŠŸèƒ½ï¼Œä¸ºåº”ç”¨ç³»ç»Ÿæä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®æ§åˆ¶åŠŸèƒ½ï¼Œå‡å°‘äº†ä¸ºä¼ä¸šç³»ç»Ÿå®‰å…¨æ§åˆ¶ç¼–å†™å¤§é‡é‡å¤ä»£ç çš„å·¥ä½œã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;å•æœºç‰ˆ\&#34;&gt;å•æœºç‰ˆ&lt;/h2&gt;\n&lt;p&gt;1.å¼•å…¥ä¾èµ–&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt; &amp;lt;!-- èº«ä»½éªŒè¯ --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-security-web&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-security-config&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;!-- more --&gt;\n&lt;p&gt;2.é…ç½®æ ¸å¿ƒé…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;\n&amp;lt;beans:beans xmlns=&amp;quot;http://www.springframework.org/schema/security&amp;quot;\n             xmlns:beans=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;\n             xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;\n             xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n\t\t\t\t\t\thttp://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd&amp;quot;&amp;gt;\n    &amp;lt;!-- ä»¥ä¸‹é¡µé¢ä¸è¢«æ‹¦æˆª --&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/login.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/css/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/img/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/js/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/plugins/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n\n    &amp;lt;!--\n            é¡µé¢æ‹¦æˆªè§„åˆ™\n                use-expressions:æ˜¯å¦å¯ç”¨spelè¡¨è¾¾å¼, å¦‚æœä¸ºtrueé‚£ä¹ˆaccess=&amp;quot;hasRole(&#39;ROLE_USER&#39;)&amp;quot;\n        --&amp;gt;\n    &amp;lt;!-- é¡µé¢æ‹¦æˆªè§„åˆ™ --&amp;gt;\n    &amp;lt;http use-expressions=&amp;quot;false&amp;quot;&amp;gt;\n        &amp;lt;!--\n            pattern : æ‹¦æˆªçš„url\n            access : æ‹¥æœ‰å¦‚ä¸‹æƒé™å…è®¸è®¿é—®\n        --&amp;gt;\n        &amp;lt;intercept-url pattern=&amp;quot;/**&amp;quot; access=&amp;quot;ROLE_ADMIN&amp;quot; /&amp;gt;\n        &amp;lt;!--\n            login-page : è‡ªå®šä¹‰ç™»é™†é¡µé¢\n            default-target-url : ç™»é™†æˆåŠŸåè·³è½¬çš„é¡µé¢,ä¸è®¾å®šé»˜è®¤è·³è½¬ä¸Šä¸€æ¬¡è®¿é—®çš„é¡µé¢\n            authentication-failure-url : ç™»é™†å¤±è´¥æ—¶è·³è½¬çš„url\n            always-use-default-target : ç™»é™†æˆåŠŸå æ€»æ˜¯è·³è½¬åˆ° default-target-url è®¾å®šçš„url\n        --&amp;gt;\n        &amp;lt;form-login login-page=&amp;quot;/login.html&amp;quot;  default-target-url=&amp;quot;/admin/index.html&amp;quot; authentication-failure-url=&amp;quot;/login.html&amp;quot; always-use-default-target=&amp;quot;true&amp;quot;/&amp;gt;\n        &amp;lt;csrf disabled=&amp;quot;true&amp;quot;/&amp;gt;\n\n        &amp;lt;!--\n            logout-url : é€€å‡ºçš„åœ°å€\n            logout-success-url : é€€å‡ºåè·³è½¬çš„åœ°å€\n        --&amp;gt;\n        &amp;lt;logout logout-url=&amp;quot;/logout&amp;quot; logout-success-url=&amp;quot;/login.html&amp;quot;/&amp;gt;\n        &amp;lt;!--\n            å¦‚æœä½¿ç”¨äº†iframe,éœ€è¦æŒ‡å®šæ¡†æ¶é¡µçš„ç­–ç•¥ä¸º SAMEORIGIN\n        --&amp;gt;\n        &amp;lt;headers&amp;gt;\n            &amp;lt;frame-options policy=&amp;quot;SAMEORIGIN&amp;quot;/&amp;gt;  &amp;lt;!--å…è®¸ä½¿ç”¨frameset --&amp;gt;\n        &amp;lt;/headers&amp;gt;\n    &amp;lt;/http&amp;gt;\n\n    &amp;lt;!--è®¤è¯ç®¡ç†å™¨--&amp;gt;\n    &amp;lt;authentication-manager&amp;gt;\n        &amp;lt;authentication-provider&amp;gt;\n            &amp;lt;user-service&amp;gt;\n                &amp;lt;!--ç”¨æˆ·åå’Œå¯†ç ,æƒé™--&amp;gt;\n                &amp;lt;user name=&amp;quot;root&amp;quot; password=&amp;quot;root&amp;quot; authorities=&amp;quot;ROLE_ADMIN&amp;quot;/&amp;gt;\n            &amp;lt;/user-service&amp;gt;\n        &amp;lt;/authentication-provider&amp;gt;\n    &amp;lt;/authentication-manager&amp;gt;\n\n&amp;lt;/beans:beans&amp;gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3.é…ç½®web.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;context-param&amp;gt;\n    &amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;\n    &amp;lt;param-value&amp;gt;classpath:spring/spring-security.xml&amp;lt;/param-value&amp;gt;\n&amp;lt;/context-param&amp;gt;\n&amp;lt;listener&amp;gt;\n    &amp;lt;listener-class&amp;gt;\n        org.springframework.web.context.ContextLoaderListener\n    &amp;lt;/listener-class&amp;gt;\n&amp;lt;/listener&amp;gt;\n&amp;lt;filter&amp;gt;\n    &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;\n    &amp;lt;filter-class&amp;gt;org.springframework.web.filter.DelegatingFilterProxy&amp;lt;/filter-class&amp;gt;\n&amp;lt;/filter&amp;gt;\n&amp;lt;filter-mapping&amp;gt;\n    &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;\n    &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;\n&amp;lt;/filter-mapping&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;è¿æ¥æ•°æ®åº“\&#34;&gt;è¿æ¥æ•°æ®åº“&lt;/h2&gt;\n&lt;p&gt;1.å¼•å…¥ä¾èµ–&lt;/p&gt;\n&lt;p&gt;2.å®ç°UserDetailsServiceæ¥å£&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;package com.jd.shop.service.impl;\n\nimport com.jd.pojo.TbSeller;\nimport com.jd.sellergoods.service.TbSellerService;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * è®¤è¯ç±»\n * @program: jd\n * @author: æ½˜\n * @create: 2020-04-29 22:43\n **/\npublic class UserDetailsServiceImpl implements UserDetailsService{\n\n    private TbSellerService tbSellerService;\n\n    public void setTbSellerService(TbSellerService tbSellerService) {\n        this.tbSellerService = tbSellerService;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n\n        if(username == null){\n            return null;\n        }\n\n        TbSeller byId = tbSellerService.findById(username);\n\n        if(byId == null){\n            return null;\n        }\n\n        //æ„å»ºè§’è‰²åˆ—è¡¨\n        List&amp;lt;GrantedAuthority&amp;gt; list = new ArrayList&amp;lt;&amp;gt;();\n\n        //ç”¨æˆ·çš„æƒé™é›†åˆ\n        list.add(new SimpleGrantedAuthority(&amp;quot;ROLE_USER&amp;quot;));\n\n        return new User(username,byId.getPassword(),list);\n    }\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3.é…ç½®æ ¸å¿ƒé…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;\n&amp;lt;beans:beans xmlns=&amp;quot;http://www.springframework.org/schema/security&amp;quot;\n             xmlns:beans=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;\n             xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;\n             xmlns:dubbo=&amp;quot;http://code.alibabatech.com/schema/dubbo&amp;quot;\n             xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n\t\t\t\t\t\thttp://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&amp;quot;&amp;gt;\n    &amp;lt;!-- ä»¥ä¸‹é¡µé¢ä¸è¢«æ‹¦æˆª --&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/login.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/css/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/img/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/js/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/plugins/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/*.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n&amp;lt;!--    &amp;lt;http pattern=&amp;quot;/login&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;--&amp;gt;\n\n    &amp;lt;!--\n            é¡µé¢æ‹¦æˆªè§„åˆ™\n                use-expressions:æ˜¯å¦å¯ç”¨spelè¡¨è¾¾å¼, å¦‚æœä¸ºtrueé‚£ä¹ˆaccess=&amp;quot;hasRole(&#39;ROLE_USER&#39;)&amp;quot;\n        --&amp;gt;\n    &amp;lt;!-- é¡µé¢æ‹¦æˆªè§„åˆ™ --&amp;gt;\n    &amp;lt;http use-expressions=&amp;quot;false&amp;quot;&amp;gt;\n        &amp;lt;!--\n            pattern : æ‹¦æˆªçš„url\n            access : æ‹¥æœ‰å¦‚ä¸‹æƒé™å…è®¸è®¿é—®\n        --&amp;gt;\n        &amp;lt;intercept-url pattern=&amp;quot;/**&amp;quot; access=&amp;quot;ROLE_USER&amp;quot; /&amp;gt;\n        &amp;lt;!--\n            login-page : è‡ªå®šä¹‰ç™»é™†é¡µé¢\n            default-target-url : ç™»é™†æˆåŠŸåè·³è½¬çš„é¡µé¢,ä¸è®¾å®šé»˜è®¤è·³è½¬ä¸Šä¸€æ¬¡è®¿é—®çš„é¡µé¢\n            authentication-failure-url : ç™»é™†å¤±è´¥æ—¶è·³è½¬çš„url\n            always-use-default-target : ç™»é™†æˆåŠŸå æ€»æ˜¯è·³è½¬åˆ° default-target-url è®¾å®šçš„url\n        --&amp;gt;\n        &amp;lt;form-login login-processing-url=&amp;quot;/login&amp;quot; login-page=&amp;quot;/shoplogin.html&amp;quot;  default-target-url=&amp;quot;/admin/index.html&amp;quot; authentication-failure-url=&amp;quot;/shoplogin.html&amp;quot; always-use-default-target=&amp;quot;true&amp;quot;/&amp;gt;\n        &amp;lt;csrf disabled=&amp;quot;true&amp;quot;/&amp;gt;\n\n        &amp;lt;!--\n            logout-url : é€€å‡ºçš„åœ°å€\n            logout-success-url : é€€å‡ºåè·³è½¬çš„åœ°å€\n        --&amp;gt;\n        &amp;lt;logout logout-url=&amp;quot;/logout&amp;quot; logout-success-url=&amp;quot;/shoplogin.html&amp;quot;/&amp;gt;\n        &amp;lt;!--\n            å¦‚æœä½¿ç”¨äº†iframe,éœ€è¦æŒ‡å®šæ¡†æ¶é¡µçš„ç­–ç•¥ä¸º SAMEORIGIN\n        --&amp;gt;\n        &amp;lt;headers&amp;gt;\n            &amp;lt;frame-options policy=&amp;quot;SAMEORIGIN&amp;quot;/&amp;gt;  &amp;lt;!--å…è®¸ä½¿ç”¨frameset --&amp;gt;\n        &amp;lt;/headers&amp;gt;\n    &amp;lt;/http&amp;gt;\n\n    &amp;lt;!--è®¤è¯ç®¡ç†å™¨--&amp;gt;\n    &amp;lt;authentication-manager&amp;gt;\n        &amp;lt;authentication-provider user-service-ref=&amp;quot;userDetailsServiceImpl&amp;quot;/&amp;gt;\n    &amp;lt;/authentication-manager&amp;gt;\n\n    &amp;lt;!-- å¼•ç”¨dubbo æœåŠ¡ --&amp;gt;\n    &amp;lt;dubbo:application name=&amp;quot;jd-shop-web&amp;quot; /&amp;gt;\n    &amp;lt;dubbo:registry address=&amp;quot;zookeeper://47.98.157.69:2181&amp;quot; timeout=&amp;quot;30000&amp;quot;/&amp;gt;\n    &amp;lt;dubbo:annotation package=&amp;quot;com.jd.shop.controller&amp;quot; /&amp;gt;\n    \n    &amp;lt;dubbo:reference interface=&amp;quot;com.jd.sellergoods.service.TbSellerService&amp;quot; id=&amp;quot;tbSellerService&amp;quot;/&amp;gt;\n\n    &amp;lt;beans:bean id=&amp;quot;userDetailsServiceImpl&amp;quot; class=&amp;quot;com.jd.shop.service.impl.UserDetailsServiceImpl&amp;quot;&amp;gt;\n        &amp;lt;beans:property name=&amp;quot;tbSellerService&amp;quot; ref=&amp;quot;tbSellerService&amp;quot;/&amp;gt;\n    &amp;lt;/beans:bean&amp;gt;\n\n&amp;lt;/beans:beans&amp;gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;4.é…ç½®web.xmlæ–‡ä»¶&lt;/p&gt;\n&lt;h2 id=\&#34;brcyåŠ å¯†\&#34;&gt;BrcyåŠ å¯†&lt;/h2&gt;\n&lt;p&gt;1.ç¼–å†™java&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();\nString encode = passwordEncoder.encode(tbSeller.getPassword());\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2.ç¼–å†™é…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--è®¤è¯ç®¡ç†å™¨--&amp;gt;\n&amp;lt;authentication-manager&amp;gt;\n    &amp;lt;authentication-provider user-service-ref=&amp;quot;userDetailsServiceImpl&amp;quot;&amp;gt;\n        &amp;lt;!-- è¿™å¥è¯è¡¨ç¤ºåœ¨ç™»é™†æ—¶ä½¿ç”¨bcryåŠ å¯†éªŒè¯ --&amp;gt;\n        &amp;lt;password-encoder ref=&amp;quot;bCryptPasswordEncoder&amp;quot;/&amp;gt;\n    &amp;lt;/authentication-provider&amp;gt;\n&amp;lt;/authentication-manager&amp;gt;\n&amp;lt;!--é…ç½®åŠ å¯†,åœ¨è®¤è¯ç®¡ç†å™¨ä¸­å¼•ç”¨--&amp;gt;\n&amp;lt;beans:bean id=&amp;quot;bCryptPasswordEncoder&amp;quot; class=&amp;quot;org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder&amp;quot;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;è®°ä½æˆ‘\&#34;&gt;è®°ä½æˆ‘&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;input value=&amp;quot;1&amp;quot; name=&amp;quot;remember-me&amp;quot;/&amp;gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;spring-security&#34;,&#34;abstract&#34;:&#34;&lt;h2 id=\&#34;spring-securityç®€ä»‹\&#34;&gt;Spring Securityç®€ä»‹&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Spring Securityæ˜¯ä¸€ä¸ªèƒ½å¤Ÿä¸ºåŸºäºSpringçš„ä¼ä¸šåº”ç”¨ç³»ç»Ÿæä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®æ§åˆ¶è§£å†³æ–¹æ¡ˆçš„å®‰å…¨æ¡†æ¶ã€‚å®ƒæä¾›äº†ä¸€ç»„å¯ä»¥åœ¨Springåº”ç”¨ä¸Šä¸‹æ–‡ä¸­é…ç½®çš„Beanï¼Œå……åˆ†åˆ©ç”¨äº†Spring IoCï¼ŒDIï¼ˆæ§åˆ¶åè½¬Inversion of Control ,DI:Dependency Injection ä¾èµ–æ³¨å…¥ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰åŠŸèƒ½ï¼Œä¸ºåº”ç”¨ç³»ç»Ÿæä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®æ§åˆ¶åŠŸèƒ½ï¼Œå‡å°‘äº†ä¸ºä¼ä¸šç³»ç»Ÿå®‰å…¨æ§åˆ¶ç¼–å†™å¤§é‡é‡å¤ä»£ç çš„å·¥ä½œã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;å•æœºç‰ˆ\&#34;&gt;å•æœºç‰ˆ&lt;/h2&gt;\n&lt;p&gt;1.å¼•å…¥ä¾èµ–&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt; &amp;lt;!-- èº«ä»½éªŒè¯ --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-security-web&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-security-config&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;title&#34;:&#34;Spring-Security&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;spring-security&#34;,&#34;slug&#34;:&#34;YYffL2EXa&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/YYffL2EXa/&#34;},{&#34;name&#34;:&#34;spring&#34;,&#34;slug&#34;:&#34;POgCfBu13Z&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/POgCfBu13Z/&#34;}],&#34;date&#34;:&#34;2020-05-04 12:14:24&#34;,&#34;dateFormat&#34;:&#34;2020-05-04&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/spring-security/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;10 min read&#34;,&#34;time&#34;:540000,&#34;words&#34;:1682,&#34;minutes&#34;:10},&#34;description&#34;:&#34;Spring Securityç®€ä»‹\n\nSpring Securityæ˜¯ä¸€ä¸ªèƒ½å¤Ÿä¸ºåŸºäºSpringçš„ä¼ä¸šåº”ç”¨ç³»ç»Ÿæä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®æ§åˆ¶è§£å†³æ–¹æ¡ˆçš„å®‰å…¨æ¡†æ¶ã€‚å®ƒæä¾›äº†ä¸€ç»„å¯ä»¥åœ¨Springåº”ç”¨ä¸Šä¸‹æ–‡ä¸­é…ç½®çš„Beanï¼Œå……åˆ†åˆ©ç”¨äº†Spring Io...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#spring-security%E7%AE%80%E4%BB%8B\&#34;&gt;Spring Securityç®€ä»‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8D%95%E6%9C%BA%E7%89%88\&#34;&gt;å•æœºç‰ˆ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93\&#34;&gt;è¿æ¥æ•°æ®åº“&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#brcy%E5%8A%A0%E5%AF%86\&#34;&gt;BrcyåŠ å¯†&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%AE%B0%E4%BD%8F%E6%88%91\&#34;&gt;è®°ä½æˆ‘&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h1 id=\&#34;å¿«é€Ÿå¼€å§‹\&#34;&gt;å¿«é€Ÿå¼€å§‹&lt;/h1&gt;\n&lt;h2 id=\&#34;1-mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶\&#34;&gt;1ã€MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE configuration\n  PUBLIC &amp;quot;-//mybatis.org//DTD Config 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-config.dtd&amp;quot;&amp;gt;\n&amp;lt;configuration&amp;gt;\n  &amp;lt;!-- é…ç½®æ•°æ®æº --&amp;gt;\n  &amp;lt;environments default=&amp;quot;development&amp;quot;&amp;gt;\n    &amp;lt;environment id=&amp;quot;development&amp;quot;&amp;gt;\n     &amp;lt;!--äº‹åŠ¡å¤„ç†æ–¹å¼--&amp;gt;\n      &amp;lt;transactionManager type=&amp;quot;JDBC&amp;quot;/&amp;gt;\n      &amp;lt;dataSource type=&amp;quot;POOLED&amp;quot;&amp;gt;\n        &amp;lt;property name=&amp;quot;driver&amp;quot; value=&amp;quot;com.mysql.jdbc.Driver&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;url&amp;quot; value=&amp;quot;jdbc:mysql://localhost:3306/mybatis&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;username&amp;quot; value=&amp;quot;root&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;password&amp;quot; value=&amp;quot;root&amp;quot;/&amp;gt;\n      &amp;lt;/dataSource&amp;gt;\n    &amp;lt;/environment&amp;gt;\n  &amp;lt;/environments&amp;gt;\n&amp;lt;!--æ˜ å°„å™¨ï¼šæ¯ä¸€ä¸ªMapperæ¥å£éƒ½åº”è¯¥åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶&amp;lt;mappers&amp;gt;æ ‡ç­¾ä¸­æ³¨å†Œ--&amp;gt;\n  &amp;lt;mappers&amp;gt;\n  \t&amp;lt;!--ä½¿ç”¨XMLé…ç½®æ–‡ä»¶æ³¨å†Œ--&amp;gt;\n    &amp;lt;mapper resource=&amp;quot;com/cn/mybatis/dao/IcpInfoMapper.xml&amp;quot;/&amp;gt;\n    &amp;lt;!--ä½¿ç”¨ç±»æ³¨å†Œæ–¹å¼--&amp;gt;\n    &amp;lt;mapper class=&amp;quot;com.cn.mybatis.dao.IcpInfoMapper&amp;quot; /&amp;gt;\n  &amp;lt;/mappers&amp;gt;\n&amp;lt;/configuration&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;2-ormæ˜ å°„æ–‡ä»¶mapperxml\&#34;&gt;2ã€ORMæ˜ å°„æ–‡ä»¶mapper.xml&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE mapper\n  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;\n&amp;lt;!-- è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸»è¦æ˜¯é…ç½®å®ä½“ç±»å’Œæ•°æ®åº“ä¸­çš„è¡¨æ˜ å°„å…³ç³» --&amp;gt;\n&amp;lt;!-- mapperï¼šæ˜ å°„ä¿¡æ¯é…ç½® namesapce:å¦‚æœæ˜¯åœ¨ibatisçš„å¼€å‘ä¸­ï¼Œåå­—å¯ä»¥éšä¾¿å–ï¼Œä½†æ˜¯åœ¨mybatisä¸­å°†æœ‰ç‰¹æ®Šçš„æ„ä¹‰ --&amp;gt;\n&amp;lt;mapper namespace=&amp;quot;test&amp;quot;&amp;gt;\n\t&amp;lt;!-- æŸ¥è¯¢æ‰€æœ‰çš„ä¹¦ç±ä¿¡æ¯ select:ä¸“é—¨ç”¨äºæŸ¥è¯¢çš„statement\n\t     id:æ˜¯statementçš„å”¯ä¸€æ ‡è¯†ç¬¦\n\t     resultType:è¿”å›å€¼å¾—ç±»å‹ï¼ˆè·Ÿè¿”å›çš„ä¸ªæ•°æ— å…³ï¼‰ï¼Œå°†è¿”å›ç±»å‹çš„å…¨é™å®šåå†™åˆ°è¿™é‡Œ\n\t --&amp;gt;\n\t&amp;lt;select id=&amp;quot;selectAllBooks&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Book&amp;quot;&amp;gt;\n\t\tselect * from book\n\t&amp;lt;/select&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;3-æ—¥å¿—æ–‡ä»¶\&#34;&gt;3ã€æ—¥å¿—æ–‡ä»¶&lt;/h2&gt;\n&lt;p&gt;&lt;code&gt;log4j.properties&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;log4j.rootLogger=DEBUG,A1\nlog4j.logger.org.mybatis=DEBUG\nlog4j.appender.A1=org.apache.log4j.ConsoleAppender\nlog4j.appender.A1.layout=org.apache.log4j.PatternLayout\nlog4j.appender.A1.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss,SSS} [%t] [%c]-[%p] %m%n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;4-æµ‹è¯•\&#34;&gt;4ã€æµ‹è¯•&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//æŸ¥è¯¢å…¨éƒ¨\n@Test\npublic void testFindAll() throws Exception{\n    //é€šè¿‡æµçš„æ–¹å¼è¯»å–é…ç½®æ–‡ä»¶\n    InputStream inputStream = Resources.getResourceAsStream(&amp;quot;mybatis-config.xml&amp;quot;);\n    //1.è¯»å–é…ç½®æ–‡ä»¶,å¾—åˆ°SqlSessionFactory\n    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream );\n    //2.åˆ›å»ºSqlSession\n    SqlSession sqlSession = sqlSessionFactory.openSession();\n    //3.æŸ¥è¯¢æ‰€æœ‰(å‚æ•°ï¼šæ˜¯namespace.statementId)\n    List&amp;lt;Book&amp;gt; list = sqlSession.selectList(&amp;quot;test.selectAllBooks&amp;quot;);\n    System.out.println(list);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;propertieså±æ€§\&#34;&gt;propertieså±æ€§&lt;/h1&gt;\n&lt;p&gt;åˆ›å»ºä¸€ä¸ªå¤–éƒ¨çš„propertiesæ–‡ä»¶&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;jdbc.dirver=com.mysql.jdbc.Driver\njdbc.url=jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;amp;characterEncoding=utf-8\njdbc.username=root\njdbc.password=root\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•ç”¨propertiesæ–‡ä»¶&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;properties resource=&amp;quot;jdbc.properties&amp;quot;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ä½¿ç”¨&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;${jdbc.dirver}\n${jdbc.url}\n${jdbc.username}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;settings\&#34;&gt;settings&lt;/h1&gt;\n&lt;p&gt;&lt;code&gt;mapUnderscoreToCamelCase&lt;/code&gt;:å¼€å¯é©¼å³°å‘½åï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆæ•°æ®åº“çš„ç»å…¸å‘½åè§„åˆ™ï¼Œåˆ°javaçš„ç»å…¸å‘½åè§„åˆ™ï¼ˆé©¼å³°å‘½åå‘ï¼‰&lt;/p&gt;\n&lt;p&gt;å¦‚ï¼šæ•°æ®åº“å«user_name  åˆ°javaç±»ï¼ˆ&lt;code&gt;pojo&lt;/code&gt;ï¼‰ä¸­æ˜¯&lt;code&gt;userName&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;settings&amp;gt;\n    &amp;lt;!-- å¼€å¯é©¼å³°å‘½å --&amp;gt;\n    &amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n    &amp;lt;!--æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚\n\tæ—¥å¿—ç±»å‹ï¼š\n\tSTDOUT_LOGGING ä¸éœ€è¦å¯¼å…¥jaråŒ…ï¼Œå› ä¸ºæ˜¯mybatisè‡ªå¸¦\n\tNO_LOGGING ä»£è¡¨ä¸éœ€è¦æ—¥å¿—è¾“å‡º\n\tSLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING\n \t--&amp;gt;\n    &amp;lt;setting name=&amp;quot;logImpl&amp;quot; value=&amp;quot;STDOUT_LOGGING&amp;quot;/&amp;gt;\n&amp;lt;/settings&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;åˆ†ææ—¥å¿—è¾“å‡º&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;MyBatis.assets%5Cimage-20200307124719177.png\&#34; alt=\&#34;image-20200307124719177\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h1 id=\&#34;typealiasesç±»å‹åˆ«å\&#34;&gt;typeAliasesï¼ˆç±»å‹åˆ«åï¼‰&lt;/h1&gt;\n&lt;h2 id=\&#34;è‡ªå®šä¹‰åˆ«å\&#34;&gt;è‡ªå®šä¹‰åˆ«å&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--åˆ«åï¼Œç”¨äºç®€åŒ–--&amp;gt;\n&amp;lt;typeAliases&amp;gt;\n    &amp;lt;!--typeï¼šåŒ…+ç±»åï¼Œaliasï¼šåˆ«å--&amp;gt;\n    &amp;lt;typeAlias type=&amp;quot;com.cn.mybatis.entity.IcpInfo&amp;quot; alias=&amp;quot;Icp&amp;quot; /&amp;gt;\n    &amp;lt;!--ä½¿ç”¨åŒ…çš„æ–¹å¼\n\t\tæ¯ä¸€ä¸ªåœ¨åŒ… domain.blog ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹\n\t\tä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«å\n\t\t(è¿™å¥è¯æ„æ€æ˜¯ï¼š@Alias(&amp;quot;author&amp;quot;)\n\t\tåœ¨ä½¿ç”¨åŒ…æ–¹å¼æ—¶ï¼ŒjavaBeanæ²¡æœ‰æ·»åŠ æ³¨è§£æŒ‡å®šåˆ«åæ—¶è‡ªåŠ¨ä½¿ç”¨ç±»å{é¦–å­—æ¯å°å†™})\n\t--&amp;gt;\n    &amp;lt;package name=&amp;quot;com.cn.mybatis.entity&amp;quot;/&amp;gt;\n&amp;lt;/typeAliases&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;pluginsæ’ä»¶\&#34;&gt;pluginsï¼ˆæ’ä»¶ï¼‰&lt;/h1&gt;\n&lt;h1 id=\&#34;xmlæ˜ å°„\&#34;&gt;XMLæ˜ å°„&lt;/h1&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;cache&lt;/code&gt; â€“ å¯¹ç»™å®šå‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;cache-ref&lt;/code&gt; â€“ å¯¹å…¶ä»–å‘½åç©ºé—´ç¼“å­˜é…ç½®çš„å¼•ç”¨ã€‚&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;resultMap&lt;/code&gt; â€“ æ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€å¼ºå¤§çš„å…ƒç´ ï¼Œç”¨æ¥æè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­æ¥åŠ è½½å¯¹è±¡ã€‚&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;parameterMap&lt;/code&gt; â€“ å·²è¢«åºŸå¼ƒï¼è€å¼é£æ ¼çš„å‚æ•°æ˜ å°„ã€‚æ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨å†…è”å‚æ•°ï¼Œæ­¤å…ƒç´ å¯èƒ½åœ¨å°†æ¥è¢«ç§»é™¤ã€‚æ–‡æ¡£ä¸­ä¸ä¼šä»‹ç»æ­¤å…ƒç´ ã€‚&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;sql&lt;/code&gt; â€“ å¯è¢«å…¶ä»–è¯­å¥å¼•ç”¨çš„å¯é‡ç”¨è¯­å¥å—ã€‚&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;insert&lt;/code&gt; â€“ æ˜ å°„æ’å…¥è¯­å¥&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;update&lt;/code&gt; â€“ æ˜ å°„æ›´æ–°è¯­å¥&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;delete&lt;/code&gt; â€“ æ˜ å°„åˆ é™¤è¯­å¥&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;select&lt;/code&gt; â€“ æ˜ å°„æŸ¥è¯¢è¯­å¥&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;select-æŸ¥è¯¢è¯­å¥\&#34;&gt;select æŸ¥è¯¢è¯­å¥&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--\n\tidï¼šä¸€èˆ¬å’ŒMepperæ¥å£çš„æ–¹æ³•åç§°ç›¸åŒï¼Œåœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚\n\tparameterTypeï¼šæ¥æ”¶ä¸€ä¸ªintç±»å‹çš„å‚æ•°\n\t\tæ¥æ”¶å‚æ•°ä½¿ç”¨#{ }åŒ…è£¹ç€ï¼Œè¿™ä¸ªå‚æ•°å¯¹åº”ç€æ¥å£çš„å‚æ•°\n\tresultTypeï¼šè¿”å›ä¸€ä¸ªhashmap ç±»å‹çš„æ•°æ®\n\n--&amp;gt;\n&amp;lt;select id=&amp;quot;selectPerson&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;hashmap&amp;quot;&amp;gt;\n  SELECT * FROM PERSON WHERE ID = #{id}\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;insert-updatea-delete\&#34;&gt;insert updatea delete&lt;/h2&gt;\n&lt;p&gt;åœ¨ä½¿ç”¨è¿™äº›è¯­å¥çš„æ—¶å€™éœ€è¦æäº¤äº‹åŠ¡ï¼šsession.commit();&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfo&amp;quot; parameterType=&amp;quot;icpInfo&amp;quot; &amp;gt;\n    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values (#{icp}, #{name}, #{address}, #{home}, #{introduce}, #{author}, #{email}, #{date}, #{type})\n&amp;lt;/insert&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;è·å–æ’å…¥æ•°æ®åçš„ä¸»é”®idï¼šuseGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfo&amp;quot; useGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&amp;gt;\n    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values (#{icp}, #{name}, #{address}, #{home}, #{introduce}, #{author}, #{email}, #{date}, #{type})\n&amp;lt;/insert&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;æ’å…¥å¤šæ¡æ•°æ®ï¼šä¼ å…¥ä¸€ä¸ª æ•°ç»„æˆ–é›†åˆï¼Œå¹¶è¿”å›è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®ã€‚&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfoList&amp;quot; useGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&amp;gt;\n    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values\n    &amp;lt;foreach collection=&amp;quot;list&amp;quot; item=&amp;quot;item&amp;quot; separator=&amp;quot;,&amp;quot;&amp;gt;\n        (#{item.icp}, #{item.name}, #{item.address}, #{item.home}, #{item.introduce}, #{item.author}, #{item.email}, #{item.date}, #{item.type})\n    &amp;lt;/foreach&amp;gt;\n&amp;lt;/insert&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;åŠ¨æ€sql\&#34;&gt;åŠ¨æ€SQL&lt;/h1&gt;\n&lt;h2 id=\&#34;if\&#34;&gt;if&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;å¯¹äºè¾“å…¥æ˜ å°„ç±»å‹ä¸ºpojoç±»å‹ï¼š\n#{pojoä¸­çš„å±æ€§å}   ${pojoä¸­çš„å±æ€§å}\n&amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;\n    and grade_id = #{gradeId}\n&amp;lt;/if&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;sqlæ³¨å…¥çš„é—®é¢˜\&#34;&gt;sqlæ³¨å…¥çš„é—®é¢˜&lt;/h2&gt;\n&lt;p&gt;åœ¨ä½¿ç”¨${}ä¼šå‡ºç°&lt;code&gt;sql&lt;/code&gt;æ³¨å…¥çš„é—®é¢˜ï¼ˆæ‹¼æ¥å­—ç¬¦ä¸²ï¼Œæ²¡æœ‰ä½¿ç”¨é¢„ç¼–è¯‘ï¼‰&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;å¦‚æœä¸ºç®€å•æ•°æ®ç±»å‹éœ€è¦æŠŠnameæ¢æˆ_parameter\n&amp;lt;bind name=&amp;quot;n&amp;quot; value=&amp;quot;&#39;%&#39;+name+&#39;%&#39;&amp;quot;/&amp;gt;\nand name like #{n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;when\&#34;&gt;when&lt;/h2&gt;\n&lt;p&gt;åº”ç”¨åœºæ™¯ï¼šå¯èƒ½æŸ¥è¯¢å…¨éƒ¨ï¼Œæœ‰å¯èƒ½æ ¹æ®æ¡ä»¶æŸ¥è¯¢ï¼Œå¹¶ä¸”å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶å‰é¢æœ‰andï¼Œwhereå­å¥ä¼šè‡ªåŠ¨æŠŠè¿™ä¸ªandåˆ é™¤å†ä½œä¸ºsqlè¯­å¥è¿è¡Œ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;select id=&amp;quot;findStudentByLike&amp;quot; resultType=&amp;quot;student&amp;quot; parameterType=&amp;quot;student&amp;quot;&amp;gt;\n    select * from student\n    &amp;lt;where&amp;gt;\n        &amp;lt;if test=&amp;quot;name != null and name != &#39;&#39;&amp;quot;&amp;gt;\n            &amp;lt;bind name=&amp;quot;n&amp;quot; value=&amp;quot;&#39;%&#39;+name+&#39;%&#39;&amp;quot;/&amp;gt;\n            and name like #{n}\n        &amp;lt;/if&amp;gt;\n        &amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;\n            and grade_id = #{gradeId}\n        &amp;lt;/if&amp;gt;\n    &amp;lt;/where&amp;gt;\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;choose\&#34;&gt;choose&lt;/h2&gt;\n&lt;p&gt;å…¶å®å°±æ˜¯javaä¸­çš„switch  æˆ–è€… if...else if ...else&lt;/p&gt;\n&lt;h2 id=\&#34;set\&#34;&gt;set&lt;/h2&gt;\n&lt;p&gt;setæ ‡ç­¾ä½œç”¨ï¼šèƒ½è‡ªåŠ¨çš„åˆ¤æ–­æ˜¯å¦åœ¨sqlè¯­å¥çš„ç»“å°¾å¤„æ˜¯å¦è¦æ·»åŠ é€—å·ï¼Œå¦‚æœä¸éœ€è¦é€—å·å®ƒè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ é™¤&lt;/p&gt;\n&lt;p&gt;(å’Œwhereä¸€æ ·ä¸ä¼šè‡ªåŠ¨æ·»åŠ )&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;update id=&amp;quot;updateStudentByById&amp;quot; parameterType=&amp;quot;student&amp;quot;&amp;gt;\n    update student\n    &amp;lt;set&amp;gt;\n        &amp;lt;if test=&amp;quot;name != null&amp;quot;&amp;gt;\n            name = #{name},\n        &amp;lt;/if&amp;gt;\n        &amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;\n            grade_id = #{gradeId}\n        &amp;lt;/if&amp;gt;\n    &amp;lt;/set&amp;gt;\n    where id = #{id}\n&amp;lt;/update&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;foreach\&#34;&gt;foreach&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;select id=&amp;quot;findStudentsById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;student&amp;quot;&amp;gt;\n        select * from student where id in\n        &amp;lt;foreach collection=&amp;quot;list&amp;quot; open=&amp;quot;(&amp;quot; separator=&amp;quot;,&amp;quot; close=&amp;quot;)&amp;quot; item=&amp;quot;item&amp;quot;&amp;gt;\n            #{item}\n        &amp;lt;/foreach&amp;gt;\n    &amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;sqlç‰‡æ®µ\&#34;&gt;SQLç‰‡æ®µ&lt;/h1&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;sql id=&amp;quot;sql&amp;quot;&amp;gt;\n    select * from student\n&amp;lt;/sql&amp;gt;\nè°ƒç”¨\n&amp;lt;include refid=&amp;quot;sql&amp;quot;&amp;gt;&amp;lt;/include&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;å¤šè¡¨è”åˆæŸ¥è¯¢\&#34;&gt;å¤šè¡¨è”åˆæŸ¥è¯¢&lt;/h1&gt;\n&lt;h2 id=\&#34;vo\&#34;&gt;VO&lt;/h2&gt;\n&lt;p&gt;è§£å†³æ€è·¯ï¼šè¦æ±‚è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœ&lt;code&gt;pojo&lt;/code&gt;ä¸èƒ½æ»¡è¶³(è¦è¿”å›çš„åˆ—ä¸å­˜åœ¨&lt;code&gt;pojo&lt;/code&gt;ä¸­)ï¼Œé‚£ä¹ˆåˆ›å»ºä¸€ä¸ªVOå¯¹è±¡ï¼Œè¿™ä¸ªVOå¯¹è±¡ä¸­åŒ…å«äº†æ‰€æœ‰è¦è¿”å›çš„å­—æ®µ&lt;/p&gt;\n&lt;h3 id=\&#34;åˆ›å»ºä¸€ä¸ªvo\&#34;&gt;åˆ›å»ºä¸€ä¸ªVO&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;package cn.kgc.vo;\n\nimport cn.kgc.pojo.Student;\n//ç»§æ‰¿çš„åŸåˆ™ï¼šè¦è¿”å›çš„å­—æ®µå“ªä¸ªpojoä¸­å¤šï¼Œé‚£ä¹ˆå°±ç»§æ‰¿å“ªä¸ªpojo\npublic class StudentVO extends Student{\n\tprivate String gradeName;\n\n\tpublic String getGradeName() {\n\t\treturn gradeName;\n\t}\n\n\tpublic void setGradeName(String gradeName) {\n\t\tthis.gradeName = gradeName;\n\t}\t\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;ç¼–å†™mapperæ¥å£\&#34;&gt;ç¼–å†™mapperæ¥å£&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public interface StudentMapper {\n\t/**\n\t * æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ï¼Œè¦æ±‚å±•ç¤ºå­¦ç”Ÿä¿¡æ¯ä¸­å¹´çº§åç§°(è”åˆæŸ¥è¯¢)\n\t */\n\tList&amp;lt;StudentVO&amp;gt; getStudentVO();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;ç¼–å†™mapperxml\&#34;&gt;ç¼–å†™mapper.xml&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;select id=&amp;quot;getStudentVO&amp;quot; resultType=&amp;quot;cn.kgc.vo.StudentVO&amp;quot;&amp;gt;\n\tSELECT s.*,g.name gradeName FROM student s,grade g WHERE s.grade_id=g.id\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;ä¸€å¯¹ä¸€\&#34;&gt;ä¸€å¯¹ä¸€&lt;/h2&gt;\n&lt;h3 id=\&#34;æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†\&#34;&gt;æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;resultMap id=&amp;quot;IcpInfoType&amp;quot; type=&amp;quot;icpInfo&amp;quot;&amp;gt;\n&amp;lt;!-- propertyï¼šå®ä½“ç±»çš„å¯¹è±¡å±æ€§åï¼Œ\n\tcolumnï¼šæ•°æ®åº“ä¸­å…³è”çš„åˆ—ï¼Œ\n\tjavaTypeï¼šå®ä½“ç±»å¯¹è±¡ï¼Œ\n\tselectï¼šä¸€ä¸ªsqlè¯­å¥æŸ¥è¯¢çš„æ˜¯å®ä½“å¯¹è±¡çš„sql\n--&amp;gt;\n    &amp;lt;association property=&amp;quot;type&amp;quot; column=&amp;quot;type&amp;quot; javaType=&amp;quot;type&amp;quot; select=&amp;quot;getTypeList&amp;quot; /&amp;gt;\n&amp;lt;/resultMap&amp;gt;\n&amp;lt;select id=&amp;quot;getList&amp;quot; resultMap=&amp;quot;IcpInfoType&amp;quot;&amp;gt;\n    select * from icpinfo\n&amp;lt;/select&amp;gt;\n&amp;lt;!--è¿™ä¸ªtypeID è·å–çš„æ˜¯ column=&amp;quot;type&amp;quot; è¿™ä¸ªåˆ—çš„å€¼--&amp;gt;\n&amp;lt;select id=&amp;quot;getTypeList&amp;quot; resultType=&amp;quot;type&amp;quot; &amp;gt;\n    select * from type where tid = #{id}\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†\&#34;&gt;æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;select id=&amp;quot;getList2&amp;quot; resultMap=&amp;quot;getList2&amp;quot; &amp;gt;\n    select icp, name, address, home, introduce, author, email, `date`, type, tid, tname from icpinfo i ,type t\n    where i.type = t.tid\n&amp;lt;/select&amp;gt;\n&amp;lt;!--type = è¦æŸ¥è¯¢çš„å¯¹è±¡--&amp;gt;\n&amp;lt;resultMap id=&amp;quot;getList2&amp;quot; type=&amp;quot;icpInfo&amp;quot; &amp;gt;\n    &amp;lt;!--property=å®ä½“ç±»çš„å±æ€§å column=åˆ—åoråˆ«å--&amp;gt;\n    &amp;lt;result property=&amp;quot;icp&amp;quot; column=&amp;quot;icp&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;name&amp;quot; column=&amp;quot;name&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;address&amp;quot; column=&amp;quot;address&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;home&amp;quot; column=&amp;quot;home&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;introduce&amp;quot; column=&amp;quot;introduce&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;author&amp;quot; column=&amp;quot;author&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;email&amp;quot; column=&amp;quot;email&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;date&amp;quot; column=&amp;quot;date&amp;quot; /&amp;gt;\n    &amp;lt;!--å¤æ‚ç±»å‹\n\t\tproperty=åœ¨icpInfoé‡Œçš„å±æ€§æ˜¯type\n\t\tjavaType=typeçš„å¯¹è±¡\n\t--&amp;gt;\n    &amp;lt;association property=&amp;quot;type&amp;quot; javaType=&amp;quot;type&amp;quot; &amp;gt;\n        &amp;lt;result property=&amp;quot;tid&amp;quot; column=&amp;quot;tid&amp;quot; /&amp;gt;\n        &amp;lt;result property=&amp;quot;tname&amp;quot; column=&amp;quot;tname&amp;quot; /&amp;gt;\n    &amp;lt;/association&amp;gt;\n&amp;lt;/resultMap&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;ä¸€å¯¹å¤š\&#34;&gt;ä¸€å¯¹å¤š&lt;/h2&gt;\n&lt;p&gt;ä¸€å¯¹å¤šåªéœ€è¦æŠŠassociationæ¢æˆ&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--ofType=&amp;quot;&amp;quot;\n\té›†åˆä¸­çš„æ³›å‹ä¿¡æ¯\n--&amp;gt;\n&amp;lt;collection property=&amp;quot;&amp;quot; ofType=&amp;quot;&amp;quot;&amp;gt;&amp;lt;/collection&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE mapper\n  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;\n&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.GradeMapper&amp;quot;&amp;gt;\n\t&amp;lt;!-- æŸ¥è¯¢å¹´çº§ï¼ŒæŠŠå±äºè¿™ä¸ªå¹´çº§çš„æ‰€æœ‰å­¦ç”ŸæŸ¥è¯¢å‡ºæ¥ --&amp;gt;\n\t&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Grade&amp;quot; id=&amp;quot;gradeStudentMap&amp;quot;&amp;gt;\n\t\t&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n\t\t&amp;lt;!-- collection:ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³»\n\t\t\tproperty:è¡¨ç¤ºä¸€å¯¹å¤šæ˜ å°„å…³ç³»åœ¨pojoä¸­çš„å±æ€§å\n\t\t\tofType:è¡¨ç¤ºè¯¥é›†åˆçš„æ³›å‹çš„å…¨é™å®šå\n\t\t --&amp;gt;\n\t\t&amp;lt;collection property=&amp;quot;studentList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.Student&amp;quot;&amp;gt;\n\t\t\t&amp;lt;id column=&amp;quot;sid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t\t&amp;lt;result column=&amp;quot;sname&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n\t\t\t&amp;lt;!-- gradeidå› ä¸ºåœ¨gradeä¸­å·²ç»æœ‰äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦å†é…ç½® --&amp;gt;\n\t\t&amp;lt;/collection&amp;gt;\n\t&amp;lt;/resultMap&amp;gt;\n\t\n\t&amp;lt;select id=&amp;quot;getGradeById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultMap=&amp;quot;gradeStudentMap&amp;quot;&amp;gt;\n\t\tSELECT \n\t\t  g.*,\n\t\t  s.id sid,\n\t\t  s.name sname\n\t\tFROM\n\t\t  grade g,\n\t\t  student s \n\t\tWHERE g.id = s.grade_id \n\t\t  AND g.id = #{id}\n\t&amp;lt;/select&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;å¤šå¯¹å¤š\&#34;&gt;å¤šå¯¹å¤š&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE mapper\n  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;\n&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;\n\t&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Student&amp;quot; id=&amp;quot;studentMap&amp;quot;&amp;gt;\n\t\t&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n\t\t&amp;lt;result column=&amp;quot;grade_id&amp;quot; property=&amp;quot;gradeId&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t&amp;lt;!-- ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³» --&amp;gt;\n\t\t&amp;lt;collection property=&amp;quot;studentCourseList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.StudentCourse&amp;quot;&amp;gt;\n\t\t\t&amp;lt;id column=&amp;quot;scid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t\t&amp;lt;!-- studentCourseå’Œcourseæ˜¯ä¸€å¯¹ä¸€çš„æ˜ å°„ä¿„å…³ç³» --&amp;gt;\n\t\t\t&amp;lt;association property=&amp;quot;course&amp;quot; javaType=&amp;quot;cn.kgc.pojo.Course&amp;quot;&amp;gt;\n\t\t\t\t&amp;lt;id column=&amp;quot;cid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t\t\t&amp;lt;result column=&amp;quot;cname&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n\t\t\t&amp;lt;/association&amp;gt;\n\t\t&amp;lt;/collection&amp;gt;\n\t&amp;lt;/resultMap&amp;gt;\n\n\t&amp;lt;select id=&amp;quot;getStudentById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultMap=&amp;quot;studentMap&amp;quot;&amp;gt;\n\tSELECT \n\t  s.*,\n\t  sc.id scid,\n\t  c.id cid,\n\t  c.name cname \n\tFROM\n\t  student s,\n\t  student_course sc,\n\t  course c \n\tWHERE s.id = sc.sid \n\t  AND c.id = sc.cid \n\t  AND s.id = #{id}\n\t&amp;lt;/select&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;å»¶è¿ŸåŠ è½½\&#34;&gt;å»¶è¿ŸåŠ è½½&lt;/h1&gt;\n&lt;p&gt;ä»€ä¹ˆæ˜¯æ‡’åŠ è½½&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;æ‡’åŠ è½½ï¼šå°±æ˜¯åœ¨éœ€è¦æ•°æ®çš„æ—¶å€™æ‰åŠ è½½ï¼Œä¸éœ€è¦æ•°æ®çš„æ—¶å€™ä¸åŠ è½½ï¼Œè¿™æ ·æœ‰åˆ©äºç³»ç»Ÿæ€§èƒ½çš„æå‡ï¼Œè¿™å°±æ˜¯æ‡’åŠ è½½ï¼ˆä¹Ÿå«åšå»¶è¿ŸåŠ è½½ï¼‰\n\nå¥½å¤„ï¼šåœ¨å…³è”æŸ¥è¯¢çš„æ—¶å€™ï¼Œæ ¹æ®éœ€æ±‚è¿›è¡Œå…³è”æŸ¥è¯¢ï¼Œå¤§å¤§æé«˜äº†æ•°æ®åº“çš„æŸ¥è¯¢æ€§èƒ½ã€‚ï¼ˆå•è¡¨çš„æŸ¥è¯¢æ•ˆç‡æ°¸è¿œè¦æ¯”å¤šè¡¨è”åˆæŸ¥è¯¢çš„æ•ˆç‡é«˜ï¼‰\n\nåå¤„ï¼šå› ä¸ºéœ€è¦ç”¨åˆ°æ•°æ®çš„æ—¶å€™æ‰å»åšæŸ¥è¯¢ï¼Œè¿™æ ·å¤§æ‰¹é‡çš„æ•°æ®æŸ¥è¯¢çš„æ—¶å€™ç­‰å¾…æ—¶é—´ä¼šå˜å¾—æ›´é•¿ï¼Œé€ æˆç”¨æˆ·çš„ä½“éªŒä¸‹é™\n(select * from student)ä¼šæŠŠæ‰€æœ‰çš„å­¦ç”Ÿçš„å¹´çº§ç¼–å·ä¹Ÿåœ¨é‡Œé¢\nçªç„¶è¦æŸ¥è¯¢å¹´çº§ä¿¡æ¯ï¼Œå®ƒåº•å±‚æ“ä½œæ˜¯ï¼šæ ¹æ®å¹´çº§idä¸€ä¸ªä¸€ä¸ªå»æ‰§è¡ŒæŸ¥è¯¢\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;ä½¿ç”¨associationå®ç°æ‡’åŠ è½½\&#34;&gt;ä½¿ç”¨&lt;code&gt;association&lt;/code&gt;å®ç°æ‡’åŠ è½½&lt;/h2&gt;\n&lt;h3 id=\&#34;æ ¸å¿ƒé…ç½®å¼€å¯æ‡’åŠ è½½\&#34;&gt;æ ¸å¿ƒé…ç½®å¼€å¯æ‡’åŠ è½½&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt; &amp;lt;settings&amp;gt;\n  \t&amp;lt;!-- å¼€å¯æ‡’åŠ è½½ --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n  \t&amp;lt;!-- mybatis3.4.1ä¹‹å‰é»˜è®¤å€¼æ˜¯trueï¼Œéœ€è¦è®¾ç½®ä¸ºfalseï¼ˆå°†ç§¯æåŠ è½½æ”¹ä¸ºæ¶ˆæ¯åŠ è½½ä¹Ÿå°±æ˜¯æŒ‰éœ€åŠ è½½ï¼‰ --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;\n  \t&amp;lt;!-- å› ä¸ºæˆ‘è¿™é‡Œä¸ºäº†æ‰“å°å¯¹è±¡é‡Œä¿¡æ¯çš„æ–¹ä¾¿ï¼Œæ‰€ä»¥éƒ½é‡å†™äº†toStringæ–¹æ³•ï¼Œmybatisä¸­é»˜è®¤æ˜¯å¦‚æœä½¿ç”¨(equals,clone,hashCode,toStringä»»æ„ä¸€ä¸ªæ–¹æ³•)é‚£ä¹ˆå°±ä¸å†å»¶è¿ŸåŠ è½½ --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;\n  &amp;lt;/settings&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;GradeMapper.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE mapper\n  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;\n&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.GradeMapper&amp;quot;&amp;gt;\n\t&amp;lt;!-- æ ¹æ®idæŸ¥è¯¢å¹´çº§å¯¹è±¡ --&amp;gt;\n\t&amp;lt;select id=&amp;quot;getGradeById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Grade&amp;quot;&amp;gt;\n\t\tselect * from grade where id=#{id}\n\t&amp;lt;/select&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;StudentMapper.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE mapper\n  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;\n&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;\n\t\n\t&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Student&amp;quot; id=&amp;quot;studentMap&amp;quot;&amp;gt;\n\t\t&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n\t\t&amp;lt;!-- ä¸€ä¸ªå­¦ç”Ÿå¯¹åº”ä¸€ä¸ªå¹´çº§ï¼šä¸€å¯¹ä¸€çš„å…³ç³»æ˜ å°„\n\t\t\tå¯¹äºassociationæ–¹å¼çš„æ‡’åŠ è½½ï¼š\n\t\t\t\tselect:æ­¤å¤„è¦æ±‚æ˜¯æ ¹æ®å¹´çº§çš„idæŸ¥è¯¢å¹´çº§å¯¹è±¡çš„mapperæ¥å£ä¸­æ–¹æ³•çš„å…¨é™å®šå\n\t\t\t\tcolumn:åœ¨æ•°æ®åº“ä¸­è¡¨ä¸è¡¨ä¹‹é—´å…³ç³»çš„å¤–é”®\n\t\t --&amp;gt;\n\t\t&amp;lt;association property=&amp;quot;grade&amp;quot; javaType=&amp;quot;cn.kgc.pojo.Grade&amp;quot;\n\t\t\tselect=&amp;quot;cn.kgc.mapper.GradeMapper.getGradeById&amp;quot; column=&amp;quot;grade_id&amp;quot;&amp;gt;&amp;lt;/association&amp;gt;\n\t&amp;lt;/resultMap&amp;gt;\n\t\n\t&amp;lt;select id=&amp;quot;getAllStudents&amp;quot; resultMap=&amp;quot;studentMap&amp;quot;&amp;gt;\n\t\tselect * from student\n\t&amp;lt;/select&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;ä½¿ç”¨collectionå®ç°æ‡’åŠ è½½\&#34;&gt;ä½¿ç”¨&lt;code&gt;collection&lt;/code&gt;å®ç°æ‡’åŠ è½½&lt;/h2&gt;\n&lt;h3 id=\&#34;æ ¸å¿ƒé…ç½®å¼€å¯æ‡’åŠ è½½-2\&#34;&gt;æ ¸å¿ƒé…ç½®å¼€å¯æ‡’åŠ è½½&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;settings&amp;gt;\n&amp;lt;!-- å¼€å¯æ‡’åŠ è½½ --&amp;gt;\n&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n&amp;lt;!-- mybatis3.4.1ä¹‹å‰é»˜è®¤å€¼æ˜¯trueï¼Œéœ€è¦è®¾ç½®ä¸ºfalseï¼ˆå°†ç§¯æåŠ è½½æ”¹ä¸ºæ¶ˆæ¯åŠ è½½ä¹Ÿå°±æ˜¯æŒ‰éœ€åŠ è½½ï¼‰ --&amp;gt;\n&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;\n&amp;lt;!-- å› ä¸ºæˆ‘è¿™é‡Œä¸ºäº†æ‰“å°å¯¹è±¡é‡Œä¿¡æ¯çš„æ–¹ä¾¿ï¼Œæ‰€ä»¥éƒ½é‡å†™äº†toStringæ–¹æ³•ï¼Œmybatisä¸­é»˜è®¤æ˜¯å¦‚æœä½¿ç”¨(equals,clone,hashCode,toStringä»»æ„ä¸€ä¸ªæ–¹æ³•)é‚£ä¹ˆå°±ä¸å†å»¶è¿ŸåŠ è½½ --&amp;gt;\n&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;\n&amp;lt;/settings&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;StudentMapper.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;select id=&amp;quot;getStudentsByGradeId&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Student&amp;quot;&amp;gt;\n    select * from student where grade_id=#{gradeId}\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;GradeMapper.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- æŸ¥è¯¢å¹´çº§ä¿¡æ¯ï¼Œæœ‰å¯èƒ½æŸ¥è¯¢å¹´çº§ä¸­æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯ --&amp;gt;\n&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Grade&amp;quot; id=&amp;quot;gradeMap&amp;quot;&amp;gt;\n    &amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n    &amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n    &amp;lt;!-- ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³»\n        select:æ ¹æ®å¹´çº§ç¼–å·æŸ¥è¯¢å­¦ç”Ÿåˆ—è¡¨çš„æ–¹æ³•\n        column:å°±æ˜¯gradeçš„idï¼ˆå®ƒå°±æ˜¯gradeè¡¨çš„ä¸»é”®ï¼‰\n     --&amp;gt;\n    &amp;lt;collection property=&amp;quot;studentList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.Student&amp;quot;\n        select=&amp;quot;cn.kgc.mapper.StudentMapper.getStudentsByGradeId&amp;quot; column=&amp;quot;id&amp;quot;&amp;gt;&amp;lt;/collection&amp;gt;\n&amp;lt;/resultMap&amp;gt;\n&amp;lt;select id=&amp;quot;getAllGrades&amp;quot; resultMap=&amp;quot;gradeMap&amp;quot;&amp;gt;\n    select * from grade\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;mybatisç¼“å­˜\&#34;&gt;mybatisç¼“å­˜&lt;/h1&gt;\n&lt;h2 id=\&#34;ä¸€çº§ç¼“å­˜\&#34;&gt;ä¸€çº§ç¼“å­˜&lt;/h2&gt;\n&lt;p&gt;å®ƒæ˜¯&lt;code&gt;SqlSession&lt;/code&gt;çº§åˆ«çš„ï¼ŒåŒä¸€ä¸ª&lt;code&gt;SqlSession&lt;/code&gt;æ‰æ¶‰åŠåˆ°ä¸€çº§ç¼“å­˜&lt;/p&gt;\n&lt;p&gt;ä¸€çº§ç¼“å­˜æ˜¯é»˜è®¤å­˜åœ¨ï¼Œå®ƒä¸éœ€è¦å»åšä»»ä½•çš„è®¾ç½®&lt;/p&gt;\n&lt;h2 id=\&#34;äºŒçº§ç¼“å­˜\&#34;&gt;äºŒçº§ç¼“å­˜&lt;/h2&gt;\n&lt;p&gt;å®ƒæ˜¯mapperçº§åˆ«çš„ï¼Œéœ€è¦å¼€å¯æ‰èƒ½ä½¿ç”¨&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ç¼“å­˜åœ¨å®é™…å¼€å‘ä¸­æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå®ƒèƒ½å¤§å¤§çš„æå‡æŸ¥è¯¢çš„æ•ˆç‡ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜\&#34;&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- å¼€å¯äºŒçº§ç¼“å­˜(é»˜è®¤å€¼å°±æ˜¯trueï¼Œå‡†å¤‡æˆ‘ä»¬ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œå¯ä»¥ä¸ç”¨è®¾ç½®) --&amp;gt;\n&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;åœ¨mappexmlä¸­å¼€å¯äºŒçº§ç¼“å­˜\&#34;&gt;åœ¨mappe.xmlä¸­å¼€å¯äºŒçº§ç¼“å­˜&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;\n\t&amp;lt;!-- åœ¨StudentMapper.xmlä¸­å¼€å¯äºŒçº§ç¼“å­˜ ,å› ä¸ºmybatisä¸­äºŒçº§ç¼“å­˜çš„å®ç°ç±»åªæœ‰ä¸€ä¸ªï¼Œé»˜è®¤å°±æ˜¯è¿™ä¸ªï¼Œtypeå¯ä»¥çœç•¥ä¸å†™--&amp;gt;\n\t&amp;lt;cache type=&amp;quot;org.apache.ibatis.cache.impl.PerpetualCache&amp;quot;&amp;gt;&amp;lt;/cache&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;pojoéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£\&#34;&gt;pojoéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£&lt;/h3&gt;\n&lt;p&gt;å› ä¸ºç¼“å­˜çš„æ—¶å€™è¦å°†pojoæµåŒ–ç„¶åå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ŒæŸ¥è¯¢å†å–å‡º&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public class Student implements Serializable{\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;è¡¥å……ï¼šåœ¨mapperåº”ç”¨äºŒçº§ç¼“å­˜åï¼Œé»˜è®¤æ˜¯æ‰€æœ‰çš„æŸ¥è¯¢æ–¹æ³•éƒ½å¼€å¯äºŒçº§ç¼“å­˜ï¼Œå¦‚æœè¦æŸä¸ªæŸ¥è¯¢ä¸ä½¿ç”¨äºŒçº§ç¼“å­˜å¯ä»¥æ·»åŠ &lt;code&gt;useCache=&amp;quot;false&amp;quot;&lt;/code&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h1 id=\&#34;æ³¨è§£å¼€å‘å…¥é—¨\&#34;&gt;æ³¨è§£å¼€å‘å…¥é—¨&lt;/h1&gt;\n&lt;p&gt;åœ¨spring4.xå¼€å§‹å°±æ¨èæˆ‘ä»¬ä½¿ç”¨æ³¨è§£ï¼Œå®Œå…¨å»å–ä»£xmlçš„é…ç½®æ–‡ä»¶&lt;/p&gt;\n&lt;p&gt;ç›®å‰æœ€ä¸»æµçš„å¼€å‘æ–¹å¼å°±æ˜¯ï¼šåªä½¿ç”¨æ³¨è§£ï¼Œä¸å†ä½¿ç”¨xmlé…ç½®&lt;/p&gt;\n&lt;p&gt;mybatisæ³¨è§£æ–¹å¼çš„å¼€å‘æ˜¯ä¸€ç§æœªæ¥çš„è¶‹åŠ¿,è¿™ç§æ–¹å¼æ¯”ä¼ ç»Ÿçš„xmlçš„å¼€å‘è¦ç®€å•å¹¶ä¸”é«˜æ•ˆ&lt;/p&gt;\n&lt;h2 id=\&#34;å¯¼å…¥jaråŒ…\&#34;&gt;å¯¼å…¥jaråŒ…&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;dependencies&amp;gt;\n    &amp;lt;!-- mysqlé©±åŠ¨ --&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;mysql&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;mysql-connector-java&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;5.1.38&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;!-- mybatisçš„æ ¸å¿ƒåŒ… --&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;org.mybatis&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;mybatis&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;3.4.6&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;!-- junitå•å…ƒæµ‹è¯• --&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;junit&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;4.12&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;!-- slf4j-log4j12  (slf4j:é…¸è¾£ç²‰) --&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;slf4j-log4j12&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;1.7.25&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n&amp;lt;/dependencies&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;é…ç½®æ–‡ä»¶\&#34;&gt;é…ç½®æ–‡ä»¶&lt;/h2&gt;\n&lt;p&gt;log4j.properties&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;log4j.rootLogger=DEBUG,A1\nlog4j.logger.org.mybatis=DEBUG\nlog4j.appender.A1=org.apache.log4j.ConsoleAppender\nlog4j.appender.A1.layout=org.apache.log4j.PatternLayout\nlog4j.appender.A1.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss,SSS} [%t] [%c]-[%p] %m%n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;jdbc.properties&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;jdbc.dirver=com.mysql.jdbc.Driver\njdbc.url=jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;amp;characterEncoding=utf-8\njdbc.username=root\njdbc.password=root\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;mybatis-config.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE configuration\n  PUBLIC &amp;quot;-//mybatis.org//DTD Config 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-config.dtd&amp;quot;&amp;gt;\n&amp;lt;configuration&amp;gt;\n  &amp;lt;!-- å¼•å…¥å¤–éƒ¨çš„å±æ€§æ–‡ä»¶ --&amp;gt;\n  &amp;lt;properties resource=&amp;quot;jdbc.properties&amp;quot;&amp;gt;&amp;lt;/properties&amp;gt;\n  &amp;lt;settings&amp;gt;\n  \t&amp;lt;!-- å¼€å¯é©¼å³°å‘½å --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n  &amp;lt;/settings&amp;gt;\n  &amp;lt;!-- é…ç½®æ•°æ®æº --&amp;gt;\n  &amp;lt;environments default=&amp;quot;development&amp;quot;&amp;gt;\n    &amp;lt;environment id=&amp;quot;development&amp;quot;&amp;gt;\n      &amp;lt;transactionManager type=&amp;quot;JDBC&amp;quot;/&amp;gt;\n      &amp;lt;dataSource type=&amp;quot;POOLED&amp;quot;&amp;gt;\n        &amp;lt;property name=&amp;quot;driver&amp;quot; value=&amp;quot;${jdbc.dirver}&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;url&amp;quot; value=&amp;quot;${jdbc.url}&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;username&amp;quot; value=&amp;quot;${jdbc.username}&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;password&amp;quot; value=&amp;quot;${jdbc.password}&amp;quot;/&amp;gt;\n      &amp;lt;/dataSource&amp;gt;\n    &amp;lt;/environment&amp;gt;\n  &amp;lt;/environments&amp;gt;\n  &amp;lt;mappers&amp;gt;\n    &amp;lt;package name=&amp;quot;cn.kgc.mapper&amp;quot;/&amp;gt;\n  &amp;lt;/mappers&amp;gt;\n  \n&amp;lt;/configuration&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;@Select(&amp;quot;SQL&amp;quot;)&lt;/p&gt;\n&lt;p&gt;@Insert(&amp;quot;SQL&amp;quot;)&lt;/p&gt;\n&lt;p&gt;@Delete(&amp;quot;SQL&amp;quot;)&lt;/p&gt;\n&lt;p&gt;@Update(&amp;quot;SQL&amp;quot;)&lt;/p&gt;\n&lt;h2 id=\&#34;è§£å†³æ•°æ®åº“è¡¨ä¸­çš„åˆ—åå’Œpojoä¸­å±æ€§åä¸ä¸€è‡´\&#34;&gt;è§£å†³æ•°æ®åº“è¡¨ä¸­çš„åˆ—åå’Œpojoä¸­å±æ€§åä¸ä¸€è‡´&lt;/h2&gt;\n&lt;h3 id=\&#34;ç¬¬ä¸€ç§\&#34;&gt;ç¬¬ä¸€ç§&lt;/h3&gt;\n&lt;p&gt;ç»™sql è¯­å¥èµ·åˆ«å&lt;/p&gt;\n&lt;h3 id=\&#34;ç¬¬äºŒç§\&#34;&gt;ç¬¬äºŒç§&lt;/h3&gt;\n&lt;p&gt;@Results  ç›¸å½“äºæ˜¯&lt;code&gt;resultMap&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Select(&amp;quot;select * from book&amp;quot;)\n@Results(id=&amp;quot;bookMap&amp;quot;,\n    value={\n        @Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),\n        @Result(column=&amp;quot;book_name&amp;quot;,property=&amp;quot;name&amp;quot;),\n        @Result(column=&amp;quot;price&amp;quot;,property=&amp;quot;price&amp;quot;)\n})\nList&amp;lt;Book&amp;gt; getAllBooks();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;æ³¨è§£å¼€å‘ä¸­çš„åŠ¨æ€sql\&#34;&gt;æ³¨è§£å¼€å‘ä¸­çš„åŠ¨æ€sql&lt;/h2&gt;\n&lt;h3 id=\&#34;è¾“å…¥æ˜ å°„ç±»å‹ä¸ºç®€å•ç±»å‹\&#34;&gt;è¾“å…¥æ˜ å°„ç±»å‹ä¸ºç®€å•ç±»å‹&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * æœ‰å¯èƒ½æŸ¥è¯¢å…¨éƒ¨ï¼Œæœ‰å¯èƒ½æ ¹æ®idæŸ¥è¯¢\n * åŠ¨æ€sqlä¸­è¾“å…¥æ˜ å°„ä¸ºç®€å•ç±»å‹ï¼Œè¾“å…¥æ˜ å°„ä¸ºç®€å•ç±»å‹  testä¸­å˜é‡åå¿…é¡»å«_parameter\n */\n@Select(&amp;quot;&amp;lt;script&amp;gt;SELECT * FROM book &amp;lt;if test=&#39;_parameter != null&#39;&amp;gt;WHERE id=#{id}&amp;lt;/if&amp;gt;&amp;lt;/script&amp;gt;&amp;quot;)\nList&amp;lt;Book&amp;gt; getBooksOrById(Integer id);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;è¾“å…¥æ˜ å°„ç±»å‹ä¸ºpojo\&#34;&gt;è¾“å…¥æ˜ å°„ç±»å‹ä¸ºpojo&lt;/h3&gt;\n&lt;p&gt;å¼€å‘äº§ç”ŸSQLè¯­å¥çš„ç±»å’Œæ–¹æ³•&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;package cn.kgc.sql.provider;\n\nimport cn.kgc.pojo.Book;\n\npublic class BookMapperProvider {\n\t/**\n\t * ä¸“é—¨ç”¨æ¥ç»™BookMapperæ¥å£æ¥æä¾›åŠ¨æ€sqlè¯­å¥çš„\n\t * @param book\n\t * @return\n\t */\n\tpublic String getBooks(Book book){\n\t\tString sql = &amp;quot;select * from book&amp;quot;;\n\t\tif(book != null){\n\t\t\tif(book.getId() != null){\n\t\t\t\t//idæœ‰å€¼\n\t\t\t\tsql = &amp;quot;select * from book where id=#{id}&amp;quot;;\n\t\t\t}\n\t\t\tif(book.getName() != null &amp;amp;&amp;amp; !book.getName().equals(&amp;quot;&amp;quot;)){\n\t\t\t\tsql = &amp;quot;select * from book where name like #{name}&amp;quot;;\n\t\t\t}\n\t\t\tif(book.getId() != null &amp;amp;&amp;amp; (book.getName() != null &amp;amp;&amp;amp; !book.getName().equals(&amp;quot;&amp;quot;))){\n\t\t\t\tsql = &amp;quot;select * from book where id=#{id} and name like #{name}&amp;quot;;\n\t\t\t}\n\t\t}\n\t\treturn sql;\n\t}\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;æ¥å£&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * æŸ¥è¯¢ï¼šæœ‰å¯èƒ½æŸ¥è¯¢å…¨éƒ¨ï¼Œæœ‰å¯èƒ½æ ¹æ®idæŸ¥è¯¢ï¼Œæœ‰å¯èƒ½æ ¹æ®nameåšæ¨¡ç³ŠæŸ¥è¯¢\n * @param book\n * @return\n */\n@SelectProvider(type=BookMapperProvider.class,method=&amp;quot;getBooks&amp;quot;)\nList&amp;lt;Book&amp;gt; getBooks(Book book);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;æ³¨è§£å¼€å‘å®ç°å¤æ‚çš„æ˜ å°„å…³ç³»\&#34;&gt;æ³¨è§£å¼€å‘å®ç°å¤æ‚çš„æ˜ å°„å…³ç³»&lt;/h2&gt;\n&lt;p&gt;å¤æ‚çš„æ˜ å°„å¼€å‘æœ¬è´¨æ˜¯ä¸¤ç§ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤š&lt;/p&gt;\n&lt;p&gt;æ³¨è§£å°±å¯¹åº”çš„æ˜¯ï¼š@One(ä¸€å¯¹ä¸€)  @Many(ä¸€å¯¹å¤š)&lt;/p&gt;\n&lt;p&gt;è¦æ±‚æˆ‘ä»¬ä½¿ç”¨æ‡’åŠ è½½&lt;/p&gt;\n&lt;h3 id=\&#34;ä¸€å¯¹ä¸€å…³ç³»\&#34;&gt;ä¸€å¯¹ä¸€å…³ç³»&lt;/h3&gt;\n&lt;p&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯æ‡’åŠ è½½&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt; &amp;lt;settings&amp;gt;\n  \t&amp;lt;!-- å¼€å¯é©¼å³°å‘½å --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n  \t&amp;lt;!-- å¼€å¯æ‡’åŠ è½½ --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n  \t&amp;lt;!-- mybatis3.4.1ä¹‹å‰é»˜è®¤å€¼æ˜¯trueï¼Œéœ€è¦è®¾ç½®ä¸ºfalseï¼ˆå°†ç§¯æåŠ è½½æ”¹ä¸ºæ¶ˆæ¯åŠ è½½ä¹Ÿå°±æ˜¯æŒ‰éœ€åŠ è½½ï¼‰ --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;\n  \t&amp;lt;!-- å› ä¸ºæˆ‘è¿™é‡Œä¸ºäº†æ‰“å°å¯¹è±¡é‡Œä¿¡æ¯çš„æ–¹ä¾¿ï¼Œæ‰€ä»¥éƒ½é‡å†™äº†toStringæ–¹æ³•ï¼Œmybatisä¸­é»˜è®¤æ˜¯å¦‚æœä½¿ç”¨(equals,clone,hashCode,toStringä»»æ„ä¸€ä¸ªæ–¹æ³•)é‚£ä¹ˆå°±ä¸å†å»¶è¿ŸåŠ è½½ --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;\n  &amp;lt;/settings&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public interface GradeMapper {\n\t/**\n\t * æ ¹æ®idæŸ¥è¯¢å¯¹è±¡\n\t * @param id\n\t * @return\n\t */\n\t@Select(&amp;quot;select * from grade where id=#{id}&amp;quot;)\n\tGrade getGradeById(Integer id);\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public interface StudentMapper {\n\t/**\n\t * æŸ¥è¯¢å­¦ç”Ÿé¡ºä¾¿å°†å­¦ç”Ÿæ‰€åœ¨çš„å¹´çº§åç§°æŸ¥è¯¢å‡ºæ¥\n\t */\n\t@Select(&amp;quot;select * from student&amp;quot;)\n\t@Results(id=&amp;quot;studentMap&amp;quot;,\n\t\t\tvalue={\n\t\t\t@Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),\n\t\t\t@Result(column=&amp;quot;name&amp;quot;,property=&amp;quot;name&amp;quot;),\n\t\t\t@Result(column=&amp;quot;grade_id&amp;quot;,property=&amp;quot;grade&amp;quot;,\n\t\t\t\t\tone=@One(select=&amp;quot;cn.kgc.mapper.GradeMapper.getGradeById&amp;quot;,fetchType=FetchType.LAZY))\n\t\t\t\n\t})\n\tList&amp;lt;Student&amp;gt; getAllStudents();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;FetchType.LAZYè¡¨ç¤ºåŠ è½½çš„æ–¹å¼æ˜¯æ‡’åŠ è½½,   FetchType.EAGERè¡¨ç¤ºä¸€å®šè”åˆæŸ¥è¯¢&lt;/p&gt;\n&lt;p&gt;å¦‚æœä¸æ·»åŠ fetchTypeï¼Œé»˜è®¤å°±æ˜¯æ‡’åŠ è½½&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;ä¸€å¯¹å¤šçš„å…³ç³»\&#34;&gt;ä¸€å¯¹å¤šçš„å…³ç³»&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public interface StudentMapper {\n\t/**\n\t * æ ¹æ®å¹´çº§ç¼–å·æŸ¥è¯¢å­¦ç”Ÿåˆ—è¡¨\n\t * @param id\n\t * @return\n\t */\n\t@Select(&amp;quot;select * from student where grade_id=#{gid}&amp;quot;)\n\tList&amp;lt;Student&amp;gt; findStudentsListByGradeId(Integer id);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;package cn.kgc.mapper;\n\nimport java.util.List;\n\nimport org.apache.ibatis.annotations.Many;\nimport org.apache.ibatis.annotations.Result;\nimport org.apache.ibatis.annotations.Results;\nimport org.apache.ibatis.annotations.Select;\nimport org.apache.ibatis.mapping.FetchType;\n\nimport cn.kgc.pojo.Grade;\n\npublic interface GradeMapper {\n\n\t@Select(&amp;quot;select * from grade&amp;quot;)\n\t@Results(id=&amp;quot;gradeMap&amp;quot;,\n\t\t\tvalue={\n\t\t\t\t@Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),\n\t\t\t\t@Result(column=&amp;quot;name&amp;quot;,property=&amp;quot;name&amp;quot;),\n\t\t\t\t@Result(column=&amp;quot;id&amp;quot;,property=&amp;quot;studentList&amp;quot;,\n\t\t\t\t\t\tmany=@Many(select=&amp;quot;cn.kgc.mapper.StudentMapper.findStudentsListByGradeId&amp;quot;,fetchType=FetchType.LAZY))\n\t})\n\tList&amp;lt;Grade&amp;gt; getGrades();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;mybatisåŸºäºäºŒçº§ç¼“å­˜çš„å¼€å‘\&#34;&gt;mybatisåŸºäºäºŒçº§ç¼“å­˜çš„å¼€å‘&lt;/h2&gt;\n&lt;p&gt;ä¸€çº§ç¼“å­˜åŸºäº&lt;code&gt;sqlSession&lt;/code&gt;çš„ï¼Œé»˜è®¤å°±å­˜åœ¨çš„ï¼Œå’±ä»¬å¯ä»¥ä¸ç”¨ç®¡ï¼Œå®ƒä¸€å®šä¼šå­˜åœ¨&lt;/p&gt;\n&lt;h3 id=\&#34;4-1-åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜\&#34;&gt;4-1 åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- å¼€å¯äºŒçº§ç¼“å­˜(æ–°ç‰ˆæœ¬çš„mybatisé»˜è®¤å°±å·²ç»å¼€å¯äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨ä¸“é—¨å¼€) --&amp;gt;\n&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4-2-åœ¨mapperæ¥å£ä¸­ä½¿ç”¨æ³¨è§£é…ç½®å¼€å¯äºŒçº§ç¼“å­˜\&#34;&gt;4-2 åœ¨mapperæ¥å£ä¸­ä½¿ç”¨æ³¨è§£é…ç½®å¼€å¯äºŒçº§ç¼“å­˜&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- å¼€å¯äºŒçº§ç¼“å­˜(æ–°ç‰ˆæœ¬çš„mybatisé»˜è®¤å°±å·²ç»å¼€å¯äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨ä¸“é—¨å¼€) --&amp;gt;\n&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4-2-pojoéœ€è¦å®ç°åºåˆ—åŒ–-æ¥å£\&#34;&gt;4-2 &lt;code&gt;pojo&lt;/code&gt;éœ€è¦å®ç°åºåˆ—åŒ– æ¥å£&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public class Book implements Serializable{\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4-3-mapperå¼€å¯äºŒçº§ç¼“å­˜\&#34;&gt;4-3 mapperå¼€å¯äºŒçº§ç¼“å­˜&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@CacheNamespace(blocking=true)\t\t//åœ¨mapperæ¥å£ä¸­å¼€å¯äºŒçº§ç¼“å­˜ï¼Œé»˜è®¤æ˜¯æ‰€æœ‰çš„æŸ¥è¯¢éƒ½ä½¿ç”¨äºŒçº§ç¼“å­˜\npublic interface BookMapper {\n    /**\n\t * æŸ¥è¯¢:æ ¹æ®ä¸»é”®æŸ¥è¯¢\n\t * åŒæ ·å‡†å®ˆï¼šè¾“å…¥æ˜ å°„ç±»å‹ä¸ºç®€å•ç±»å‹ #{éšä¾¿å†™}\n\t * å¦‚æœåˆ—åä¸ä¸€æ ·,å¯ä»¥ç›´æ¥å¼•ç”¨ä¸Šé¢å·²ç»å†™å¥½çš„@Resultså®šä¹‰çš„åˆ—å’Œpojoå±æ€§æ˜ å°„çš„å…³ç³»ï¼Œæ–¹å¼ï¼š@ResultMap(&amp;quot;@Resultsçš„id&amp;quot;)\n\t */\n\t@Select(&amp;quot;SELECT * FROM book WHERE id=#{id}&amp;quot;)\n\t@ResultMap(&amp;quot;bookMap&amp;quot;)\n\t//@Options(useCache=true)   //é»˜è®¤å°±æ˜¯å¼€å¯äºŒçº§ç¼“å­˜ï¼Œå¯ä»¥ä¸ç”¨æ·»åŠ è¯¥æ³¨è§£\n\tBook getBookById(Integer id);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;åˆ†é¡µæŸ¥è¯¢\&#34;&gt;åˆ†é¡µæŸ¥è¯¢&lt;/h1&gt;\n&lt;h2 id=\&#34;æ·»åŠ åˆ†é¡µæ’ä»¶çš„jaråŒ…ä¾èµ–\&#34;&gt;æ·»åŠ åˆ†é¡µæ’ä»¶çš„jaråŒ…ä¾èµ–&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- pageHelper --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;com.github.pagehelper&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;pagehelper&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;5.1.6&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ†é¡µæ‹¦æˆªå™¨\&#34;&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ†é¡µæ‹¦æˆªå™¨&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- æ·»åŠ åˆ†é¡µæ’ä»¶ --&amp;gt;\n&amp;lt;plugins&amp;gt;\n&amp;lt;plugin interceptor=&amp;quot;com.github.pagehelper.PageInterceptor&amp;quot;&amp;gt;&amp;lt;/plugin&amp;gt;\n&amp;lt;/plugins&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;å®ç°åˆ†é¡µæ“ä½œ\&#34;&gt;å®ç°åˆ†é¡µæ“ä½œ&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * åˆ†é¡µæŸ¥è¯¢:åœ¨å®é™…å¼€å‘ä¸­æˆ‘ä»¬éƒ½ä¼šå»ä½¿ç”¨åˆ†é¡µæ’ä»¶æ¥å®Œæˆ\n * pageHelperæ˜¯å›½äººåšçš„åˆ†é¡µæ’ä»¶ï¼Œéå¸¸çš„ä¼˜ç§€\n */\n@Test\npublic void testPage(){\n    //1.å¼€å§‹åˆ†é¡µ(å‚æ•°ä¸€ï¼šå½“å‰è¦å±•ç¤ºçš„é¡µç (1,2..)ï¼Œ  å‚æ•°äºŒï¼šæ¯é¡µæ˜¾ç¤ºçš„ä¿¡æ¯æ¡æ•°)\n    PageHelper.startPage(1, 3);\n    //2.æ‰§è¡ŒæŸ¥è¯¢(æ­£å¸¸çš„æ‰§è¡Œ)\n    BookExample example = new BookExample();\n    /*å¦‚æœåˆ†é¡µä¸­æœ‰æ¡ä»¶\n    Criteria criteria = example.createCriteria();\n    criteria.andNameLike(&amp;quot;%é¾™%&amp;quot;);\n    */\n    List&amp;lt;Book&amp;gt; list = bookMapper.selectByExample(example);\n    //3.åˆ†é¡µå°±é€šè¿‡pageHelperæ‹¦æˆªå™¨æ¥å®ç°åˆ†é¡µ\n    PageInfo&amp;lt;Book&amp;gt; pageInfo = new PageInfo&amp;lt;Book&amp;gt;(list);\n    //ä¸€é¡µä¿¡æ¯\n    List&amp;lt;Book&amp;gt; bookList = pageInfo.getList();\n    for (Book book : bookList) {\n        System.out.println(book);\n    }\n    System.out.println(&amp;quot;æ€»çš„é¡µæ•°ï¼š&amp;quot; + pageInfo.getPages());\n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;mybatis&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;MyBatis&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;mybatis&#34;,&#34;slug&#34;:&#34;6pWqw4cF3&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/6pWqw4cF3/&#34;}],&#34;date&#34;:&#34;2020-05-04 12:13:12&#34;,&#34;dateFormat&#34;:&#34;2020-05-04&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/mybatis/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;31 min read&#34;,&#34;time&#34;:1856000,&#34;words&#34;:6302,&#34;minutes&#34;:31},&#34;description&#34;:&#34;å¿«é€Ÿå¼€å§‹\n1ã€MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶\n&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE configuration\n  PUBL...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B\&#34;&gt;å¿«é€Ÿå¼€å§‹&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-mybatis%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\&#34;&gt;1ã€MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-orm%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6mapperxml\&#34;&gt;2ã€ORMæ˜ å°„æ–‡ä»¶mapper.xml&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6\&#34;&gt;3ã€æ—¥å¿—æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-%E6%B5%8B%E8%AF%95\&#34;&gt;4ã€æµ‹è¯•&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#properties%E5%B1%9E%E6%80%A7\&#34;&gt;propertieså±æ€§&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#settings\&#34;&gt;settings&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#typealiases%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D\&#34;&gt;typeAliasesï¼ˆç±»å‹åˆ«åï¼‰&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%AB%E5%90%8D\&#34;&gt;è‡ªå®šä¹‰åˆ«å&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#plugins%E6%8F%92%E4%BB%B6\&#34;&gt;pluginsï¼ˆæ’ä»¶ï¼‰&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#xml%E6%98%A0%E5%B0%84\&#34;&gt;XMLæ˜ å°„&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#select-%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5\&#34;&gt;select æŸ¥è¯¢è¯­å¥&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#insert-updatea-delete\&#34;&gt;insert updatea delete&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8A%A8%E6%80%81sql\&#34;&gt;åŠ¨æ€SQL&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#if\&#34;&gt;if&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#sql%E6%B3%A8%E5%85%A5%E7%9A%84%E9%97%AE%E9%A2%98\&#34;&gt;sqlæ³¨å…¥çš„é—®é¢˜&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#when\&#34;&gt;when&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#choose\&#34;&gt;choose&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#set\&#34;&gt;set&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#foreach\&#34;&gt;foreach&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#sql%E7%89%87%E6%AE%B5\&#34;&gt;SQLç‰‡æ®µ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%A4%9A%E8%A1%A8%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2\&#34;&gt;å¤šè¡¨è”åˆæŸ¥è¯¢&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#vo\&#34;&gt;VO&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAvo\&#34;&gt;åˆ›å»ºä¸€ä¸ªVO&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%BC%96%E5%86%99mapper%E6%8E%A5%E5%8F%A3\&#34;&gt;ç¼–å†™mapperæ¥å£&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%BC%96%E5%86%99mapperxml\&#34;&gt;ç¼–å†™mapper.xml&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%B8%80%E5%AF%B9%E4%B8%80\&#34;&gt;ä¸€å¯¹ä¸€&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%8C%89%E7%85%A7%E6%9F%A5%E8%AF%A2%E5%B5%8C%E5%A5%97%E5%A4%84%E7%90%86\&#34;&gt;æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%8C%89%E7%85%A7%E7%BB%93%E6%9E%9C%E5%B5%8C%E5%A5%97%E5%A4%84%E7%90%86\&#34;&gt;æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%B8%80%E5%AF%B9%E5%A4%9A\&#34;&gt;ä¸€å¯¹å¤š&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%A4%9A%E5%AF%B9%E5%A4%9A\&#34;&gt;å¤šå¯¹å¤š&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD\&#34;&gt;å»¶è¿ŸåŠ è½½&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BD%BF%E7%94%A8association%E5%AE%9E%E7%8E%B0%E6%87%92%E5%8A%A0%E8%BD%BD\&#34;&gt;ä½¿ç”¨&lt;code&gt;association&lt;/code&gt;å®ç°æ‡’åŠ è½½&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E5%BC%80%E5%90%AF%E6%87%92%E5%8A%A0%E8%BD%BD\&#34;&gt;æ ¸å¿ƒé…ç½®å¼€å¯æ‡’åŠ è½½&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BD%BF%E7%94%A8collection%E5%AE%9E%E7%8E%B0%E6%87%92%E5%8A%A0%E8%BD%BD\&#34;&gt;ä½¿ç”¨&lt;code&gt;collection&lt;/code&gt;å®ç°æ‡’åŠ è½½&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E5%BC%80%E5%90%AF%E6%87%92%E5%8A%A0%E8%BD%BD-2\&#34;&gt;æ ¸å¿ƒé…ç½®å¼€å¯æ‡’åŠ è½½&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#mybatis%E7%BC%93%E5%AD%98\&#34;&gt;mybatisç¼“å­˜&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;ä¸€çº§ç¼“å­˜&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;äºŒçº§ç¼“å­˜&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%9C%A8%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%9C%A8mappexml%E4%B8%AD%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;åœ¨mappe.xmlä¸­å¼€å¯äºŒçº§ç¼“å­˜&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#pojo%E9%9C%80%E8%A6%81%E5%AE%9E%E7%8E%B0%E5%BA%8F%E5%88%97%E5%8C%96%E6%8E%A5%E5%8F%A3\&#34;&gt;pojoéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8\&#34;&gt;æ³¨è§£å¼€å‘å…¥é—¨&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AF%BC%E5%85%A5jar%E5%8C%85\&#34;&gt;å¯¼å…¥jaråŒ…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\&#34;&gt;é…ç½®æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%A7%A3%E5%86%B3%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%88%97%E5%90%8D%E5%92%8Cpojo%E4%B8%AD%E5%B1%9E%E6%80%A7%E5%90%8D%E4%B8%8D%E4%B8%80%E8%87%B4\&#34;&gt;è§£å†³æ•°æ®åº“è¡¨ä¸­çš„åˆ—åå’Œpojoä¸­å±æ€§åä¸ä¸€è‡´&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%AC%AC%E4%B8%80%E7%A7%8D\&#34;&gt;ç¬¬ä¸€ç§&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%AC%AC%E4%BA%8C%E7%A7%8D\&#34;&gt;ç¬¬äºŒç§&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%8A%A8%E6%80%81sql\&#34;&gt;æ³¨è§£å¼€å‘ä¸­çš„åŠ¨æ€sql&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%BE%93%E5%85%A5%E6%98%A0%E5%B0%84%E7%B1%BB%E5%9E%8B%E4%B8%BA%E7%AE%80%E5%8D%95%E7%B1%BB%E5%9E%8B\&#34;&gt;è¾“å…¥æ˜ å°„ç±»å‹ä¸ºç®€å•ç±»å‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%BE%93%E5%85%A5%E6%98%A0%E5%B0%84%E7%B1%BB%E5%9E%8B%E4%B8%BApojo\&#34;&gt;è¾“å…¥æ˜ å°„ç±»å‹ä¸ºpojo&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E5%AE%9E%E7%8E%B0%E5%A4%8D%E6%9D%82%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB\&#34;&gt;æ³¨è§£å¼€å‘å®ç°å¤æ‚çš„æ˜ å°„å…³ç³»&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E7%B3%BB\&#34;&gt;ä¸€å¯¹ä¸€å…³ç³»&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%9A%84%E5%85%B3%E7%B3%BB\&#34;&gt;ä¸€å¯¹å¤šçš„å…³ç³»&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#mybatis%E5%9F%BA%E4%BA%8E%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E7%9A%84%E5%BC%80%E5%8F%91\&#34;&gt;mybatisåŸºäºäºŒçº§ç¼“å­˜çš„å¼€å‘&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-1-%E5%9C%A8%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;4-1 åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒçº§ç¼“å­˜&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-2-%E5%9C%A8mapper%E6%8E%A5%E5%8F%A3%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;4-2 åœ¨mapperæ¥å£ä¸­ä½¿ç”¨æ³¨è§£é…ç½®å¼€å¯äºŒçº§ç¼“å­˜&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-2-pojo%E9%9C%80%E8%A6%81%E5%AE%9E%E7%8E%B0%E5%BA%8F%E5%88%97%E5%8C%96-%E6%8E%A5%E5%8F%A3\&#34;&gt;4-2 &lt;code&gt;pojo&lt;/code&gt;éœ€è¦å®ç°åºåˆ—åŒ– æ¥å£&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-3-mapper%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;4-3 mapperå¼€å¯äºŒçº§ç¼“å­˜&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2\&#34;&gt;åˆ†é¡µæŸ¥è¯¢&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B7%BB%E5%8A%A0%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6%E7%9A%84jar%E5%8C%85%E4%BE%9D%E8%B5%96\&#34;&gt;æ·»åŠ åˆ†é¡µæ’ä»¶çš„jaråŒ…ä¾èµ–&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%9C%A8%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE%E5%88%86%E9%A1%B5%E6%8B%A6%E6%88%AA%E5%99%A8\&#34;&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ†é¡µæ‹¦æˆªå™¨&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5%E6%93%8D%E4%BD%9C\&#34;&gt;å®ç°åˆ†é¡µæ“ä½œ&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;è·å–classå¯¹è±¡çš„æ–¹å¼\&#34;&gt;è·å–Classå¯¹è±¡çš„æ–¹å¼&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Class.forName(&amp;quot;å…¨ç±»å&amp;quot;);//å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œè¿”å›Classå¯¹è±¡\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;å¤šç”¨äºé…ç½®æ–‡ä»¶ï¼Œå°†ç±»åå®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚è¯»å–æ–‡ä»¶ï¼ŒåŠ è½½ç±»&lt;br&gt;\nç±»å.classï¼šé€šè¿‡ç±»åçš„å±æ€§classè·å–&lt;br&gt;\nå¤šç”¨äºå‚æ•°çš„ä¼ é€’&lt;br&gt;\nå¯¹è±¡.getClass()ï¼šgetClass()æ–¹æ³•åœ¨Objectç±»ä¸­å®šä¹‰ç€ã€‚&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//å¤šç”¨äºå¯¹è±¡çš„è·å–å­—èŠ‚ç çš„æ–¹å¼\nClass clazz = News.class;\nObject obj = clazz.newInstance();           //å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼šç­‰åŒäº new ä¸€ä¸ªå¯¹è±¡\nSystem.out.println(clazz.getSimpleName());  //è·å–ç±»å\nSystem.out.println(clazz.getName());        //è·å–å®Œæ•´çš„åŒ…å+ç±»å\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;classå¯¹è±¡åŠŸèƒ½\&#34;&gt;Classå¯¹è±¡åŠŸèƒ½&lt;/h2&gt;\n&lt;h3 id=\&#34;è·å–æˆå‘˜å˜é‡\&#34;&gt;è·å–æˆå‘˜å˜é‡&lt;/h3&gt;\n&lt;p&gt;â€‹        Field[] getFields() ï¼šè·å–æ‰€æœ‰publicä¿®é¥°çš„æˆå‘˜å˜é‡&lt;/p&gt;\n&lt;p&gt;â€‹\t\tField getField(String name)   è·å–æŒ‡å®šåç§°çš„ publicä¿®é¥°çš„æˆå‘˜å˜é‡&lt;/p&gt;\n&lt;p&gt;â€‹\t\tField[] getDeclaredFields();  //è·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡ï¼Œä¸è€ƒè™‘ä¿®é¥°ç¬¦&lt;/p&gt;\n&lt;p&gt;â€‹\t\tField getDeclaredField(String name); // è·å–æŒ‡å®šåç§°çš„æˆå‘˜å˜é‡ï¼Œä¸è€ƒè™‘ä¿®é¥°ç¬¦&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Class clazz = News.class;\nSystem.out.println(clazz.getSimpleName());//è·å–ç±»å\nSystem.out.println(clazz.getName());//è·å–åŒ…å+ç±»å\nObject obj = clazz.newInstance();//å®ä¾‹åŒ–Newsçš„è¿™ä¸ªå¯¹è±¡\nTable table = obj.getClass().getAnnotation(Table.class);//è·å–objå¯¹è±¡çš„Tableæ³¨è§£ï¼Œæ²¡æœ‰è¿”å›null\nSystem.out.println(table.value());\nField[] fields = clazz.getDeclaredFields();\nfor (Field field : fields) {\n\tfield.setAccessible(true);//æš´åŠ›åå°„,å¦‚æœä¸å†™è¿™ä¸ªå°†ä¼šæŠ¥é”™\n    //è·å–å±æ€§çš„æ³¨è§£\n    //Field field1 = obj.getClass().getDeclaredField(field.getName());//è·å–objå¯¹è±¡çš„æŒ‡å®šå±æ€§\n    PK pk = field.getAnnotation(PK.class);//è·å–å±æ€§çš„æ³¨è§£\n\n\tif(pk!=null){\n    \tSystem.out.println(field.getName()+&amp;quot;&amp;gt;&amp;gt;&amp;gt;&amp;quot;+pk);//è·å–å±æ€§åç§°\n    }\n        field.set(obj,null);//ç»™å½“å‰clazzå¯¹è±¡çš„fieldå±æ€§èµ‹å€¼ä¸ºi\n        System.out.println(field.get(obj));//è¾“å‡ºclazzå¯¹è±¡çš„fieldçš„å±æ€§å€¼\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;è·å–æ„é€ æ–¹æ³•\&#34;&gt;è·å–æ„é€ æ–¹æ³•&lt;/h3&gt;\n&lt;p&gt;â€‹\tConstructor&amp;lt;?&amp;gt;[] getConstructors()&lt;/p&gt;\n&lt;p&gt;â€‹\tConstructor&lt;T&gt; getConstructor(ç±»&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;\n&lt;p&gt;â€‹\tConstructor&lt;T&gt; getDeclaredConstructor(ç±»&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;\n&lt;p&gt;â€‹\tConstructor&amp;lt;?&amp;gt;[] getDeclaredConstructors()&lt;/p&gt;\n&lt;h3 id=\&#34;è·å–æˆå‘˜æ–¹æ³•\&#34;&gt;è·å–æˆå‘˜æ–¹æ³•&lt;/h3&gt;\n&lt;p&gt;â€‹\tMethod[] getMethods()&lt;/p&gt;\n&lt;p&gt;â€‹\tMethod getMethod(String name, ç±»&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;\n&lt;p&gt;â€‹\tMethod[] getDeclaredMethods()&lt;/p&gt;\n&lt;p&gt;â€‹\tMethod getDeclaredMethod(String name, ç±»&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;\n&lt;h3 id=\&#34;fieldæˆå‘˜å˜é‡\&#34;&gt;Fieldï¼šæˆå‘˜å˜é‡&lt;/h3&gt;\n&lt;p&gt;è®¾ç½®å€¼&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;void set(Object obj, Object value)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;è·å–å€¼ï¼Œä¼ çš„æ˜¯å¯¹è±¡&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;get(Object obj) \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;å¿½ç•¥è®¿é—®æƒé™ä¿®é¥°ç¬¦çš„å®‰å…¨æ£€æŸ¥&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;setAccessible(true)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;constructoræ„é€ æ–¹æ³•\&#34;&gt;Constructor:æ„é€ æ–¹æ³•&lt;/h3&gt;\n&lt;p&gt;åˆ›å»ºå¯¹è±¡ï¼Œå¦‚æœä½¿ç”¨ç©ºå‚æ•°æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œæ“ä½œå¯ä»¥ç®€åŒ–ï¼šClasså¯¹è±¡çš„newInstanceæ–¹æ³•&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;T newInstance(Object... initargs)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;methodæ–¹æ³•å¯¹è±¡\&#34;&gt;Methodï¼šæ–¹æ³•å¯¹è±¡&lt;/h3&gt;\n&lt;p&gt;æ‰§è¡Œæ–¹æ³•&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Object invoke(Object obj, Object... args)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;è·å–æ–¹æ³•åç§°&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;String getName\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;åå°„è·å–æ³¨è§£\&#34;&gt;åå°„è·å–æ³¨è§£&lt;/h2&gt;\n&lt;p&gt;è·å–objå¯¹è±¡çš„Tableæ³¨è§£ï¼Œæ²¡æœ‰è¿”å›nullï¼Œobjæ˜¯è¦è·å–çš„å¯¹è±¡&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Table table = obj.getClass().getAnnotation(Table.class);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;è·å–å±æ€§çš„æ³¨è§£ï¼Œè·å–objå¯¹è±¡çš„field.getName()çš„å±æ€§æ³¨è§£&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Field field1 = obj.getClass().getDeclaredField(field.getName());//è·å–objå¯¹è±¡çš„æŒ‡å®šå±æ€§\nPK pk = field1.getAnnotation(PK.class);//è·å–å±æ€§çš„æ³¨è§£\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;è·å–å½“å‰è°ƒç”¨çš„æ–¹æ³•ä¸Šçš„æ³¨è§£\&#34;&gt;è·å–å½“å‰è°ƒç”¨çš„æ–¹æ³•ä¸Šçš„æ³¨è§£&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;StackTraceElement[] stack = new Throwable().getStackTrace();\nMethod method = this.getClass().getMethod(stack[1].getMethodName());//è¿™é‡Œ0æ˜¯å½“å‰æ–¹æ³•çš„æ³¨è§£ï¼Œ1æ˜¯è°ƒç”¨è€…æ–¹æ³•çš„æ³¨è§£\nfor(Annotation an : method.getAnnotations()){\n    System.out.println(an);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;java-fan-she&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;Javaåå°„&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;java&#34;,&#34;slug&#34;:&#34;CX9XCxDcJ&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/CX9XCxDcJ/&#34;}],&#34;date&#34;:&#34;2020-05-04 12:12:12&#34;,&#34;dateFormat&#34;:&#34;2020-05-04&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/java-fan-she/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;4 min read&#34;,&#34;time&#34;:182000,&#34;words&#34;:703,&#34;minutes&#34;:4},&#34;description&#34;:&#34;è·å–Classå¯¹è±¡çš„æ–¹å¼\nClass.forName(&amp;quot;å…¨ç±»å&amp;quot;);//å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œè¿”å›Classå¯¹è±¡\n\nå¤šç”¨äºé…ç½®æ–‡ä»¶ï¼Œå°†ç±»åå®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚è¯»å–æ–‡ä»¶ï¼ŒåŠ è½½ç±»\nç±»å.classï¼šé€šè¿‡ç±»åçš„å±æ€§classè·...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%8E%B7%E5%8F%96class%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E5%BC%8F\&#34;&gt;è·å–Classå¯¹è±¡çš„æ–¹å¼&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#class%E5%AF%B9%E8%B1%A1%E5%8A%9F%E8%83%BD\&#34;&gt;Classå¯¹è±¡åŠŸèƒ½&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%8E%B7%E5%8F%96%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F\&#34;&gt;è·å–æˆå‘˜å˜é‡&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%8E%B7%E5%8F%96%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95\&#34;&gt;è·å–æ„é€ æ–¹æ³•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%8E%B7%E5%8F%96%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95\&#34;&gt;è·å–æˆå‘˜æ–¹æ³•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#field%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F\&#34;&gt;Fieldï¼šæˆå‘˜å˜é‡&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#constructor%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95\&#34;&gt;Constructor:æ„é€ æ–¹æ³•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#method%E6%96%B9%E6%B3%95%E5%AF%B9%E8%B1%A1\&#34;&gt;Methodï¼šæ–¹æ³•å¯¹è±¡&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E6%B3%A8%E8%A7%A3\&#34;&gt;åå°„è·å–æ³¨è§£&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E8%B0%83%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95%E4%B8%8A%E7%9A%84%E6%B3%A8%E8%A7%A3\&#34;&gt;è·å–å½“å‰è°ƒç”¨çš„æ–¹æ³•ä¸Šçš„æ³¨è§£&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;ä»€ä¹ˆæ˜¯fastdfs\&#34;&gt;ä»€ä¹ˆæ˜¯FastDFS&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;FastDFS æ˜¯ç”¨ c è¯­è¨€ç¼–å†™çš„ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚FastDFS ä¸ºäº’è”ç½‘é‡èº«å®šåˆ¶ï¼Œå……åˆ†è€ƒè™‘äº†å†—ä½™å¤‡ä»½ã€è´Ÿè½½å‡è¡¡ã€çº¿æ€§æ‰©å®¹ç­‰æœºåˆ¶ï¼Œå¹¶æ³¨é‡é«˜å¯ç”¨ã€é«˜æ€§èƒ½ç­‰æŒ‡æ ‡ï¼Œä½¿ç”¨ FastDFSå¾ˆå®¹æ˜“æ­å»ºä¸€å¥—é«˜æ€§èƒ½çš„æ–‡ä»¶æœåŠ¡å™¨é›†ç¾¤æä¾›æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ç­‰æœåŠ¡ã€‚&lt;/p&gt;\n&lt;p&gt;FastDFS æ¶æ„åŒ…æ‹¬ Tracker server å’Œ Storage serverã€‚å®¢æˆ·ç«¯è¯·æ±‚ Tracker server è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ï¼Œé€šè¿‡ Tracker server è°ƒåº¦æœ€ç»ˆç”± Storage server å®Œæˆæ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ã€‚&lt;/p&gt;\n&lt;p&gt;Tracker server ä½œç”¨æ˜¯è´Ÿè½½å‡è¡¡å’Œè°ƒåº¦ï¼Œé€šè¿‡ Tracker server åœ¨æ–‡ä»¶ä¸Šä¼ æ—¶å¯ä»¥æ ¹æ®ä¸€äº›ç­–ç•¥æ‰¾åˆ° Storage server æä¾›æ–‡ä»¶ä¸Šä¼ æœåŠ¡ã€‚å¯ä»¥å°† tracker ç§°ä¸ºè¿½è¸ªæœåŠ¡å™¨æˆ–è°ƒåº¦æœåŠ¡å™¨ã€‚&lt;/p&gt;\n&lt;p&gt;Storage server ä½œç”¨æ˜¯æ–‡ä»¶å­˜å‚¨ï¼Œå®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶æœ€ç»ˆå­˜å‚¨åœ¨ Storage æœåŠ¡å™¨ä¸Šï¼ŒStorageserver æ²¡æœ‰å®ç°è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿè€Œæ˜¯åˆ©ç”¨æ“ä½œç³»ç»Ÿ çš„æ–‡ä»¶ç³»ç»Ÿæ¥ç®¡ç†æ–‡ä»¶ã€‚å¯ä»¥å°†storageç§°ä¸ºå­˜å‚¨æœåŠ¡å™¨ã€‚&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1589686914052.jpg\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;æœåŠ¡ç«¯ä¸¤ä¸ªè§’è‰²ï¼š&lt;/p&gt;\n&lt;p&gt;Trackerï¼šç®¡ç†é›†ç¾¤ï¼Œtracker ä¹Ÿå¯ä»¥å®ç°é›†ç¾¤ã€‚æ¯ä¸ª tracker èŠ‚ç‚¹åœ°ä½å¹³ç­‰ã€‚æ”¶é›† Storage é›†ç¾¤çš„çŠ¶æ€ã€‚&lt;/p&gt;\n&lt;p&gt;Storageï¼šå®é™…ä¿å­˜æ–‡ä»¶  Storage åˆ†ä¸ºå¤šä¸ªç»„ï¼Œæ¯ä¸ªç»„ä¹‹é—´ä¿å­˜çš„æ–‡ä»¶æ˜¯ä¸åŒçš„ã€‚æ¯ä¸ªç»„å†…éƒ¨å¯ä»¥æœ‰å¤šä¸ªæˆå‘˜ï¼Œç»„æˆå‘˜å†…éƒ¨ä¿å­˜çš„å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œç»„æˆå‘˜çš„åœ°ä½æ˜¯ä¸€è‡´çš„ï¼Œæ²¡æœ‰ä¸»ä»çš„æ¦‚å¿µã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;æ–‡ä»¶ä¸Šä¼ æµç¨‹\&#34;&gt;æ–‡ä»¶ä¸Šä¼ æµç¨‹&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;2\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1589687036366.jpg\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;å®¢æˆ·ç«¯ä¸Šä¼ æ–‡ä»¶åå­˜å‚¨æœåŠ¡å™¨å°†æ–‡ä»¶ ID è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ–‡ä»¶ ID ç”¨äºä»¥åè®¿é—®è¯¥æ–‡ä»¶çš„ç´¢å¼•ä¿¡æ¯ã€‚æ–‡ä»¶ç´¢å¼•ä¿¡æ¯åŒ…æ‹¬ï¼šç»„åï¼Œè™šæ‹Ÿç£ç›˜è·¯å¾„ï¼Œæ•°æ®ä¸¤çº§ç›®å½•ï¼Œæ–‡ä»¶åã€‚&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;3\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1589687044591.jpg\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;&lt;strong&gt;ç»„å&lt;/strong&gt;ï¼šæ–‡ä»¶ä¸Šä¼ åæ‰€åœ¨çš„ storage ç»„åç§°ï¼Œåœ¨æ–‡ä»¶ä¸Šä¼ æˆåŠŸåæœ‰ storage æœåŠ¡å™¨è¿”å›ï¼Œéœ€è¦å®¢æˆ·ç«¯è‡ªè¡Œä¿å­˜ã€‚&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;è™šæ‹Ÿç£ç›˜è·¯å¾„&lt;/strong&gt;ï¼šstorage é…ç½®çš„è™šæ‹Ÿè·¯å¾„ï¼Œä¸ç£ç›˜é€‰é¡¹ store_path*å¯¹åº”ã€‚å¦‚æœé…ç½®äº†&lt;/p&gt;\n&lt;p&gt;store_path0 åˆ™æ˜¯ M00ï¼Œå¦‚æœé…ç½®äº† store_path1 åˆ™æ˜¯ M01ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;æ•°æ®ä¸¤çº§ç›®å½•&lt;/strong&gt;ï¼šstorage æœåŠ¡å™¨åœ¨æ¯ä¸ªè™šæ‹Ÿç£ç›˜è·¯å¾„ä¸‹åˆ›å»ºçš„ä¸¤çº§ç›®å½•ï¼Œç”¨äºå­˜å‚¨æ•°æ®&lt;/p&gt;\n&lt;p&gt;æ–‡ä»¶ã€‚&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;æ–‡ä»¶å&lt;/strong&gt;ï¼šä¸æ–‡ä»¶ä¸Šä¼ æ—¶ä¸åŒã€‚æ˜¯ç”±å­˜å‚¨æœåŠ¡å™¨æ ¹æ®ç‰¹å®šä¿¡æ¯ç”Ÿæˆï¼Œæ–‡ä»¶ååŒ…å«ï¼šæºå­˜å‚¨&lt;/p&gt;\n&lt;p&gt;æœåŠ¡å™¨ IP åœ°å€ã€æ–‡ä»¶åˆ›å»ºæ—¶é—´æˆ³ã€æ–‡ä»¶å¤§å°ã€éšæœºæ•°å’Œæ–‡ä»¶æ‹“å±•åç­‰ä¿¡æ¯ã€‚&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;æ–‡ä»¶ä¸‹è½½æµç¨‹\&#34;&gt;æ–‡ä»¶ä¸‹è½½æµç¨‹&lt;/h2&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;4\&#34;&gt;&lt;img src=\&#34;https://haohanya.github.io/post-images/1589687076743.jpg\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h2 id=\&#34;0-å‡†å¤‡å®‰è£…åŒ…ä¸Šä¼ åˆ°usrlocal\&#34;&gt;0. å‡†å¤‡å®‰è£…åŒ…ä¸Šä¼ åˆ°/usr/local/&lt;/h2&gt;\n&lt;p&gt;FastDFS_v5.05.tar.gz  ï¼ˆFastDFSå®‰è£…åŒ…ï¼‰&lt;/p&gt;\n&lt;p&gt;libfastcommonV1.0.7.tar.gz ï¼ˆFastDFSä¾èµ–ç¨‹åºï¼‰&lt;/p&gt;\n&lt;p&gt;nginx-1.8.0.tar.gz ï¼ˆnginxå®‰è£…åŒ…ï¼Œç”¨äºåšæ–‡ä»¶è¯·æ±‚httpä»£ç†æœåŠ¡å™¨ï¼‰&lt;/p&gt;\n&lt;p&gt;fastdfs-nginx-module_v1.16.tar.gz ï¼ˆnginxå’Œfastdfsçš„æ¡¥æ¢æ’ä»¶æ¨¡å—ï¼‰&lt;/p&gt;\n&lt;h2 id=\&#34;1-å®‰è£…ccç¼–è¯‘ç¯å¢ƒ\&#34;&gt;1. å®‰è£…c/c++ç¼–è¯‘ç¯å¢ƒ&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;yum install gcc-c++\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;2-å®‰è£…libevent\&#34;&gt;2. å®‰è£…libevent&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;yum -y install libevent\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;3-å®‰è£…libfastcommon\&#34;&gt;3. å®‰è£…libfastcommon&lt;/h2&gt;\n&lt;p&gt;å°†&lt;code&gt;libfastcommonV1.0.7.tar.gz&lt;/code&gt;æ‹·è´è‡³&lt;code&gt;/usr/local/&lt;/code&gt;ä¸‹&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;cd /usr/local\ntar -zxvf libfastcommonV1.0.7.tar.gz\ncd libfastcommon-1.0.7\n./make.sh\n./make.sh install\ncp /usr/lib64/libfastcommon.so /usr/lib\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;4åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•\&#34;&gt;4.åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;mkdir -p /home/FastDFS/tracker /home/FastDFS/storage /home/FastDFS/client\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;5-trackerç¼–è¯‘å®‰è£…\&#34;&gt;5. trackerç¼–è¯‘å®‰è£…&lt;/h2&gt;\n&lt;p&gt;å°†FastDFS_v5.05.tar.gzæ‹·è´è‡³/usr/local/ä¸‹&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;tar -zxvf FastDFS_v5.05.tar.gz\ncd FastDFS\n./make.sh\n./make.sh install\ncd conf\ncp * /etc/fdfs\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;6-ç¼–è¾‘etcfdfstrackerconf\&#34;&gt;6. ç¼–è¾‘/etc/fdfs/tracker.conf&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;vi /etc/fdfs/tracker.conf\n\tbase_path=/home/FastDFS/tracker\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;7-å¯åŠ¨tracker\&#34;&gt;7. å¯åŠ¨tracker&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;/usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf [restart](é‡å¯)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;8-é…ç½®storageèŠ‚ç‚¹\&#34;&gt;8. é…ç½®storageèŠ‚ç‚¹&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;vi /etc/fdfs/storage.conf\n    base_path=/home/FastDFS/storage\n    store_path0=/home/FastDFS/storage\n    tracker_server = 192.168.100.151:22122\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;9-å¯åŠ¨storageèŠ‚ç‚¹\&#34;&gt;9. å¯åŠ¨storageèŠ‚ç‚¹&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;/usr/bin/fdfs_storage{fdfs_storaged} /etc/fdfs/storage.conf\nfdfs_storageä¸å­˜åœ¨å°±ä½¿ç”¨fdfs_storaged\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;10-å®‰è£…nginx\&#34;&gt;10. å®‰è£…nginx&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;yum install -y gcc-c++   (å·²å®‰è£…)\nyum install -y pcre pcre-devel\nyum install -y zlib zlib-devel\nyum install -y openssl openssl-devel\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;11è§£å‹fastdfs-nginx-module_v116targz\&#34;&gt;11.è§£å‹fastdfs-nginx-module_v1.16.tar.gz&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;cd /usr/local/\ntar -zxf fastdfs-nginx-module_v1.16.tar.gz\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;12ä¿®æ”¹fastdfs-nginx-modulesrcconfigé…ç½®æ–‡ä»¶\&#34;&gt;12.ä¿®æ”¹fastdfs-nginx-module/src/configé…ç½®æ–‡ä»¶&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;vi fastdfs-nginx-module/src/config\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;æŠŠCORE_INCS=&amp;quot;$CORE_INCS /usr/local/include/fastdfs /usr/include/fastcommon/&amp;quot;&lt;/p&gt;\n&lt;p&gt;ä¿®æ”¹ä¸ºï¼šCORE_INCS=&amp;quot;$CORE_INCS /usr/include/fastdfs /usr/include/fastcommon/&amp;quot;&lt;/p&gt;\n&lt;p&gt;æŠŠCORE_LIBS=&amp;quot;$CORE_LIBS -L/usr/local/lib -lfastcommon -lfdfsclient&amp;quot;&lt;/p&gt;\n&lt;p&gt;ä¿®æ”¹ä¸ºï¼šCORE_LIBS=&amp;quot;$CORE_LIBS -L/usr/lib -lfastcommon -lfdfsclient&amp;quot;&lt;/p&gt;\n&lt;p&gt;å®é™…å°±æ˜¯æŠŠè·¯å¾„ä¸­çš„localè¿™ä¸€å±‚åˆ é™¤æ‰&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;13å¤åˆ¶fastdfs-nginx-modulesrcmod_fastdfsconf-åˆ°etcfdfsç›®å½•ä¸‹å¹¶ç¼–è¾‘\&#34;&gt;13.å¤åˆ¶fastdfs-nginx-module/src/mod_fastdfs.conf åˆ°/etc/fdfsç›®å½•ä¸‹å¹¶ç¼–è¾‘&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;cp fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/\n\tvi /etc/fdfs/mod_fastdfs.conf\n        tracker_server=192.168.100.151:22122\n        url_have_group_name = true\n        storage_server_port=23000\n        group_name=group1\n        store_path0=/home/FastDFS/storage\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;14å®‰è£…nginx\&#34;&gt;14.å®‰è£…nginx&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;cd /usr/local/\ntar -zxf  nginx-1.8.1.tar.gz\ncd nginx-1.8.1\n./configure --add-module=/usr/local/fastdfs-nginx-module/src/\nmake\nmake install\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;15-é…ç½®nginx\&#34;&gt;15. é…ç½®nginx&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;cd /usr/local/nginx/conf\nvi nginx.conf\n\t\n\tserver{\n        listen     80;\n        server_name     localhost;\n        location /group1/M00/{\n            ngx_fastdfs_module;\n        }\n    }\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;é‡å¯nginx&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;/usr/local/nginx/sbin/nginx\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;æµ‹è¯•\&#34;&gt;æµ‹è¯•&lt;/h2&gt;\n&lt;ol&gt;\n&lt;li&gt;å¼•å…¥ä¾èµ–&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;commons-fileupload&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;commons-fileupload&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;1.3.1&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&amp;lt;!--fastdfs--&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.csource.fastdfs&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;fastdfs&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;1.2&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=\&#34;2\&#34;&gt;\n&lt;li&gt;ç¼–å†™é…ç½®æ–‡ä»¶&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt; &amp;lt;!-- é…ç½®å¤šåª’ä½“è§£æå™¨ --&amp;gt;\n &amp;lt;bean id=&amp;quot;multipartResolver&amp;quot; class=&amp;quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&amp;quot;&amp;gt;\n \t&amp;lt;property name=&amp;quot;defaultEncoding&amp;quot; value=&amp;quot;UTF-8&amp;quot;/&amp;gt;\n \t&amp;lt;!-- è®¾å®šæ–‡ä»¶ä¸Šä¼ çš„æœ€å¤§å€¼5MBï¼Œ5*1024*1024 --&amp;gt;\n \t&amp;lt;property name=&amp;quot;maxUploadSize&amp;quot; value=&amp;quot;5242880&amp;quot;/&amp;gt;\n &amp;lt;/bean&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;UploadController&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt; /**\n  * æ–‡ä»¶æœåŠ¡å™¨åœ°å€\n  */\n @Value(&amp;quot;${FILE_SERVER_URL}&amp;quot;)\n private String FILE_SERVER_URL;\n\n @RequestMapping(&amp;quot;/upload&amp;quot;)\n public JdResult upload(MultipartFile file) {\n     //1ã€å–æ–‡ä»¶çš„æ‰©å±•å\n     String originalFilename = file.getOriginalFilename();\n     String extName = originalFilename.substring(originalFilename.lastIndexOf(&amp;quot;.&amp;quot;) + 1);\n     try {\n         //2ã€åˆ›å»ºä¸€ä¸ª FastDFS çš„å®¢æˆ·ç«¯\n         FastDFSClient dfsClient = new FastDFSClient(&amp;quot;classpath:conf/fdfs_client.conf&amp;quot;);\n         //3ã€æ‰§è¡Œä¸Šä¼ å¤„ç†\n         String path = dfsClient.uploadFile(file.getBytes(), extName);\n         //4ã€æ‹¼æ¥è¿”å›çš„ url å’Œ ip åœ°å€ï¼Œæ‹¼è£…æˆå®Œæ•´çš„ url\n         String url = FILE_SERVER_URL + path;\n         return JdResult.ok(url);\n     } catch (Exception e) {\n         e.printStackTrace();\n         return JdResult.error(&amp;quot;æ–‡ä»¶ä¸Šä¼ å¤±è´¥&amp;quot;);\n     }\n }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&#34;,&#34;fileName&#34;:&#34;FastDFS&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;FastDFS&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;FastDFS&#34;,&#34;slug&#34;:&#34;AowgROl25&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/AowgROl25/&#34;}],&#34;date&#34;:&#34;2020-05-04 12:09:39&#34;,&#34;dateFormat&#34;:&#34;2020-05-04&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/FastDFS/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;7 min read&#34;,&#34;time&#34;:387000,&#34;words&#34;:1412,&#34;minutes&#34;:7},&#34;description&#34;:&#34;ä»€ä¹ˆæ˜¯FastDFS\n\nFastDFS æ˜¯ç”¨ c è¯­è¨€ç¼–å†™çš„ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚FastDFS ä¸ºäº’è”ç½‘é‡èº«å®šåˆ¶ï¼Œå……åˆ†è€ƒè™‘äº†å†—ä½™å¤‡ä»½ã€è´Ÿè½½å‡è¡¡ã€çº¿æ€§æ‰©å®¹ç­‰æœºåˆ¶ï¼Œå¹¶æ³¨é‡é«˜å¯ç”¨ã€é«˜æ€§èƒ½ç­‰æŒ‡æ ‡ï¼Œä½¿ç”¨ FastDFSå¾ˆå®¹æ˜“æ­å»ºä¸€å¥—é«˜æ€§èƒ½çš„æ–‡ä»¶...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BB%80%E4%B9%88%E6%98%AFfastdfs\&#34;&gt;ä»€ä¹ˆæ˜¯FastDFS&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%B5%81%E7%A8%8B\&#34;&gt;æ–‡ä»¶ä¸Šä¼ æµç¨‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%B5%81%E7%A8%8B\&#34;&gt;æ–‡ä»¶ä¸‹è½½æµç¨‹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#0-%E5%87%86%E5%A4%87%E5%AE%89%E8%A3%85%E5%8C%85%E4%B8%8A%E4%BC%A0%E5%88%B0usrlocal\&#34;&gt;0. å‡†å¤‡å®‰è£…åŒ…ä¸Šä¼ åˆ°/usr/local/&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E5%AE%89%E8%A3%85cc%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83\&#34;&gt;1. å®‰è£…c/c++ç¼–è¯‘ç¯å¢ƒ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E5%AE%89%E8%A3%85libevent\&#34;&gt;2. å®‰è£…libevent&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E5%AE%89%E8%A3%85libfastcommon\&#34;&gt;3. å®‰è£…libfastcommon&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%9B%AE%E5%BD%95\&#34;&gt;4.åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-tracker%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85\&#34;&gt;5. trackerç¼–è¯‘å®‰è£…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-%E7%BC%96%E8%BE%91etcfdfstrackerconf\&#34;&gt;6. ç¼–è¾‘/etc/fdfs/tracker.conf&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-%E5%90%AF%E5%8A%A8tracker\&#34;&gt;7. å¯åŠ¨tracker&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#8-%E9%85%8D%E7%BD%AEstorage%E8%8A%82%E7%82%B9\&#34;&gt;8. é…ç½®storageèŠ‚ç‚¹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#9-%E5%90%AF%E5%8A%A8storage%E8%8A%82%E7%82%B9\&#34;&gt;9. å¯åŠ¨storageèŠ‚ç‚¹&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#10-%E5%AE%89%E8%A3%85nginx\&#34;&gt;10. å®‰è£…nginx&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#11%E8%A7%A3%E5%8E%8Bfastdfs-nginx-module_v116targz\&#34;&gt;11.è§£å‹fastdfs-nginx-module_v1.16.tar.gz&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#12%E4%BF%AE%E6%94%B9fastdfs-nginx-modulesrcconfig%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\&#34;&gt;12.ä¿®æ”¹fastdfs-nginx-module/src/configé…ç½®æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#13%E5%A4%8D%E5%88%B6fastdfs-nginx-modulesrcmod_fastdfsconf-%E5%88%B0etcfdfs%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%B9%B6%E7%BC%96%E8%BE%91\&#34;&gt;13.å¤åˆ¶fastdfs-nginx-module/src/mod_fastdfs.conf åˆ°/etc/fdfsç›®å½•ä¸‹å¹¶ç¼–è¾‘&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#14%E5%AE%89%E8%A3%85nginx\&#34;&gt;14.å®‰è£…nginx&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#15-%E9%85%8D%E7%BD%AEnginx\&#34;&gt;15. é…ç½®nginx&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B5%8B%E8%AF%95\&#34;&gt;æµ‹è¯•&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;1-freemarkerå…¥é—¨\&#34;&gt;1ã€freemarkerå…¥é—¨&lt;/h2&gt;\n&lt;h3 id=\&#34;1ä¾èµ–æ ¸å¿ƒåŒ…\&#34;&gt;1.ä¾èµ–æ ¸å¿ƒåŒ…&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- ä¾èµ–freemarker --&amp;gt;\n&amp;lt;dependency&amp;gt;\n\t&amp;lt;groupId&amp;gt;org.freemarker&amp;lt;/groupId&amp;gt;\n\t&amp;lt;artifactId&amp;gt;freemarker&amp;lt;/artifactId&amp;gt;\n\t&amp;lt;version&amp;gt;2.3.23&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;2åˆ›å»ºæ¨¡æ¿æ–‡ä»¶\&#34;&gt;2.åˆ›å»ºæ¨¡æ¿æ–‡ä»¶&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;\n&amp;lt;html&amp;gt;\n&amp;lt;head&amp;gt;\n&amp;lt;meta charset=&amp;quot;UTF-8&amp;quot;&amp;gt;\n&amp;lt;title&amp;gt;è¿™ä¸ªæ˜¯æ¨¡æ¿&amp;lt;/title&amp;gt;\n&amp;lt;/head&amp;gt;\n&amp;lt;body&amp;gt;\n\t&amp;lt;#--  è¿™æ˜¯æˆ‘çš„æ³¨é‡Šï¼Œä¸ä¼šè¢«è¾“å‡º --&amp;gt;\n\thello ${name}\n&amp;lt;/body&amp;gt;\n&amp;lt;/html&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;3ç”Ÿæˆæ–‡ä»¶\&#34;&gt;3.ç”Ÿæˆæ–‡ä»¶&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºConfigurationå¯¹è±¡ï¼ˆç›´æ¥newï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­æ·»åŠ &lt;code&gt;freemarker&lt;/code&gt;çš„ç‰ˆæœ¬å·ï¼‰&lt;br&gt;\nç¬¬äºŒæ­¥ï¼šè®¾ç½®æ¨¡æ¿æ‰€åœ¨çš„è·¯å¾„&lt;/li&gt;\n&lt;li&gt;ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æ¨¡æ¿æ–‡ä»¶çš„ç¼–ç å­—ç¬¦é›†ï¼ˆä¸€èˆ¬ä½¿ç”¨&lt;code&gt;utf-8&lt;/code&gt;ï¼‰&lt;/li&gt;\n&lt;li&gt;ç¬¬å››æ­¥ï¼šåŠ è½½ä¸€ä¸ªæ¨¡æ¿ï¼Œåˆ›å»ºä¸€ä¸ªæ¨¡æ¿å¯¹è±¡&lt;/li&gt;\n&lt;li&gt;ç¬¬äº”æ­¥ï¼šåˆ›å»ºæ•°æ®æ¨¡å‹ï¼ˆä½¿ç”¨çš„æ˜¯Map&amp;lt;String,Object&amp;gt; è¿˜å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„&lt;code&gt;pojo&lt;/code&gt;å®é™…å¼€å‘ä¸­éƒ½ç”¨mapï¼‰&lt;/li&gt;\n&lt;li&gt;ç¬¬å…­æ­¥ï¼šåˆ›å»ºwriterå¯¹è±¡ï¼Œä¸€èˆ¬ç”¨&lt;code&gt;FileWriter&lt;/code&gt;å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–ï¼Œæ‰§è¡Œç”Ÿæˆçš„æ–‡ä»¶&lt;/li&gt;\n&lt;li&gt;ç¬¬ä¸ƒæ­¥ï¼šè°ƒç”¨æ¨¡æ¿å¯¹è±¡çš„processæ–¹æ³•è¾“å‡ºæ–‡ä»¶&lt;/li&gt;\n&lt;li&gt;ç¬¬å…«æ­¥ï¼šå…³é—­æµ&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public static void main(String[] args) throws Exception{\n    //1.åˆ›å»ºé…ç½®ç±»\n    Configuration configuration = new Configuration(Configuration.getVersion());\n    //2.è®¾ç½®æ¨¡æ¿æ‰€åœ¨ç›®å½•\n    configuration.setDirectoryForTemplateLoading(new File(&amp;quot;F:\\\\workspace002\\\\freemarker-demo01\\\\src\\\\main\\\\resources&amp;quot;));\n    //3.è®¾ç½®ç¼–ç é›†\n    configuration.setDefaultEncoding(&amp;quot;UTF-8&amp;quot;);\n    //4.åŠ è½½æ¨¡æ¿\n    Template template = configuration.getTemplate(&amp;quot;hello.html&amp;quot;);\n    //5.åˆ›å»ºæ•°æ®æ¨¡å‹\n    Map&amp;lt;String, Object&amp;gt; data = new HashMap&amp;lt;String, Object&amp;gt;();\n    data.put(&amp;quot;name&amp;quot;, &amp;quot;å¼ ä¸‰&amp;quot;);\n    //6.åˆ›å»ºwriterå¯¹è±¡ï¼Œå‡†å¤‡ç”¨æ¥è¾“å‡ºæ–‡ä»¶\n    Writer out = new FileWriter(new File(&amp;quot;E:\\\\freemarker\\\\hello.html&amp;quot;));\n    //7,è¾“å‡ºæ–‡ä»¶\n    template.process(data, out);\n    //8.å…³é—­æµ\n    out.close();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;ftlæŒ‡ä»¤\&#34;&gt;FTLæŒ‡ä»¤&lt;/h2&gt;\n&lt;h3 id=\&#34;1assign\&#34;&gt;1.assign&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä½œç”¨ï¼šç”¨äºåœ¨é¡µé¢ä¸Šå®šä¹‰ä¸€ä¸ªå˜é‡&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;\t&amp;lt;#-- assignï¼šç”¨æ¥åœ¨é¡µé¢ä¸Šå®šä¹‰ä¸€ä¸ªå˜é‡ --&amp;gt;\n\t&amp;lt;#assign name=&amp;quot;å¼ ä¸‰&amp;quot;&amp;gt;\n\tè·å–å˜é‡ï¼š${name}\n\t&amp;lt;hr/&amp;gt;\n\t&amp;lt;#-- assign:è¿˜å¯ä»¥ç”¨æ¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡ --&amp;gt;\n\t&amp;lt;#assign info={&amp;quot;name&amp;quot;:&amp;quot;æå››&amp;quot;,&amp;quot;age&amp;quot;:18,&amp;quot;hobs&amp;quot;:&amp;quot;java&amp;quot;}&amp;gt;\n\tè·å–åˆ°å¯¹è±¡çš„å±æ€§:å§“å-${info.name},å¹´é¾„-${info.age},çˆ±å¥½-${info.hobs}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;2include\&#34;&gt;2.include&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä½œç”¨ï¼šæ­¤æŒ‡ä»¤ç”¨äºæ¨¡æ¿æ–‡ä»¶ä¹‹é—´çš„ç›¸äº’åµŒå¥—&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;#include &amp;quot;head.ftl&amp;quot;&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;3if\&#34;&gt;3.if&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä½œç”¨ï¼šç”¨äºæ¡ä»¶åˆ¤æ–­&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;data.put(&amp;quot;success&amp;quot;, true);\n\n&amp;lt;#if success = true&amp;gt;\n\tsuccessçš„å€¼æ˜¯true\n&amp;lt;#else&amp;gt;\n\tsuccessçš„å€¼æ˜¯false\n&amp;lt;/#if&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4list\&#34;&gt;4.list&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;ä½œç”¨ï¼šåœ¨é¡µé¢ä¸­éå†é›†åˆ&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;ul&amp;gt;\n\t&amp;lt;#list mylist as user&amp;gt;\n\t\t&amp;lt;li&amp;gt;${user.name}&amp;lt;/li&amp;gt;\n\t&amp;lt;/#list&amp;gt;\n&amp;lt;/ul&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;5å†…å»ºå‡½æ•°\&#34;&gt;5.å†…å»ºå‡½æ•°&lt;/h3&gt;\n&lt;p&gt;&lt;code&gt;è¯­æ³•ï¼šå˜é‡ + ? + å‡½æ•°å&lt;/code&gt;&lt;/p&gt;\n&lt;h4 id=\&#34;5-1-è·å–é›†åˆçš„å¤§å°size\&#34;&gt;5-1 è·å–é›†åˆçš„å¤§å°(size)&lt;/h4&gt;\n&lt;p&gt;&lt;code&gt;${mylist?size}&lt;/code&gt;&lt;/p&gt;\n&lt;h4 id=\&#34;5-2-è½¬æ¢jsonå­—ç¬¦ä¸²ä¸ºjsonå¯¹è±¡\&#34;&gt;5-2 è½¬æ¢&lt;code&gt;json&lt;/code&gt;å­—ç¬¦ä¸²ä¸º&lt;code&gt;json&lt;/code&gt;å¯¹è±¡&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;#-- å®šä¹‰ä¸€ä¸ªjsonå­—ç¬¦ä¸²  --&amp;gt;\n&amp;lt;#assign text=&amp;quot;{&#39;name&#39;:&#39;å¼ ä¸‰&#39;,&#39;sex&#39;:&#39;ç”·&#39;}&amp;quot;&amp;gt;\n&amp;lt;#-- å°†jsonå­—ç¬¦ä¸²è½¬æ¢æˆjsonå¯¹è±¡ --&amp;gt;\n&amp;lt;#assign person=text?eval&amp;gt;\nå§“åï¼š${person.name}ï¼Œæ€§åˆ«:${person.sex}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;5-3-æ—¥æœŸ\&#34;&gt;5-3 æ—¥æœŸ&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;å¹´æœˆæ—¥ï¼š${mydate?date}\n&amp;lt;br/&amp;gt;\næ—¶åˆ†ç§’ï¼š${mydate?time}\n&amp;lt;br/&amp;gt;\nå¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼š${mydate?datetime}\n&amp;lt;br/&amp;gt;\nè‡ªå®šä¹‰æ—¥æœŸï¼š${mydate?string(&#39;yyyyå¹´MMæœˆddæ—¥  hhæ—¶mmåˆ†ssç§’&#39;)}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;5-4-æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸²\&#34;&gt;5-4 æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸²&lt;/h4&gt;\n&lt;p&gt;&lt;code&gt;${mynum?c}&lt;/code&gt;&lt;/p&gt;\n&lt;h3 id=\&#34;6ç©ºå€¼å¤„ç†\&#34;&gt;6.ç©ºå€¼å¤„ç†&lt;/h3&gt;\n&lt;h4 id=\&#34;6-1-å¤„ç†æ–¹æ¡ˆä¸€ç¼ºå€¼è¡¨è¾¾å¼\&#34;&gt;6-1 å¤„ç†æ–¹æ¡ˆä¸€(ç¼ºå€¼è¡¨è¾¾å¼)&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;${mytest!&amp;quot;å€¼ä¸ºnull&amp;quot;}\n&amp;lt;/br&amp;gt;\n${mytest!}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;6-2-å¤„ç†æ–¹æ¡ˆäºŒ\&#34;&gt;6-2 å¤„ç†æ–¹æ¡ˆäºŒ&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;#if mytest??&amp;gt;\n\tmytestå€¼æ˜¯å­˜åœ¨çš„:${mytest}\n&amp;lt;#else&amp;gt;\n\tmytestçš„å€¼ä¸ºnull\n&amp;lt;/#if&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;7è¿ç®—ç¬¦\&#34;&gt;7.è¿ç®—ç¬¦&lt;/h3&gt;\n&lt;h4 id=\&#34;7-1-ç®—æœ¯è¿ç®—ç¬¦\&#34;&gt;7-1 ç®—æœ¯è¿ç®—ç¬¦&lt;/h4&gt;\n&lt;p&gt;&lt;code&gt;+ - * / %&lt;/code&gt;&lt;/p&gt;\n&lt;h4 id=\&#34;7-2-é€»è¾‘è¿ç®—ç¬¦\&#34;&gt;7-2 é€»è¾‘è¿ç®—ç¬¦&lt;/h4&gt;\n&lt;p&gt;&lt;code&gt;&amp;amp;&amp;amp; ã€ || ã€ !&lt;/code&gt;&lt;/p&gt;\n&lt;h4 id=\&#34;7-3-æ¯”è¾ƒè¿ç®—ç¬¦\&#34;&gt;7-3 æ¯”è¾ƒè¿ç®—ç¬¦&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;= æˆ–è€… ==&lt;/li&gt;\n&lt;li&gt;!=&lt;/li&gt;\n&lt;li&gt;&amp;gt;  æˆ–è€…æ˜¯ gt&lt;/li&gt;\n&lt;li&gt;&amp;lt; æˆ–è€…æ˜¯ lt&lt;/li&gt;\n&lt;li&gt;&amp;gt;= æˆ–è€…æ˜¯ gte&lt;/li&gt;\n&lt;li&gt;&amp;lt;= æˆ–è€…æ˜¯ lte&lt;/li&gt;\n&lt;/ul&gt;\n&#34;,&#34;fileName&#34;:&#34;freemarker&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;freemarker&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;freemarker&#34;,&#34;slug&#34;:&#34;pV4gj9NcU&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/pV4gj9NcU/&#34;}],&#34;date&#34;:&#34;2020-05-04 12:08:06&#34;,&#34;dateFormat&#34;:&#34;2020-05-04&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/freemarker/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;4 min read&#34;,&#34;time&#34;:236000,&#34;words&#34;:853,&#34;minutes&#34;:4},&#34;description&#34;:&#34;1ã€freemarkerå…¥é—¨\n1.ä¾èµ–æ ¸å¿ƒåŒ…\n&amp;lt;!-- ä¾èµ–freemarker --&amp;gt;\n&amp;lt;dependency&amp;gt;\n\t&amp;lt;groupId&amp;gt;org.freemarker&amp;lt;/groupId&amp;gt;\n\t&amp;l...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-freemarker%E5%85%A5%E9%97%A8\&#34;&gt;1ã€freemarkerå…¥é—¨&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1%E4%BE%9D%E8%B5%96%E6%A0%B8%E5%BF%83%E5%8C%85\&#34;&gt;1.ä¾èµ–æ ¸å¿ƒåŒ…&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2%E5%88%9B%E5%BB%BA%E6%A8%A1%E6%9D%BF%E6%96%87%E4%BB%B6\&#34;&gt;2.åˆ›å»ºæ¨¡æ¿æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6\&#34;&gt;3.ç”Ÿæˆæ–‡ä»¶&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#ftl%E6%8C%87%E4%BB%A4\&#34;&gt;FTLæŒ‡ä»¤&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1assign\&#34;&gt;1.assign&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2include\&#34;&gt;2.include&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3if\&#34;&gt;3.if&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4list\&#34;&gt;4.list&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0\&#34;&gt;5.å†…å»ºå‡½æ•°&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-1-%E8%8E%B7%E5%8F%96%E9%9B%86%E5%90%88%E7%9A%84%E5%A4%A7%E5%B0%8Fsize\&#34;&gt;5-1 è·å–é›†åˆçš„å¤§å°(size)&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-2-%E8%BD%AC%E6%8D%A2json%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%BAjson%E5%AF%B9%E8%B1%A1\&#34;&gt;5-2 è½¬æ¢&lt;code&gt;json&lt;/code&gt;å­—ç¬¦ä¸²ä¸º&lt;code&gt;json&lt;/code&gt;å¯¹è±¡&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-3-%E6%97%A5%E6%9C%9F\&#34;&gt;5-3 æ—¥æœŸ&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-4-%E6%95%B0%E5%AD%97%E8%BD%AC%E6%8D%A2%E6%88%90%E5%AD%97%E7%AC%A6%E4%B8%B2\&#34;&gt;5-4 æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸²&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6%E7%A9%BA%E5%80%BC%E5%A4%84%E7%90%86\&#34;&gt;6.ç©ºå€¼å¤„ç†&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-1-%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88%E4%B8%80%E7%BC%BA%E5%80%BC%E8%A1%A8%E8%BE%BE%E5%BC%8F\&#34;&gt;6-1 å¤„ç†æ–¹æ¡ˆä¸€(ç¼ºå€¼è¡¨è¾¾å¼)&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-2-%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88%E4%BA%8C\&#34;&gt;6-2 å¤„ç†æ–¹æ¡ˆäºŒ&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7%E8%BF%90%E7%AE%97%E7%AC%A6\&#34;&gt;7.è¿ç®—ç¬¦&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-1-%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6\&#34;&gt;7-1 ç®—æœ¯è¿ç®—ç¬¦&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-2-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6\&#34;&gt;7-2 é€»è¾‘è¿ç®—ç¬¦&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-3-%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6\&#34;&gt;7-3 æ¯”è¾ƒè¿ç®—ç¬¦&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;blockquote&gt;\n&lt;p&gt;æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;å…³äºæœ¬ç«™\&#34;&gt;ğŸ  å…³äºæœ¬ç«™&lt;/h2&gt;\n&lt;p&gt;ç£•ç£•ç¢°ç¢°çš„å°ç ´ç«™,å‰ä¸ä¹…åŸŸåçš„å¤‡æ¡ˆè¢«æ³¨é”€...åæ¢åˆ°Gridea,æ‰˜ç®¡åœ¨GitHub&lt;/p&gt;\n&lt;h2 id=\&#34;åšä¸»æ˜¯è°\&#34;&gt;ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°&lt;/h2&gt;\n&lt;p&gt;ä¸€ä½æ­£åœ¨åŠªåŠ›æˆé•¿çš„ç å†œ...&lt;/p&gt;\n&lt;h2 id=\&#34;å…´è¶£çˆ±å¥½\&#34;&gt;â›¹ å…´è¶£çˆ±å¥½&lt;/h2&gt;\n&lt;p&gt;åƒ,ç¡,coding&lt;/p&gt;\n&lt;h2 id=\&#34;è”ç³»æˆ‘å‘€\&#34;&gt;ğŸ“¬ è”ç³»æˆ‘å‘€&lt;/h2&gt;\n&lt;p&gt;QQ : 2369710264&lt;/p&gt;\n&#34;,&#34;fileName&#34;:&#34;about&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;å…³äº&#34;,&#34;tags&#34;:[],&#34;date&#34;:&#34;2019-01-25 19:09:48&#34;,&#34;dateFormat&#34;:&#34;2019-01-25&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/about/&#34;,&#34;hideInList&#34;:true,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;1 min read&#34;,&#34;time&#34;:15000,&#34;words&#34;:74,&#34;minutes&#34;:1},&#34;description&#34;:&#34;\næ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤\n\nğŸ  å…³äºæœ¬ç«™\nç£•ç£•ç¢°ç¢°çš„å°ç ´ç«™,å‰ä¸ä¹…åŸŸåçš„å¤‡æ¡ˆè¢«æ³¨é”€...åæ¢åˆ°Gridea,æ‰˜ç®¡åœ¨GitHub\nğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°\nä¸€ä½æ­£åœ¨åŠªåŠ›æˆé•¿çš„ç å†œ...\nâ›¹ å…´è¶£çˆ±å¥½\nåƒ,ç¡,coding\nğŸ“¬ ...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99\&#34;&gt;ğŸ  å…³äºæœ¬ç«™&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8D%9A%E4%B8%BB%E6%98%AF%E8%B0%81\&#34;&gt;ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%85%B4%E8%B6%A3%E7%88%B1%E5%A5%BD\&#34;&gt;â›¹ å…´è¶£çˆ±å¥½&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%81%94%E7%B3%BB%E6%88%91%E5%91%80\&#34;&gt;ğŸ“¬ è”ç³»æˆ‘å‘€&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;}]";
  // var json = escape.substr(1, escape.length - 2);
  // var datas = json.split(',');
  // for (let i=0; i < datas.length; i++) {
  //   let item = datas[i];
  //   let attrs = item.split('34;:&#34')
  //   debugger
  //   console.log(datas[i])
  // }
  let escapeMap = new Map();
  escapeMap.set('&#34;', '"');
  escapeMap.set('&gt;', '>');
  escapeMap.set('&#39;', "'");
  escapeMap.set('&lt;', '<');
  escapeMap.set('&quot;', '"');
  escapeMap.set('&amp;', '&');
</script> -->


<script src=" /media/js/cool.js"></script>

</html>