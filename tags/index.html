<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="浩瀚,浩瀚博客,java">
<meta name="description" content="浩瀚-每天向往着外面的世界">
<meta name="theme-color" content="#000">
<title>浩瀚</title>
<link rel="shortcut icon" href="/favicon.ico?v=1588574527735">
<link rel="stylesheet" href="/styles/main.css">
<link rel="stylesheet" href="/media/css/gemini.css">

<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link
  href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/androidstudio.css"
  rel="stylesheet">

<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
  integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
  integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
  onload="renderMathInElement(document.body);"></script>




</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="gemini">
  <header class="header  ">
    <div class="blog-header box-shadow-wrapper bg-color " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="brand">
              <span>浩瀚</span>
            </a>  
          
        </div>
        
          <p class="subtitle">热爱生活</p>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-home"></i> 首页
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/archives/" target="_self">
                  <i class="fa fa-archive"></i> 归档
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item nav-item-active">
              
              
                <a href="/tags/" target="_self">
                  <i class="fa fa-tags"></i> 标签
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/post/about/" target="_self">
                  <i class="fa fa-user"></i> 关于
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-address-book"></i> 友情链接
                  
                </a>
              </li>
            
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout  gemini">
      <div class="section-layout-wrapper">
        <div id="sidebarMeta" class="sidebar">
    
<div class="sidebar-wrapper box-shadow-wrapper bg-color">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">浩瀚</p>
    
    <div class="site-description right-motion">
      
        <p id="binft">一位正在努力成长的码农</p>
      
    </div>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">6</span>
        <span class="site-item-stat-name">文章</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="">
        <span class="site-item-stat-count">7</span>
        <span class="site-item-stat-name">分类</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">7</span>
        <span class="site-item-stat-name">标签</span>
      </a>
    </div>
  </div>
  
    
      <div class="sidebar-item">
        <span class="site-item-rss">
            <i class="fa fa-rss"></i>
            <a href="https://haohanya.github.io/atom.xml" target="_blank">RSS</a>
        </span>
      </div>
    
  
  


</div>
</div>
<script>
  let sidebarMeta = document.querySelector('#sidebarMeta');
  let scheme = 'gemini';
  let sidebarWrapper = document.querySelector('.sidebar-wrapper');
  if (sidebarMeta && (scheme === 'pisces' || scheme === 'gemini')) {
    document.addEventListener('scroll', function(e) {
      if (document.scrollingElement.scrollTop > parseInt(sidebarMeta.style.marginTop) + 10) {
        sidebarWrapper.classList.add('home-sidebar-fixed')
      } else {
        sidebarWrapper.classList.remove('home-sidebar-fixed')
      }
    });
  }
  </script>
        <div class="section-box box-shadow-wrapper">
          <section class="section tags-section bg-color posts-expand">
            <div class="tags-box">
  <div class="tag-cloud-title">
    目前共计 7 个标签
  </div>
  <div class="tag-cloud-list" id="tags">
    
      
      
        
          
            
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
      <a class="cloud-tag" href="https://haohanya.github.io/tag/YYffL2EXa/" rel="1">spring-security</a>
    
      
      
        
          
        
          
            
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
      <a class="cloud-tag" href="https://haohanya.github.io/tag/POgCfBu13Z/" rel="1">spring</a>
    
      
      
        
          
        
          
        
      
        
          
            
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
      <a class="cloud-tag" href="https://haohanya.github.io/tag/6pWqw4cF3/" rel="1">mybatis</a>
    
      
      
        
          
        
          
        
      
        
          
        
      
        
          
            
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
      <a class="cloud-tag" href="https://haohanya.github.io/tag/CX9XCxDcJ/" rel="1">java</a>
    
      
      
        
          
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            
      
        
          
        
      
        
      
        
          
        
      
      <a class="cloud-tag" href="https://haohanya.github.io/tag/AowgROl25/" rel="1">FastDFS</a>
    
      
      
        
          
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            
      
        
      
        
          
        
      
      <a class="cloud-tag" href="https://haohanya.github.io/tag/pV4gj9NcU/" rel="1">freemarker</a>
    
      
      
        
          
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
            
      
      <a class="cloud-tag" href="https://haohanya.github.io/tag/xi3C-nNGB/" rel="1">Gridea</a>
    
  </div>
</div>
<script>

  let fontStart = 12, fontEnd = 30, colorStart = '#666', colorEnd = '#000';
  let tags = document.querySelector('#tags').children;
  let counts = [];
  for(let i = 0; i < tags.length; i++) {
    counts.push(tags[i].rel);
  }
  let lowest = Math.min.apply(null,counts), highest = Math.max.apply(null,counts);;
  let range = highest - lowest;
  if (range === 0) {
    range = 1;
  }
  let fontIncr, colorIncr;
  fontIncr = (fontEnd - fontStart) / range;
  
  let sColorArr = toRGB(colorStart), eColorArr = toRGB(colorEnd);

  for(let i = 0; i < tags.length; i++) {
    let disCount = tags[i].rel - lowest;
    let fontSize = fontStart + disCount * fontIncr;
    let style = 'font-size: ' + fontSize + 'px;';
    let arr = [];
    for(let c = 0; c < sColorArr.length; c++) {
      if (disCount === 0) {
        disCount = 1;
      }
      let val = (sColorArr[c] - eColorArr[c]) / range * disCount;
      if (val >= 100) {
        val = eColorArr[c];
      } else if (val <= 0) {
        val = sColorArr[c];
      }
      arr[c] = Math.floor(val);
    }
    style += 'color: ' + toHex(arr);
    tags[i].style = style;
  }

  function toRGB(code) {
    if (code.length === 4) {
      code = code.replace(/(\w)(\w)(\w)/gi, "\$1\$1\$2\$2\$3\$3");
    }
    var hex = /(\w{2})(\w{2})(\w{2})/.exec(code);
    return [parseInt(hex[1], 16), parseInt(hex[2], 16), parseInt(hex[3], 16)];
  }

  function toHex(ary) {
    return "#" + ((1 << 24) + (ary[0] << 16) + (ary[1] << 8) + ary[2]).toString(16).slice(1);
  }

</script>
          </section>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <div class="copyright">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | © 2019-2020 Theme By <a href="https://github.com/hsxyhao/gridea-theme-next" target="_blank">HsxyHao</a>
    </div>
    <div class="poweredby">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
  </footer>
  
  
  <div class="gemini back-to-top" id="back_to_top">
    <i class="fa fa-arrow-up"></i>
    
    <span class="scrollpercent">
      <span id="back_to_top_text">0</span>%
    </span>
    
  </div>
  
    
    <div class="bg-img">
      <img src="\media\images\custom-bgImg.jpg" />
    </div>
  
  
  
</div>
<script>

  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
  back2TopText = document.querySelector('#back_to_top_text'),
  drawerBox = document.querySelector('#drawer_box'),
  rightSideBar = document.querySelector('.sidebar'),
  viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {
   
    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function(e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });
  
  window.addEventListener('scroll', function(e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });

  
  let hasCacu = false;
  window.onresize = function() {
    if (window.width > 991) {
      calcuHeight();
    } else {
      hasCacu = false;
    }
  }

  function calcuHeight() {
    // 动态调整站点概览高度
    if (!hasCacu && back2Top.classList.contains('pisces') || back2Top.classList.contains('gemini')) {
      let sideBar = document.querySelector('.sidebar');
      let navUl = document.querySelector('#site_nav');
      sideBar.style = 'margin-top:' + (navUl.offsetHeight + navUl.offsetTop + 15) + 'px;';
      hasCacu = true;
    }
  }
  calcuHeight();
  
  let open = false, MOTION_TIME = 300, RIGHT_MOVE_DIS = '320px';

  if (drawerBox) {
    let rightMotions = document.querySelectorAll('.right-motion');
    let right = drawerBox.classList.contains('right');

    let transitionDir = right ? "transition.slideRightIn" : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS 
      };
      closeProp = {
        paddingRight: '0px'
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS 
      };
      closeProp = {
        paddingLeft: '0px'
      };
    }

    drawerBox.onclick = function() {
      open = !open;
      window.Velocity(rightSideBar, 'stop');
      window.Velocity(viewport, 'stop');
      window.Velocity(rightMotions, 'stop');
      if (open) {
        window.Velocity(rightSideBar, {
          width: RIGHT_MOVE_DIS
        }, {
          duration: MOTION_TIME,
          begin: function() {
            window.Velocity(rightMotions, transitionDir,{ });
          }
        })
        window.Velocity(viewport, openProp,{
          duration: MOTION_TIME
        });
      } else {
        window.Velocity(rightSideBar, {
          width: '0px'
        }, {
          duration: MOTION_TIME,
          begin: function() {
            window.Velocity(rightMotions, {
              opacity: 0
            });
          }
        })
        window.Velocity(viewport, closeProp ,{
          duration: MOTION_TIME
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle('muse-line');
      }
      drawerBox.classList.toggle(sideBarOpen);
    }
  }

  // 链接跳转
  let newWindow = 'false'
  if (newWindow === 'true') {
    let links = document.querySelectorAll('.post-body a')
    links.forEach(item => {
      if (!item.classList.contains('btn')) {
        item.setAttribute("target","_blank");
      }
    })
  }
  // 代码高亮
  hljs.initHighlightingOnLoad();

</script>
  </div>
</body>
<input hidden id="copy" />
<script>
  //拿来主义(真香)^_^，Clipboard 实现摘自掘金 https://juejin.im/post/5aefeb6e6fb9a07aa43c20af
  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // 判断是不是ios端
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //创建文本元素
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //选择内容
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //复制到剪贴板
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("复制错误！请手动复制！")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === '复制成功') {
        console.log('复制操作频率过高');
        return;
      }
      e.srcElement.textContent = '复制成功';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === '复制成功') {
            elem.textContent = '复制代码'
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = '复制代码';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })
</script>
<script src="/media/js/motion.js"></script>

<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script>
  var scroll = new SmoothScroll('a[href*="#"]', {
    speed: 500
  });
</script>

<!-- <div class="search-mask" id="search_mask">
  <div class="search-box">
    <div class="search-title">
      <i class="fa fa-search"></i>
      <div class="input-box">
        <input type="text" placeholder="搜索">
      </div>
      <i class="fa fa-times-circle"></i>
    </div>
    <div class="result">
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/spring-security/"" data-c="
          &lt;h2 id=&#34;单机版&#34;&gt;单机版&lt;/h2&gt;
&lt;p&gt;1.引入依赖&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt; &amp;lt;!-- 身份验证 --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-security-web&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-security-config&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;!-- more --&gt;
&lt;p&gt;2.配置核心配置文件&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;beans:beans xmlns=&amp;quot;http://www.springframework.org/schema/security&amp;quot;
             xmlns:beans=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;
             xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;
             xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
						http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd&amp;quot;&amp;gt;
    &amp;lt;!-- 以下页面不被拦截 --&amp;gt;
    &amp;lt;http pattern=&amp;quot;/login.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/css/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/img/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/js/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/plugins/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;

    &amp;lt;!--
            页面拦截规则
                use-expressions:是否启用spel表达式, 如果为true那么access=&amp;quot;hasRole(&#39;ROLE_USER&#39;)&amp;quot;
        --&amp;gt;
    &amp;lt;!-- 页面拦截规则 --&amp;gt;
    &amp;lt;http use-expressions=&amp;quot;false&amp;quot;&amp;gt;
        &amp;lt;!--
            pattern : 拦截的url
            access : 拥有如下权限允许访问
        --&amp;gt;
        &amp;lt;intercept-url pattern=&amp;quot;/**&amp;quot; access=&amp;quot;ROLE_ADMIN&amp;quot; /&amp;gt;
        &amp;lt;!--
            login-page : 自定义登陆页面
            default-target-url : 登陆成功后跳转的页面,不设定默认跳转上一次访问的页面
            authentication-failure-url : 登陆失败时跳转的url
            always-use-default-target : 登陆成功后 总是跳转到 default-target-url 设定的url
        --&amp;gt;
        &amp;lt;form-login login-page=&amp;quot;/login.html&amp;quot;  default-target-url=&amp;quot;/admin/index.html&amp;quot; authentication-failure-url=&amp;quot;/login.html&amp;quot; always-use-default-target=&amp;quot;true&amp;quot;/&amp;gt;
        &amp;lt;csrf disabled=&amp;quot;true&amp;quot;/&amp;gt;

        &amp;lt;!--
            logout-url : 退出的地址
            logout-success-url : 退出后跳转的地址
        --&amp;gt;
        &amp;lt;logout logout-url=&amp;quot;/logout&amp;quot; logout-success-url=&amp;quot;/login.html&amp;quot;/&amp;gt;
        &amp;lt;!--
            如果使用了iframe,需要指定框架页的策略为 SAMEORIGIN
        --&amp;gt;
        &amp;lt;headers&amp;gt;
            &amp;lt;frame-options policy=&amp;quot;SAMEORIGIN&amp;quot;/&amp;gt;  &amp;lt;!--允许使用frameset --&amp;gt;
        &amp;lt;/headers&amp;gt;
    &amp;lt;/http&amp;gt;

    &amp;lt;!--认证管理器--&amp;gt;
    &amp;lt;authentication-manager&amp;gt;
        &amp;lt;authentication-provider&amp;gt;
            &amp;lt;user-service&amp;gt;
                &amp;lt;!--用户名和密码,权限--&amp;gt;
                &amp;lt;user name=&amp;quot;root&amp;quot; password=&amp;quot;root&amp;quot; authorities=&amp;quot;ROLE_ADMIN&amp;quot;/&amp;gt;
            &amp;lt;/user-service&amp;gt;
        &amp;lt;/authentication-provider&amp;gt;
    &amp;lt;/authentication-manager&amp;gt;

&amp;lt;/beans:beans&amp;gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3.配置web.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;context-param&amp;gt;
    &amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;
    &amp;lt;param-value&amp;gt;classpath:spring/spring-security.xml&amp;lt;/param-value&amp;gt;
&amp;lt;/context-param&amp;gt;
&amp;lt;listener&amp;gt;
    &amp;lt;listener-class&amp;gt;
        org.springframework.web.context.ContextLoaderListener
    &amp;lt;/listener-class&amp;gt;
&amp;lt;/listener&amp;gt;
&amp;lt;filter&amp;gt;
    &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;
    &amp;lt;filter-class&amp;gt;org.springframework.web.filter.DelegatingFilterProxy&amp;lt;/filter-class&amp;gt;
&amp;lt;/filter&amp;gt;
&amp;lt;filter-mapping&amp;gt;
    &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;
    &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
&amp;lt;/filter-mapping&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;连接数据库&#34;&gt;连接数据库&lt;/h2&gt;
&lt;p&gt;1.引入依赖&lt;/p&gt;
&lt;p&gt;2.实现UserDetailsService接口&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package com.jd.shop.service.impl;

import com.jd.pojo.TbSeller;
import com.jd.sellergoods.service.TbSellerService;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;

import java.util.ArrayList;
import java.util.List;

/**
 * 认证类
 * @program: jd
 * @author: 潘
 * @create: 2020-04-29 22:43
 **/
public class UserDetailsServiceImpl implements UserDetailsService{

    private TbSellerService tbSellerService;

    public void setTbSellerService(TbSellerService tbSellerService) {
        this.tbSellerService = tbSellerService;
    }

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {

        if(username == null){
            return null;
        }

        TbSeller byId = tbSellerService.findById(username);

        if(byId == null){
            return null;
        }

        //构建角色列表
        List&amp;lt;GrantedAuthority&amp;gt; list = new ArrayList&amp;lt;&amp;gt;();

        //用户的权限集合
        list.add(new SimpleGrantedAuthority(&amp;quot;ROLE_USER&amp;quot;));

        return new User(username,byId.getPassword(),list);
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3.配置核心配置文件&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;
&amp;lt;beans:beans xmlns=&amp;quot;http://www.springframework.org/schema/security&amp;quot;
             xmlns:beans=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;
             xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;
             xmlns:dubbo=&amp;quot;http://code.alibabatech.com/schema/dubbo&amp;quot;
             xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
						http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&amp;quot;&amp;gt;
    &amp;lt;!-- 以下页面不被拦截 --&amp;gt;
    &amp;lt;http pattern=&amp;quot;/login.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/css/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/img/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/js/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/plugins/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
    &amp;lt;http pattern=&amp;quot;/*.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;
&amp;lt;!--    &amp;lt;http pattern=&amp;quot;/login&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;--&amp;gt;

    &amp;lt;!--
            页面拦截规则
                use-expressions:是否启用spel表达式, 如果为true那么access=&amp;quot;hasRole(&#39;ROLE_USER&#39;)&amp;quot;
        --&amp;gt;
    &amp;lt;!-- 页面拦截规则 --&amp;gt;
    &amp;lt;http use-expressions=&amp;quot;false&amp;quot;&amp;gt;
        &amp;lt;!--
            pattern : 拦截的url
            access : 拥有如下权限允许访问
        --&amp;gt;
        &amp;lt;intercept-url pattern=&amp;quot;/**&amp;quot; access=&amp;quot;ROLE_USER&amp;quot; /&amp;gt;
        &amp;lt;!--
            login-page : 自定义登陆页面
            default-target-url : 登陆成功后跳转的页面,不设定默认跳转上一次访问的页面
            authentication-failure-url : 登陆失败时跳转的url
            always-use-default-target : 登陆成功后 总是跳转到 default-target-url 设定的url
        --&amp;gt;
        &amp;lt;form-login login-processing-url=&amp;quot;/login&amp;quot; login-page=&amp;quot;/shoplogin.html&amp;quot;  default-target-url=&amp;quot;/admin/index.html&amp;quot; authentication-failure-url=&amp;quot;/shoplogin.html&amp;quot; always-use-default-target=&amp;quot;true&amp;quot;/&amp;gt;
        &amp;lt;csrf disabled=&amp;quot;true&amp;quot;/&amp;gt;

        &amp;lt;!--
            logout-url : 退出的地址
            logout-success-url : 退出后跳转的地址
        --&amp;gt;
        &amp;lt;logout logout-url=&amp;quot;/logout&amp;quot; logout-success-url=&amp;quot;/shoplogin.html&amp;quot;/&amp;gt;
        &amp;lt;!--
            如果使用了iframe,需要指定框架页的策略为 SAMEORIGIN
        --&amp;gt;
        &amp;lt;headers&amp;gt;
            &amp;lt;frame-options policy=&amp;quot;SAMEORIGIN&amp;quot;/&amp;gt;  &amp;lt;!--允许使用frameset --&amp;gt;
        &amp;lt;/headers&amp;gt;
    &amp;lt;/http&amp;gt;

    &amp;lt;!--认证管理器--&amp;gt;
    &amp;lt;authentication-manager&amp;gt;
        &amp;lt;authentication-provider user-service-ref=&amp;quot;userDetailsServiceImpl&amp;quot;/&amp;gt;
    &amp;lt;/authentication-manager&amp;gt;

    &amp;lt;!-- 引用dubbo 服务 --&amp;gt;
    &amp;lt;dubbo:application name=&amp;quot;jd-shop-web&amp;quot; /&amp;gt;
    &amp;lt;dubbo:registry address=&amp;quot;zookeeper://47.98.157.69:2181&amp;quot; timeout=&amp;quot;30000&amp;quot;/&amp;gt;
    &amp;lt;dubbo:annotation package=&amp;quot;com.jd.shop.controller&amp;quot; /&amp;gt;
    
    &amp;lt;dubbo:reference interface=&amp;quot;com.jd.sellergoods.service.TbSellerService&amp;quot; id=&amp;quot;tbSellerService&amp;quot;/&amp;gt;

    &amp;lt;beans:bean id=&amp;quot;userDetailsServiceImpl&amp;quot; class=&amp;quot;com.jd.shop.service.impl.UserDetailsServiceImpl&amp;quot;&amp;gt;
        &amp;lt;beans:property name=&amp;quot;tbSellerService&amp;quot; ref=&amp;quot;tbSellerService&amp;quot;/&amp;gt;
    &amp;lt;/beans:bean&amp;gt;

&amp;lt;/beans:beans&amp;gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4.配置web.xml文件&lt;/p&gt;
&lt;h2 id=&#34;brcy加密&#34;&gt;Brcy加密&lt;/h2&gt;
&lt;p&gt;1.编写java&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
String encode = passwordEncoder.encode(tbSeller.getPassword());
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2.编写配置文件&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--认证管理器--&amp;gt;
&amp;lt;authentication-manager&amp;gt;
    &amp;lt;authentication-provider user-service-ref=&amp;quot;userDetailsServiceImpl&amp;quot;&amp;gt;
        &amp;lt;!-- 这句话表示在登陆时使用bcry加密验证 --&amp;gt;
        &amp;lt;password-encoder ref=&amp;quot;bCryptPasswordEncoder&amp;quot;/&amp;gt;
    &amp;lt;/authentication-provider&amp;gt;
&amp;lt;/authentication-manager&amp;gt;
&amp;lt;!--配置加密,在认证管理器中引用--&amp;gt;
&amp;lt;beans:bean id=&amp;quot;bCryptPasswordEncoder&amp;quot; class=&amp;quot;org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;记住我&#34;&gt;记住我&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;input value=&amp;quot;1&amp;quot; name=&amp;quot;remember-me&amp;quot;/&amp;gt;

&lt;/code&gt;&lt;/pre&gt;
">Spring-Security</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/mybatis/"" data-c="
          &lt;h1 id=&#34;快速开始&#34;&gt;快速开始&lt;/h1&gt;
&lt;h2 id=&#34;1-mybatis核心配置文件&#34;&gt;1、MyBatis核心配置文件&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE configuration
  PUBLIC &amp;quot;-//mybatis.org//DTD Config 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-config.dtd&amp;quot;&amp;gt;
&amp;lt;configuration&amp;gt;
  &amp;lt;!-- 配置数据源 --&amp;gt;
  &amp;lt;environments default=&amp;quot;development&amp;quot;&amp;gt;
    &amp;lt;environment id=&amp;quot;development&amp;quot;&amp;gt;
     &amp;lt;!--事务处理方式--&amp;gt;
      &amp;lt;transactionManager type=&amp;quot;JDBC&amp;quot;/&amp;gt;
      &amp;lt;dataSource type=&amp;quot;POOLED&amp;quot;&amp;gt;
        &amp;lt;property name=&amp;quot;driver&amp;quot; value=&amp;quot;com.mysql.jdbc.Driver&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;url&amp;quot; value=&amp;quot;jdbc:mysql://localhost:3306/mybatis&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;username&amp;quot; value=&amp;quot;root&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;password&amp;quot; value=&amp;quot;root&amp;quot;/&amp;gt;
      &amp;lt;/dataSource&amp;gt;
    &amp;lt;/environment&amp;gt;
  &amp;lt;/environments&amp;gt;
&amp;lt;!--映射器：每一个Mapper接口都应该在核心配置文件&amp;lt;mappers&amp;gt;标签中注册--&amp;gt;
  &amp;lt;mappers&amp;gt;
  	&amp;lt;!--使用XML配置文件注册--&amp;gt;
    &amp;lt;mapper resource=&amp;quot;com/cn/mybatis/dao/IcpInfoMapper.xml&amp;quot;/&amp;gt;
    &amp;lt;!--使用类注册方式--&amp;gt;
    &amp;lt;mapper class=&amp;quot;com.cn.mybatis.dao.IcpInfoMapper&amp;quot; /&amp;gt;
  &amp;lt;/mappers&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;2-orm映射文件mapperxml&#34;&gt;2、ORM映射文件mapper.xml&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE mapper
  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;
&amp;lt;!-- 这个配置文件主要是配置实体类和数据库中的表映射关系 --&amp;gt;
&amp;lt;!-- mapper：映射信息配置 namesapce:如果是在ibatis的开发中，名字可以随便取，但是在mybatis中将有特殊的意义 --&amp;gt;
&amp;lt;mapper namespace=&amp;quot;test&amp;quot;&amp;gt;
	&amp;lt;!-- 查询所有的书籍信息 select:专门用于查询的statement
	     id:是statement的唯一标识符
	     resultType:返回值得类型（跟返回的个数无关），将返回类型的全限定名写到这里
	 --&amp;gt;
	&amp;lt;select id=&amp;quot;selectAllBooks&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Book&amp;quot;&amp;gt;
		select * from book
	&amp;lt;/select&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;3-日志文件&#34;&gt;3、日志文件&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;log4j.properties&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;log4j.rootLogger=DEBUG,A1
log4j.logger.org.mybatis=DEBUG
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss,SSS} [%t] [%c]-[%p] %m%n
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4-测试&#34;&gt;4、测试&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//查询全部
@Test
public void testFindAll() throws Exception{
    //通过流的方式读取配置文件
    InputStream inputStream = Resources.getResourceAsStream(&amp;quot;mybatis-config.xml&amp;quot;);
    //1.读取配置文件,得到SqlSessionFactory
    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream );
    //2.创建SqlSession
    SqlSession sqlSession = sqlSessionFactory.openSession();
    //3.查询所有(参数：是namespace.statementId)
    List&amp;lt;Book&amp;gt; list = sqlSession.selectList(&amp;quot;test.selectAllBooks&amp;quot;);
    System.out.println(list);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;properties属性&#34;&gt;properties属性&lt;/h1&gt;
&lt;p&gt;创建一个外部的properties文件&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;jdbc.dirver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;amp;characterEncoding=utf-8
jdbc.username=root
jdbc.password=root
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在核心配置文件中引用properties文件&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;properties resource=&amp;quot;jdbc.properties&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;使用&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;${jdbc.dirver}
${jdbc.url}
${jdbc.username}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;settings&#34;&gt;settings&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;mapUnderscoreToCamelCase&lt;/code&gt;:开启驼峰命名，可以帮助我们完成数据库的经典命名规则，到java的经典命名规则（驼峰命名发）&lt;/p&gt;
&lt;p&gt;如：数据库叫user_name  到java类（&lt;code&gt;pojo&lt;/code&gt;）中是&lt;code&gt;userName&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;settings&amp;gt;
    &amp;lt;!-- 开启驼峰命名 --&amp;gt;
    &amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
    &amp;lt;!--指定 MyBatis 所用日志的具体实现，未指定时将自动查找。
	日志类型：
	STDOUT_LOGGING 不需要导入jar包，因为是mybatis自带
	NO_LOGGING 代表不需要日志输出
	SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING
 	--&amp;gt;
    &amp;lt;setting name=&amp;quot;logImpl&amp;quot; value=&amp;quot;STDOUT_LOGGING&amp;quot;/&amp;gt;
&amp;lt;/settings&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;分析日志输出&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;MyBatis.assets%5Cimage-20200307124719177.png&#34; alt=&#34;image-20200307124719177&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h1 id=&#34;typealiases类型别名&#34;&gt;typeAliases（类型别名）&lt;/h1&gt;
&lt;h2 id=&#34;自定义别名&#34;&gt;自定义别名&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--别名，用于简化--&amp;gt;
&amp;lt;typeAliases&amp;gt;
    &amp;lt;!--type：包+类名，alias：别名--&amp;gt;
    &amp;lt;typeAlias type=&amp;quot;com.cn.mybatis.entity.IcpInfo&amp;quot; alias=&amp;quot;Icp&amp;quot; /&amp;gt;
    &amp;lt;!--使用包的方式
		每一个在包 domain.blog 中的 Java Bean，在没有注解的情况下
		会使用 Bean 的首字母小写的非限定类名来作为它的别名
		(这句话意思是：@Alias(&amp;quot;author&amp;quot;)
		在使用包方式时，javaBean没有添加注解指定别名时自动使用类名{首字母小写})
	--&amp;gt;
    &amp;lt;package name=&amp;quot;com.cn.mybatis.entity&amp;quot;/&amp;gt;
&amp;lt;/typeAliases&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;plugins插件&#34;&gt;plugins（插件）&lt;/h1&gt;
&lt;h1 id=&#34;xml映射&#34;&gt;XML映射&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cache&lt;/code&gt; – 对给定命名空间的缓存配置。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cache-ref&lt;/code&gt; – 对其他命名空间缓存配置的引用。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;resultMap&lt;/code&gt; – 是最复杂也是最强大的元素，用来描述如何从数据库结果集中来加载对象。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;parameterMap&lt;/code&gt; – 已被废弃！老式风格的参数映射。更好的办法是使用内联参数，此元素可能在将来被移除。文档中不会介绍此元素。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sql&lt;/code&gt; – 可被其他语句引用的可重用语句块。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;insert&lt;/code&gt; – 映射插入语句&lt;/li&gt;
&lt;li&gt;&lt;code&gt;update&lt;/code&gt; – 映射更新语句&lt;/li&gt;
&lt;li&gt;&lt;code&gt;delete&lt;/code&gt; – 映射删除语句&lt;/li&gt;
&lt;li&gt;&lt;code&gt;select&lt;/code&gt; – 映射查询语句&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;select-查询语句&#34;&gt;select 查询语句&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--
	id：一般和Mepper接口的方法名称相同，在命名空间中唯一的标识符，可以被用来引用这条语句。
	parameterType：接收一个int类型的参数
		接收参数使用#{ }包裹着，这个参数对应着接口的参数
	resultType：返回一个hashmap 类型的数据

--&amp;gt;
&amp;lt;select id=&amp;quot;selectPerson&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;hashmap&amp;quot;&amp;gt;
  SELECT * FROM PERSON WHERE ID = #{id}
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;insert-updatea-delete&#34;&gt;insert updatea delete&lt;/h2&gt;
&lt;p&gt;在使用这些语句的时候需要提交事务：session.commit();&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfo&amp;quot; parameterType=&amp;quot;icpInfo&amp;quot; &amp;gt;
    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values (#{icp}, #{name}, #{address}, #{home}, #{introduce}, #{author}, #{email}, #{date}, #{type})
&amp;lt;/insert&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;获取插入数据后的主键id：useGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfo&amp;quot; useGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&amp;gt;
    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values (#{icp}, #{name}, #{address}, #{home}, #{introduce}, #{author}, #{email}, #{date}, #{type})
&amp;lt;/insert&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;插入多条数据：传入一个 数组或集合，并返回自动生成的主键。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfoList&amp;quot; useGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&amp;gt;
    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values
    &amp;lt;foreach collection=&amp;quot;list&amp;quot; item=&amp;quot;item&amp;quot; separator=&amp;quot;,&amp;quot;&amp;gt;
        (#{item.icp}, #{item.name}, #{item.address}, #{item.home}, #{item.introduce}, #{item.author}, #{item.email}, #{item.date}, #{item.type})
    &amp;lt;/foreach&amp;gt;
&amp;lt;/insert&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;动态sql&#34;&gt;动态SQL&lt;/h1&gt;
&lt;h2 id=&#34;if&#34;&gt;if&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;对于输入映射类型为pojo类型：
#{pojo中的属性名}   ${pojo中的属性名}
&amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;
    and grade_id = #{gradeId}
&amp;lt;/if&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;sql注入的问题&#34;&gt;sql注入的问题&lt;/h2&gt;
&lt;p&gt;在使用${}会出现&lt;code&gt;sql&lt;/code&gt;注入的问题（拼接字符串，没有使用预编译）&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;如果为简单数据类型需要把name换成_parameter
&amp;lt;bind name=&amp;quot;n&amp;quot; value=&amp;quot;&#39;%&#39;+name+&#39;%&#39;&amp;quot;/&amp;gt;
and name like #{n}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;when&#34;&gt;when&lt;/h2&gt;
&lt;p&gt;应用场景：可能查询全部，有可能根据条件查询，并且如果第一个条件前面有and，where子句会自动把这个and删除再作为sql语句运行&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;select id=&amp;quot;findStudentByLike&amp;quot; resultType=&amp;quot;student&amp;quot; parameterType=&amp;quot;student&amp;quot;&amp;gt;
    select * from student
    &amp;lt;where&amp;gt;
        &amp;lt;if test=&amp;quot;name != null and name != &#39;&#39;&amp;quot;&amp;gt;
            &amp;lt;bind name=&amp;quot;n&amp;quot; value=&amp;quot;&#39;%&#39;+name+&#39;%&#39;&amp;quot;/&amp;gt;
            and name like #{n}
        &amp;lt;/if&amp;gt;
        &amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;
            and grade_id = #{gradeId}
        &amp;lt;/if&amp;gt;
    &amp;lt;/where&amp;gt;
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;choose&#34;&gt;choose&lt;/h2&gt;
&lt;p&gt;其实就是java中的switch  或者 if...else if ...else&lt;/p&gt;
&lt;h2 id=&#34;set&#34;&gt;set&lt;/h2&gt;
&lt;p&gt;set标签作用：能自动的判断是否在sql语句的结尾处是否要添加逗号，如果不需要逗号它自动帮我们删除&lt;/p&gt;
&lt;p&gt;(和where一样不会自动添加)&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;update id=&amp;quot;updateStudentByById&amp;quot; parameterType=&amp;quot;student&amp;quot;&amp;gt;
    update student
    &amp;lt;set&amp;gt;
        &amp;lt;if test=&amp;quot;name != null&amp;quot;&amp;gt;
            name = #{name},
        &amp;lt;/if&amp;gt;
        &amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;
            grade_id = #{gradeId}
        &amp;lt;/if&amp;gt;
    &amp;lt;/set&amp;gt;
    where id = #{id}
&amp;lt;/update&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;foreach&#34;&gt;foreach&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;select id=&amp;quot;findStudentsById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;student&amp;quot;&amp;gt;
        select * from student where id in
        &amp;lt;foreach collection=&amp;quot;list&amp;quot; open=&amp;quot;(&amp;quot; separator=&amp;quot;,&amp;quot; close=&amp;quot;)&amp;quot; item=&amp;quot;item&amp;quot;&amp;gt;
            #{item}
        &amp;lt;/foreach&amp;gt;
    &amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;sql片段&#34;&gt;SQL片段&lt;/h1&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;sql id=&amp;quot;sql&amp;quot;&amp;gt;
    select * from student
&amp;lt;/sql&amp;gt;
调用
&amp;lt;include refid=&amp;quot;sql&amp;quot;&amp;gt;&amp;lt;/include&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;多表联合查询&#34;&gt;多表联合查询&lt;/h1&gt;
&lt;h2 id=&#34;vo&#34;&gt;VO&lt;/h2&gt;
&lt;p&gt;解决思路：要求返回的是一个对象，如果&lt;code&gt;pojo&lt;/code&gt;不能满足(要返回的列不存在&lt;code&gt;pojo&lt;/code&gt;中)，那么创建一个VO对象，这个VO对象中包含了所有要返回的字段&lt;/p&gt;
&lt;h3 id=&#34;创建一个vo&#34;&gt;创建一个VO&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package cn.kgc.vo;

import cn.kgc.pojo.Student;
//继承的原则：要返回的字段哪个pojo中多，那么就继承哪个pojo
public class StudentVO extends Student{
	private String gradeName;

	public String getGradeName() {
		return gradeName;
	}

	public void setGradeName(String gradeName) {
		this.gradeName = gradeName;
	}	
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;编写mapper接口&#34;&gt;编写mapper接口&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public interface StudentMapper {
	/**
	 * 查询学生信息，要求展示学生信息中年级名称(联合查询)
	 */
	List&amp;lt;StudentVO&amp;gt; getStudentVO();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;编写mapperxml&#34;&gt;编写mapper.xml&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;select id=&amp;quot;getStudentVO&amp;quot; resultType=&amp;quot;cn.kgc.vo.StudentVO&amp;quot;&amp;gt;
	SELECT s.*,g.name gradeName FROM student s,grade g WHERE s.grade_id=g.id
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;一对一&#34;&gt;一对一&lt;/h2&gt;
&lt;h3 id=&#34;按照查询嵌套处理&#34;&gt;按照查询嵌套处理&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;resultMap id=&amp;quot;IcpInfoType&amp;quot; type=&amp;quot;icpInfo&amp;quot;&amp;gt;
&amp;lt;!-- property：实体类的对象属性名，
	column：数据库中关联的列，
	javaType：实体类对象，
	select：一个sql语句查询的是实体对象的sql
--&amp;gt;
    &amp;lt;association property=&amp;quot;type&amp;quot; column=&amp;quot;type&amp;quot; javaType=&amp;quot;type&amp;quot; select=&amp;quot;getTypeList&amp;quot; /&amp;gt;
&amp;lt;/resultMap&amp;gt;
&amp;lt;select id=&amp;quot;getList&amp;quot; resultMap=&amp;quot;IcpInfoType&amp;quot;&amp;gt;
    select * from icpinfo
&amp;lt;/select&amp;gt;
&amp;lt;!--这个typeID 获取的是 column=&amp;quot;type&amp;quot; 这个列的值--&amp;gt;
&amp;lt;select id=&amp;quot;getTypeList&amp;quot; resultType=&amp;quot;type&amp;quot; &amp;gt;
    select * from type where tid = #{id}
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;按照结果嵌套处理&#34;&gt;按照结果嵌套处理&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;select id=&amp;quot;getList2&amp;quot; resultMap=&amp;quot;getList2&amp;quot; &amp;gt;
    select icp, name, address, home, introduce, author, email, `date`, type, tid, tname from icpinfo i ,type t
    where i.type = t.tid
&amp;lt;/select&amp;gt;
&amp;lt;!--type = 要查询的对象--&amp;gt;
&amp;lt;resultMap id=&amp;quot;getList2&amp;quot; type=&amp;quot;icpInfo&amp;quot; &amp;gt;
    &amp;lt;!--property=实体类的属性名 column=列名or别名--&amp;gt;
    &amp;lt;result property=&amp;quot;icp&amp;quot; column=&amp;quot;icp&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;name&amp;quot; column=&amp;quot;name&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;address&amp;quot; column=&amp;quot;address&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;home&amp;quot; column=&amp;quot;home&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;introduce&amp;quot; column=&amp;quot;introduce&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;author&amp;quot; column=&amp;quot;author&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;email&amp;quot; column=&amp;quot;email&amp;quot; /&amp;gt;
    &amp;lt;result property=&amp;quot;date&amp;quot; column=&amp;quot;date&amp;quot; /&amp;gt;
    &amp;lt;!--复杂类型
		property=在icpInfo里的属性是type
		javaType=type的对象
	--&amp;gt;
    &amp;lt;association property=&amp;quot;type&amp;quot; javaType=&amp;quot;type&amp;quot; &amp;gt;
        &amp;lt;result property=&amp;quot;tid&amp;quot; column=&amp;quot;tid&amp;quot; /&amp;gt;
        &amp;lt;result property=&amp;quot;tname&amp;quot; column=&amp;quot;tname&amp;quot; /&amp;gt;
    &amp;lt;/association&amp;gt;
&amp;lt;/resultMap&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;一对多&#34;&gt;一对多&lt;/h2&gt;
&lt;p&gt;一对多只需要把association换成&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!--ofType=&amp;quot;&amp;quot;
	集合中的泛型信息
--&amp;gt;
&amp;lt;collection property=&amp;quot;&amp;quot; ofType=&amp;quot;&amp;quot;&amp;gt;&amp;lt;/collection&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE mapper
  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;
&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.GradeMapper&amp;quot;&amp;gt;
	&amp;lt;!-- 查询年级，把属于这个年级的所有学生查询出来 --&amp;gt;
	&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Grade&amp;quot; id=&amp;quot;gradeStudentMap&amp;quot;&amp;gt;
		&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
		&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
		&amp;lt;!-- collection:一对多的映射关系
			property:表示一对多映射关系在pojo中的属性名
			ofType:表示该集合的泛型的全限定名
		 --&amp;gt;
		&amp;lt;collection property=&amp;quot;studentList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.Student&amp;quot;&amp;gt;
			&amp;lt;id column=&amp;quot;sid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
			&amp;lt;result column=&amp;quot;sname&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
			&amp;lt;!-- gradeid因为在grade中已经有了，所以不需要再配置 --&amp;gt;
		&amp;lt;/collection&amp;gt;
	&amp;lt;/resultMap&amp;gt;
	
	&amp;lt;select id=&amp;quot;getGradeById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultMap=&amp;quot;gradeStudentMap&amp;quot;&amp;gt;
		SELECT 
		  g.*,
		  s.id sid,
		  s.name sname
		FROM
		  grade g,
		  student s 
		WHERE g.id = s.grade_id 
		  AND g.id = #{id}
	&amp;lt;/select&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;多对多&#34;&gt;多对多&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE mapper
  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;
&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;
	&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Student&amp;quot; id=&amp;quot;studentMap&amp;quot;&amp;gt;
		&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
		&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
		&amp;lt;result column=&amp;quot;grade_id&amp;quot; property=&amp;quot;gradeId&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
		&amp;lt;!-- 一对多的映射关系 --&amp;gt;
		&amp;lt;collection property=&amp;quot;studentCourseList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.StudentCourse&amp;quot;&amp;gt;
			&amp;lt;id column=&amp;quot;scid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
			&amp;lt;!-- studentCourse和course是一对一的映射俄关系 --&amp;gt;
			&amp;lt;association property=&amp;quot;course&amp;quot; javaType=&amp;quot;cn.kgc.pojo.Course&amp;quot;&amp;gt;
				&amp;lt;id column=&amp;quot;cid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
				&amp;lt;result column=&amp;quot;cname&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
			&amp;lt;/association&amp;gt;
		&amp;lt;/collection&amp;gt;
	&amp;lt;/resultMap&amp;gt;

	&amp;lt;select id=&amp;quot;getStudentById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultMap=&amp;quot;studentMap&amp;quot;&amp;gt;
	SELECT 
	  s.*,
	  sc.id scid,
	  c.id cid,
	  c.name cname 
	FROM
	  student s,
	  student_course sc,
	  course c 
	WHERE s.id = sc.sid 
	  AND c.id = sc.cid 
	  AND s.id = #{id}
	&amp;lt;/select&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;延迟加载&#34;&gt;延迟加载&lt;/h1&gt;
&lt;p&gt;什么是懒加载&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;懒加载：就是在需要数据的时候才加载，不需要数据的时候不加载，这样有利于系统性能的提升，这就是懒加载（也叫做延迟加载）

好处：在关联查询的时候，根据需求进行关联查询，大大提高了数据库的查询性能。（单表的查询效率永远要比多表联合查询的效率高）

坏处：因为需要用到数据的时候才去做查询，这样大批量的数据查询的时候等待时间会变得更长，造成用户的体验下降
(select * from student)会把所有的学生的年级编号也在里面
突然要查询年级信息，它底层操作是：根据年级id一个一个去执行查询
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;使用association实现懒加载&#34;&gt;使用&lt;code&gt;association&lt;/code&gt;实现懒加载&lt;/h2&gt;
&lt;h3 id=&#34;核心配置开启懒加载&#34;&gt;核心配置开启懒加载&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt; &amp;lt;settings&amp;gt;
  	&amp;lt;!-- 开启懒加载 --&amp;gt;
  	&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
  	&amp;lt;!-- mybatis3.4.1之前默认值是true，需要设置为false（将积极加载改为消息加载也就是按需加载） --&amp;gt;
  	&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;
  	&amp;lt;!-- 因为我这里为了打印对象里信息的方便，所以都重写了toString方法，mybatis中默认是如果使用(equals,clone,hashCode,toString任意一个方法)那么就不再延迟加载 --&amp;gt;
  	&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;
  &amp;lt;/settings&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;GradeMapper.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE mapper
  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;
&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.GradeMapper&amp;quot;&amp;gt;
	&amp;lt;!-- 根据id查询年级对象 --&amp;gt;
	&amp;lt;select id=&amp;quot;getGradeById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Grade&amp;quot;&amp;gt;
		select * from grade where id=#{id}
	&amp;lt;/select&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;StudentMapper.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE mapper
  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;
&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;
	
	&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Student&amp;quot; id=&amp;quot;studentMap&amp;quot;&amp;gt;
		&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
		&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
		&amp;lt;!-- 一个学生对应一个年级：一对一的关系映射
			对于association方式的懒加载：
				select:此处要求是根据年级的id查询年级对象的mapper接口中方法的全限定名
				column:在数据库中表与表之间关系的外键
		 --&amp;gt;
		&amp;lt;association property=&amp;quot;grade&amp;quot; javaType=&amp;quot;cn.kgc.pojo.Grade&amp;quot;
			select=&amp;quot;cn.kgc.mapper.GradeMapper.getGradeById&amp;quot; column=&amp;quot;grade_id&amp;quot;&amp;gt;&amp;lt;/association&amp;gt;
	&amp;lt;/resultMap&amp;gt;
	
	&amp;lt;select id=&amp;quot;getAllStudents&amp;quot; resultMap=&amp;quot;studentMap&amp;quot;&amp;gt;
		select * from student
	&amp;lt;/select&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;使用collection实现懒加载&#34;&gt;使用&lt;code&gt;collection&lt;/code&gt;实现懒加载&lt;/h2&gt;
&lt;h3 id=&#34;核心配置开启懒加载-2&#34;&gt;核心配置开启懒加载&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;settings&amp;gt;
&amp;lt;!-- 开启懒加载 --&amp;gt;
&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
&amp;lt;!-- mybatis3.4.1之前默认值是true，需要设置为false（将积极加载改为消息加载也就是按需加载） --&amp;gt;
&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;
&amp;lt;!-- 因为我这里为了打印对象里信息的方便，所以都重写了toString方法，mybatis中默认是如果使用(equals,clone,hashCode,toString任意一个方法)那么就不再延迟加载 --&amp;gt;
&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;
&amp;lt;/settings&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;StudentMapper.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;select id=&amp;quot;getStudentsByGradeId&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Student&amp;quot;&amp;gt;
    select * from student where grade_id=#{gradeId}
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;GradeMapper.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- 查询年级信息，有可能查询年级中所有的学生信息 --&amp;gt;
&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Grade&amp;quot; id=&amp;quot;gradeMap&amp;quot;&amp;gt;
    &amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;
    &amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;
    &amp;lt;!-- 一对多的映射关系
        select:根据年级编号查询学生列表的方法
        column:就是grade的id（它就是grade表的主键）
     --&amp;gt;
    &amp;lt;collection property=&amp;quot;studentList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.Student&amp;quot;
        select=&amp;quot;cn.kgc.mapper.StudentMapper.getStudentsByGradeId&amp;quot; column=&amp;quot;id&amp;quot;&amp;gt;&amp;lt;/collection&amp;gt;
&amp;lt;/resultMap&amp;gt;
&amp;lt;select id=&amp;quot;getAllGrades&amp;quot; resultMap=&amp;quot;gradeMap&amp;quot;&amp;gt;
    select * from grade
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;mybatis缓存&#34;&gt;mybatis缓存&lt;/h1&gt;
&lt;h2 id=&#34;一级缓存&#34;&gt;一级缓存&lt;/h2&gt;
&lt;p&gt;它是&lt;code&gt;SqlSession&lt;/code&gt;级别的，同一个&lt;code&gt;SqlSession&lt;/code&gt;才涉及到一级缓存&lt;/p&gt;
&lt;p&gt;一级缓存是默认存在，它不需要去做任何的设置&lt;/p&gt;
&lt;h2 id=&#34;二级缓存&#34;&gt;二级缓存&lt;/h2&gt;
&lt;p&gt;它是mapper级别的，需要开启才能使用&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;缓存在实际开发中是很有用的，它能大大的提升查询的效率，提高程序的性能&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;在核心配置文件中开启二级缓存&#34;&gt;在核心配置文件中开启二级缓存&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- 开启二级缓存(默认值就是true，准备我们使用二级缓存，可以不用设置) --&amp;gt;
&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;在mappexml中开启二级缓存&#34;&gt;在mappe.xml中开启二级缓存&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;
	&amp;lt;!-- 在StudentMapper.xml中开启二级缓存 ,因为mybatis中二级缓存的实现类只有一个，默认就是这个，type可以省略不写--&amp;gt;
	&amp;lt;cache type=&amp;quot;org.apache.ibatis.cache.impl.PerpetualCache&amp;quot;&amp;gt;&amp;lt;/cache&amp;gt;
&amp;lt;/mapper&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;pojo需要实现序列化接口&#34;&gt;pojo需要实现序列化接口&lt;/h3&gt;
&lt;p&gt;因为缓存的时候要将pojo流化然后存储在内存中，查询再取出&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class Student implements Serializable{
}
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;补充：在mapper应用二级缓存后，默认是所有的查询方法都开启二级缓存，如果要某个查询不使用二级缓存可以添加&lt;code&gt;useCache=&amp;quot;false&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;注解开发入门&#34;&gt;注解开发入门&lt;/h1&gt;
&lt;p&gt;在spring4.x开始就推荐我们使用注解，完全去取代xml的配置文件&lt;/p&gt;
&lt;p&gt;目前最主流的开发方式就是：只使用注解，不再使用xml配置&lt;/p&gt;
&lt;p&gt;mybatis注解方式的开发是一种未来的趋势,这种方式比传统的xml的开发要简单并且高效&lt;/p&gt;
&lt;h2 id=&#34;导入jar包&#34;&gt;导入jar包&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;dependencies&amp;gt;
    &amp;lt;!-- mysql驱动 --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;mysql&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;mysql-connector-java&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;5.1.38&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;!-- mybatis的核心包 --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.mybatis&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;mybatis&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;3.4.6&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;!-- junit单元测试 --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;junit&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;4.12&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;!-- slf4j-log4j12  (slf4j:酸辣粉) --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;slf4j-log4j12&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.7.25&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
&amp;lt;/dependencies&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;配置文件&#34;&gt;配置文件&lt;/h2&gt;
&lt;p&gt;log4j.properties&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;log4j.rootLogger=DEBUG,A1
log4j.logger.org.mybatis=DEBUG
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss,SSS} [%t] [%c]-[%p] %m%n
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;jdbc.properties&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-properties&#34;&gt;jdbc.dirver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;amp;characterEncoding=utf-8
jdbc.username=root
jdbc.password=root
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;mybatis-config.xml&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;
&amp;lt;!DOCTYPE configuration
  PUBLIC &amp;quot;-//mybatis.org//DTD Config 3.0//EN&amp;quot;
  &amp;quot;http://mybatis.org/dtd/mybatis-3-config.dtd&amp;quot;&amp;gt;
&amp;lt;configuration&amp;gt;
  &amp;lt;!-- 引入外部的属性文件 --&amp;gt;
  &amp;lt;properties resource=&amp;quot;jdbc.properties&amp;quot;&amp;gt;&amp;lt;/properties&amp;gt;
  &amp;lt;settings&amp;gt;
  	&amp;lt;!-- 开启驼峰命名 --&amp;gt;
  	&amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
  &amp;lt;/settings&amp;gt;
  &amp;lt;!-- 配置数据源 --&amp;gt;
  &amp;lt;environments default=&amp;quot;development&amp;quot;&amp;gt;
    &amp;lt;environment id=&amp;quot;development&amp;quot;&amp;gt;
      &amp;lt;transactionManager type=&amp;quot;JDBC&amp;quot;/&amp;gt;
      &amp;lt;dataSource type=&amp;quot;POOLED&amp;quot;&amp;gt;
        &amp;lt;property name=&amp;quot;driver&amp;quot; value=&amp;quot;${jdbc.dirver}&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;url&amp;quot; value=&amp;quot;${jdbc.url}&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;username&amp;quot; value=&amp;quot;${jdbc.username}&amp;quot;/&amp;gt;
        &amp;lt;property name=&amp;quot;password&amp;quot; value=&amp;quot;${jdbc.password}&amp;quot;/&amp;gt;
      &amp;lt;/dataSource&amp;gt;
    &amp;lt;/environment&amp;gt;
  &amp;lt;/environments&amp;gt;
  &amp;lt;mappers&amp;gt;
    &amp;lt;package name=&amp;quot;cn.kgc.mapper&amp;quot;/&amp;gt;
  &amp;lt;/mappers&amp;gt;
  
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;@Select(&amp;quot;SQL&amp;quot;)&lt;/p&gt;
&lt;p&gt;@Insert(&amp;quot;SQL&amp;quot;)&lt;/p&gt;
&lt;p&gt;@Delete(&amp;quot;SQL&amp;quot;)&lt;/p&gt;
&lt;p&gt;@Update(&amp;quot;SQL&amp;quot;)&lt;/p&gt;
&lt;h2 id=&#34;解决数据库表中的列名和pojo中属性名不一致&#34;&gt;解决数据库表中的列名和pojo中属性名不一致&lt;/h2&gt;
&lt;h3 id=&#34;第一种&#34;&gt;第一种&lt;/h3&gt;
&lt;p&gt;给sql 语句起别名&lt;/p&gt;
&lt;h3 id=&#34;第二种&#34;&gt;第二种&lt;/h3&gt;
&lt;p&gt;@Results  相当于是&lt;code&gt;resultMap&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Select(&amp;quot;select * from book&amp;quot;)
@Results(id=&amp;quot;bookMap&amp;quot;,
    value={
        @Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),
        @Result(column=&amp;quot;book_name&amp;quot;,property=&amp;quot;name&amp;quot;),
        @Result(column=&amp;quot;price&amp;quot;,property=&amp;quot;price&amp;quot;)
})
List&amp;lt;Book&amp;gt; getAllBooks();
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;注解开发中的动态sql&#34;&gt;注解开发中的动态sql&lt;/h2&gt;
&lt;h3 id=&#34;输入映射类型为简单类型&#34;&gt;输入映射类型为简单类型&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * 有可能查询全部，有可能根据id查询
 * 动态sql中输入映射为简单类型，输入映射为简单类型  test中变量名必须叫_parameter
 */
@Select(&amp;quot;&amp;lt;script&amp;gt;SELECT * FROM book &amp;lt;if test=&#39;_parameter != null&#39;&amp;gt;WHERE id=#{id}&amp;lt;/if&amp;gt;&amp;lt;/script&amp;gt;&amp;quot;)
List&amp;lt;Book&amp;gt; getBooksOrById(Integer id);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;输入映射类型为pojo&#34;&gt;输入映射类型为pojo&lt;/h3&gt;
&lt;p&gt;开发产生SQL语句的类和方法&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package cn.kgc.sql.provider;

import cn.kgc.pojo.Book;

public class BookMapperProvider {
	/**
	 * 专门用来给BookMapper接口来提供动态sql语句的
	 * @param book
	 * @return
	 */
	public String getBooks(Book book){
		String sql = &amp;quot;select * from book&amp;quot;;
		if(book != null){
			if(book.getId() != null){
				//id有值
				sql = &amp;quot;select * from book where id=#{id}&amp;quot;;
			}
			if(book.getName() != null &amp;amp;&amp;amp; !book.getName().equals(&amp;quot;&amp;quot;)){
				sql = &amp;quot;select * from book where name like #{name}&amp;quot;;
			}
			if(book.getId() != null &amp;amp;&amp;amp; (book.getName() != null &amp;amp;&amp;amp; !book.getName().equals(&amp;quot;&amp;quot;))){
				sql = &amp;quot;select * from book where id=#{id} and name like #{name}&amp;quot;;
			}
		}
		return sql;
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;接口&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * 查询：有可能查询全部，有可能根据id查询，有可能根据name做模糊查询
 * @param book
 * @return
 */
@SelectProvider(type=BookMapperProvider.class,method=&amp;quot;getBooks&amp;quot;)
List&amp;lt;Book&amp;gt; getBooks(Book book);
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;注解开发实现复杂的映射关系&#34;&gt;注解开发实现复杂的映射关系&lt;/h2&gt;
&lt;p&gt;复杂的映射开发本质是两种一对一、一对多&lt;/p&gt;
&lt;p&gt;注解就对应的是：@One(一对一)  @Many(一对多)&lt;/p&gt;
&lt;p&gt;要求我们使用懒加载&lt;/p&gt;
&lt;h3 id=&#34;一对一关系&#34;&gt;一对一关系&lt;/h3&gt;
&lt;p&gt;在核心配置文件中开启懒加载&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt; &amp;lt;settings&amp;gt;
  	&amp;lt;!-- 开启驼峰命名 --&amp;gt;
  	&amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
  	&amp;lt;!-- 开启懒加载 --&amp;gt;
  	&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
  	&amp;lt;!-- mybatis3.4.1之前默认值是true，需要设置为false（将积极加载改为消息加载也就是按需加载） --&amp;gt;
  	&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;
  	&amp;lt;!-- 因为我这里为了打印对象里信息的方便，所以都重写了toString方法，mybatis中默认是如果使用(equals,clone,hashCode,toString任意一个方法)那么就不再延迟加载 --&amp;gt;
  	&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;
  &amp;lt;/settings&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public interface GradeMapper {
	/**
	 * 根据id查询对象
	 * @param id
	 * @return
	 */
	@Select(&amp;quot;select * from grade where id=#{id}&amp;quot;)
	Grade getGradeById(Integer id);
}

&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public interface StudentMapper {
	/**
	 * 查询学生顺便将学生所在的年级名称查询出来
	 */
	@Select(&amp;quot;select * from student&amp;quot;)
	@Results(id=&amp;quot;studentMap&amp;quot;,
			value={
			@Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),
			@Result(column=&amp;quot;name&amp;quot;,property=&amp;quot;name&amp;quot;),
			@Result(column=&amp;quot;grade_id&amp;quot;,property=&amp;quot;grade&amp;quot;,
					one=@One(select=&amp;quot;cn.kgc.mapper.GradeMapper.getGradeById&amp;quot;,fetchType=FetchType.LAZY))
			
	})
	List&amp;lt;Student&amp;gt; getAllStudents();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;FetchType.LAZY表示加载的方式是懒加载,   FetchType.EAGER表示一定联合查询&lt;/p&gt;
&lt;p&gt;如果不添加fetchType，默认就是懒加载&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;一对多的关系&#34;&gt;一对多的关系&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public interface StudentMapper {
	/**
	 * 根据年级编号查询学生列表
	 * @param id
	 * @return
	 */
	@Select(&amp;quot;select * from student where grade_id=#{gid}&amp;quot;)
	List&amp;lt;Student&amp;gt; findStudentsListByGradeId(Integer id);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package cn.kgc.mapper;

import java.util.List;

import org.apache.ibatis.annotations.Many;
import org.apache.ibatis.annotations.Result;
import org.apache.ibatis.annotations.Results;
import org.apache.ibatis.annotations.Select;
import org.apache.ibatis.mapping.FetchType;

import cn.kgc.pojo.Grade;

public interface GradeMapper {

	@Select(&amp;quot;select * from grade&amp;quot;)
	@Results(id=&amp;quot;gradeMap&amp;quot;,
			value={
				@Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),
				@Result(column=&amp;quot;name&amp;quot;,property=&amp;quot;name&amp;quot;),
				@Result(column=&amp;quot;id&amp;quot;,property=&amp;quot;studentList&amp;quot;,
						many=@Many(select=&amp;quot;cn.kgc.mapper.StudentMapper.findStudentsListByGradeId&amp;quot;,fetchType=FetchType.LAZY))
	})
	List&amp;lt;Grade&amp;gt; getGrades();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;mybatis基于二级缓存的开发&#34;&gt;mybatis基于二级缓存的开发&lt;/h2&gt;
&lt;p&gt;一级缓存基于&lt;code&gt;sqlSession&lt;/code&gt;的，默认就存在的，咱们可以不用管，它一定会存在&lt;/p&gt;
&lt;h3 id=&#34;4-1-在核心配置文件中开启二级缓存&#34;&gt;4-1 在核心配置文件中开启二级缓存&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- 开启二级缓存(新版本的mybatis默认就已经开启了，所以我们不用专门开) --&amp;gt;
&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4-2-在mapper接口中使用注解配置开启二级缓存&#34;&gt;4-2 在mapper接口中使用注解配置开启二级缓存&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- 开启二级缓存(新版本的mybatis默认就已经开启了，所以我们不用专门开) --&amp;gt;
&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4-2-pojo需要实现序列化-接口&#34;&gt;4-2 &lt;code&gt;pojo&lt;/code&gt;需要实现序列化 接口&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class Book implements Serializable{
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4-3-mapper开启二级缓存&#34;&gt;4-3 mapper开启二级缓存&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@CacheNamespace(blocking=true)		//在mapper接口中开启二级缓存，默认是所有的查询都使用二级缓存
public interface BookMapper {
    /**
	 * 查询:根据主键查询
	 * 同样准守：输入映射类型为简单类型 #{随便写}
	 * 如果列名不一样,可以直接引用上面已经写好的@Results定义的列和pojo属性映射的关系，方式：@ResultMap(&amp;quot;@Results的id&amp;quot;)
	 */
	@Select(&amp;quot;SELECT * FROM book WHERE id=#{id}&amp;quot;)
	@ResultMap(&amp;quot;bookMap&amp;quot;)
	//@Options(useCache=true)   //默认就是开启二级缓存，可以不用添加该注解
	Book getBookById(Integer id);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;分页查询&#34;&gt;分页查询&lt;/h1&gt;
&lt;h2 id=&#34;添加分页插件的jar包依赖&#34;&gt;添加分页插件的jar包依赖&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- pageHelper --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;com.github.pagehelper&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;pagehelper&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;5.1.6&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;在核心配置文件中配置分页拦截器&#34;&gt;在核心配置文件中配置分页拦截器&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- 添加分页插件 --&amp;gt;
&amp;lt;plugins&amp;gt;
&amp;lt;plugin interceptor=&amp;quot;com.github.pagehelper.PageInterceptor&amp;quot;&amp;gt;&amp;lt;/plugin&amp;gt;
&amp;lt;/plugins&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;实现分页操作&#34;&gt;实现分页操作&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * 分页查询:在实际开发中我们都会去使用分页插件来完成
 * pageHelper是国人做的分页插件，非常的优秀
 */
@Test
public void testPage(){
    //1.开始分页(参数一：当前要展示的页码(1,2..)，  参数二：每页显示的信息条数)
    PageHelper.startPage(1, 3);
    //2.执行查询(正常的执行)
    BookExample example = new BookExample();
    /*如果分页中有条件
    Criteria criteria = example.createCriteria();
    criteria.andNameLike(&amp;quot;%龙%&amp;quot;);
    */
    List&amp;lt;Book&amp;gt; list = bookMapper.selectByExample(example);
    //3.分页就通过pageHelper拦截器来实现分页
    PageInfo&amp;lt;Book&amp;gt; pageInfo = new PageInfo&amp;lt;Book&amp;gt;(list);
    //一页信息
    List&amp;lt;Book&amp;gt; bookList = pageInfo.getList();
    for (Book book : bookList) {
        System.out.println(book);
    }
    System.out.println(&amp;quot;总的页数：&amp;quot; + pageInfo.getPages());
}
&lt;/code&gt;&lt;/pre&gt;
">MyBatis</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/java-fan-she/"" data-c="
          &lt;h2 id=&#34;获取class对象的方式&#34;&gt;获取Class对象的方式&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Class.forName(&amp;quot;全类名&amp;quot;);//将字节码文件加载进内存，返回Class对象
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;多用于配置文件，将类名定义在配置文件中。读取文件，加载类&lt;br&gt;
类名.class：通过类名的属性class获取&lt;br&gt;
多用于参数的传递&lt;br&gt;
对象.getClass()：getClass()方法在Object类中定义着。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//多用于对象的获取字节码的方式
Class clazz = News.class;
Object obj = clazz.newInstance();           //实例化一个对象：等同于 new 一个对象
System.out.println(clazz.getSimpleName());  //获取类名
System.out.println(clazz.getName());        //获取完整的包名+类名
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;class对象功能&#34;&gt;Class对象功能&lt;/h2&gt;
&lt;h3 id=&#34;获取成员变量&#34;&gt;获取成员变量&lt;/h3&gt;
&lt;p&gt;​        Field[] getFields() ：获取所有public修饰的成员变量&lt;/p&gt;
&lt;p&gt;​		Field getField(String name)   获取指定名称的 public修饰的成员变量&lt;/p&gt;
&lt;p&gt;​		Field[] getDeclaredFields();  //获取所有的成员变量，不考虑修饰符&lt;/p&gt;
&lt;p&gt;​		Field getDeclaredField(String name); // 获取指定名称的成员变量，不考虑修饰符&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Class clazz = News.class;
System.out.println(clazz.getSimpleName());//获取类名
System.out.println(clazz.getName());//获取包名+类名
Object obj = clazz.newInstance();//实例化News的这个对象
Table table = obj.getClass().getAnnotation(Table.class);//获取obj对象的Table注解，没有返回null
System.out.println(table.value());
Field[] fields = clazz.getDeclaredFields();
for (Field field : fields) {
	field.setAccessible(true);//暴力反射,如果不写这个将会报错
    //获取属性的注解
    //Field field1 = obj.getClass().getDeclaredField(field.getName());//获取obj对象的指定属性
    PK pk = field.getAnnotation(PK.class);//获取属性的注解

	if(pk!=null){
    	System.out.println(field.getName()+&amp;quot;&amp;gt;&amp;gt;&amp;gt;&amp;quot;+pk);//获取属性名称
    }
        field.set(obj,null);//给当前clazz对象的field属性赋值为i
        System.out.println(field.get(obj));//输出clazz对象的field的属性值
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;获取构造方法&#34;&gt;获取构造方法&lt;/h3&gt;
&lt;p&gt;​	Constructor&amp;lt;?&amp;gt;[] getConstructors()&lt;/p&gt;
&lt;p&gt;​	Constructor&lt;T&gt; getConstructor(类&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;
&lt;p&gt;​	Constructor&lt;T&gt; getDeclaredConstructor(类&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;
&lt;p&gt;​	Constructor&amp;lt;?&amp;gt;[] getDeclaredConstructors()&lt;/p&gt;
&lt;h3 id=&#34;获取成员方法&#34;&gt;获取成员方法&lt;/h3&gt;
&lt;p&gt;​	Method[] getMethods()&lt;/p&gt;
&lt;p&gt;​	Method getMethod(String name, 类&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;
&lt;p&gt;​	Method[] getDeclaredMethods()&lt;/p&gt;
&lt;p&gt;​	Method getDeclaredMethod(String name, 类&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;
&lt;h3 id=&#34;field成员变量&#34;&gt;Field：成员变量&lt;/h3&gt;
&lt;p&gt;设置值&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;void set(Object obj, Object value)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;获取值，传的是对象&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;get(Object obj) 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;忽略访问权限修饰符的安全检查&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;setAccessible(true)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;constructor构造方法&#34;&gt;Constructor:构造方法&lt;/h3&gt;
&lt;p&gt;创建对象，如果使用空参数构造方法创建对象，操作可以简化：Class对象的newInstance方法&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;T newInstance(Object... initargs)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;method方法对象&#34;&gt;Method：方法对象&lt;/h3&gt;
&lt;p&gt;执行方法&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Object invoke(Object obj, Object... args)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;获取方法名称&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;String getName
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;反射获取注解&#34;&gt;反射获取注解&lt;/h2&gt;
&lt;p&gt;获取obj对象的Table注解，没有返回null，obj是要获取的对象&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Table table = obj.getClass().getAnnotation(Table.class);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;获取属性的注解，获取obj对象的field.getName()的属性注解&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;Field field1 = obj.getClass().getDeclaredField(field.getName());//获取obj对象的指定属性
PK pk = field1.getAnnotation(PK.class);//获取属性的注解
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;获取当前调用的方法上的注解&#34;&gt;获取当前调用的方法上的注解&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;StackTraceElement[] stack = new Throwable().getStackTrace();
Method method = this.getClass().getMethod(stack[1].getMethodName());//这里0是当前方法的注解，1是调用者方法的注解
for(Annotation an : method.getAnnotations()){
    System.out.println(an);
}
&lt;/code&gt;&lt;/pre&gt;
">Java反射</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/FastDFS/"" data-c="
          &lt;h2 id=&#34;0-准备安装包上传到usrlocal&#34;&gt;0. 准备安装包上传到/usr/local/&lt;/h2&gt;
&lt;p&gt;FastDFS_v5.05.tar.gz  （FastDFS安装包）&lt;/p&gt;
&lt;p&gt;libfastcommonV1.0.7.tar.gz （FastDFS依赖程序）&lt;/p&gt;
&lt;p&gt;nginx-1.8.0.tar.gz （nginx安装包，用于做文件请求http代理服务器）&lt;/p&gt;
&lt;p&gt;fastdfs-nginx-module_v1.16.tar.gz （nginx和fastdfs的桥梁插件模块）&lt;/p&gt;
&lt;h2 id=&#34;1-安装cc编译环境&#34;&gt;1. 安装c/c++编译环境&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;yum install gcc-c++
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;2-安装libevent&#34;&gt;2. 安装libevent&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;yum -y install libevent
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;3-安装libfastcommon&#34;&gt;3. 安装libfastcommon&lt;/h2&gt;
&lt;p&gt;将&lt;code&gt;libfastcommonV1.0.7.tar.gz&lt;/code&gt;拷贝至&lt;code&gt;/usr/local/&lt;/code&gt;下&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /usr/local
tar -zxvf libfastcommonV1.0.7.tar.gz
cd libfastcommon-1.0.7
./make.sh
./make.sh install
cp /usr/lib64/libfastcommon.so /usr/lib
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4创建数据存储目录&#34;&gt;4.创建数据存储目录&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;mkdir -p /home/FastDFS/tracker /home/FastDFS/storage /home/FastDFS/client
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;5-tracker编译安装&#34;&gt;5. tracker编译安装&lt;/h2&gt;
&lt;p&gt;将FastDFS_v5.05.tar.gz拷贝至/usr/local/下&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar -zxvf FastDFS_v5.05.tar.gz
cd FastDFS
./make.sh
./make.sh install
cd conf
cp * /etc/fdfs
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;6-编辑etcfdfstrackerconf&#34;&gt;6. 编辑/etc/fdfs/tracker.conf&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;vi /etc/fdfs/tracker.conf
	base_path=/home/FastDFS/tracker
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;7-启动tracker&#34;&gt;7. 启动tracker&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;/usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf [restart](重启)
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;8-配置storage节点&#34;&gt;8. 配置storage节点&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;vi /etc/fdfs/storage.conf
    base_path=/home/FastDFS/storage
    store_path0=/home/FastDFS/storage
    tracker_server = 192.168.100.151:22122
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;9-启动storage节点&#34;&gt;9. 启动storage节点&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;/usr/bin/fdfs_storage{fdfs_storaged} /etc/fdfs/storage.conf
fdfs_storage不存在就使用fdfs_storaged
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;10-安装nginx&#34;&gt;10. 安装nginx&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;yum install -y gcc-c++   (已安装)
yum install -y pcre pcre-devel
yum install -y zlib zlib-devel
yum install -y openssl openssl-devel
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;11解压fastdfs-nginx-module_v116targz&#34;&gt;11.解压fastdfs-nginx-module_v1.16.tar.gz&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;cd /usr/local/
tar -zxf fastdfs-nginx-module_v1.16.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;12修改fastdfs-nginx-modulesrcconfig配置文件&#34;&gt;12.修改fastdfs-nginx-module/src/config配置文件&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;vi fastdfs-nginx-module/src/config
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;把CORE_INCS=&amp;quot;$CORE_INCS /usr/local/include/fastdfs /usr/include/fastcommon/&amp;quot;&lt;/p&gt;
&lt;p&gt;修改为：CORE_INCS=&amp;quot;$CORE_INCS /usr/include/fastdfs /usr/include/fastcommon/&amp;quot;&lt;/p&gt;
&lt;p&gt;把CORE_LIBS=&amp;quot;$CORE_LIBS -L/usr/local/lib -lfastcommon -lfdfsclient&amp;quot;&lt;/p&gt;
&lt;p&gt;修改为：CORE_LIBS=&amp;quot;$CORE_LIBS -L/usr/lib -lfastcommon -lfdfsclient&amp;quot;&lt;/p&gt;
&lt;p&gt;实际就是把路径中的local这一层删除掉&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;13复制fastdfs-nginx-modulesrcmod_fastdfsconf-到etcfdfs目录下并编辑&#34;&gt;13.复制fastdfs-nginx-module/src/mod_fastdfs.conf 到/etc/fdfs目录下并编辑&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;cp fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/
	vi /etc/fdfs/mod_fastdfs.conf
        tracker_server=192.168.100.151:22122
        url_have_group_name = true
        storage_server_port=23000
        group_name=group1
        store_path0=/home/FastDFS/storage
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;14安装nginx&#34;&gt;14.安装nginx&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;cd /usr/local/
tar -zxf  nginx-1.8.1.tar.gz
cd nginx-1.8.1
./configure --add-module=/usr/local/fastdfs-nginx-module/src/
make
make install
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;15-配置nginx&#34;&gt;15. 配置nginx&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;cd /usr/local/nginx/conf
vi nginx.conf
	
	server{
        listen     80;
        server_name     localhost;
        location /group1/M00/{
            ngx_fastdfs_module;
        }
    }

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;重启nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/usr/local/nginx/sbin/nginx
&lt;/code&gt;&lt;/pre&gt;
">FastDFS搭建</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/freemarker/"" data-c="
          &lt;h2 id=&#34;1-freemarker入门&#34;&gt;1、freemarker入门&lt;/h2&gt;
&lt;h3 id=&#34;1依赖核心包&#34;&gt;1.依赖核心包&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;!-- 依赖freemarker --&amp;gt;
&amp;lt;dependency&amp;gt;
	&amp;lt;groupId&amp;gt;org.freemarker&amp;lt;/groupId&amp;gt;
	&amp;lt;artifactId&amp;gt;freemarker&amp;lt;/artifactId&amp;gt;
	&amp;lt;version&amp;gt;2.3.23&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2创建模板文件&#34;&gt;2.创建模板文件&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta charset=&amp;quot;UTF-8&amp;quot;&amp;gt;
&amp;lt;title&amp;gt;这个是模板&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
	&amp;lt;#--  这是我的注释，不会被输出 --&amp;gt;
	hello ${name}
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3生成文件&#34;&gt;3.生成文件&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;第一步：创建Configuration对象（直接new，在构造方法中添加&lt;code&gt;freemarker&lt;/code&gt;的版本号）&lt;br&gt;
第二步：设置模板所在的路径&lt;/li&gt;
&lt;li&gt;第三步：设置模板文件的编码字符集（一般使用&lt;code&gt;utf-8&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;第四步：加载一个模板，创建一个模板对象&lt;/li&gt;
&lt;li&gt;第五步：创建数据模型（使用的是Map&amp;lt;String,Object&amp;gt; 还可以使用自定义的&lt;code&gt;pojo&lt;/code&gt;实际开发中都用map）&lt;/li&gt;
&lt;li&gt;第六步：创建writer对象，一般用&lt;code&gt;FileWriter&lt;/code&gt;对象进行实例化，执行生成的文件&lt;/li&gt;
&lt;li&gt;第七步：调用模板对象的process方法输出文件&lt;/li&gt;
&lt;li&gt;第八步：关闭流&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public static void main(String[] args) throws Exception{
    //1.创建配置类
    Configuration configuration = new Configuration(Configuration.getVersion());
    //2.设置模板所在目录
    configuration.setDirectoryForTemplateLoading(new File(&amp;quot;F:\\workspace002\\freemarker-demo01\\src\\main\\resources&amp;quot;));
    //3.设置编码集
    configuration.setDefaultEncoding(&amp;quot;UTF-8&amp;quot;);
    //4.加载模板
    Template template = configuration.getTemplate(&amp;quot;hello.html&amp;quot;);
    //5.创建数据模型
    Map&amp;lt;String, Object&amp;gt; data = new HashMap&amp;lt;String, Object&amp;gt;();
    data.put(&amp;quot;name&amp;quot;, &amp;quot;张三&amp;quot;);
    //6.创建writer对象，准备用来输出文件
    Writer out = new FileWriter(new File(&amp;quot;E:\\freemarker\\hello.html&amp;quot;));
    //7,输出文件
    template.process(data, out);
    //8.关闭流
    out.close();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;ftl指令&#34;&gt;FTL指令&lt;/h2&gt;
&lt;h3 id=&#34;1assign&#34;&gt;1.assign&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;作用：用于在页面上定义一个变量&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;	&amp;lt;#-- assign：用来在页面上定义一个变量 --&amp;gt;
	&amp;lt;#assign name=&amp;quot;张三&amp;quot;&amp;gt;
	获取变量：${name}
	&amp;lt;hr/&amp;gt;
	&amp;lt;#-- assign:还可以用来定义一个对象 --&amp;gt;
	&amp;lt;#assign info={&amp;quot;name&amp;quot;:&amp;quot;李四&amp;quot;,&amp;quot;age&amp;quot;:18,&amp;quot;hobs&amp;quot;:&amp;quot;java&amp;quot;}&amp;gt;
	获取到对象的属性:姓名-${info.name},年龄-${info.age},爱好-${info.hobs}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2include&#34;&gt;2.include&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;作用：此指令用于模板文件之间的相互嵌套&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;#include &amp;quot;head.ftl&amp;quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3if&#34;&gt;3.if&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;作用：用于条件判断&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;data.put(&amp;quot;success&amp;quot;, true);

&amp;lt;#if success = true&amp;gt;
	success的值是true
&amp;lt;#else&amp;gt;
	success的值是false
&amp;lt;/#if&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4list&#34;&gt;4.list&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;作用：在页面中遍历集合&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;ul&amp;gt;
	&amp;lt;#list mylist as user&amp;gt;
		&amp;lt;li&amp;gt;${user.name}&amp;lt;/li&amp;gt;
	&amp;lt;/#list&amp;gt;
&amp;lt;/ul&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;5内建函数&#34;&gt;5.内建函数&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;语法：变量 + ? + 函数名&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;5-1-获取集合的大小size&#34;&gt;5-1 获取集合的大小(size)&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;${mylist?size}&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;5-2-转换json字符串为json对象&#34;&gt;5-2 转换&lt;code&gt;json&lt;/code&gt;字符串为&lt;code&gt;json&lt;/code&gt;对象&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;#-- 定义一个json字符串  --&amp;gt;
&amp;lt;#assign text=&amp;quot;{&#39;name&#39;:&#39;张三&#39;,&#39;sex&#39;:&#39;男&#39;}&amp;quot;&amp;gt;
&amp;lt;#-- 将json字符串转换成json对象 --&amp;gt;
&amp;lt;#assign person=text?eval&amp;gt;
姓名：${person.name}，性别:${person.sex}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;5-3-日期&#34;&gt;5-3 日期&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;年月日：${mydate?date}
&amp;lt;br/&amp;gt;
时分秒：${mydate?time}
&amp;lt;br/&amp;gt;
年月日时分秒：${mydate?datetime}
&amp;lt;br/&amp;gt;
自定义日期：${mydate?string(&#39;yyyy年MM月dd日  hh时mm分ss秒&#39;)}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;5-4-数字转换成字符串&#34;&gt;5-4 数字转换成字符串&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;${mynum?c}&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;6空值处理&#34;&gt;6.空值处理&lt;/h3&gt;
&lt;h4 id=&#34;6-1-处理方案一缺值表达式&#34;&gt;6-1 处理方案一(缺值表达式)&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;${mytest!&amp;quot;值为null&amp;quot;}
&amp;lt;/br&amp;gt;
${mytest!}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;6-2-处理方案二&#34;&gt;6-2 处理方案二&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;#if mytest??&amp;gt;
	mytest值是存在的:${mytest}
&amp;lt;#else&amp;gt;
	mytest的值为null
&amp;lt;/#if&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;7运算符&#34;&gt;7.运算符&lt;/h3&gt;
&lt;h4 id=&#34;7-1-算术运算符&#34;&gt;7-1 算术运算符&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;+ - * / %&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;7-2-逻辑运算符&#34;&gt;7-2 逻辑运算符&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;&amp;amp;&amp;amp; 、 || 、 !&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;7-3-比较运算符&#34;&gt;7-3 比较运算符&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;= 或者 ==&lt;/li&gt;
&lt;li&gt;!=&lt;/li&gt;
&lt;li&gt;&amp;gt;  或者是 gt&lt;/li&gt;
&lt;li&gt;&amp;lt; 或者是 lt&lt;/li&gt;
&lt;li&gt;&amp;gt;= 或者是 gte&lt;/li&gt;
&lt;li&gt;&amp;lt;= 或者是 lte&lt;/li&gt;
&lt;/ul&gt;
">freemarker</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/about/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;欢迎来到我的小站呀，很高兴遇见你！🤝&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;关于本站&#34;&gt;🏠 关于本站&lt;/h2&gt;
&lt;p&gt;磕磕碰碰的小破站,前不久域名的备案被注销...后换到Gridea,托管在GitHub&lt;/p&gt;
&lt;h2 id=&#34;博主是谁&#34;&gt;👨‍💻 博主是谁&lt;/h2&gt;
&lt;p&gt;一位正在努力成长的码农...&lt;/p&gt;
&lt;h2 id=&#34;兴趣爱好&#34;&gt;⛹ 兴趣爱好&lt;/h2&gt;
&lt;p&gt;吃,睡,coding&lt;/p&gt;
&lt;h2 id=&#34;联系我呀&#34;&gt;📬 联系我呀&lt;/h2&gt;
&lt;p&gt;QQ : 2369710264&lt;/p&gt;
">关于</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://haohanya.github.io/post/hello/"" data-c="
          &lt;p&gt;又是一个新的开始!!!&lt;br&gt;
前不久备案莫名其妙被注销,很无奈把数据库备份了,停止了解析😭&lt;br&gt;
但后来越过越觉得生活中少了些什么😅&lt;br&gt;
后来就恢复了这个博客,这次基于Gridea + GitHub 搭建的静态博客&lt;br&gt;
这下放个十年八年的也没什么关系了 ~~~😁&lt;br&gt;
安装这个程序的时候,在官网的模板市场找了好久的模板,感觉好像没有我喜欢的......&lt;br&gt;
看来得抽空设计个模板套上啦😐😐😐&lt;/p&gt;
&lt;!-- more --&gt;
">Hello</a>
      </div>
      
    </div>
  </div>
</div>
<script>
  // var escape = "[{&#34;content&#34;:&#34;&lt;h2 id=\&#34;单机版\&#34;&gt;单机版&lt;/h2&gt;\n&lt;p&gt;1.引入依赖&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt; &amp;lt;!-- 身份验证 --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-security-web&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-security-config&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;!-- more --&gt;\n&lt;p&gt;2.配置核心配置文件&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;\n&amp;lt;beans:beans xmlns=&amp;quot;http://www.springframework.org/schema/security&amp;quot;\n             xmlns:beans=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;\n             xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;\n             xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n\t\t\t\t\t\thttp://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd&amp;quot;&amp;gt;\n    &amp;lt;!-- 以下页面不被拦截 --&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/login.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/css/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/img/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/js/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/plugins/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n\n    &amp;lt;!--\n            页面拦截规则\n                use-expressions:是否启用spel表达式, 如果为true那么access=&amp;quot;hasRole(&#39;ROLE_USER&#39;)&amp;quot;\n        --&amp;gt;\n    &amp;lt;!-- 页面拦截规则 --&amp;gt;\n    &amp;lt;http use-expressions=&amp;quot;false&amp;quot;&amp;gt;\n        &amp;lt;!--\n            pattern : 拦截的url\n            access : 拥有如下权限允许访问\n        --&amp;gt;\n        &amp;lt;intercept-url pattern=&amp;quot;/**&amp;quot; access=&amp;quot;ROLE_ADMIN&amp;quot; /&amp;gt;\n        &amp;lt;!--\n            login-page : 自定义登陆页面\n            default-target-url : 登陆成功后跳转的页面,不设定默认跳转上一次访问的页面\n            authentication-failure-url : 登陆失败时跳转的url\n            always-use-default-target : 登陆成功后 总是跳转到 default-target-url 设定的url\n        --&amp;gt;\n        &amp;lt;form-login login-page=&amp;quot;/login.html&amp;quot;  default-target-url=&amp;quot;/admin/index.html&amp;quot; authentication-failure-url=&amp;quot;/login.html&amp;quot; always-use-default-target=&amp;quot;true&amp;quot;/&amp;gt;\n        &amp;lt;csrf disabled=&amp;quot;true&amp;quot;/&amp;gt;\n\n        &amp;lt;!--\n            logout-url : 退出的地址\n            logout-success-url : 退出后跳转的地址\n        --&amp;gt;\n        &amp;lt;logout logout-url=&amp;quot;/logout&amp;quot; logout-success-url=&amp;quot;/login.html&amp;quot;/&amp;gt;\n        &amp;lt;!--\n            如果使用了iframe,需要指定框架页的策略为 SAMEORIGIN\n        --&amp;gt;\n        &amp;lt;headers&amp;gt;\n            &amp;lt;frame-options policy=&amp;quot;SAMEORIGIN&amp;quot;/&amp;gt;  &amp;lt;!--允许使用frameset --&amp;gt;\n        &amp;lt;/headers&amp;gt;\n    &amp;lt;/http&amp;gt;\n\n    &amp;lt;!--认证管理器--&amp;gt;\n    &amp;lt;authentication-manager&amp;gt;\n        &amp;lt;authentication-provider&amp;gt;\n            &amp;lt;user-service&amp;gt;\n                &amp;lt;!--用户名和密码,权限--&amp;gt;\n                &amp;lt;user name=&amp;quot;root&amp;quot; password=&amp;quot;root&amp;quot; authorities=&amp;quot;ROLE_ADMIN&amp;quot;/&amp;gt;\n            &amp;lt;/user-service&amp;gt;\n        &amp;lt;/authentication-provider&amp;gt;\n    &amp;lt;/authentication-manager&amp;gt;\n\n&amp;lt;/beans:beans&amp;gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3.配置web.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;context-param&amp;gt;\n    &amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;\n    &amp;lt;param-value&amp;gt;classpath:spring/spring-security.xml&amp;lt;/param-value&amp;gt;\n&amp;lt;/context-param&amp;gt;\n&amp;lt;listener&amp;gt;\n    &amp;lt;listener-class&amp;gt;\n        org.springframework.web.context.ContextLoaderListener\n    &amp;lt;/listener-class&amp;gt;\n&amp;lt;/listener&amp;gt;\n&amp;lt;filter&amp;gt;\n    &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;\n    &amp;lt;filter-class&amp;gt;org.springframework.web.filter.DelegatingFilterProxy&amp;lt;/filter-class&amp;gt;\n&amp;lt;/filter&amp;gt;\n&amp;lt;filter-mapping&amp;gt;\n    &amp;lt;filter-name&amp;gt;springSecurityFilterChain&amp;lt;/filter-name&amp;gt;\n    &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;\n&amp;lt;/filter-mapping&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;连接数据库\&#34;&gt;连接数据库&lt;/h2&gt;\n&lt;p&gt;1.引入依赖&lt;/p&gt;\n&lt;p&gt;2.实现UserDetailsService接口&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;package com.jd.shop.service.impl;\n\nimport com.jd.pojo.TbSeller;\nimport com.jd.sellergoods.service.TbSellerService;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * 认证类\n * @program: jd\n * @author: 潘\n * @create: 2020-04-29 22:43\n **/\npublic class UserDetailsServiceImpl implements UserDetailsService{\n\n    private TbSellerService tbSellerService;\n\n    public void setTbSellerService(TbSellerService tbSellerService) {\n        this.tbSellerService = tbSellerService;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n\n        if(username == null){\n            return null;\n        }\n\n        TbSeller byId = tbSellerService.findById(username);\n\n        if(byId == null){\n            return null;\n        }\n\n        //构建角色列表\n        List&amp;lt;GrantedAuthority&amp;gt; list = new ArrayList&amp;lt;&amp;gt;();\n\n        //用户的权限集合\n        list.add(new SimpleGrantedAuthority(&amp;quot;ROLE_USER&amp;quot;));\n\n        return new User(username,byId.getPassword(),list);\n    }\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;3.配置核心配置文件&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;\n&amp;lt;beans:beans xmlns=&amp;quot;http://www.springframework.org/schema/security&amp;quot;\n             xmlns:beans=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;\n             xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;\n             xmlns:dubbo=&amp;quot;http://code.alibabatech.com/schema/dubbo&amp;quot;\n             xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n\t\t\t\t\t\thttp://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&amp;quot;&amp;gt;\n    &amp;lt;!-- 以下页面不被拦截 --&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/login.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/css/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/img/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/js/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/plugins/**&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n    &amp;lt;http pattern=&amp;quot;/*.html&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;\n&amp;lt;!--    &amp;lt;http pattern=&amp;quot;/login&amp;quot; security=&amp;quot;none&amp;quot;/&amp;gt;--&amp;gt;\n\n    &amp;lt;!--\n            页面拦截规则\n                use-expressions:是否启用spel表达式, 如果为true那么access=&amp;quot;hasRole(&#39;ROLE_USER&#39;)&amp;quot;\n        --&amp;gt;\n    &amp;lt;!-- 页面拦截规则 --&amp;gt;\n    &amp;lt;http use-expressions=&amp;quot;false&amp;quot;&amp;gt;\n        &amp;lt;!--\n            pattern : 拦截的url\n            access : 拥有如下权限允许访问\n        --&amp;gt;\n        &amp;lt;intercept-url pattern=&amp;quot;/**&amp;quot; access=&amp;quot;ROLE_USER&amp;quot; /&amp;gt;\n        &amp;lt;!--\n            login-page : 自定义登陆页面\n            default-target-url : 登陆成功后跳转的页面,不设定默认跳转上一次访问的页面\n            authentication-failure-url : 登陆失败时跳转的url\n            always-use-default-target : 登陆成功后 总是跳转到 default-target-url 设定的url\n        --&amp;gt;\n        &amp;lt;form-login login-processing-url=&amp;quot;/login&amp;quot; login-page=&amp;quot;/shoplogin.html&amp;quot;  default-target-url=&amp;quot;/admin/index.html&amp;quot; authentication-failure-url=&amp;quot;/shoplogin.html&amp;quot; always-use-default-target=&amp;quot;true&amp;quot;/&amp;gt;\n        &amp;lt;csrf disabled=&amp;quot;true&amp;quot;/&amp;gt;\n\n        &amp;lt;!--\n            logout-url : 退出的地址\n            logout-success-url : 退出后跳转的地址\n        --&amp;gt;\n        &amp;lt;logout logout-url=&amp;quot;/logout&amp;quot; logout-success-url=&amp;quot;/shoplogin.html&amp;quot;/&amp;gt;\n        &amp;lt;!--\n            如果使用了iframe,需要指定框架页的策略为 SAMEORIGIN\n        --&amp;gt;\n        &amp;lt;headers&amp;gt;\n            &amp;lt;frame-options policy=&amp;quot;SAMEORIGIN&amp;quot;/&amp;gt;  &amp;lt;!--允许使用frameset --&amp;gt;\n        &amp;lt;/headers&amp;gt;\n    &amp;lt;/http&amp;gt;\n\n    &amp;lt;!--认证管理器--&amp;gt;\n    &amp;lt;authentication-manager&amp;gt;\n        &amp;lt;authentication-provider user-service-ref=&amp;quot;userDetailsServiceImpl&amp;quot;/&amp;gt;\n    &amp;lt;/authentication-manager&amp;gt;\n\n    &amp;lt;!-- 引用dubbo 服务 --&amp;gt;\n    &amp;lt;dubbo:application name=&amp;quot;jd-shop-web&amp;quot; /&amp;gt;\n    &amp;lt;dubbo:registry address=&amp;quot;zookeeper://47.98.157.69:2181&amp;quot; timeout=&amp;quot;30000&amp;quot;/&amp;gt;\n    &amp;lt;dubbo:annotation package=&amp;quot;com.jd.shop.controller&amp;quot; /&amp;gt;\n    \n    &amp;lt;dubbo:reference interface=&amp;quot;com.jd.sellergoods.service.TbSellerService&amp;quot; id=&amp;quot;tbSellerService&amp;quot;/&amp;gt;\n\n    &amp;lt;beans:bean id=&amp;quot;userDetailsServiceImpl&amp;quot; class=&amp;quot;com.jd.shop.service.impl.UserDetailsServiceImpl&amp;quot;&amp;gt;\n        &amp;lt;beans:property name=&amp;quot;tbSellerService&amp;quot; ref=&amp;quot;tbSellerService&amp;quot;/&amp;gt;\n    &amp;lt;/beans:bean&amp;gt;\n\n&amp;lt;/beans:beans&amp;gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;4.配置web.xml文件&lt;/p&gt;\n&lt;h2 id=\&#34;brcy加密\&#34;&gt;Brcy加密&lt;/h2&gt;\n&lt;p&gt;1.编写java&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();\nString encode = passwordEncoder.encode(tbSeller.getPassword());\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;2.编写配置文件&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--认证管理器--&amp;gt;\n&amp;lt;authentication-manager&amp;gt;\n    &amp;lt;authentication-provider user-service-ref=&amp;quot;userDetailsServiceImpl&amp;quot;&amp;gt;\n        &amp;lt;!-- 这句话表示在登陆时使用bcry加密验证 --&amp;gt;\n        &amp;lt;password-encoder ref=&amp;quot;bCryptPasswordEncoder&amp;quot;/&amp;gt;\n    &amp;lt;/authentication-provider&amp;gt;\n&amp;lt;/authentication-manager&amp;gt;\n&amp;lt;!--配置加密,在认证管理器中引用--&amp;gt;\n&amp;lt;beans:bean id=&amp;quot;bCryptPasswordEncoder&amp;quot; class=&amp;quot;org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder&amp;quot;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;记住我\&#34;&gt;记住我&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;input value=&amp;quot;1&amp;quot; name=&amp;quot;remember-me&amp;quot;/&amp;gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;spring-security&#34;,&#34;abstract&#34;:&#34;&lt;h2 id=\&#34;单机版\&#34;&gt;单机版&lt;/h2&gt;\n&lt;p&gt;1.引入依赖&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt; &amp;lt;!-- 身份验证 --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-security-web&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;spring-security-config&amp;lt;/artifactId&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;title&#34;:&#34;Spring-Security&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;spring-security&#34;,&#34;slug&#34;:&#34;YYffL2EXa&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/YYffL2EXa/&#34;},{&#34;name&#34;:&#34;spring&#34;,&#34;slug&#34;:&#34;POgCfBu13Z&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/POgCfBu13Z/&#34;}],&#34;date&#34;:&#34;2020-05-04 12:14:24&#34;,&#34;dateFormat&#34;:&#34;2020-05-04&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/spring-security/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;9 min read&#34;,&#34;time&#34;:511000,&#34;words&#34;:1547,&#34;minutes&#34;:9},&#34;description&#34;:&#34;单机版\n1.引入依赖\n &amp;lt;!-- 身份验证 --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;\n    &amp;...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8D%95%E6%9C%BA%E7%89%88\&#34;&gt;单机版&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93\&#34;&gt;连接数据库&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#brcy%E5%8A%A0%E5%AF%86\&#34;&gt;Brcy加密&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%AE%B0%E4%BD%8F%E6%88%91\&#34;&gt;记住我&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h1 id=\&#34;快速开始\&#34;&gt;快速开始&lt;/h1&gt;\n&lt;h2 id=\&#34;1-mybatis核心配置文件\&#34;&gt;1、MyBatis核心配置文件&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE configuration\n  PUBLIC &amp;quot;-//mybatis.org//DTD Config 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-config.dtd&amp;quot;&amp;gt;\n&amp;lt;configuration&amp;gt;\n  &amp;lt;!-- 配置数据源 --&amp;gt;\n  &amp;lt;environments default=&amp;quot;development&amp;quot;&amp;gt;\n    &amp;lt;environment id=&amp;quot;development&amp;quot;&amp;gt;\n     &amp;lt;!--事务处理方式--&amp;gt;\n      &amp;lt;transactionManager type=&amp;quot;JDBC&amp;quot;/&amp;gt;\n      &amp;lt;dataSource type=&amp;quot;POOLED&amp;quot;&amp;gt;\n        &amp;lt;property name=&amp;quot;driver&amp;quot; value=&amp;quot;com.mysql.jdbc.Driver&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;url&amp;quot; value=&amp;quot;jdbc:mysql://localhost:3306/mybatis&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;username&amp;quot; value=&amp;quot;root&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;password&amp;quot; value=&amp;quot;root&amp;quot;/&amp;gt;\n      &amp;lt;/dataSource&amp;gt;\n    &amp;lt;/environment&amp;gt;\n  &amp;lt;/environments&amp;gt;\n&amp;lt;!--映射器：每一个Mapper接口都应该在核心配置文件&amp;lt;mappers&amp;gt;标签中注册--&amp;gt;\n  &amp;lt;mappers&amp;gt;\n  \t&amp;lt;!--使用XML配置文件注册--&amp;gt;\n    &amp;lt;mapper resource=&amp;quot;com/cn/mybatis/dao/IcpInfoMapper.xml&amp;quot;/&amp;gt;\n    &amp;lt;!--使用类注册方式--&amp;gt;\n    &amp;lt;mapper class=&amp;quot;com.cn.mybatis.dao.IcpInfoMapper&amp;quot; /&amp;gt;\n  &amp;lt;/mappers&amp;gt;\n&amp;lt;/configuration&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;2-orm映射文件mapperxml\&#34;&gt;2、ORM映射文件mapper.xml&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE mapper\n  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;\n&amp;lt;!-- 这个配置文件主要是配置实体类和数据库中的表映射关系 --&amp;gt;\n&amp;lt;!-- mapper：映射信息配置 namesapce:如果是在ibatis的开发中，名字可以随便取，但是在mybatis中将有特殊的意义 --&amp;gt;\n&amp;lt;mapper namespace=&amp;quot;test&amp;quot;&amp;gt;\n\t&amp;lt;!-- 查询所有的书籍信息 select:专门用于查询的statement\n\t     id:是statement的唯一标识符\n\t     resultType:返回值得类型（跟返回的个数无关），将返回类型的全限定名写到这里\n\t --&amp;gt;\n\t&amp;lt;select id=&amp;quot;selectAllBooks&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Book&amp;quot;&amp;gt;\n\t\tselect * from book\n\t&amp;lt;/select&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;3-日志文件\&#34;&gt;3、日志文件&lt;/h2&gt;\n&lt;p&gt;&lt;code&gt;log4j.properties&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;log4j.rootLogger=DEBUG,A1\nlog4j.logger.org.mybatis=DEBUG\nlog4j.appender.A1=org.apache.log4j.ConsoleAppender\nlog4j.appender.A1.layout=org.apache.log4j.PatternLayout\nlog4j.appender.A1.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss,SSS} [%t] [%c]-[%p] %m%n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;4-测试\&#34;&gt;4、测试&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//查询全部\n@Test\npublic void testFindAll() throws Exception{\n    //通过流的方式读取配置文件\n    InputStream inputStream = Resources.getResourceAsStream(&amp;quot;mybatis-config.xml&amp;quot;);\n    //1.读取配置文件,得到SqlSessionFactory\n    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream );\n    //2.创建SqlSession\n    SqlSession sqlSession = sqlSessionFactory.openSession();\n    //3.查询所有(参数：是namespace.statementId)\n    List&amp;lt;Book&amp;gt; list = sqlSession.selectList(&amp;quot;test.selectAllBooks&amp;quot;);\n    System.out.println(list);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;properties属性\&#34;&gt;properties属性&lt;/h1&gt;\n&lt;p&gt;创建一个外部的properties文件&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;jdbc.dirver=com.mysql.jdbc.Driver\njdbc.url=jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;amp;characterEncoding=utf-8\njdbc.username=root\njdbc.password=root\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;在核心配置文件中引用properties文件&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;properties resource=&amp;quot;jdbc.properties&amp;quot;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;使用&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;${jdbc.dirver}\n${jdbc.url}\n${jdbc.username}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;settings\&#34;&gt;settings&lt;/h1&gt;\n&lt;p&gt;&lt;code&gt;mapUnderscoreToCamelCase&lt;/code&gt;:开启驼峰命名，可以帮助我们完成数据库的经典命名规则，到java的经典命名规则（驼峰命名发）&lt;/p&gt;\n&lt;p&gt;如：数据库叫user_name  到java类（&lt;code&gt;pojo&lt;/code&gt;）中是&lt;code&gt;userName&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;settings&amp;gt;\n    &amp;lt;!-- 开启驼峰命名 --&amp;gt;\n    &amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n    &amp;lt;!--指定 MyBatis 所用日志的具体实现，未指定时将自动查找。\n\t日志类型：\n\tSTDOUT_LOGGING 不需要导入jar包，因为是mybatis自带\n\tNO_LOGGING 代表不需要日志输出\n\tSLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING\n \t--&amp;gt;\n    &amp;lt;setting name=&amp;quot;logImpl&amp;quot; value=&amp;quot;STDOUT_LOGGING&amp;quot;/&amp;gt;\n&amp;lt;/settings&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;分析日志输出&lt;/p&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;MyBatis.assets%5Cimage-20200307124719177.png\&#34; alt=\&#34;image-20200307124719177\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;h1 id=\&#34;typealiases类型别名\&#34;&gt;typeAliases（类型别名）&lt;/h1&gt;\n&lt;h2 id=\&#34;自定义别名\&#34;&gt;自定义别名&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--别名，用于简化--&amp;gt;\n&amp;lt;typeAliases&amp;gt;\n    &amp;lt;!--type：包+类名，alias：别名--&amp;gt;\n    &amp;lt;typeAlias type=&amp;quot;com.cn.mybatis.entity.IcpInfo&amp;quot; alias=&amp;quot;Icp&amp;quot; /&amp;gt;\n    &amp;lt;!--使用包的方式\n\t\t每一个在包 domain.blog 中的 Java Bean，在没有注解的情况下\n\t\t会使用 Bean 的首字母小写的非限定类名来作为它的别名\n\t\t(这句话意思是：@Alias(&amp;quot;author&amp;quot;)\n\t\t在使用包方式时，javaBean没有添加注解指定别名时自动使用类名{首字母小写})\n\t--&amp;gt;\n    &amp;lt;package name=&amp;quot;com.cn.mybatis.entity&amp;quot;/&amp;gt;\n&amp;lt;/typeAliases&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;plugins插件\&#34;&gt;plugins（插件）&lt;/h1&gt;\n&lt;h1 id=\&#34;xml映射\&#34;&gt;XML映射&lt;/h1&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;cache&lt;/code&gt; – 对给定命名空间的缓存配置。&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;cache-ref&lt;/code&gt; – 对其他命名空间缓存配置的引用。&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;resultMap&lt;/code&gt; – 是最复杂也是最强大的元素，用来描述如何从数据库结果集中来加载对象。&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;parameterMap&lt;/code&gt; – 已被废弃！老式风格的参数映射。更好的办法是使用内联参数，此元素可能在将来被移除。文档中不会介绍此元素。&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;sql&lt;/code&gt; – 可被其他语句引用的可重用语句块。&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;insert&lt;/code&gt; – 映射插入语句&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;update&lt;/code&gt; – 映射更新语句&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;delete&lt;/code&gt; – 映射删除语句&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;select&lt;/code&gt; – 映射查询语句&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;select-查询语句\&#34;&gt;select 查询语句&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--\n\tid：一般和Mepper接口的方法名称相同，在命名空间中唯一的标识符，可以被用来引用这条语句。\n\tparameterType：接收一个int类型的参数\n\t\t接收参数使用#{ }包裹着，这个参数对应着接口的参数\n\tresultType：返回一个hashmap 类型的数据\n\n--&amp;gt;\n&amp;lt;select id=&amp;quot;selectPerson&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;hashmap&amp;quot;&amp;gt;\n  SELECT * FROM PERSON WHERE ID = #{id}\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;insert-updatea-delete\&#34;&gt;insert updatea delete&lt;/h2&gt;\n&lt;p&gt;在使用这些语句的时候需要提交事务：session.commit();&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfo&amp;quot; parameterType=&amp;quot;icpInfo&amp;quot; &amp;gt;\n    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values (#{icp}, #{name}, #{address}, #{home}, #{introduce}, #{author}, #{email}, #{date}, #{type})\n&amp;lt;/insert&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;获取插入数据后的主键id：useGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfo&amp;quot; useGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&amp;gt;\n    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values (#{icp}, #{name}, #{address}, #{home}, #{introduce}, #{author}, #{email}, #{date}, #{type})\n&amp;lt;/insert&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;插入多条数据：传入一个 数组或集合，并返回自动生成的主键。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;insert id=&amp;quot;addIcpInfoList&amp;quot; useGeneratedKeys=&amp;quot;true&amp;quot; keyProperty=&amp;quot;cip&amp;quot;&amp;gt;\n    insert into icpinfo (icp, name, address, home, introduce, author, email, date, type) values\n    &amp;lt;foreach collection=&amp;quot;list&amp;quot; item=&amp;quot;item&amp;quot; separator=&amp;quot;,&amp;quot;&amp;gt;\n        (#{item.icp}, #{item.name}, #{item.address}, #{item.home}, #{item.introduce}, #{item.author}, #{item.email}, #{item.date}, #{item.type})\n    &amp;lt;/foreach&amp;gt;\n&amp;lt;/insert&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;动态sql\&#34;&gt;动态SQL&lt;/h1&gt;\n&lt;h2 id=\&#34;if\&#34;&gt;if&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;对于输入映射类型为pojo类型：\n#{pojo中的属性名}   ${pojo中的属性名}\n&amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;\n    and grade_id = #{gradeId}\n&amp;lt;/if&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;sql注入的问题\&#34;&gt;sql注入的问题&lt;/h2&gt;\n&lt;p&gt;在使用${}会出现&lt;code&gt;sql&lt;/code&gt;注入的问题（拼接字符串，没有使用预编译）&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;如果为简单数据类型需要把name换成_parameter\n&amp;lt;bind name=&amp;quot;n&amp;quot; value=&amp;quot;&#39;%&#39;+name+&#39;%&#39;&amp;quot;/&amp;gt;\nand name like #{n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;when\&#34;&gt;when&lt;/h2&gt;\n&lt;p&gt;应用场景：可能查询全部，有可能根据条件查询，并且如果第一个条件前面有and，where子句会自动把这个and删除再作为sql语句运行&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;select id=&amp;quot;findStudentByLike&amp;quot; resultType=&amp;quot;student&amp;quot; parameterType=&amp;quot;student&amp;quot;&amp;gt;\n    select * from student\n    &amp;lt;where&amp;gt;\n        &amp;lt;if test=&amp;quot;name != null and name != &#39;&#39;&amp;quot;&amp;gt;\n            &amp;lt;bind name=&amp;quot;n&amp;quot; value=&amp;quot;&#39;%&#39;+name+&#39;%&#39;&amp;quot;/&amp;gt;\n            and name like #{n}\n        &amp;lt;/if&amp;gt;\n        &amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;\n            and grade_id = #{gradeId}\n        &amp;lt;/if&amp;gt;\n    &amp;lt;/where&amp;gt;\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;choose\&#34;&gt;choose&lt;/h2&gt;\n&lt;p&gt;其实就是java中的switch  或者 if...else if ...else&lt;/p&gt;\n&lt;h2 id=\&#34;set\&#34;&gt;set&lt;/h2&gt;\n&lt;p&gt;set标签作用：能自动的判断是否在sql语句的结尾处是否要添加逗号，如果不需要逗号它自动帮我们删除&lt;/p&gt;\n&lt;p&gt;(和where一样不会自动添加)&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;update id=&amp;quot;updateStudentByById&amp;quot; parameterType=&amp;quot;student&amp;quot;&amp;gt;\n    update student\n    &amp;lt;set&amp;gt;\n        &amp;lt;if test=&amp;quot;name != null&amp;quot;&amp;gt;\n            name = #{name},\n        &amp;lt;/if&amp;gt;\n        &amp;lt;if test=&amp;quot;gradeId != null&amp;quot;&amp;gt;\n            grade_id = #{gradeId}\n        &amp;lt;/if&amp;gt;\n    &amp;lt;/set&amp;gt;\n    where id = #{id}\n&amp;lt;/update&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;foreach\&#34;&gt;foreach&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;select id=&amp;quot;findStudentsById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;student&amp;quot;&amp;gt;\n        select * from student where id in\n        &amp;lt;foreach collection=&amp;quot;list&amp;quot; open=&amp;quot;(&amp;quot; separator=&amp;quot;,&amp;quot; close=&amp;quot;)&amp;quot; item=&amp;quot;item&amp;quot;&amp;gt;\n            #{item}\n        &amp;lt;/foreach&amp;gt;\n    &amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;sql片段\&#34;&gt;SQL片段&lt;/h1&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;sql id=&amp;quot;sql&amp;quot;&amp;gt;\n    select * from student\n&amp;lt;/sql&amp;gt;\n调用\n&amp;lt;include refid=&amp;quot;sql&amp;quot;&amp;gt;&amp;lt;/include&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;多表联合查询\&#34;&gt;多表联合查询&lt;/h1&gt;\n&lt;h2 id=\&#34;vo\&#34;&gt;VO&lt;/h2&gt;\n&lt;p&gt;解决思路：要求返回的是一个对象，如果&lt;code&gt;pojo&lt;/code&gt;不能满足(要返回的列不存在&lt;code&gt;pojo&lt;/code&gt;中)，那么创建一个VO对象，这个VO对象中包含了所有要返回的字段&lt;/p&gt;\n&lt;h3 id=\&#34;创建一个vo\&#34;&gt;创建一个VO&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;package cn.kgc.vo;\n\nimport cn.kgc.pojo.Student;\n//继承的原则：要返回的字段哪个pojo中多，那么就继承哪个pojo\npublic class StudentVO extends Student{\n\tprivate String gradeName;\n\n\tpublic String getGradeName() {\n\t\treturn gradeName;\n\t}\n\n\tpublic void setGradeName(String gradeName) {\n\t\tthis.gradeName = gradeName;\n\t}\t\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;编写mapper接口\&#34;&gt;编写mapper接口&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public interface StudentMapper {\n\t/**\n\t * 查询学生信息，要求展示学生信息中年级名称(联合查询)\n\t */\n\tList&amp;lt;StudentVO&amp;gt; getStudentVO();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;编写mapperxml\&#34;&gt;编写mapper.xml&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;select id=&amp;quot;getStudentVO&amp;quot; resultType=&amp;quot;cn.kgc.vo.StudentVO&amp;quot;&amp;gt;\n\tSELECT s.*,g.name gradeName FROM student s,grade g WHERE s.grade_id=g.id\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;一对一\&#34;&gt;一对一&lt;/h2&gt;\n&lt;h3 id=\&#34;按照查询嵌套处理\&#34;&gt;按照查询嵌套处理&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;resultMap id=&amp;quot;IcpInfoType&amp;quot; type=&amp;quot;icpInfo&amp;quot;&amp;gt;\n&amp;lt;!-- property：实体类的对象属性名，\n\tcolumn：数据库中关联的列，\n\tjavaType：实体类对象，\n\tselect：一个sql语句查询的是实体对象的sql\n--&amp;gt;\n    &amp;lt;association property=&amp;quot;type&amp;quot; column=&amp;quot;type&amp;quot; javaType=&amp;quot;type&amp;quot; select=&amp;quot;getTypeList&amp;quot; /&amp;gt;\n&amp;lt;/resultMap&amp;gt;\n&amp;lt;select id=&amp;quot;getList&amp;quot; resultMap=&amp;quot;IcpInfoType&amp;quot;&amp;gt;\n    select * from icpinfo\n&amp;lt;/select&amp;gt;\n&amp;lt;!--这个typeID 获取的是 column=&amp;quot;type&amp;quot; 这个列的值--&amp;gt;\n&amp;lt;select id=&amp;quot;getTypeList&amp;quot; resultType=&amp;quot;type&amp;quot; &amp;gt;\n    select * from type where tid = #{id}\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;按照结果嵌套处理\&#34;&gt;按照结果嵌套处理&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;select id=&amp;quot;getList2&amp;quot; resultMap=&amp;quot;getList2&amp;quot; &amp;gt;\n    select icp, name, address, home, introduce, author, email, `date`, type, tid, tname from icpinfo i ,type t\n    where i.type = t.tid\n&amp;lt;/select&amp;gt;\n&amp;lt;!--type = 要查询的对象--&amp;gt;\n&amp;lt;resultMap id=&amp;quot;getList2&amp;quot; type=&amp;quot;icpInfo&amp;quot; &amp;gt;\n    &amp;lt;!--property=实体类的属性名 column=列名or别名--&amp;gt;\n    &amp;lt;result property=&amp;quot;icp&amp;quot; column=&amp;quot;icp&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;name&amp;quot; column=&amp;quot;name&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;address&amp;quot; column=&amp;quot;address&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;home&amp;quot; column=&amp;quot;home&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;introduce&amp;quot; column=&amp;quot;introduce&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;author&amp;quot; column=&amp;quot;author&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;email&amp;quot; column=&amp;quot;email&amp;quot; /&amp;gt;\n    &amp;lt;result property=&amp;quot;date&amp;quot; column=&amp;quot;date&amp;quot; /&amp;gt;\n    &amp;lt;!--复杂类型\n\t\tproperty=在icpInfo里的属性是type\n\t\tjavaType=type的对象\n\t--&amp;gt;\n    &amp;lt;association property=&amp;quot;type&amp;quot; javaType=&amp;quot;type&amp;quot; &amp;gt;\n        &amp;lt;result property=&amp;quot;tid&amp;quot; column=&amp;quot;tid&amp;quot; /&amp;gt;\n        &amp;lt;result property=&amp;quot;tname&amp;quot; column=&amp;quot;tname&amp;quot; /&amp;gt;\n    &amp;lt;/association&amp;gt;\n&amp;lt;/resultMap&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;一对多\&#34;&gt;一对多&lt;/h2&gt;\n&lt;p&gt;一对多只需要把association换成&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!--ofType=&amp;quot;&amp;quot;\n\t集合中的泛型信息\n--&amp;gt;\n&amp;lt;collection property=&amp;quot;&amp;quot; ofType=&amp;quot;&amp;quot;&amp;gt;&amp;lt;/collection&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE mapper\n  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;\n&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.GradeMapper&amp;quot;&amp;gt;\n\t&amp;lt;!-- 查询年级，把属于这个年级的所有学生查询出来 --&amp;gt;\n\t&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Grade&amp;quot; id=&amp;quot;gradeStudentMap&amp;quot;&amp;gt;\n\t\t&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n\t\t&amp;lt;!-- collection:一对多的映射关系\n\t\t\tproperty:表示一对多映射关系在pojo中的属性名\n\t\t\tofType:表示该集合的泛型的全限定名\n\t\t --&amp;gt;\n\t\t&amp;lt;collection property=&amp;quot;studentList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.Student&amp;quot;&amp;gt;\n\t\t\t&amp;lt;id column=&amp;quot;sid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t\t&amp;lt;result column=&amp;quot;sname&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n\t\t\t&amp;lt;!-- gradeid因为在grade中已经有了，所以不需要再配置 --&amp;gt;\n\t\t&amp;lt;/collection&amp;gt;\n\t&amp;lt;/resultMap&amp;gt;\n\t\n\t&amp;lt;select id=&amp;quot;getGradeById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultMap=&amp;quot;gradeStudentMap&amp;quot;&amp;gt;\n\t\tSELECT \n\t\t  g.*,\n\t\t  s.id sid,\n\t\t  s.name sname\n\t\tFROM\n\t\t  grade g,\n\t\t  student s \n\t\tWHERE g.id = s.grade_id \n\t\t  AND g.id = #{id}\n\t&amp;lt;/select&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;多对多\&#34;&gt;多对多&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE mapper\n  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;\n&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;\n\t&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Student&amp;quot; id=&amp;quot;studentMap&amp;quot;&amp;gt;\n\t\t&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n\t\t&amp;lt;result column=&amp;quot;grade_id&amp;quot; property=&amp;quot;gradeId&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t&amp;lt;!-- 一对多的映射关系 --&amp;gt;\n\t\t&amp;lt;collection property=&amp;quot;studentCourseList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.StudentCourse&amp;quot;&amp;gt;\n\t\t\t&amp;lt;id column=&amp;quot;scid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t\t&amp;lt;!-- studentCourse和course是一对一的映射俄关系 --&amp;gt;\n\t\t\t&amp;lt;association property=&amp;quot;course&amp;quot; javaType=&amp;quot;cn.kgc.pojo.Course&amp;quot;&amp;gt;\n\t\t\t\t&amp;lt;id column=&amp;quot;cid&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t\t\t&amp;lt;result column=&amp;quot;cname&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n\t\t\t&amp;lt;/association&amp;gt;\n\t\t&amp;lt;/collection&amp;gt;\n\t&amp;lt;/resultMap&amp;gt;\n\n\t&amp;lt;select id=&amp;quot;getStudentById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultMap=&amp;quot;studentMap&amp;quot;&amp;gt;\n\tSELECT \n\t  s.*,\n\t  sc.id scid,\n\t  c.id cid,\n\t  c.name cname \n\tFROM\n\t  student s,\n\t  student_course sc,\n\t  course c \n\tWHERE s.id = sc.sid \n\t  AND c.id = sc.cid \n\t  AND s.id = #{id}\n\t&amp;lt;/select&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;延迟加载\&#34;&gt;延迟加载&lt;/h1&gt;\n&lt;p&gt;什么是懒加载&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;懒加载：就是在需要数据的时候才加载，不需要数据的时候不加载，这样有利于系统性能的提升，这就是懒加载（也叫做延迟加载）\n\n好处：在关联查询的时候，根据需求进行关联查询，大大提高了数据库的查询性能。（单表的查询效率永远要比多表联合查询的效率高）\n\n坏处：因为需要用到数据的时候才去做查询，这样大批量的数据查询的时候等待时间会变得更长，造成用户的体验下降\n(select * from student)会把所有的学生的年级编号也在里面\n突然要查询年级信息，它底层操作是：根据年级id一个一个去执行查询\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;使用association实现懒加载\&#34;&gt;使用&lt;code&gt;association&lt;/code&gt;实现懒加载&lt;/h2&gt;\n&lt;h3 id=\&#34;核心配置开启懒加载\&#34;&gt;核心配置开启懒加载&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt; &amp;lt;settings&amp;gt;\n  \t&amp;lt;!-- 开启懒加载 --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n  \t&amp;lt;!-- mybatis3.4.1之前默认值是true，需要设置为false（将积极加载改为消息加载也就是按需加载） --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;\n  \t&amp;lt;!-- 因为我这里为了打印对象里信息的方便，所以都重写了toString方法，mybatis中默认是如果使用(equals,clone,hashCode,toString任意一个方法)那么就不再延迟加载 --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;\n  &amp;lt;/settings&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;GradeMapper.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE mapper\n  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;\n&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.GradeMapper&amp;quot;&amp;gt;\n\t&amp;lt;!-- 根据id查询年级对象 --&amp;gt;\n\t&amp;lt;select id=&amp;quot;getGradeById&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Grade&amp;quot;&amp;gt;\n\t\tselect * from grade where id=#{id}\n\t&amp;lt;/select&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;StudentMapper.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE mapper\n  PUBLIC &amp;quot;-//mybatis.org//DTD Mapper 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&amp;quot;&amp;gt;\n&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;\n\t\n\t&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Student&amp;quot; id=&amp;quot;studentMap&amp;quot;&amp;gt;\n\t\t&amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n\t\t&amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n\t\t&amp;lt;!-- 一个学生对应一个年级：一对一的关系映射\n\t\t\t对于association方式的懒加载：\n\t\t\t\tselect:此处要求是根据年级的id查询年级对象的mapper接口中方法的全限定名\n\t\t\t\tcolumn:在数据库中表与表之间关系的外键\n\t\t --&amp;gt;\n\t\t&amp;lt;association property=&amp;quot;grade&amp;quot; javaType=&amp;quot;cn.kgc.pojo.Grade&amp;quot;\n\t\t\tselect=&amp;quot;cn.kgc.mapper.GradeMapper.getGradeById&amp;quot; column=&amp;quot;grade_id&amp;quot;&amp;gt;&amp;lt;/association&amp;gt;\n\t&amp;lt;/resultMap&amp;gt;\n\t\n\t&amp;lt;select id=&amp;quot;getAllStudents&amp;quot; resultMap=&amp;quot;studentMap&amp;quot;&amp;gt;\n\t\tselect * from student\n\t&amp;lt;/select&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;使用collection实现懒加载\&#34;&gt;使用&lt;code&gt;collection&lt;/code&gt;实现懒加载&lt;/h2&gt;\n&lt;h3 id=\&#34;核心配置开启懒加载-2\&#34;&gt;核心配置开启懒加载&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;settings&amp;gt;\n&amp;lt;!-- 开启懒加载 --&amp;gt;\n&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n&amp;lt;!-- mybatis3.4.1之前默认值是true，需要设置为false（将积极加载改为消息加载也就是按需加载） --&amp;gt;\n&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;\n&amp;lt;!-- 因为我这里为了打印对象里信息的方便，所以都重写了toString方法，mybatis中默认是如果使用(equals,clone,hashCode,toString任意一个方法)那么就不再延迟加载 --&amp;gt;\n&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;\n&amp;lt;/settings&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;StudentMapper.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;select id=&amp;quot;getStudentsByGradeId&amp;quot; parameterType=&amp;quot;int&amp;quot; resultType=&amp;quot;cn.kgc.pojo.Student&amp;quot;&amp;gt;\n    select * from student where grade_id=#{gradeId}\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;GradeMapper.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- 查询年级信息，有可能查询年级中所有的学生信息 --&amp;gt;\n&amp;lt;resultMap type=&amp;quot;cn.kgc.pojo.Grade&amp;quot; id=&amp;quot;gradeMap&amp;quot;&amp;gt;\n    &amp;lt;id column=&amp;quot;id&amp;quot; property=&amp;quot;id&amp;quot; javaType=&amp;quot;int&amp;quot;/&amp;gt;\n    &amp;lt;result column=&amp;quot;name&amp;quot; property=&amp;quot;name&amp;quot; javaType=&amp;quot;string&amp;quot;/&amp;gt;\n    &amp;lt;!-- 一对多的映射关系\n        select:根据年级编号查询学生列表的方法\n        column:就是grade的id（它就是grade表的主键）\n     --&amp;gt;\n    &amp;lt;collection property=&amp;quot;studentList&amp;quot; ofType=&amp;quot;cn.kgc.pojo.Student&amp;quot;\n        select=&amp;quot;cn.kgc.mapper.StudentMapper.getStudentsByGradeId&amp;quot; column=&amp;quot;id&amp;quot;&amp;gt;&amp;lt;/collection&amp;gt;\n&amp;lt;/resultMap&amp;gt;\n&amp;lt;select id=&amp;quot;getAllGrades&amp;quot; resultMap=&amp;quot;gradeMap&amp;quot;&amp;gt;\n    select * from grade\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;mybatis缓存\&#34;&gt;mybatis缓存&lt;/h1&gt;\n&lt;h2 id=\&#34;一级缓存\&#34;&gt;一级缓存&lt;/h2&gt;\n&lt;p&gt;它是&lt;code&gt;SqlSession&lt;/code&gt;级别的，同一个&lt;code&gt;SqlSession&lt;/code&gt;才涉及到一级缓存&lt;/p&gt;\n&lt;p&gt;一级缓存是默认存在，它不需要去做任何的设置&lt;/p&gt;\n&lt;h2 id=\&#34;二级缓存\&#34;&gt;二级缓存&lt;/h2&gt;\n&lt;p&gt;它是mapper级别的，需要开启才能使用&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;缓存在实际开发中是很有用的，它能大大的提升查询的效率，提高程序的性能&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h3 id=\&#34;在核心配置文件中开启二级缓存\&#34;&gt;在核心配置文件中开启二级缓存&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- 开启二级缓存(默认值就是true，准备我们使用二级缓存，可以不用设置) --&amp;gt;\n&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;在mappexml中开启二级缓存\&#34;&gt;在mappe.xml中开启二级缓存&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;mapper namespace=&amp;quot;cn.kgc.mapper.StudentMapper&amp;quot;&amp;gt;\n\t&amp;lt;!-- 在StudentMapper.xml中开启二级缓存 ,因为mybatis中二级缓存的实现类只有一个，默认就是这个，type可以省略不写--&amp;gt;\n\t&amp;lt;cache type=&amp;quot;org.apache.ibatis.cache.impl.PerpetualCache&amp;quot;&amp;gt;&amp;lt;/cache&amp;gt;\n&amp;lt;/mapper&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;pojo需要实现序列化接口\&#34;&gt;pojo需要实现序列化接口&lt;/h3&gt;\n&lt;p&gt;因为缓存的时候要将pojo流化然后存储在内存中，查询再取出&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public class Student implements Serializable{\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;补充：在mapper应用二级缓存后，默认是所有的查询方法都开启二级缓存，如果要某个查询不使用二级缓存可以添加&lt;code&gt;useCache=&amp;quot;false&amp;quot;&lt;/code&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h1 id=\&#34;注解开发入门\&#34;&gt;注解开发入门&lt;/h1&gt;\n&lt;p&gt;在spring4.x开始就推荐我们使用注解，完全去取代xml的配置文件&lt;/p&gt;\n&lt;p&gt;目前最主流的开发方式就是：只使用注解，不再使用xml配置&lt;/p&gt;\n&lt;p&gt;mybatis注解方式的开发是一种未来的趋势,这种方式比传统的xml的开发要简单并且高效&lt;/p&gt;\n&lt;h2 id=\&#34;导入jar包\&#34;&gt;导入jar包&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;dependencies&amp;gt;\n    &amp;lt;!-- mysql驱动 --&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;mysql&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;mysql-connector-java&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;5.1.38&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;!-- mybatis的核心包 --&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;org.mybatis&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;mybatis&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;3.4.6&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;!-- junit单元测试 --&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;junit&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;4.12&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n    &amp;lt;!-- slf4j-log4j12  (slf4j:酸辣粉) --&amp;gt;\n    &amp;lt;dependency&amp;gt;\n        &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;\n        &amp;lt;artifactId&amp;gt;slf4j-log4j12&amp;lt;/artifactId&amp;gt;\n        &amp;lt;version&amp;gt;1.7.25&amp;lt;/version&amp;gt;\n    &amp;lt;/dependency&amp;gt;\n&amp;lt;/dependencies&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;配置文件\&#34;&gt;配置文件&lt;/h2&gt;\n&lt;p&gt;log4j.properties&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;log4j.rootLogger=DEBUG,A1\nlog4j.logger.org.mybatis=DEBUG\nlog4j.appender.A1=org.apache.log4j.ConsoleAppender\nlog4j.appender.A1.layout=org.apache.log4j.PatternLayout\nlog4j.appender.A1.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss,SSS} [%t] [%c]-[%p] %m%n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;jdbc.properties&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-properties\&#34;&gt;jdbc.dirver=com.mysql.jdbc.Driver\njdbc.url=jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;amp;characterEncoding=utf-8\njdbc.username=root\njdbc.password=root\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;mybatis-config.xml&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE configuration\n  PUBLIC &amp;quot;-//mybatis.org//DTD Config 3.0//EN&amp;quot;\n  &amp;quot;http://mybatis.org/dtd/mybatis-3-config.dtd&amp;quot;&amp;gt;\n&amp;lt;configuration&amp;gt;\n  &amp;lt;!-- 引入外部的属性文件 --&amp;gt;\n  &amp;lt;properties resource=&amp;quot;jdbc.properties&amp;quot;&amp;gt;&amp;lt;/properties&amp;gt;\n  &amp;lt;settings&amp;gt;\n  \t&amp;lt;!-- 开启驼峰命名 --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n  &amp;lt;/settings&amp;gt;\n  &amp;lt;!-- 配置数据源 --&amp;gt;\n  &amp;lt;environments default=&amp;quot;development&amp;quot;&amp;gt;\n    &amp;lt;environment id=&amp;quot;development&amp;quot;&amp;gt;\n      &amp;lt;transactionManager type=&amp;quot;JDBC&amp;quot;/&amp;gt;\n      &amp;lt;dataSource type=&amp;quot;POOLED&amp;quot;&amp;gt;\n        &amp;lt;property name=&amp;quot;driver&amp;quot; value=&amp;quot;${jdbc.dirver}&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;url&amp;quot; value=&amp;quot;${jdbc.url}&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;username&amp;quot; value=&amp;quot;${jdbc.username}&amp;quot;/&amp;gt;\n        &amp;lt;property name=&amp;quot;password&amp;quot; value=&amp;quot;${jdbc.password}&amp;quot;/&amp;gt;\n      &amp;lt;/dataSource&amp;gt;\n    &amp;lt;/environment&amp;gt;\n  &amp;lt;/environments&amp;gt;\n  &amp;lt;mappers&amp;gt;\n    &amp;lt;package name=&amp;quot;cn.kgc.mapper&amp;quot;/&amp;gt;\n  &amp;lt;/mappers&amp;gt;\n  \n&amp;lt;/configuration&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;@Select(&amp;quot;SQL&amp;quot;)&lt;/p&gt;\n&lt;p&gt;@Insert(&amp;quot;SQL&amp;quot;)&lt;/p&gt;\n&lt;p&gt;@Delete(&amp;quot;SQL&amp;quot;)&lt;/p&gt;\n&lt;p&gt;@Update(&amp;quot;SQL&amp;quot;)&lt;/p&gt;\n&lt;h2 id=\&#34;解决数据库表中的列名和pojo中属性名不一致\&#34;&gt;解决数据库表中的列名和pojo中属性名不一致&lt;/h2&gt;\n&lt;h3 id=\&#34;第一种\&#34;&gt;第一种&lt;/h3&gt;\n&lt;p&gt;给sql 语句起别名&lt;/p&gt;\n&lt;h3 id=\&#34;第二种\&#34;&gt;第二种&lt;/h3&gt;\n&lt;p&gt;@Results  相当于是&lt;code&gt;resultMap&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@Select(&amp;quot;select * from book&amp;quot;)\n@Results(id=&amp;quot;bookMap&amp;quot;,\n    value={\n        @Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),\n        @Result(column=&amp;quot;book_name&amp;quot;,property=&amp;quot;name&amp;quot;),\n        @Result(column=&amp;quot;price&amp;quot;,property=&amp;quot;price&amp;quot;)\n})\nList&amp;lt;Book&amp;gt; getAllBooks();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;注解开发中的动态sql\&#34;&gt;注解开发中的动态sql&lt;/h2&gt;\n&lt;h3 id=\&#34;输入映射类型为简单类型\&#34;&gt;输入映射类型为简单类型&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * 有可能查询全部，有可能根据id查询\n * 动态sql中输入映射为简单类型，输入映射为简单类型  test中变量名必须叫_parameter\n */\n@Select(&amp;quot;&amp;lt;script&amp;gt;SELECT * FROM book &amp;lt;if test=&#39;_parameter != null&#39;&amp;gt;WHERE id=#{id}&amp;lt;/if&amp;gt;&amp;lt;/script&amp;gt;&amp;quot;)\nList&amp;lt;Book&amp;gt; getBooksOrById(Integer id);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;输入映射类型为pojo\&#34;&gt;输入映射类型为pojo&lt;/h3&gt;\n&lt;p&gt;开发产生SQL语句的类和方法&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;package cn.kgc.sql.provider;\n\nimport cn.kgc.pojo.Book;\n\npublic class BookMapperProvider {\n\t/**\n\t * 专门用来给BookMapper接口来提供动态sql语句的\n\t * @param book\n\t * @return\n\t */\n\tpublic String getBooks(Book book){\n\t\tString sql = &amp;quot;select * from book&amp;quot;;\n\t\tif(book != null){\n\t\t\tif(book.getId() != null){\n\t\t\t\t//id有值\n\t\t\t\tsql = &amp;quot;select * from book where id=#{id}&amp;quot;;\n\t\t\t}\n\t\t\tif(book.getName() != null &amp;amp;&amp;amp; !book.getName().equals(&amp;quot;&amp;quot;)){\n\t\t\t\tsql = &amp;quot;select * from book where name like #{name}&amp;quot;;\n\t\t\t}\n\t\t\tif(book.getId() != null &amp;amp;&amp;amp; (book.getName() != null &amp;amp;&amp;amp; !book.getName().equals(&amp;quot;&amp;quot;))){\n\t\t\t\tsql = &amp;quot;select * from book where id=#{id} and name like #{name}&amp;quot;;\n\t\t\t}\n\t\t}\n\t\treturn sql;\n\t}\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;接口&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * 查询：有可能查询全部，有可能根据id查询，有可能根据name做模糊查询\n * @param book\n * @return\n */\n@SelectProvider(type=BookMapperProvider.class,method=&amp;quot;getBooks&amp;quot;)\nList&amp;lt;Book&amp;gt; getBooks(Book book);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;注解开发实现复杂的映射关系\&#34;&gt;注解开发实现复杂的映射关系&lt;/h2&gt;\n&lt;p&gt;复杂的映射开发本质是两种一对一、一对多&lt;/p&gt;\n&lt;p&gt;注解就对应的是：@One(一对一)  @Many(一对多)&lt;/p&gt;\n&lt;p&gt;要求我们使用懒加载&lt;/p&gt;\n&lt;h3 id=\&#34;一对一关系\&#34;&gt;一对一关系&lt;/h3&gt;\n&lt;p&gt;在核心配置文件中开启懒加载&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt; &amp;lt;settings&amp;gt;\n  \t&amp;lt;!-- 开启驼峰命名 --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;mapUnderscoreToCamelCase&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n  \t&amp;lt;!-- 开启懒加载 --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;lazyLoadingEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n  \t&amp;lt;!-- mybatis3.4.1之前默认值是true，需要设置为false（将积极加载改为消息加载也就是按需加载） --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;aggressiveLazyLoading&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;\n  \t&amp;lt;!-- 因为我这里为了打印对象里信息的方便，所以都重写了toString方法，mybatis中默认是如果使用(equals,clone,hashCode,toString任意一个方法)那么就不再延迟加载 --&amp;gt;\n  \t&amp;lt;setting name=&amp;quot;lazyLoadTriggerMethods&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;\n  &amp;lt;/settings&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public interface GradeMapper {\n\t/**\n\t * 根据id查询对象\n\t * @param id\n\t * @return\n\t */\n\t@Select(&amp;quot;select * from grade where id=#{id}&amp;quot;)\n\tGrade getGradeById(Integer id);\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public interface StudentMapper {\n\t/**\n\t * 查询学生顺便将学生所在的年级名称查询出来\n\t */\n\t@Select(&amp;quot;select * from student&amp;quot;)\n\t@Results(id=&amp;quot;studentMap&amp;quot;,\n\t\t\tvalue={\n\t\t\t@Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),\n\t\t\t@Result(column=&amp;quot;name&amp;quot;,property=&amp;quot;name&amp;quot;),\n\t\t\t@Result(column=&amp;quot;grade_id&amp;quot;,property=&amp;quot;grade&amp;quot;,\n\t\t\t\t\tone=@One(select=&amp;quot;cn.kgc.mapper.GradeMapper.getGradeById&amp;quot;,fetchType=FetchType.LAZY))\n\t\t\t\n\t})\n\tList&amp;lt;Student&amp;gt; getAllStudents();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;FetchType.LAZY表示加载的方式是懒加载,   FetchType.EAGER表示一定联合查询&lt;/p&gt;\n&lt;p&gt;如果不添加fetchType，默认就是懒加载&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;一对多的关系\&#34;&gt;一对多的关系&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public interface StudentMapper {\n\t/**\n\t * 根据年级编号查询学生列表\n\t * @param id\n\t * @return\n\t */\n\t@Select(&amp;quot;select * from student where grade_id=#{gid}&amp;quot;)\n\tList&amp;lt;Student&amp;gt; findStudentsListByGradeId(Integer id);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;package cn.kgc.mapper;\n\nimport java.util.List;\n\nimport org.apache.ibatis.annotations.Many;\nimport org.apache.ibatis.annotations.Result;\nimport org.apache.ibatis.annotations.Results;\nimport org.apache.ibatis.annotations.Select;\nimport org.apache.ibatis.mapping.FetchType;\n\nimport cn.kgc.pojo.Grade;\n\npublic interface GradeMapper {\n\n\t@Select(&amp;quot;select * from grade&amp;quot;)\n\t@Results(id=&amp;quot;gradeMap&amp;quot;,\n\t\t\tvalue={\n\t\t\t\t@Result(id=true,column=&amp;quot;id&amp;quot;,property=&amp;quot;id&amp;quot;),\n\t\t\t\t@Result(column=&amp;quot;name&amp;quot;,property=&amp;quot;name&amp;quot;),\n\t\t\t\t@Result(column=&amp;quot;id&amp;quot;,property=&amp;quot;studentList&amp;quot;,\n\t\t\t\t\t\tmany=@Many(select=&amp;quot;cn.kgc.mapper.StudentMapper.findStudentsListByGradeId&amp;quot;,fetchType=FetchType.LAZY))\n\t})\n\tList&amp;lt;Grade&amp;gt; getGrades();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;mybatis基于二级缓存的开发\&#34;&gt;mybatis基于二级缓存的开发&lt;/h2&gt;\n&lt;p&gt;一级缓存基于&lt;code&gt;sqlSession&lt;/code&gt;的，默认就存在的，咱们可以不用管，它一定会存在&lt;/p&gt;\n&lt;h3 id=\&#34;4-1-在核心配置文件中开启二级缓存\&#34;&gt;4-1 在核心配置文件中开启二级缓存&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- 开启二级缓存(新版本的mybatis默认就已经开启了，所以我们不用专门开) --&amp;gt;\n&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4-2-在mapper接口中使用注解配置开启二级缓存\&#34;&gt;4-2 在mapper接口中使用注解配置开启二级缓存&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- 开启二级缓存(新版本的mybatis默认就已经开启了，所以我们不用专门开) --&amp;gt;\n&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4-2-pojo需要实现序列化-接口\&#34;&gt;4-2 &lt;code&gt;pojo&lt;/code&gt;需要实现序列化 接口&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public class Book implements Serializable{\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4-3-mapper开启二级缓存\&#34;&gt;4-3 mapper开启二级缓存&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;@CacheNamespace(blocking=true)\t\t//在mapper接口中开启二级缓存，默认是所有的查询都使用二级缓存\npublic interface BookMapper {\n    /**\n\t * 查询:根据主键查询\n\t * 同样准守：输入映射类型为简单类型 #{随便写}\n\t * 如果列名不一样,可以直接引用上面已经写好的@Results定义的列和pojo属性映射的关系，方式：@ResultMap(&amp;quot;@Results的id&amp;quot;)\n\t */\n\t@Select(&amp;quot;SELECT * FROM book WHERE id=#{id}&amp;quot;)\n\t@ResultMap(&amp;quot;bookMap&amp;quot;)\n\t//@Options(useCache=true)   //默认就是开启二级缓存，可以不用添加该注解\n\tBook getBookById(Integer id);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h1 id=\&#34;分页查询\&#34;&gt;分页查询&lt;/h1&gt;\n&lt;h2 id=\&#34;添加分页插件的jar包依赖\&#34;&gt;添加分页插件的jar包依赖&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- pageHelper --&amp;gt;\n&amp;lt;dependency&amp;gt;\n    &amp;lt;groupId&amp;gt;com.github.pagehelper&amp;lt;/groupId&amp;gt;\n    &amp;lt;artifactId&amp;gt;pagehelper&amp;lt;/artifactId&amp;gt;\n    &amp;lt;version&amp;gt;5.1.6&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;在核心配置文件中配置分页拦截器\&#34;&gt;在核心配置文件中配置分页拦截器&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- 添加分页插件 --&amp;gt;\n&amp;lt;plugins&amp;gt;\n&amp;lt;plugin interceptor=&amp;quot;com.github.pagehelper.PageInterceptor&amp;quot;&amp;gt;&amp;lt;/plugin&amp;gt;\n&amp;lt;/plugins&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;实现分页操作\&#34;&gt;实现分页操作&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;/**\n * 分页查询:在实际开发中我们都会去使用分页插件来完成\n * pageHelper是国人做的分页插件，非常的优秀\n */\n@Test\npublic void testPage(){\n    //1.开始分页(参数一：当前要展示的页码(1,2..)，  参数二：每页显示的信息条数)\n    PageHelper.startPage(1, 3);\n    //2.执行查询(正常的执行)\n    BookExample example = new BookExample();\n    /*如果分页中有条件\n    Criteria criteria = example.createCriteria();\n    criteria.andNameLike(&amp;quot;%龙%&amp;quot;);\n    */\n    List&amp;lt;Book&amp;gt; list = bookMapper.selectByExample(example);\n    //3.分页就通过pageHelper拦截器来实现分页\n    PageInfo&amp;lt;Book&amp;gt; pageInfo = new PageInfo&amp;lt;Book&amp;gt;(list);\n    //一页信息\n    List&amp;lt;Book&amp;gt; bookList = pageInfo.getList();\n    for (Book book : bookList) {\n        System.out.println(book);\n    }\n    System.out.println(&amp;quot;总的页数：&amp;quot; + pageInfo.getPages());\n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;mybatis&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;MyBatis&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;mybatis&#34;,&#34;slug&#34;:&#34;6pWqw4cF3&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/6pWqw4cF3/&#34;}],&#34;date&#34;:&#34;2020-05-04 12:13:12&#34;,&#34;dateFormat&#34;:&#34;2020-05-04&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/mybatis/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;31 min read&#34;,&#34;time&#34;:1856000,&#34;words&#34;:6302,&#34;minutes&#34;:31},&#34;description&#34;:&#34;快速开始\n1、MyBatis核心配置文件\n&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt;\n&amp;lt;!DOCTYPE configuration\n  PUBL...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B\&#34;&gt;快速开始&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-mybatis%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\&#34;&gt;1、MyBatis核心配置文件&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-orm%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6mapperxml\&#34;&gt;2、ORM映射文件mapper.xml&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6\&#34;&gt;3、日志文件&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-%E6%B5%8B%E8%AF%95\&#34;&gt;4、测试&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#properties%E5%B1%9E%E6%80%A7\&#34;&gt;properties属性&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#settings\&#34;&gt;settings&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#typealiases%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D\&#34;&gt;typeAliases（类型别名）&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%AB%E5%90%8D\&#34;&gt;自定义别名&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#plugins%E6%8F%92%E4%BB%B6\&#34;&gt;plugins（插件）&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#xml%E6%98%A0%E5%B0%84\&#34;&gt;XML映射&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#select-%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5\&#34;&gt;select 查询语句&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#insert-updatea-delete\&#34;&gt;insert updatea delete&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8A%A8%E6%80%81sql\&#34;&gt;动态SQL&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#if\&#34;&gt;if&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#sql%E6%B3%A8%E5%85%A5%E7%9A%84%E9%97%AE%E9%A2%98\&#34;&gt;sql注入的问题&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#when\&#34;&gt;when&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#choose\&#34;&gt;choose&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#set\&#34;&gt;set&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#foreach\&#34;&gt;foreach&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#sql%E7%89%87%E6%AE%B5\&#34;&gt;SQL片段&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%A4%9A%E8%A1%A8%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2\&#34;&gt;多表联合查询&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#vo\&#34;&gt;VO&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAvo\&#34;&gt;创建一个VO&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%BC%96%E5%86%99mapper%E6%8E%A5%E5%8F%A3\&#34;&gt;编写mapper接口&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%BC%96%E5%86%99mapperxml\&#34;&gt;编写mapper.xml&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%B8%80%E5%AF%B9%E4%B8%80\&#34;&gt;一对一&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%8C%89%E7%85%A7%E6%9F%A5%E8%AF%A2%E5%B5%8C%E5%A5%97%E5%A4%84%E7%90%86\&#34;&gt;按照查询嵌套处理&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%8C%89%E7%85%A7%E7%BB%93%E6%9E%9C%E5%B5%8C%E5%A5%97%E5%A4%84%E7%90%86\&#34;&gt;按照结果嵌套处理&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%B8%80%E5%AF%B9%E5%A4%9A\&#34;&gt;一对多&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%A4%9A%E5%AF%B9%E5%A4%9A\&#34;&gt;多对多&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD\&#34;&gt;延迟加载&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BD%BF%E7%94%A8association%E5%AE%9E%E7%8E%B0%E6%87%92%E5%8A%A0%E8%BD%BD\&#34;&gt;使用&lt;code&gt;association&lt;/code&gt;实现懒加载&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E5%BC%80%E5%90%AF%E6%87%92%E5%8A%A0%E8%BD%BD\&#34;&gt;核心配置开启懒加载&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BD%BF%E7%94%A8collection%E5%AE%9E%E7%8E%B0%E6%87%92%E5%8A%A0%E8%BD%BD\&#34;&gt;使用&lt;code&gt;collection&lt;/code&gt;实现懒加载&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E5%BC%80%E5%90%AF%E6%87%92%E5%8A%A0%E8%BD%BD-2\&#34;&gt;核心配置开启懒加载&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#mybatis%E7%BC%93%E5%AD%98\&#34;&gt;mybatis缓存&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;一级缓存&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;二级缓存&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%9C%A8%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;在核心配置文件中开启二级缓存&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%9C%A8mappexml%E4%B8%AD%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;在mappe.xml中开启二级缓存&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#pojo%E9%9C%80%E8%A6%81%E5%AE%9E%E7%8E%B0%E5%BA%8F%E5%88%97%E5%8C%96%E6%8E%A5%E5%8F%A3\&#34;&gt;pojo需要实现序列化接口&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8\&#34;&gt;注解开发入门&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AF%BC%E5%85%A5jar%E5%8C%85\&#34;&gt;导入jar包&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\&#34;&gt;配置文件&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%A7%A3%E5%86%B3%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%88%97%E5%90%8D%E5%92%8Cpojo%E4%B8%AD%E5%B1%9E%E6%80%A7%E5%90%8D%E4%B8%8D%E4%B8%80%E8%87%B4\&#34;&gt;解决数据库表中的列名和pojo中属性名不一致&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%AC%AC%E4%B8%80%E7%A7%8D\&#34;&gt;第一种&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E7%AC%AC%E4%BA%8C%E7%A7%8D\&#34;&gt;第二种&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%8A%A8%E6%80%81sql\&#34;&gt;注解开发中的动态sql&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%BE%93%E5%85%A5%E6%98%A0%E5%B0%84%E7%B1%BB%E5%9E%8B%E4%B8%BA%E7%AE%80%E5%8D%95%E7%B1%BB%E5%9E%8B\&#34;&gt;输入映射类型为简单类型&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%BE%93%E5%85%A5%E6%98%A0%E5%B0%84%E7%B1%BB%E5%9E%8B%E4%B8%BApojo\&#34;&gt;输入映射类型为pojo&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E5%AE%9E%E7%8E%B0%E5%A4%8D%E6%9D%82%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB\&#34;&gt;注解开发实现复杂的映射关系&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E7%B3%BB\&#34;&gt;一对一关系&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%9A%84%E5%85%B3%E7%B3%BB\&#34;&gt;一对多的关系&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#mybatis%E5%9F%BA%E4%BA%8E%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E7%9A%84%E5%BC%80%E5%8F%91\&#34;&gt;mybatis基于二级缓存的开发&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-1-%E5%9C%A8%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;4-1 在核心配置文件中开启二级缓存&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-2-%E5%9C%A8mapper%E6%8E%A5%E5%8F%A3%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;4-2 在mapper接口中使用注解配置开启二级缓存&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-2-pojo%E9%9C%80%E8%A6%81%E5%AE%9E%E7%8E%B0%E5%BA%8F%E5%88%97%E5%8C%96-%E6%8E%A5%E5%8F%A3\&#34;&gt;4-2 &lt;code&gt;pojo&lt;/code&gt;需要实现序列化 接口&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4-3-mapper%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98\&#34;&gt;4-3 mapper开启二级缓存&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2\&#34;&gt;分页查询&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B7%BB%E5%8A%A0%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6%E7%9A%84jar%E5%8C%85%E4%BE%9D%E8%B5%96\&#34;&gt;添加分页插件的jar包依赖&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%9C%A8%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE%E5%88%86%E9%A1%B5%E6%8B%A6%E6%88%AA%E5%99%A8\&#34;&gt;在核心配置文件中配置分页拦截器&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5%E6%93%8D%E4%BD%9C\&#34;&gt;实现分页操作&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;获取class对象的方式\&#34;&gt;获取Class对象的方式&lt;/h2&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Class.forName(&amp;quot;全类名&amp;quot;);//将字节码文件加载进内存，返回Class对象\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;多用于配置文件，将类名定义在配置文件中。读取文件，加载类&lt;br&gt;\n类名.class：通过类名的属性class获取&lt;br&gt;\n多用于参数的传递&lt;br&gt;\n对象.getClass()：getClass()方法在Object类中定义着。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;//多用于对象的获取字节码的方式\nClass clazz = News.class;\nObject obj = clazz.newInstance();           //实例化一个对象：等同于 new 一个对象\nSystem.out.println(clazz.getSimpleName());  //获取类名\nSystem.out.println(clazz.getName());        //获取完整的包名+类名\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;class对象功能\&#34;&gt;Class对象功能&lt;/h2&gt;\n&lt;h3 id=\&#34;获取成员变量\&#34;&gt;获取成员变量&lt;/h3&gt;\n&lt;p&gt;​        Field[] getFields() ：获取所有public修饰的成员变量&lt;/p&gt;\n&lt;p&gt;​\t\tField getField(String name)   获取指定名称的 public修饰的成员变量&lt;/p&gt;\n&lt;p&gt;​\t\tField[] getDeclaredFields();  //获取所有的成员变量，不考虑修饰符&lt;/p&gt;\n&lt;p&gt;​\t\tField getDeclaredField(String name); // 获取指定名称的成员变量，不考虑修饰符&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Class clazz = News.class;\nSystem.out.println(clazz.getSimpleName());//获取类名\nSystem.out.println(clazz.getName());//获取包名+类名\nObject obj = clazz.newInstance();//实例化News的这个对象\nTable table = obj.getClass().getAnnotation(Table.class);//获取obj对象的Table注解，没有返回null\nSystem.out.println(table.value());\nField[] fields = clazz.getDeclaredFields();\nfor (Field field : fields) {\n\tfield.setAccessible(true);//暴力反射,如果不写这个将会报错\n    //获取属性的注解\n    //Field field1 = obj.getClass().getDeclaredField(field.getName());//获取obj对象的指定属性\n    PK pk = field.getAnnotation(PK.class);//获取属性的注解\n\n\tif(pk!=null){\n    \tSystem.out.println(field.getName()+&amp;quot;&amp;gt;&amp;gt;&amp;gt;&amp;quot;+pk);//获取属性名称\n    }\n        field.set(obj,null);//给当前clazz对象的field属性赋值为i\n        System.out.println(field.get(obj));//输出clazz对象的field的属性值\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;获取构造方法\&#34;&gt;获取构造方法&lt;/h3&gt;\n&lt;p&gt;​\tConstructor&amp;lt;?&amp;gt;[] getConstructors()&lt;/p&gt;\n&lt;p&gt;​\tConstructor&lt;T&gt; getConstructor(类&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;\n&lt;p&gt;​\tConstructor&lt;T&gt; getDeclaredConstructor(类&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;\n&lt;p&gt;​\tConstructor&amp;lt;?&amp;gt;[] getDeclaredConstructors()&lt;/p&gt;\n&lt;h3 id=\&#34;获取成员方法\&#34;&gt;获取成员方法&lt;/h3&gt;\n&lt;p&gt;​\tMethod[] getMethods()&lt;/p&gt;\n&lt;p&gt;​\tMethod getMethod(String name, 类&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;\n&lt;p&gt;​\tMethod[] getDeclaredMethods()&lt;/p&gt;\n&lt;p&gt;​\tMethod getDeclaredMethod(String name, 类&amp;lt;?&amp;gt;... parameterTypes)&lt;/p&gt;\n&lt;h3 id=\&#34;field成员变量\&#34;&gt;Field：成员变量&lt;/h3&gt;\n&lt;p&gt;设置值&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;void set(Object obj, Object value)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;获取值，传的是对象&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;get(Object obj) \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;忽略访问权限修饰符的安全检查&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;setAccessible(true)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;constructor构造方法\&#34;&gt;Constructor:构造方法&lt;/h3&gt;\n&lt;p&gt;创建对象，如果使用空参数构造方法创建对象，操作可以简化：Class对象的newInstance方法&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;T newInstance(Object... initargs)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;method方法对象\&#34;&gt;Method：方法对象&lt;/h3&gt;\n&lt;p&gt;执行方法&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Object invoke(Object obj, Object... args)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;获取方法名称&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;String getName\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;反射获取注解\&#34;&gt;反射获取注解&lt;/h2&gt;\n&lt;p&gt;获取obj对象的Table注解，没有返回null，obj是要获取的对象&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Table table = obj.getClass().getAnnotation(Table.class);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;获取属性的注解，获取obj对象的field.getName()的属性注解&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;Field field1 = obj.getClass().getDeclaredField(field.getName());//获取obj对象的指定属性\nPK pk = field1.getAnnotation(PK.class);//获取属性的注解\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;获取当前调用的方法上的注解\&#34;&gt;获取当前调用的方法上的注解&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;StackTraceElement[] stack = new Throwable().getStackTrace();\nMethod method = this.getClass().getMethod(stack[1].getMethodName());//这里0是当前方法的注解，1是调用者方法的注解\nfor(Annotation an : method.getAnnotations()){\n    System.out.println(an);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;java-fan-she&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;Java反射&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;java&#34;,&#34;slug&#34;:&#34;CX9XCxDcJ&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/CX9XCxDcJ/&#34;}],&#34;date&#34;:&#34;2020-05-04 12:12:12&#34;,&#34;dateFormat&#34;:&#34;2020-05-04&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/java-fan-she/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;4 min read&#34;,&#34;time&#34;:182000,&#34;words&#34;:703,&#34;minutes&#34;:4},&#34;description&#34;:&#34;获取Class对象的方式\nClass.forName(&amp;quot;全类名&amp;quot;);//将字节码文件加载进内存，返回Class对象\n\n多用于配置文件，将类名定义在配置文件中。读取文件，加载类\n类名.class：通过类名的属性class获...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%8E%B7%E5%8F%96class%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E5%BC%8F\&#34;&gt;获取Class对象的方式&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#class%E5%AF%B9%E8%B1%A1%E5%8A%9F%E8%83%BD\&#34;&gt;Class对象功能&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%8E%B7%E5%8F%96%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F\&#34;&gt;获取成员变量&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%8E%B7%E5%8F%96%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95\&#34;&gt;获取构造方法&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%8E%B7%E5%8F%96%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95\&#34;&gt;获取成员方法&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#field%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F\&#34;&gt;Field：成员变量&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#constructor%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95\&#34;&gt;Constructor:构造方法&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#method%E6%96%B9%E6%B3%95%E5%AF%B9%E8%B1%A1\&#34;&gt;Method：方法对象&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E6%B3%A8%E8%A7%A3\&#34;&gt;反射获取注解&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E8%B0%83%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95%E4%B8%8A%E7%9A%84%E6%B3%A8%E8%A7%A3\&#34;&gt;获取当前调用的方法上的注解&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;0-准备安装包上传到usrlocal\&#34;&gt;0. 准备安装包上传到/usr/local/&lt;/h2&gt;\n&lt;p&gt;FastDFS_v5.05.tar.gz  （FastDFS安装包）&lt;/p&gt;\n&lt;p&gt;libfastcommonV1.0.7.tar.gz （FastDFS依赖程序）&lt;/p&gt;\n&lt;p&gt;nginx-1.8.0.tar.gz （nginx安装包，用于做文件请求http代理服务器）&lt;/p&gt;\n&lt;p&gt;fastdfs-nginx-module_v1.16.tar.gz （nginx和fastdfs的桥梁插件模块）&lt;/p&gt;\n&lt;h2 id=\&#34;1-安装cc编译环境\&#34;&gt;1. 安装c/c++编译环境&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;yum install gcc-c++\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;2-安装libevent\&#34;&gt;2. 安装libevent&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;yum -y install libevent\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;3-安装libfastcommon\&#34;&gt;3. 安装libfastcommon&lt;/h2&gt;\n&lt;p&gt;将&lt;code&gt;libfastcommonV1.0.7.tar.gz&lt;/code&gt;拷贝至&lt;code&gt;/usr/local/&lt;/code&gt;下&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;cd /usr/local\ntar -zxvf libfastcommonV1.0.7.tar.gz\ncd libfastcommon-1.0.7\n./make.sh\n./make.sh install\ncp /usr/lib64/libfastcommon.so /usr/lib\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;4创建数据存储目录\&#34;&gt;4.创建数据存储目录&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;mkdir -p /home/FastDFS/tracker /home/FastDFS/storage /home/FastDFS/client\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;5-tracker编译安装\&#34;&gt;5. tracker编译安装&lt;/h2&gt;\n&lt;p&gt;将FastDFS_v5.05.tar.gz拷贝至/usr/local/下&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;tar -zxvf FastDFS_v5.05.tar.gz\ncd FastDFS\n./make.sh\n./make.sh install\ncd conf\ncp * /etc/fdfs\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;6-编辑etcfdfstrackerconf\&#34;&gt;6. 编辑/etc/fdfs/tracker.conf&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;vi /etc/fdfs/tracker.conf\n\tbase_path=/home/FastDFS/tracker\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;7-启动tracker\&#34;&gt;7. 启动tracker&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;/usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf [restart](重启)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;8-配置storage节点\&#34;&gt;8. 配置storage节点&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;vi /etc/fdfs/storage.conf\n    base_path=/home/FastDFS/storage\n    store_path0=/home/FastDFS/storage\n    tracker_server = 192.168.100.151:22122\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;9-启动storage节点\&#34;&gt;9. 启动storage节点&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;/usr/bin/fdfs_storage{fdfs_storaged} /etc/fdfs/storage.conf\nfdfs_storage不存在就使用fdfs_storaged\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;10-安装nginx\&#34;&gt;10. 安装nginx&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;yum install -y gcc-c++   (已安装)\nyum install -y pcre pcre-devel\nyum install -y zlib zlib-devel\nyum install -y openssl openssl-devel\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;11解压fastdfs-nginx-module_v116targz\&#34;&gt;11.解压fastdfs-nginx-module_v1.16.tar.gz&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;cd /usr/local/\ntar -zxf fastdfs-nginx-module_v1.16.tar.gz\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;12修改fastdfs-nginx-modulesrcconfig配置文件\&#34;&gt;12.修改fastdfs-nginx-module/src/config配置文件&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;vi fastdfs-nginx-module/src/config\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;把CORE_INCS=&amp;quot;$CORE_INCS /usr/local/include/fastdfs /usr/include/fastcommon/&amp;quot;&lt;/p&gt;\n&lt;p&gt;修改为：CORE_INCS=&amp;quot;$CORE_INCS /usr/include/fastdfs /usr/include/fastcommon/&amp;quot;&lt;/p&gt;\n&lt;p&gt;把CORE_LIBS=&amp;quot;$CORE_LIBS -L/usr/local/lib -lfastcommon -lfdfsclient&amp;quot;&lt;/p&gt;\n&lt;p&gt;修改为：CORE_LIBS=&amp;quot;$CORE_LIBS -L/usr/lib -lfastcommon -lfdfsclient&amp;quot;&lt;/p&gt;\n&lt;p&gt;实际就是把路径中的local这一层删除掉&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;13复制fastdfs-nginx-modulesrcmod_fastdfsconf-到etcfdfs目录下并编辑\&#34;&gt;13.复制fastdfs-nginx-module/src/mod_fastdfs.conf 到/etc/fdfs目录下并编辑&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;cp fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/\n\tvi /etc/fdfs/mod_fastdfs.conf\n        tracker_server=192.168.100.151:22122\n        url_have_group_name = true\n        storage_server_port=23000\n        group_name=group1\n        store_path0=/home/FastDFS/storage\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;14安装nginx\&#34;&gt;14.安装nginx&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;cd /usr/local/\ntar -zxf  nginx-1.8.1.tar.gz\ncd nginx-1.8.1\n./configure --add-module=/usr/local/fastdfs-nginx-module/src/\nmake\nmake install\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;15-配置nginx\&#34;&gt;15. 配置nginx&lt;/h2&gt;\n&lt;pre&gt;&lt;code&gt;cd /usr/local/nginx/conf\nvi nginx.conf\n\t\n\tserver{\n        listen     80;\n        server_name     localhost;\n        location /group1/M00/{\n            ngx_fastdfs_module;\n        }\n    }\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;重启nginx&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;/usr/local/nginx/sbin/nginx\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;FastDFS&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;FastDFS搭建&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;FastDFS&#34;,&#34;slug&#34;:&#34;AowgROl25&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/AowgROl25/&#34;}],&#34;date&#34;:&#34;2020-05-04 12:09:39&#34;,&#34;dateFormat&#34;:&#34;2020-05-04&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/FastDFS/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;3 min read&#34;,&#34;time&#34;:163000,&#34;words&#34;:503,&#34;minutes&#34;:3},&#34;description&#34;:&#34;0. 准备安装包上传到/usr/local/\nFastDFS_v5.05.tar.gz  （FastDFS安装包）\nlibfastcommonV1.0.7.tar.gz （FastDFS依赖程序）\nnginx-1.8.0.tar.gz （n...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#0-%E5%87%86%E5%A4%87%E5%AE%89%E8%A3%85%E5%8C%85%E4%B8%8A%E4%BC%A0%E5%88%B0usrlocal\&#34;&gt;0. 准备安装包上传到/usr/local/&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-%E5%AE%89%E8%A3%85cc%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83\&#34;&gt;1. 安装c/c++编译环境&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2-%E5%AE%89%E8%A3%85libevent\&#34;&gt;2. 安装libevent&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3-%E5%AE%89%E8%A3%85libfastcommon\&#34;&gt;3. 安装libfastcommon&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%9B%AE%E5%BD%95\&#34;&gt;4.创建数据存储目录&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-tracker%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85\&#34;&gt;5. tracker编译安装&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-%E7%BC%96%E8%BE%91etcfdfstrackerconf\&#34;&gt;6. 编辑/etc/fdfs/tracker.conf&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-%E5%90%AF%E5%8A%A8tracker\&#34;&gt;7. 启动tracker&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#8-%E9%85%8D%E7%BD%AEstorage%E8%8A%82%E7%82%B9\&#34;&gt;8. 配置storage节点&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#9-%E5%90%AF%E5%8A%A8storage%E8%8A%82%E7%82%B9\&#34;&gt;9. 启动storage节点&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#10-%E5%AE%89%E8%A3%85nginx\&#34;&gt;10. 安装nginx&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#11%E8%A7%A3%E5%8E%8Bfastdfs-nginx-module_v116targz\&#34;&gt;11.解压fastdfs-nginx-module_v1.16.tar.gz&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#12%E4%BF%AE%E6%94%B9fastdfs-nginx-modulesrcconfig%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\&#34;&gt;12.修改fastdfs-nginx-module/src/config配置文件&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#13%E5%A4%8D%E5%88%B6fastdfs-nginx-modulesrcmod_fastdfsconf-%E5%88%B0etcfdfs%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%B9%B6%E7%BC%96%E8%BE%91\&#34;&gt;13.复制fastdfs-nginx-module/src/mod_fastdfs.conf 到/etc/fdfs目录下并编辑&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#14%E5%AE%89%E8%A3%85nginx\&#34;&gt;14.安装nginx&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#15-%E9%85%8D%E7%BD%AEnginx\&#34;&gt;15. 配置nginx&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;h2 id=\&#34;1-freemarker入门\&#34;&gt;1、freemarker入门&lt;/h2&gt;\n&lt;h3 id=\&#34;1依赖核心包\&#34;&gt;1.依赖核心包&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-xml\&#34;&gt;&amp;lt;!-- 依赖freemarker --&amp;gt;\n&amp;lt;dependency&amp;gt;\n\t&amp;lt;groupId&amp;gt;org.freemarker&amp;lt;/groupId&amp;gt;\n\t&amp;lt;artifactId&amp;gt;freemarker&amp;lt;/artifactId&amp;gt;\n\t&amp;lt;version&amp;gt;2.3.23&amp;lt;/version&amp;gt;\n&amp;lt;/dependency&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;2创建模板文件\&#34;&gt;2.创建模板文件&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;\n&amp;lt;html&amp;gt;\n&amp;lt;head&amp;gt;\n&amp;lt;meta charset=&amp;quot;UTF-8&amp;quot;&amp;gt;\n&amp;lt;title&amp;gt;这个是模板&amp;lt;/title&amp;gt;\n&amp;lt;/head&amp;gt;\n&amp;lt;body&amp;gt;\n\t&amp;lt;#--  这是我的注释，不会被输出 --&amp;gt;\n\thello ${name}\n&amp;lt;/body&amp;gt;\n&amp;lt;/html&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;3生成文件\&#34;&gt;3.生成文件&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;第一步：创建Configuration对象（直接new，在构造方法中添加&lt;code&gt;freemarker&lt;/code&gt;的版本号）&lt;br&gt;\n第二步：设置模板所在的路径&lt;/li&gt;\n&lt;li&gt;第三步：设置模板文件的编码字符集（一般使用&lt;code&gt;utf-8&lt;/code&gt;）&lt;/li&gt;\n&lt;li&gt;第四步：加载一个模板，创建一个模板对象&lt;/li&gt;\n&lt;li&gt;第五步：创建数据模型（使用的是Map&amp;lt;String,Object&amp;gt; 还可以使用自定义的&lt;code&gt;pojo&lt;/code&gt;实际开发中都用map）&lt;/li&gt;\n&lt;li&gt;第六步：创建writer对象，一般用&lt;code&gt;FileWriter&lt;/code&gt;对象进行实例化，执行生成的文件&lt;/li&gt;\n&lt;li&gt;第七步：调用模板对象的process方法输出文件&lt;/li&gt;\n&lt;li&gt;第八步：关闭流&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-java\&#34;&gt;public static void main(String[] args) throws Exception{\n    //1.创建配置类\n    Configuration configuration = new Configuration(Configuration.getVersion());\n    //2.设置模板所在目录\n    configuration.setDirectoryForTemplateLoading(new File(&amp;quot;F:\\\\workspace002\\\\freemarker-demo01\\\\src\\\\main\\\\resources&amp;quot;));\n    //3.设置编码集\n    configuration.setDefaultEncoding(&amp;quot;UTF-8&amp;quot;);\n    //4.加载模板\n    Template template = configuration.getTemplate(&amp;quot;hello.html&amp;quot;);\n    //5.创建数据模型\n    Map&amp;lt;String, Object&amp;gt; data = new HashMap&amp;lt;String, Object&amp;gt;();\n    data.put(&amp;quot;name&amp;quot;, &amp;quot;张三&amp;quot;);\n    //6.创建writer对象，准备用来输出文件\n    Writer out = new FileWriter(new File(&amp;quot;E:\\\\freemarker\\\\hello.html&amp;quot;));\n    //7,输出文件\n    template.process(data, out);\n    //8.关闭流\n    out.close();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2 id=\&#34;ftl指令\&#34;&gt;FTL指令&lt;/h2&gt;\n&lt;h3 id=\&#34;1assign\&#34;&gt;1.assign&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;作用：用于在页面上定义一个变量&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;\t&amp;lt;#-- assign：用来在页面上定义一个变量 --&amp;gt;\n\t&amp;lt;#assign name=&amp;quot;张三&amp;quot;&amp;gt;\n\t获取变量：${name}\n\t&amp;lt;hr/&amp;gt;\n\t&amp;lt;#-- assign:还可以用来定义一个对象 --&amp;gt;\n\t&amp;lt;#assign info={&amp;quot;name&amp;quot;:&amp;quot;李四&amp;quot;,&amp;quot;age&amp;quot;:18,&amp;quot;hobs&amp;quot;:&amp;quot;java&amp;quot;}&amp;gt;\n\t获取到对象的属性:姓名-${info.name},年龄-${info.age},爱好-${info.hobs}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;2include\&#34;&gt;2.include&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;作用：此指令用于模板文件之间的相互嵌套&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;#include &amp;quot;head.ftl&amp;quot;&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;3if\&#34;&gt;3.if&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;作用：用于条件判断&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;data.put(&amp;quot;success&amp;quot;, true);\n\n&amp;lt;#if success = true&amp;gt;\n\tsuccess的值是true\n&amp;lt;#else&amp;gt;\n\tsuccess的值是false\n&amp;lt;/#if&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;4list\&#34;&gt;4.list&lt;/h3&gt;\n&lt;blockquote&gt;\n&lt;p&gt;作用：在页面中遍历集合&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;ul&amp;gt;\n\t&amp;lt;#list mylist as user&amp;gt;\n\t\t&amp;lt;li&amp;gt;${user.name}&amp;lt;/li&amp;gt;\n\t&amp;lt;/#list&amp;gt;\n&amp;lt;/ul&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;5内建函数\&#34;&gt;5.内建函数&lt;/h3&gt;\n&lt;p&gt;&lt;code&gt;语法：变量 + ? + 函数名&lt;/code&gt;&lt;/p&gt;\n&lt;h4 id=\&#34;5-1-获取集合的大小size\&#34;&gt;5-1 获取集合的大小(size)&lt;/h4&gt;\n&lt;p&gt;&lt;code&gt;${mylist?size}&lt;/code&gt;&lt;/p&gt;\n&lt;h4 id=\&#34;5-2-转换json字符串为json对象\&#34;&gt;5-2 转换&lt;code&gt;json&lt;/code&gt;字符串为&lt;code&gt;json&lt;/code&gt;对象&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;#-- 定义一个json字符串  --&amp;gt;\n&amp;lt;#assign text=&amp;quot;{&#39;name&#39;:&#39;张三&#39;,&#39;sex&#39;:&#39;男&#39;}&amp;quot;&amp;gt;\n&amp;lt;#-- 将json字符串转换成json对象 --&amp;gt;\n&amp;lt;#assign person=text?eval&amp;gt;\n姓名：${person.name}，性别:${person.sex}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;5-3-日期\&#34;&gt;5-3 日期&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;年月日：${mydate?date}\n&amp;lt;br/&amp;gt;\n时分秒：${mydate?time}\n&amp;lt;br/&amp;gt;\n年月日时分秒：${mydate?datetime}\n&amp;lt;br/&amp;gt;\n自定义日期：${mydate?string(&#39;yyyy年MM月dd日  hh时mm分ss秒&#39;)}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;5-4-数字转换成字符串\&#34;&gt;5-4 数字转换成字符串&lt;/h4&gt;\n&lt;p&gt;&lt;code&gt;${mynum?c}&lt;/code&gt;&lt;/p&gt;\n&lt;h3 id=\&#34;6空值处理\&#34;&gt;6.空值处理&lt;/h3&gt;\n&lt;h4 id=\&#34;6-1-处理方案一缺值表达式\&#34;&gt;6-1 处理方案一(缺值表达式)&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;${mytest!&amp;quot;值为null&amp;quot;}\n&amp;lt;/br&amp;gt;\n${mytest!}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;6-2-处理方案二\&#34;&gt;6-2 处理方案二&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;#if mytest??&amp;gt;\n\tmytest值是存在的:${mytest}\n&amp;lt;#else&amp;gt;\n\tmytest的值为null\n&amp;lt;/#if&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;7运算符\&#34;&gt;7.运算符&lt;/h3&gt;\n&lt;h4 id=\&#34;7-1-算术运算符\&#34;&gt;7-1 算术运算符&lt;/h4&gt;\n&lt;p&gt;&lt;code&gt;+ - * / %&lt;/code&gt;&lt;/p&gt;\n&lt;h4 id=\&#34;7-2-逻辑运算符\&#34;&gt;7-2 逻辑运算符&lt;/h4&gt;\n&lt;p&gt;&lt;code&gt;&amp;amp;&amp;amp; 、 || 、 !&lt;/code&gt;&lt;/p&gt;\n&lt;h4 id=\&#34;7-3-比较运算符\&#34;&gt;7-3 比较运算符&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;= 或者 ==&lt;/li&gt;\n&lt;li&gt;!=&lt;/li&gt;\n&lt;li&gt;&amp;gt;  或者是 gt&lt;/li&gt;\n&lt;li&gt;&amp;lt; 或者是 lt&lt;/li&gt;\n&lt;li&gt;&amp;gt;= 或者是 gte&lt;/li&gt;\n&lt;li&gt;&amp;lt;= 或者是 lte&lt;/li&gt;\n&lt;/ul&gt;\n&#34;,&#34;fileName&#34;:&#34;freemarker&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;freemarker&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;freemarker&#34;,&#34;slug&#34;:&#34;pV4gj9NcU&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/pV4gj9NcU/&#34;}],&#34;date&#34;:&#34;2020-05-04 12:08:06&#34;,&#34;dateFormat&#34;:&#34;2020-05-04&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/freemarker/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;4 min read&#34;,&#34;time&#34;:236000,&#34;words&#34;:853,&#34;minutes&#34;:4},&#34;description&#34;:&#34;1、freemarker入门\n1.依赖核心包\n&amp;lt;!-- 依赖freemarker --&amp;gt;\n&amp;lt;dependency&amp;gt;\n\t&amp;lt;groupId&amp;gt;org.freemarker&amp;lt;/groupId&amp;gt;\n\t&amp;l...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1-freemarker%E5%85%A5%E9%97%A8\&#34;&gt;1、freemarker入门&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1%E4%BE%9D%E8%B5%96%E6%A0%B8%E5%BF%83%E5%8C%85\&#34;&gt;1.依赖核心包&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2%E5%88%9B%E5%BB%BA%E6%A8%A1%E6%9D%BF%E6%96%87%E4%BB%B6\&#34;&gt;2.创建模板文件&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6\&#34;&gt;3.生成文件&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#ftl%E6%8C%87%E4%BB%A4\&#34;&gt;FTL指令&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#1assign\&#34;&gt;1.assign&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2include\&#34;&gt;2.include&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#3if\&#34;&gt;3.if&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#4list\&#34;&gt;4.list&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0\&#34;&gt;5.内建函数&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-1-%E8%8E%B7%E5%8F%96%E9%9B%86%E5%90%88%E7%9A%84%E5%A4%A7%E5%B0%8Fsize\&#34;&gt;5-1 获取集合的大小(size)&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-2-%E8%BD%AC%E6%8D%A2json%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%BAjson%E5%AF%B9%E8%B1%A1\&#34;&gt;5-2 转换&lt;code&gt;json&lt;/code&gt;字符串为&lt;code&gt;json&lt;/code&gt;对象&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-3-%E6%97%A5%E6%9C%9F\&#34;&gt;5-3 日期&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#5-4-%E6%95%B0%E5%AD%97%E8%BD%AC%E6%8D%A2%E6%88%90%E5%AD%97%E7%AC%A6%E4%B8%B2\&#34;&gt;5-4 数字转换成字符串&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6%E7%A9%BA%E5%80%BC%E5%A4%84%E7%90%86\&#34;&gt;6.空值处理&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-1-%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88%E4%B8%80%E7%BC%BA%E5%80%BC%E8%A1%A8%E8%BE%BE%E5%BC%8F\&#34;&gt;6-1 处理方案一(缺值表达式)&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#6-2-%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88%E4%BA%8C\&#34;&gt;6-2 处理方案二&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7%E8%BF%90%E7%AE%97%E7%AC%A6\&#34;&gt;7.运算符&lt;/a&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-1-%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6\&#34;&gt;7-1 算术运算符&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-2-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6\&#34;&gt;7-2 逻辑运算符&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#7-3-%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6\&#34;&gt;7-3 比较运算符&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;blockquote&gt;\n&lt;p&gt;欢迎来到我的小站呀，很高兴遇见你！🤝&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;h2 id=\&#34;关于本站\&#34;&gt;🏠 关于本站&lt;/h2&gt;\n&lt;p&gt;磕磕碰碰的小破站,前不久域名的备案被注销...后换到Gridea,托管在GitHub&lt;/p&gt;\n&lt;h2 id=\&#34;博主是谁\&#34;&gt;👨‍💻 博主是谁&lt;/h2&gt;\n&lt;p&gt;一位正在努力成长的码农...&lt;/p&gt;\n&lt;h2 id=\&#34;兴趣爱好\&#34;&gt;⛹ 兴趣爱好&lt;/h2&gt;\n&lt;p&gt;吃,睡,coding&lt;/p&gt;\n&lt;h2 id=\&#34;联系我呀\&#34;&gt;📬 联系我呀&lt;/h2&gt;\n&lt;p&gt;QQ : 2369710264&lt;/p&gt;\n&#34;,&#34;fileName&#34;:&#34;about&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;关于&#34;,&#34;tags&#34;:[],&#34;date&#34;:&#34;2019-01-25 19:09:48&#34;,&#34;dateFormat&#34;:&#34;2019-01-25&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/about/&#34;,&#34;hideInList&#34;:true,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;1 min read&#34;,&#34;time&#34;:15000,&#34;words&#34;:74,&#34;minutes&#34;:1},&#34;description&#34;:&#34;\n欢迎来到我的小站呀，很高兴遇见你！🤝\n\n🏠 关于本站\n磕磕碰碰的小破站,前不久域名的备案被注销...后换到Gridea,托管在GitHub\n👨‍💻 博主是谁\n一位正在努力成长的码农...\n⛹ 兴趣爱好\n吃,睡,coding\n📬 ...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99\&#34;&gt;🏠 关于本站&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%8D%9A%E4%B8%BB%E6%98%AF%E8%B0%81\&#34;&gt;👨‍💻 博主是谁&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%85%B4%E8%B6%A3%E7%88%B1%E5%A5%BD\&#34;&gt;⛹ 兴趣爱好&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E8%81%94%E7%B3%BB%E6%88%91%E5%91%80\&#34;&gt;📬 联系我呀&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;p&gt;又是一个新的开始!!!&lt;br&gt;\n前不久备案莫名其妙被注销,很无奈把数据库备份了,停止了解析😭&lt;br&gt;\n但后来越过越觉得生活中少了些什么😅&lt;br&gt;\n后来就恢复了这个博客,这次基于Gridea + GitHub 搭建的静态博客&lt;br&gt;\n这下放个十年八年的也没什么关系了 ~~~😁&lt;br&gt;\n安装这个程序的时候,在官网的模板市场找了好久的模板,感觉好像没有我喜欢的......&lt;br&gt;\n看来得抽空设计个模板套上啦😐😐😐&lt;/p&gt;\n&lt;!-- more --&gt;\n&#34;,&#34;fileName&#34;:&#34;hello&#34;,&#34;abstract&#34;:&#34;&lt;p&gt;又是一个新的开始!!!&lt;br&gt;\n前不久备案莫名其妙被注销,很无奈把数据库备份了,停止了解析😭&lt;br&gt;\n但后来越过越觉得生活中少了些什么😅&lt;br&gt;\n后来就恢复了这个博客,这次基于Gridea + GitHub 搭建的静态博客&lt;br&gt;\n这下放个十年八年的也没什么关系了 ~~~😁&lt;br&gt;\n安装这个程序的时候,在官网的模板市场找了好久的模板,感觉好像没有我喜欢的......&lt;br&gt;\n看来得抽空设计个模板套上啦😐😐😐&lt;/p&gt;\n&#34;,&#34;title&#34;:&#34;Hello&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;Gridea&#34;,&#34;slug&#34;:&#34;xi3C-nNGB&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://haohanya.github.io/tag/xi3C-nNGB/&#34;}],&#34;date&#34;:&#34;2018-12-12 00:00:00&#34;,&#34;dateFormat&#34;:&#34;2018-12-12&#34;,&#34;feature&#34;:&#34;https://haohanya.github.io/post-images/hello.png&#34;,&#34;link&#34;:&#34;https://haohanya.github.io/post/hello/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:true,&#34;stats&#34;:{&#34;text&#34;:&#34;1 min read&#34;,&#34;time&#34;:27000,&#34;words&#34;:137,&#34;minutes&#34;:1},&#34;description&#34;:&#34;又是一个新的开始!!!\n前不久备案莫名其妙被注销,很无奈把数据库备份了,停止了解析😭\n但后来越过越觉得生活中少了些什么😅\n后来就恢复了这个博客,这次基于Gridea + GitHub 搭建的静态博客\n这下放个十年八年的也没什么关系了 ~...&#34;,&#34;toc&#34;:&#34;&#34;}]";
  // var json = escape.substr(1, escape.length - 2);
  // var datas = json.split(',');
  // for (let i=0; i < datas.length; i++) {
  //   let item = datas[i];
  //   let attrs = item.split('34;:&#34')
  //   debugger
  //   console.log(datas[i])
  // }
  let escapeMap = new Map();
  escapeMap.set('&#34;', '"');
  escapeMap.set('&gt;', '>');
  escapeMap.set('&#39;', "'");
  escapeMap.set('&lt;', '<');
  escapeMap.set('&quot;', '"');
  escapeMap.set('&amp;', '&');
</script> -->


<script src=" /media/js/cool.js"></script>


</html>